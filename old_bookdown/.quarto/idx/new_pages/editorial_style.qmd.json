{"title":"Editorial and technical notes","markdown":{"headingText":"Editorial and technical notes","headingAttr":{"id":"","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\nIn this page we describe the philosophical approach, style, and specific editorial decisions made during the creation of this handbook.  \n\n\n## Approach and style\n\nThe potential audience for this book is large. It will surely be used by people very new to R, and also by experienced R users looking for best practices and tips. So it must be both accessible and succinct. Therefore, our approach was to provide *just enough* text explanation that someone very new to R can apply the code and follow what the code is doing.  \n\nA few other points:  \n\n* This is a code reference book accompanied by relatively brief examples - *not* a thorough textbook on R or data science  \n* This is a *R handbook* for use within applied epidemiology - not a manual on the methods or science of applied epidemiology  \n* This is intended to be a living document - optimal R packages for a given task change often and we welcome discussion about which to emphasize in this handbook  \n\n\n\n\n### R packages {.unnumbered}\n\n**So many choices**  \n\nOne of the most challenging aspects of learning R is knowing which R package to use for a given task. It is a common occurrence to struggle through a task only later to realize - hey, there's an R package that does all that in one command line!  \n\nIn this handbook, we try to offer you at least two ways to complete each task: one tried-and-true method (probably in **base** R or **tidyverse**) and one special R package that is custom-built for that purpose. We want you to have a couple options in case you can't download a given package or it otherwise does not work for you.  \n\nIn choosing which packages to use, we prioritized R packages and approaches that have been tested and vetted by the community, minimize the number of packages used in a typical work session, that are stable (not changing very often), and that accomplish the task simply and cleanly  \n\nThis handbook generally prioritizes R packages and functions from the **tidyverse**. Tidyverse is a collection of R packages designed for data science that share underlying grammar and data structures. All tidyverse packages can be installed or loaded via the **tidyverse** package. Read more at the [tidyverse website](https://www.tidyverse.org/).  \n\nWhen applicable, we also offer code options using **base** R - the packages and functions that come with R at installation. This is because we recognize that some of this book's audience may not have reliable internet to download extra packages.  \n\n**Linking functions to packages explicitly**\n\nIt is often frustrating in R tutorials when a function is shown in code, but you don't know which package it is from! We try to avoid this situation.  \n\nIn the narrative text, package names are written in bold (e.g. **dplyr**) and functions are written like this: `mutate()`. We strive to be explicit about which package a function comes from, either by referencing the package in nearby text or by specifying the package explicitly in the code like this: `dplyr::mutate()`. It may look redundant, but we are doing it on purpose.  \n\nSee the page on [R basics] to learn more about packages and functions.  \n\n\n### Code style {.unnumbered}\n\nIn the handbook, we frequently utilize \"new lines\", making our code appear \"long\". We do this for a few reasons:  \n\n* We can write explanatory comments with `#` that are adjacent to each little part of the code  \n* Generally, longer (vertical) code is easier to read  \n* It is easier to read on a narrow screen (no sideways scrolling needed)  \n* From the indentations, it can be easier to know which arguments belong to which function  \n\nAs a result, code that *could* be written like this:  \n\n```{r, eval=F}\nlinelist %>% \n  group_by(hospital) %>%  # group rows by hospital\n  slice_max(date, n = 1, with_ties = F) # if there's a tie (of date), take the first row\n```\n\n...is written like this:  \n\n```{r, eval=F}\nlinelist %>% \n  group_by(hospital) %>% # group rows by hospital\n  slice_max(\n    date,                # keep row per group with maximum date value \n    n = 1,               # keep only the single highest row \n    with_ties = F)       # if there's a tie (of date), take the first row\n```\n\nR code is generally not affected by new lines or indentations. When writing code, if you initiate a new line after a comma it will apply automatic indentation patterns. \n\nWe also use lots of spaces (e.g. `n = 1` instead of `n=1`) because it is easier to read. Be kind to the people reading your code!  \n\n\n\n### Nomenclature {.unnumbered}  \n\nIn this handbook, we generally reference \"columns\" and \"rows\" instead of \"variables\" and \"observations\". As explained in this primer on [\"tidy data\"](https://tidyr.tidyverse.org/articles/tidy-data.html), most epidemiological statistical datasets consist structurally of rows, columns, and values.  \n\n*Variables* contain the values that measure the same underlying attribute (like age group, outcome, or date of onset). *Observations* contain all values measured on the same unit (e.g. a person, site, or lab sample). So these aspects can be more difficult to tangibly define.  \n\nIn \"tidy\" datasets, each column is a variable, each row is an observation, and each cell is a single value. However some datasets you encounter will not fit this mold - a \"wide\" format dataset may have a variable split across several columns (see an example in the [Pivoting data] page). Likewise, observations could be split across several rows.  \n\nMost of this handbook is about managing and transforming data, so referring to the concrete data structures of rows and columns is more relevant than the more abstract observations and variables. Exceptions occur primarily in pages on data analysis, where you will see more references to variables and observations.  \n\n\n\n### Notes {.unnumbered} \n\nHere are the types of notes you may encounter in the handbook:  \n\n<span style=\"color: black;\">**_NOTE:_** This is a note</span>  \n<span style=\"color: darkgreen;\">**_TIP:_** This is a tip.</span>  \n<span style=\"color: orange;\">**_CAUTION:_** This is a cautionary note.</span>  \n<span style=\"color: red;\">**_DANGER:_** This is a warning.</span>  \n\n\n\n## Editorial decisions  \n\nBelow, we track significant editorial decisions around package and function choice. If you disagree or want to offer a new tool for consideration, please join/start a conversation on our [Github page](https://github.com/appliedepi/epirhandbook_eng).    \n\n\n**Table of package, function, and other editorial decisions**  \n\n\nSubject           |     Considered      |   Outcome              |    Brief rationale   \n----------------- | --------------------|------------------------|-----------------------------------------------\nGeneral coding approach|**tidyverse**, **data.table**, **base**|**tidyverse**, with a page on **data.table**, and mentions of **base** alternatives for readers with no internet|**tidyverse** readability, universality, most-taught  \nPackage loading|`library()`,`install.packages()`, `require()`, **pacman**|**pacman**|Shortens and simplifies code for most multi-package install/load use-cases\nImport and export|**rio**, many other packages|**rio**|Ease for many file types\nGrouping for summary statistics|**dplyr** `group_by()`, **stats** `aggregate()`|**dplyr** `group_by()`|Consistent with **tidyverse** emphasis\nPivoting|**tidyr** (pivot functions), **reshape2** (melt/cast), **tidyr** (spread/gather)|**tidyr** (pivot functions)|**reshape2** is retired, **tidyr** uses pivot functions as of v1.0.0\nClean column names|**linelist**, **janitor**|**janitor**|Consolidation of packages emphasized\nEpiweeks |**lubridate**, **aweek**, **tsibble**, **zoo**|**lubridate** generally, the others for specific cases| **lubridate's** flexibility, consistency, package maintenance prospects  \nggplot labels |`labs()`, `ggtitle()`/`ylab()`/`xlab()` |`labs()` |all labels in one place, simplicity  \nConvert to factor |`factor()`, **forcats**|**forcats**|its various functions also convert to factor in same command\nEpidemic curves|**incidence**, **ggplot2**, **EpiCurve**|**incidence2** as quick, **ggplot2** as detailed|dependability\nConcatenation|`paste()`, `paste0()`, `str_glue()`, `glue()`|`str_glue()`|More simple syntax than paste functions; within **stringr**\n\n\n## Major revisions  \n\n\nDate           |Major changes        \n---------------| ------------------------------------------    \n10 May 2021    |Release of version 1.0.0    \n20 Nov 2022    |Release of version 1.0.1\n\n**NEWS**\nWith version 1.0.1 the following changes have been implemented:  \n\n* Update to R version 4.2  \n* Data cleaning: switched {linelist} to {matchmaker}, removed unnecessary line from `case_when()` example  \n* Dates: switched {linelist} `guess_date()` to {parsedate} `parse_date()`\n* Pivoting: slight update to `pivot_wider()` `id_cols=`  \n* Survey analysis: switched `plot_age_pyramid()` to `age_pyramid()`, slight change to alluvial plot code  \n* Heat plots: added `ungroup()` to `agg_weeks` chunk  \n* Interactive plots: added `ungroup()` to chunk that makes `agg_weeks` so that `expand()` works as intended  \n* Time series: added `data.frame()` around objects within all `trending::fit()` and `predict()` commands  \n* Combinations analysis: Switch `case_when()` to `ifelse()` and added optional `across()` code for preparing the data  \n* Transmission chains: Update to more recent version of {epicontacts}\n\n\n\n## Session info (R, RStudio, packages)  \n\nBelow is the information on the versions of R, RStudio, and R packages used during this rendering of the Handbook.  \n\n\n```{r}\nsessioninfo::session_info()\n```\n\n\n\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"editorial_style.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.340","lightbox":true,"theme":{"light":"cosmo","dark":["cosmo","theme-dark.scss"]}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}