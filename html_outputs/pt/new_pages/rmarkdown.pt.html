<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Manual de R para Epidemiologistas - 40&nbsp; Relatórios com R Markdown</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/reportfactory.pt.html" rel="next">
<link href="../new_pages/interactive_plots.pt.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QXDW878QLX');
</script> -->

</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">
  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"
    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"
    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"
    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"
    class="alert-link">R Help Desk service</a>. -->
</div>

<script>

  // Function to extract the last two characters from the URL path to determine the language, adjusting for .html extension
  function getLanguageFromURL() {
    let path = window.location.pathname;
    
    // Check if the URL ends with .html and remove it
    if (path.endsWith('.html')) {
      path = path.substring(0, path.length - 5);
    }

    // Extract the last two characters for the language code
    const lang = path.substr(-2);
    return lang;
  }

  const language = getLanguageFromURL();
  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru'];
  const defaultLanguage = 'en';
  const isSupportedLanguage = supportedLanguages.includes(language);

  // Translations for the content
  const translations = {
    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',
    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',
    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',
    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',
    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',
    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',
    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',
    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'
  };

  // Default to English if the detected language is not supported
  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];


  // Select the element where the content should be displayed
  const alertElement = document.querySelector('.alert');
  if (alertElement) {
    alertElement.innerHTML = contentToDisplay;
    alertElement.style.display = 'block'; // Make sure to display the element
  }

</script>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.pt.html">Relatórios e dashboards</a></li><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.pt.html"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Relatórios com R Markdown</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Manual de R para Epidemiologistas</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_quarto" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo escuro"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bem-vindo</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Sobre este livro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Notas editoriais e técnicas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Baixe o livro e os dados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Básico</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transição para o R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Pacotes sugeridos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importar e exportar</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Gerenciamento de Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Limpeza de dados e principais funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trabalhando com datas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Caracteres e strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fatores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Pivoteando dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Agrupando dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Juntando dados (Joins)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Eliminação de duplicidades</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Iterações, loops e listas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Análise dos Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Tabelas descritivas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Testes estatísticos simples</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Regressão simples e múltipla</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Campos em branco/faltantes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Normalização de taxas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Médias móveis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Séries temporais e detecção de surtos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Modelagem de epidemias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Rastreamento de contatos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Analises de pesquisa de questionários (<em>survey</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Análise de sobrevivência</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Introdução ao GIS</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Visualização de Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Tabelas para apresentação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">O básico do ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Dicas do ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Curvas epidêmicas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Pirâmides demográficas e escalas Likert</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Gráficos de calor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Diagramas e gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Análise de Combinações</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Cadeias de Transmissão</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Árvores filogenéticas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Gráficos interativos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Relatórios e dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.pt.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Relatórios com R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organização de relatórios de rotina</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Painéis (Dashboards) com R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Painéis com Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Miscelânea</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Escrevendo funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Interações de diretório</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Controle de versão e colaboração com Git e Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Erros comuns</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Conseguindo ajuda</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R em drives (pastas) na rede</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Data Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#preparação" id="toc-preparação" class="nav-link active" data-scroll-target="#preparação"><span class="header-section-number">40.1</span> Preparação</a></li>
  <li><a href="#começando" id="toc-começando" class="nav-link" data-scroll-target="#começando"><span class="header-section-number">40.2</span> Começando</a>
  <ul class="collapse">
  <li><a href="#instalação-do-pacote-rmarkdown-para-r" id="toc-instalação-do-pacote-rmarkdown-para-r" class="nav-link" data-scroll-target="#instalação-do-pacote-rmarkdown-para-r">Instalação do pacote rmarkdown para R</a></li>
  <li><a href="#começando-um-novo-arquivo-rmd" id="toc-começando-um-novo-arquivo-rmd" class="nav-link" data-scroll-target="#começando-um-novo-arquivo-rmd">Começando um novo arquivo Rmd</a></li>
  <li><a href="#importante-saber" id="toc-importante-saber" class="nav-link" data-scroll-target="#importante-saber">Importante saber</a></li>
  </ul></li>
  <li><a href="#componentes-do-r-markdown" id="toc-componentes-do-r-markdown" class="nav-link" data-scroll-target="#componentes-do-r-markdown"><span class="header-section-number">40.3</span> Componentes do R Markdown</a>
  <ul class="collapse">
  <li><a href="#metadados-yaml" id="toc-metadados-yaml" class="nav-link" data-scroll-target="#metadados-yaml">Metadados YAML</a></li>
  <li><a href="#texto" id="toc-texto" class="nav-link" data-scroll-target="#texto"><span class="header-section-number">40.3.1</span> Texto</a></li>
  <li><a href="#blocos-de-código" id="toc-blocos-de-código" class="nav-link" data-scroll-target="#blocos-de-código">Blocos de código</a></li>
  <li><a href="#imagens" id="toc-imagens" class="nav-link" data-scroll-target="#imagens"><span class="header-section-number">40.3.2</span> Imagens</a></li>
  <li><a href="#tabelas" id="toc-tabelas" class="nav-link" data-scroll-target="#tabelas"><span class="header-section-number">40.3.3</span> Tabelas</a></li>
  <li><a href="#seções-com-guias" id="toc-seções-com-guias" class="nav-link" data-scroll-target="#seções-com-guias"><span class="header-section-number">40.3.4</span> Seções com guias</a></li>
  </ul></li>
  <li><a href="#estrutura-do-arquivo" id="toc-estrutura-do-arquivo" class="nav-link" data-scroll-target="#estrutura-do-arquivo"><span class="header-section-number">40.4</span> Estrutura do arquivo</a>
  <ul class="collapse">
  <li><a href="#rmd-independente-.não-numerado" id="toc-rmd-independente-.não-numerado" class="nav-link" data-scroll-target="#rmd-independente-.não-numerado"><span class="header-section-number">40.4.1</span> Rmd independente {.não numerado}</a></li>
  <li><a href="#runfile" id="toc-runfile" class="nav-link" data-scroll-target="#runfile">Runfile</a></li>
  <li><a href="#estrutura-da-pasta" id="toc-estrutura-da-pasta" class="nav-link" data-scroll-target="#estrutura-da-pasta"><span class="header-section-number">40.4.2</span> Estrutura da pasta</a></li>
  </ul></li>
  <li><a href="#produzindo-o-documento" id="toc-produzindo-o-documento" class="nav-link" data-scroll-target="#produzindo-o-documento"><span class="header-section-number">40.5</span> Produzindo o documento</a>
  <ul class="collapse">
  <li><a href="#opção-1-botão-knit" id="toc-opção-1-botão-knit" class="nav-link" data-scroll-target="#opção-1-botão-knit"><span class="header-section-number">40.5.1</span> Opção 1: Botão “Knit”</a></li>
  <li><a href="#opção-2-comando-render" id="toc-opção-2-comando-render" class="nav-link" data-scroll-target="#opção-2-comando-render">Opção 2: comando <code>render()</code></a></li>
  <li><a href="#opções-3-pacote-reportfactory" id="toc-opções-3-pacote-reportfactory" class="nav-link" data-scroll-target="#opções-3-pacote-reportfactory">Opções 3: pacote <strong>reportfactory</strong></a></li>
  </ul></li>
  <li><a href="#relatórios-parametrizados" id="toc-relatórios-parametrizados" class="nav-link" data-scroll-target="#relatórios-parametrizados"><span class="header-section-number">40.6</span> Relatórios parametrizados</a>
  <ul class="collapse">
  <li><a href="#configurando-parâmetros" id="toc-configurando-parâmetros" class="nav-link" data-scroll-target="#configurando-parâmetros">Configurando parâmetros</a></li>
  <li><a href="#exemplo-parametrizado" id="toc-exemplo-parametrizado" class="nav-link" data-scroll-target="#exemplo-parametrizado">Exemplo parametrizado</a></li>
  <li><a href="#parametrização-sem-params" id="toc-parametrização-sem-params" class="nav-link" data-scroll-target="#parametrização-sem-params">Parametrização sem <code>params</code></a></li>
  </ul></li>
  <li><a href="#reiterando-relatórios" id="toc-reiterando-relatórios" class="nav-link" data-scroll-target="#reiterando-relatórios"><span class="header-section-number">40.7</span> Reiterando relatórios</a></li>
  <li><a href="#modelos" id="toc-modelos" class="nav-link" data-scroll-target="#modelos"><span class="header-section-number">40.8</span> Modelos</a>
  <ul class="collapse">
  <li><a href="#documentos-do-word" id="toc-documentos-do-word" class="nav-link" data-scroll-target="#documentos-do-word"><span class="header-section-number">40.8.1</span> Documentos do Word</a></li>
  <li><a href="#documentos-do-powerpoint" id="toc-documentos-do-powerpoint" class="nav-link" data-scroll-target="#documentos-do-powerpoint"><span class="header-section-number">40.8.2</span> Documentos do PowerPoint</a></li>
  <li><a href="#integração-de-modelos-no-yaml" id="toc-integração-de-modelos-no-yaml" class="nav-link" data-scroll-target="#integração-de-modelos-no-yaml">Integração de modelos no YAML</a></li>
  <li><a href="#formatando-arquivos-html" id="toc-formatando-arquivos-html" class="nav-link" data-scroll-target="#formatando-arquivos-html">Formatando arquivos HTML</a></li>
  </ul></li>
  <li><a href="#conteúdo-dinâmico" id="toc-conteúdo-dinâmico" class="nav-link" data-scroll-target="#conteúdo-dinâmico"><span class="header-section-number">40.9</span> Conteúdo dinâmico</a>
  <ul class="collapse">
  <li><a href="#tabelas-1" id="toc-tabelas-1" class="nav-link" data-scroll-target="#tabelas-1"><span class="header-section-number">40.9.1</span> Tabelas</a></li>
  <li><a href="#widgets-html" id="toc-widgets-html" class="nav-link" data-scroll-target="#widgets-html">Widgets HTML</a></li>
  </ul></li>
  <li><a href="#recursos" id="toc-recursos" class="nav-link" data-scroll-target="#recursos"><span class="header-section-number">40.10</span> Recursos</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.pt.html">Relatórios e dashboards</a></li><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.pt.html"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Relatórios com R Markdown</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="rmarkdown" class="quarto-section-identifier"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Relatórios com R Markdown</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/rmarkdown_overview.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/markdown/rmarkdown_overview.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>R Markdown é uma ferramenta amplamente usada para criar produtos automatizados, reproduzíveis e compartilháveis, como relatórios. É possível criar produtos estáticos ou interativos, em MS Word, pdf, html, powerpoint, entre outros formatos.</p>
<p>Um script de R Markdown intercala código em R e texto de modo que o script <em>se torna o seu output final</em>. é possível criar um documento completamente formatado, incluindo o texto (que pode ser dinâmico para mudar de acordo com os seus dados), tabelas, figuras, itens enumerados ou não, bibliografia, etc.</p>
<p>Esses documentos podem ser produzidos para serem atualizados com base em uma rotina (por exemplo, relatórios diários de vigilância) ou rodarem com subconjuntos dos seus dados, como relatórios para cada jurisdição de uma agência.</p>
<p>Outras páginas nesse livro expandem esse assunto:</p>
<ul>
<li>A página <a href="reportfactory.pt.html">Organização de relatórios de rotina</a> demonstra como aplicar uma rotina à produção de relatórios com pastas geradas automaticamente com seus metadados de tempo (<strong>timestamps</strong>).</li>
<li>A página <a href="flexdashboard.pt.html">Dashboards with R Markdown</a> explica como formatar um relatório R Markdown como um painel (<strong>dashboard</strong>).</li>
</ul>
<p>Em outra nota, o projeto <a href="https://r4epis.netlify.app/">R4Epis</a> tem desenvolvido templates de scripts R Markdown para surtos comuns e cenários de pesquisa encontrados em locais do projeto MSF (Médicos Sem Fronteiras).</p>
<!-- ======================================================= -->
<section id="preparação" class="level2" data-number="40.1">
<h2 data-number="40.1" class="anchored" data-anchor-id="preparação"><span class="header-section-number">40.1</span> Preparação</h2>
<p><strong>Ideias preliminares ao R Markdown</strong></p>
<p>Para explicar alguns dos conceitos e pacotes envolvidos:</p>
<ul>
<li><strong>Markdown</strong> é uma “linguagem” que permite escrever um documento usando texto comum, que pode ser convertido para html e outros formatos. Não é específico de R e arquivos escritos nessa “linguagem” tem extensão ‘.md’.</li>
<li><strong>R Markdown</strong>: é uma variação de markdown que <em>é específica de R</em> - permite escrever um documento usando markdown para produzir código, <em>mas também incluir código em R e expor seus resultados</em>.<br>
</li>
<li><strong>rmarkdown - o pacote</strong>: é usado pelo R para renderizar o arquivo .Rmd para a exportação desejada. Seu foco é converter a sintaxe markdown (texto), então também precisamos de…</li>
<li><strong>knitr</strong>: Esse pacote do R lerá os blocos de código, executá-los e costurá-los (do inglês <em>knit</em>, tricotar) de volta ao documento.</li>
<li><strong>Pandoc</strong>: Finalmente, pandoc converte o objeto final em um documento word/pdf/powerpoint, etc. É um software separado do R, mas é instalado automaticamente com o RStudio.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/0_rmd.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../images/markdown/0_rmd.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>(Fonte: <a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html" class="uri">https://rmarkdown.rstudio.com/authoring_quick_tour.html</a>):</p>
<p><strong>Instalação</strong></p>
<p>Para criar um produto R Markdown, é necessário ter os seguintes instalados:</p>
<ul>
<li>O pacote <strong>rmarkdown</strong> (<strong>knitr</strong> será automaticamente instalado também)<br>
</li>
<li>Pandoc, que deve ter vindo instalado com RStudio. Se você não está usando RStudio, é possível baixar o Pandoc aqui: <a href="http://pandoc.org" class="uri">http://pandoc.org</a>.</li>
<li>Se quiser gerar um arquivo PDF (um pouquinho mais complicado), será necessário instalar o LaTeX. Para usuários de R Markdown que nunca instalaram o LaTeX antes, recomendamos que instale o TinyTeX (<a href="https://yihui.name/tinytex/" class="uri">https://yihui.name/tinytex/</a>). Para isso, use os seguintes comandos:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tinytex)     <span class="co"># instala o pacote tinytex</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()  <span class="co"># Comando de R para instalar o software TinyTeX</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="começando" class="level2" data-number="40.2">
<h2 data-number="40.2" class="anchored" data-anchor-id="começando"><span class="header-section-number">40.2</span> Começando</h2>
<section id="instalação-do-pacote-rmarkdown-para-r" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instalação-do-pacote-rmarkdown-para-r">Instalação do pacote rmarkdown para R</h3>
<p>Instale o pacote <strong>rmarkdown</strong>. Neste livro enfatizamos <code>p_load()</code> de <strong>pacman</strong>, que instala o pacote se necessário <em>e</em> o carrega para ser usado. É possível também carregar pacotes instalados com <code>library()</code> do R <strong>base</strong>. Vera a pagina em <a href="basics.pt.html">Introdução ao R</a> para mais informação sobre os pacotes de R.</p>
<!-- revisar [R basics] -->
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rmarkdown)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="começando-um-novo-arquivo-rmd" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="começando-um-novo-arquivo-rmd">Começando um novo arquivo Rmd</h3>
<p>No Rstudio, abra um novo arquivo R markdown, começando em ‘Arquivo’, depois ‘Novo arquivo’, depois em ‘R markdown…’.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/1_gettingstarted.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/markdown/1_gettingstarted.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Rstudio lhe dará opções de output para selecionar. No exemplo abaixo, escolhemos “HTML” porque queremos criar um documento html. O título e o nome do autor não são importantes. Se o tipo do documento de saída desejado não é nenhum desses, não se preocupe - é possível escolher qualquer um e alterar posteriormente.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/1_gettingstartedB.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/markdown/1_gettingstartedB.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Isso abrirá um novo script .Rmd.</p>
</section>
<section id="importante-saber" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="importante-saber">Importante saber</h3>
<p><strong>O diretório de trabalho</strong></p>
<p>O diretório de trabalho de um arquivo markdown é o local onde o próprio arquivo Rmd é salvo. Por exemplo, se o projeto R estiver dentro de <code>~/Documents/projectX</code> e o próprio arquivo Rmd estiver em uma subpasta<code>~/Documents/projectX/markdownfiles/markdown.Rmd</code>, o código <code>read.csv("data.csv")</code> Dentro do markdown irá procurar por um arquivo csv na pasta <code>markdownfiles</code>, e não na pasta raiz do projeto onde os scripts dentro dos projetos normalmente procurariam automaticamente.</p>
<p>Para se referir a arquivos em outro lugar, você precisará usar o caminho completo do arquivo ou usar o pacote <strong>here</strong>. O pacote <strong>here</strong> define o diretório de trabalho para a pasta raiz do projeto R e é explicado em detalhes nas páginas <a href="r_projects.pt.html">Projetos R</a> e [Importar e exportar])(#importing) deste manual. Por exemplo, para importar um arquivo chamado “data.csv” de dentro da pasta <code>projectX</code>, o código seria <code>import(here(“data.csv”))</code>.</p>
<p>Observe que o uso de <code>setwd()</code> em scripts R Markdown não é recomendado - ele se aplica apenas ao trecho de código em que está escrito.</p>
<p><strong>Trabalhando em uma unidade vs no seu computador</strong></p>
<p>Como o R Markdown pode ter problemas de pandoc ao ser executado em uma unidade de rede compartilhada, é recomendado que sua pasta esteja em sua máquina local, por exemplo, em um projeto em ‘Meus Documentos’. Se você usa Git (muito recomendado!), Isso será familiar. Para obter mais detalhes, consulte as páginas do manual em <a href="network_drives.pt.html">R em unidades de rede</a> e <a href="errors.pt.html">Erros</a> e <a href="help.pt.html">ajuda</a>.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="componentes-do-r-markdown" class="level2" data-number="40.3">
<h2 data-number="40.3" class="anchored" data-anchor-id="componentes-do-r-markdown"><span class="header-section-number">40.3</span> Componentes do R Markdown</h2>
<p>Um documento R Markdown pode ser editado no RStudio da mesma forma que um script R padrão. Quando você inicia um novo script R Markdown, o RStudio tenta ser útil mostrando um modelo que explica as diferentes seções de um script R Markdown.</p>
<p>A seguir está o que aparece ao iniciar um novo script Rmd destinado a produzir uma saída html (conforme a seção anterior).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/2_defaultRMD.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/markdown/2_defaultRMD.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Como você pode ver, existem três componentes básicos em um arquivo Rmd: YAML, texto Markdown e blocos de código R.</p>
<p>Eles irão <em>criar e se tornar a saída do seu documento</em>. Veja o diagrama abaixo:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/rmarkdown_translation.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="../images/markdown/rmarkdown_translation.png" class="quarto-figure quarto-figure-center figure-img" style="width:100.0%;height:150.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="metadados-yaml" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="metadados-yaml">Metadados YAML</h3>
<p>Referido como ‘metadados YAML’ ou apenas ‘YAML’, isso está no topo do documento R Markdown. Esta seção do script dirá ao seu arquivo Rmd que tipo de saída produzir, preferências de formatação e outros metadados, como título do documento, autor e data. Existem outros usos não mencionados aqui (mas mencionados em ‘Produção de uma saída’). Observe que o recuo é importante; tabulações não são aceitas, mas espaços, sim.</p>
<p>Esta seção deve começar com uma linha contendo apenas três traços <code>---</code> e deve fechar com uma linha contendo apenas três traços <code>---</code>. Os parâmetros YAML vêm em pares <code>chave: valor</code>. A colocação dos dois pontos em YAML é importante - os pares <code>chave: valor</code> são separados por dois pontos (e não sinais de igual!).</p>
<p>O YAML deve começar com metadados para o documento. A ordem desses parâmetros YAML primários (não recuados) não importa. Por exemplo:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My document"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Me"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"2024-05-08"</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can use R code in YAML values by writing it as in-line code (preceded by <code>r</code> within back-ticks) but also within quotes (see above example for <code>date:</code>).</p>
<p>In the image above, because we clicked that our default output would be an html file, we can see that the YAML says <code>output: html_document</code>. However we can also change this to say <code>powerpoint_presentation</code> or <code>word_document</code> or even <code>pdf_document</code>.</p>
<p>Você pode usar o código R em valores YAML escrevendo-o como código in-line (precedido por <code>r</code> dentro de crases), mas também entre aspas (veja o exemplo acima para <code>date:</code>).</p>
<p>Na imagem acima, como clicamos que nossa saída padrão seria um arquivo html, podemos ver que o YAML diz <code>output: html_document</code>. No entanto, também podemos alterar isso para dizer <code>powerpoint_presentation</code>ou<code>word_document</code> ou mesmo <code>pdf_document</code>.</p>
</section>
<section id="texto" class="level3 numerado" data-number="40.3.1">
<h3 class="numerado anchored" data-number="40.3.1" data-anchor-id="texto"><span class="header-section-number">40.3.1</span> Texto</h3>
<p>Esta é a narrativa do seu documento, incluindo os títulos e cabeçalhos. Ele é escrito na linguagem “markdown”, que é usada em muitos softwares diferentes.</p>
<p>Abaixo estão as principais maneiras de escrever este texto. Consulte a documentação mais extensa disponível na “cheatsheet” do R Markdown no <a href="https://rstudio.com/resources/cheatsheets/">site do RStudio</a>.</p>
<section id="novas-linhas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="novas-linhas">Novas linhas</h4>
<p>Exclusivamente no R Markdown, para iniciar uma nova linha, insira <strong>dois espaços</strong> no final da linha anterior e pressione Enter / Return.</p>
</section>
<section id="case" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="case">Case</h4>
<p>Cerque seu texto normal com esses caracteres para alterar como ele aparece na saída.</p>
<ul>
<li>Sublinhados (<code>_text_</code>) ou asterisco único (<code>*texto*</code>) para <em>itálico</em></li>
<li>Asteriscos duplos (<code>**texto**</code>) para <strong>texto em negrito</strong></li>
<li>Crases (<code>text</code>) para exibir o texto como código</li>
</ul>
<p>A aparência real da fonte pode ser definida usando modelos específicos (especificados nos metadados YAML; consulte as guias de exemplo).</p>
</section>
<section id="cor" class="level4 numerada" data-number="40.3.1.1">
<h4 class="numerada anchored" data-number="40.3.1.1" data-anchor-id="cor"><span class="header-section-number">40.3.1.1</span> Cor</h4>
<p>Não existe um mecanismo simples para alterar a cor do texto no R Markdown. Uma solução alternativa, <em>SE sua saída for um arquivo HTML</em>, é adicionar uma linha HTML ao texto markdown. O código HTML abaixo imprimirá uma linha de texto em vermelho negrito.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>&lt;span style="color: red;"&gt;**_DANGER:_** This is a warning.&lt;/span&gt;  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>[<strong><em>PERIGO:</em></strong> Este é um aviso.] {style = “color: red;”}</p>
</section>
<section id="títulos-e-cabeçalhos" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="títulos-e-cabeçalhos">Títulos e cabeçalhos</h4>
<p>Um símbolo hash (#) em uma parte do texto de um script R Markdown cria um título. Isso é diferente de um pedaço de código R no script, no qual um símbolo hash é um mecanismo para comentar / anotar / desativar, como em um script R normal.</p>
<p>Diferentes níveis de título são estabelecidos com diferentes números de símbolos hash no início de uma nova linha. Um símbolo de hash é um título ou cabeçalho principal. Dois símbolos hash são um título de segundo nível. Os cabeçalhos de terceiro e quarto níveis podem ser feitos com mais símbolos hash sucessivamente.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># First-level heading / title</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Second level heading  </span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">### Third-level heading</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="marcadores-e-numeração" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="marcadores-e-numeração">Marcadores e numeração</h4>
<p>Use asteriscos (<code>*</code>) para criar uma lista de marcadores. Conclua a frase anterior, insira dois espaços, Enter/Return <em>duas vezes</em> e, em seguida, inicie seus marcadores. Inclua um espaço entre o asterisco e o texto do marcador. Após cada marcador, insira dois espaços e pressione Enter/Return. Os submarcadores funcionam da mesma maneira, mas são recuados. Os números funcionam da mesma maneira, mas em vez de um asterisco, escreva 1), 2), etc. Abaixo está a aparência do texto do script R Markdown.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Here are my bullets (there are two spaces after this colon):  </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Bullet 1 (followed by two spaces and Enter/Return)  </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Bullet 2 (followed by two spaces and Enter/Return)  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>Sub-bullet 1 (followed by two spaces and Enter/Return)  </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>Sub-bullet 2 (followed by two spaces and Enter/Return)  </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="comente-o-texto" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="comente-o-texto">Comente o texto</h4>
<p>Você pode “comentar” o texto do R Markdown da mesma forma que pode usar o “#” para comentar uma linha do código R em um bloco R. Basta destacar o texto e pressionar Ctrl+Shift+c (Cmd+Shift+c para Mac). O texto será circundado por setas e ficará verde. Ele não aparecerá na sua saída.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/rmarkdown_hide_text.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="../images/markdown/rmarkdown_hide_text.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="blocos-de-código" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="blocos-de-código">Blocos de código</h3>
<p>As seções do script que são dedicadas à execução do código R são chamadas de “blocos”. É aqui que você pode carregar pacotes, importar dados e realizar o gerenciamento e visualização de dados reais. Pode haver muitos blocos de código, então eles podem ajudá-lo a organizar seu código R em partes, talvez intercaladas com texto. Note: Esses ‘pedaços’ parecerão ter uma cor de fundo ligeiramente diferente da parte narrativa do documento.</p>
<p>Cada pedaço é aberto com uma linha que começa com três crases e chaves que contêm parâmetros para o pedaço (<code>{}</code>). O pedaço termina com mais três crases.</p>
<p>Você pode criar um novo bloco digitando-o você mesmo, usando o atalho de teclado “Ctrl+Alt+i” (ou Cmd+Shift+r no Mac) ou clicando no ícone verde ‘inserir um novo bloco de código’ no topo do seu editor de script.</p>
<p>Algumas notas sobre o conteúdo das chaves <code>{}</code>:</p>
<ul>
<li>Eles começam com ‘r’ para indicar que o nome do idioma dentro do bloco é R</li>
<li>Após o r, você pode opcionalmente escrever um “nome” de trecho – eles não são necessários, mas podem ajudá-lo a organizar seu trabalho. Observe que se você nomear seus blocos, você deve SEMPRE usar nomes exclusivos ou então R reclamará quando você tentar renderizar.<br>
</li>
<li>As chaves também podem incluir outras opções, escritas como <code>tag = value</code>, como:<br>
</li>
<li><code>eval = FALSE</code> para não executar o código R<br>
</li>
<li><code>echo = FALSE</code> para não imprimir o código-fonte R do trecho no documento de saída<br>
</li>
<li><code>aviso = FALSO</code> para não imprimir avisos produzidos pelo código R<br>
</li>
<li><code>mensagem = FALSO</code> para não imprimir nenhuma mensagem produzida pelo código R<br>
</li>
<li><code>incluir =</code> VERDADEIRO / FALSO se incluir saídas em partes (por exemplo, gráficos) no documento</li>
<li><code>out.width =</code> e <code>out.height =</code> - fornecer no estilo <code>out.width ="75%"</code><br>
</li>
<li><code>fig.align = "center"</code> ajustar como uma figura é alinhada na página<br>
</li>
<li><code>fig.show = 'hold'</code> se o seu pedaço imprimir várias figuras e você quiser que elas sejam impressas lado a lado (par com <code>out.width = c("33%", "67%")</code>. Também pode ser definido como <code>fig.show = 'asis'</code> para mostrá-los abaixo do código que os gera,<code>'hide'</code> para ocultar ou <code>'animate'</code> para concatenar múltiplos em uma animação.<br>
</li>
<li>Um cabeçalho de bloco deve ser escrito em <em>uma linha</em><br>
</li>
<li>Tente evitar pontos, sublinhados e espaços. Use hifens ( - ) se precisar de um separador.</li>
</ul>
<p>Leia mais extensivamente sobre as opções do <strong>knitr</strong> <a href="https://yihui.org/knitr/options/">aqui</a>.</p>
<p>Algumas das opções acima podem ser configuradas com apontar e clicar usando os botões de configuração no canto superior direito do bloco. Aqui, você pode especificar quais partes do pedaço você deseja que o documento renderizado inclua, a saber, o código, as saídas e os avisos. Isso sairá como preferências escritas dentro das chaves, por exemplo, <code>echo = FALSE</code> se você especificar que deseja ‘Mostrar apenas a saída’.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/3_chunk.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="../images/markdown/3_chunk.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Também há duas setas no canto superior direito de cada fragmento, que são úteis para executar o código dentro de um fragmento ou todo o código em blocos anteriores. Passe o mouse sobre eles para ver o que fazem.</p>
<p>Para que as opções globais sejam aplicadas a todos os fragmentos do script, você pode configurar isso em seu primeiro bloco de código R no script. Por exemplo, para que apenas as saídas sejam mostradas para cada bloco de código e não o código em si, você pode incluir este comando no fragmento de código R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">FALSE</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="código-r-no-texto" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="código-r-no-texto">Código R no texto</h4>
<p>Você também pode incluir código R mínimo dentro de crases. Dentro dos crases, comece o código com “r” e um espaço, para que o RStudio saiba avaliar o código como código R. Veja o exemplo abaixo.</p>
<p>O exemplo abaixo mostra vários níveis de título, marcadores e usa o código R para a data atual (<code>Sys.Date ()</code>) para avaliar em uma data impressa.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/2_text.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/markdown/2_text.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>O exemplo acima é simples (mostrando a data atual), mas usando a mesma sintaxe, você pode exibir valores produzidos por códigos R mais complexos (por exemplo, para calcular o mínimo, a mediana, o máximo de uma coluna). Você também pode integrar objetos R ou valores que foram criados em blocos de código R anteriormente no script.</p>
<p>Como exemplo, o script abaixo calcula a proporção de casos com menos de 18 anos, usando as funções <strong>tidyverse</strong>, e cria os objetos <code>less18</code>,<code>total</code> e <code>less18prop</code>. Este valor dinâmico é inserido no texto subsequente. Vemos como fica quando imprimimos um documento do Word.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/3_chunktext.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../images/markdown/3_chunktext.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="imagens" class="level3 numeradas" data-number="40.3.2">
<h3 class="numeradas anchored" data-number="40.3.2" data-anchor-id="imagens"><span class="header-section-number">40.3.2</span> Imagens</h3>
<p>Você pode incluir imagens em seu R Markdown de duas maneiras:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>[](<span class="st">"path/to/image.png"</span>)  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se o acima não funcionar, tente usar <code>knitr::include_graphics()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"path/to/image.png"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(lembre-se, o caminho do seu arquivo pode ser escrito usando o pacote <strong>here</strong>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"path"</span>, <span class="st">"to"</span>, <span class="st">"image.png"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tabelas" class="level3 numeradas" data-number="40.3.3">
<h3 class="numeradas anchored" data-number="40.3.3" data-anchor-id="tabelas"><span class="header-section-number">40.3.3</span> Tabelas</h3>
<p>Crie uma tabela usando hifens ( - ) e barras ( | ). O número de hifens antes/entre as barras permite o número de espaços na célula antes que o texto comece a quebrar.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Column 1 |Column  2 |Column 3</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>---------|----------|--------</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Cell A   |Cell B    |Cell C</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>Cell D   |Cell E    |Cell F</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>O código acima produz a tabela abaixo:</p>
<table class="table">
<thead>
<tr class="header">
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cell A</td>
<td>Cell B</td>
<td>Cell C</td>
</tr>
<tr class="even">
<td>Cell D</td>
<td>Cell E</td>
<td>Cell F</td>
</tr>
</tbody>
</table>
</section>
<section id="seções-com-guias" class="level3 numeradas" data-number="40.3.4">
<h3 class="numeradas anchored" data-number="40.3.4" data-anchor-id="seções-com-guias"><span class="header-section-number">40.3.4</span> Seções com guias</h3>
<p>Para saídas HTML, você pode organizar as seções em “guias”. Basta adicionar <code>.tabset</code> nas chaves <code>{}</code>que são colocadas * após um título *. Quaisquer subtítulos abaixo desse título (até outro título do mesmo nível) aparecerão como guias nas quais o usuário pode clicar. Leia mais <a href="https://bookdown.org/yihui/rmarkdown-cookbook/html-tabs.html">aqui</a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/tabbed_script.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../images/markdown/tabbed_script.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/tabbed_view.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="../images/markdown/tabbed_view.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Você pode adicionar uma opção adicional <code>.tabset-pills</code> após <code>.tabset</code> para dar às próprias guias uma aparência de pastilha. Esteja ciente de que, ao visualizar a saída HTML com guias, a funcionalidade de pesquisa Ctrl+f pesquisará apenas guias “ativas”, não guias ocultas.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="estrutura-do-arquivo" class="level2" data-number="40.4">
<h2 data-number="40.4" class="anchored" data-anchor-id="estrutura-do-arquivo"><span class="header-section-number">40.4</span> Estrutura do arquivo</h2>
<p>Existem várias maneiras de estruturar seu R Markdown e quaisquer scripts R associados. Cada um tem vantagens e desvantagens:</p>
<ul>
<li>R Markdown independente - tudo o que é necessário para o relatório é importado ou criado dentro do R Markdown</li>
<li>Fonte de outros arquivos - Você pode executar scripts R externos com o comando <code>source()</code> e usar suas saídas no Rmd</li>
<li>Scripts filhos - um mecanismo alternativo para <code>source()</code></li>
<li>Utilizar um “runfile” - Executar comandos em um script R <em>antes</em> de renderizar o R Markdown</li>
</ul>
<section id="rmd-independente-.não-numerado" class="level3" data-number="40.4.1">
<h3 data-number="40.4.1" class="anchored" data-anchor-id="rmd-independente-.não-numerado"><span class="header-section-number">40.4.1</span> Rmd independente {.não numerado}</h3>
<p>Para um relatório relativamente simples, você pode optar por organizar seu script R Markdown de forma que seja “independente” e não envolva nenhum script externo.</p>
<p>Tudo que você precisa para executar o markdown R é importado ou criado dentro do arquivo Rmd, incluindo todos os pedaços de código e carregamento de pacote. Esta abordagem “independente” é apropriada quando você não precisa fazer muito processamento de dados (por exemplo, traz um arquivo de dados limpo ou semilimpeza) e a renderização do R Markdown não demora muito.</p>
<p>Neste cenário, uma organização lógica do script R Markdown pode ser:</p>
<ol type="1">
<li>Defina as opções globais do <strong>knitr</strong></li>
<li>Carregar pacotes</li>
<li>Importar dados</li>
<li>Dados do processo</li>
<li>Produza resultados (tabelas, gráficos, etc.)</li>
<li>Salve as saídas, se aplicável (.csv, .png, etc.)</li>
</ol>
<section id="fonte-de-outros-arquivos" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="fonte-de-outros-arquivos">Fonte de outros arquivos</h4>
<p>Uma variação da abordagem “independente” é fazer com que os pedaços de código do R Markdown “originem” (executem) outros scripts R. Isso pode tornar seu script R Markdown menos confuso, mais simples e mais fácil de organizar. Também pode ajudar se você deseja exibir os valores finais no início do relatório. Nesta abordagem, o script final R Markdown simplesmente combina saídas pré-processadas em um documento.</p>
<p>Uma maneira de fazer isso é fornecendo os scripts R (caminho e nome do arquivo com extensão) para o comando R <strong>base</strong> <code>source()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"your-script.R"</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or sys.source("your-script.R", envir = knitr::knit_global())</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Observe que ao usar <code>source()</code> <em>dentro</em> do R Markdown, os arquivos externos ainda serão executados <em>durante o curso de renderização de seu arquivo Rmd</em>. Portanto, cada script é executado sempre que você renderiza o relatório. Portanto, ter esses comandos <code>source()</code> <em>dentro</em> do R Markdown não acelera seu tempo de execução, nem ajuda muito na eliminação de bugs, pois o erro produzido ainda será impresso ao produzir o R Markdown.</p>
<p>Uma alternativa é utilizar a opção <code>child =</code> <strong>knitr</strong>. EXPLIQUE MAIS A FAZER</p>
<p>Você deve estar ciente dos vários <em>ambientes</em> R. Os objetos criados dentro de um ambiente não estarão necessariamente disponíveis para o ambiente usado pelo R Markdown.</p>
</section>
</section>
<section id="runfile" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="runfile">Runfile</h3>
<p>Esta abordagem envolve a utilização do script R que contém o (s) comando (s) <code>render()</code> para pré-processar objetos que alimentam o markdown R.</p>
<p>Por exemplo, você pode carregar os pacotes, carregar e limpar os dados e até mesmo criar os gráficos de interesse antes de <code>render()</code>. Essas etapas podem ocorrer no script R ou em outros scripts originados via source. Contanto que esses comandos ocorram na mesma sessão RStudio e os objetos sejam salvos no ambiente, os objetos podem ser chamados dentro do conteúdo Rmd. Em seguida, o próprio markdown R será usado apenas para a etapa final - para produzir a saída com todos os objetos pré-processados. Isso é muito mais fácil de corrigir se algo der errado.</p>
<p>Essa abordagem é útil pelos seguintes motivos:</p>
<ul>
<li>Mensagens de erro mais informativas - essas mensagens serão geradas a partir do script R, não do R Markdown. R Erros de Markdown tendem a dizer qual pedaço teve um problema, mas não revelam qual linha.</li>
<li>Se aplicável, você pode executar longas etapas de processamento antes do comando <code>render()</code> - elas serão executadas apenas uma vez.</li>
</ul>
<p>No exemplo abaixo, temos um script R separado no qual pré-processamos um objeto <code>data</code> no ambiente R e então renderizamos o “create_output.Rmd” usando <code>render()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"datafile.csv"</span>) <span class="sc">%&gt;%</span>       <span class="co"># Load data and save to environment</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, hospital, weight)          <span class="co"># Select limited columns</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> <span class="st">"create_output.Rmd"</span>)   <span class="co"># Create Rmd file</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="estrutura-da-pasta" class="level3 numerada" data-number="40.4.2">
<h3 class="numerada anchored" data-number="40.4.2" data-anchor-id="estrutura-da-pasta"><span class="header-section-number">40.4.2</span> Estrutura da pasta</h3>
<p>O fluxo de trabalho também diz respeito à estrutura geral da pasta, como ter uma pasta de ‘saída’ para documentos e figuras criados e pastas de ‘dados’ ou ‘entradas’ para dados limpos. Não entramos em maiores detalhes aqui, mas verifique a página <a href="reportfactory.pt.html">Organizando relatórios de rotina</a>.</p>
</section>
</section>
<section id="produzindo-o-documento" class="level2" data-number="40.5">
<h2 data-number="40.5" class="anchored" data-anchor-id="produzindo-o-documento"><span class="header-section-number">40.5</span> Produzindo o documento</h2>
<p>Você pode produzir o documento das seguintes maneiras:</p>
<ul>
<li>Manualmente pressionando o botão “Knit” na parte superior do editor de script RStudio (rápido e fácil)<br>
</li>
<li>Execute o comando <code>render()</code> (executado fora do script R Markdown)</li>
</ul>
<section id="opção-1-botão-knit" class="level3 numerado" data-number="40.5.1">
<h3 class="numerado anchored" data-number="40.5.1" data-anchor-id="opção-1-botão-knit"><span class="header-section-number">40.5.1</span> Opção 1: Botão “Knit”</h3>
<p>Quando você tiver o arquivo Rmd aberto, pressione o ícone / botão ‘Knit’ na parte superior do arquivo.</p>
<p>R Studio mostrará o progresso em uma guia ‘R Markdown’ perto do console R. O documento será aberto automaticamente quando concluído.</p>
<p>O documento será salvo na mesma pasta que seu script markdown R e com o mesmo nome de arquivo (exceto a extensão). Obviamente, isso não é ideal para o controle de versão (será sobrescrito a cada vez que você exportar, a menos que movido manualmente), pois você pode precisar renomear o arquivo (por exemplo, adicionar uma data).</p>
<p>Este é o botão de atalho do RStudio para a função <code>render()</code> de <strong>rmarkdown</strong>. Essa abordagem é compatível apenas com um R markdown autocontido, onde todos os componentes necessários existem ou são originados no arquivo.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/4_progress.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="../images/markdown/4_progress.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="opção-2-comando-render" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="opção-2-comando-render">Opção 2: comando <code>render()</code></h3>
<p>Outra maneira de produzir a saída do R Markdown é rodar a função <code>render()</code> (do pacote <strong>rmarkdown</strong>). Você deve executar este comando <em>fora</em> do script R Markdown - ou em um script R separado (geralmente chamado de “arquivo de execução”) ou como um comando independente no R Console.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> <span class="st">"my_report.Rmd"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tal como acontece com “knit”, as configurações padrão salvarão a saída Rmd na mesma pasta do script Rmd, com o mesmo nome de arquivo (além da extensão do arquivo). Por exemplo, “my_report.Rmd” quando exportado criará “my_report.docx” se você estiver exportando para um documento do Word. No entanto, usando <code>render()</code> você tem a opção de usar configurações diferentes. <code>render()</code> pode aceitar argumentos, incluindo:</p>
<ul>
<li><code>output_format =</code> Este é o formato de saída para converter (por exemplo, <code>"html_document"</code>, <code>"pdf_document"</code>, <code>"word_document"</code> ou <code>"all"</code>). Você também pode especificar isso no YAML dentro do script R Markdown.<br>
</li>
<li><code>output_file =</code> Este é o nome do arquivo de saída (e caminho do arquivo). Isso pode ser criado por meio de funções R como <code>here()</code> ou <code>str_glue()</code> conforme demonstrado abaixo.<br>
</li>
<li><code>output_dir =</code> Este é um diretório de saída (pasta) para salvar o arquivo. Isso permite que você escolha uma alternativa diferente do diretório em que o arquivo Rmd é salvo.<br>
</li>
<li><code>output_options =</code> Você pode fornecer uma lista de opções que irão sobrescrever aquelas no script YAML (por exemplo)</li>
<li><code>output_yaml =</code> Você pode fornecer o caminho para um arquivo .yml que contém especificações YAML<br>
</li>
<li><code>params =</code> Veja a seção sobre parâmetros abaixo<br>
</li>
<li>Veja a lista completa <a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">aqui</a></li>
</ul>
<p>Como um exemplo, para melhorar o controle de versão, o comando a seguir salvará o arquivo de saída dentro de uma subpasta ‘outputs’, com a data atual no nome do arquivo. Para criar o nome do arquivo, a função <code>str_glue()</code> do pacote <strong>stringr</strong> é usada para ‘colar’ strings estáticas (escritas de forma simples) com código R dinâmico (escrito entre colchetes). Por exemplo, se for 10 de abril de 2021, o nome do arquivo abaixo será “Report_2021-04-10.docx”. Veja a página em <a href="characters_strings.pt.html">Caracteres e strings</a> para mais detalhes sobre <code>str_glue()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">input =</span> <span class="st">"create_output.Rmd"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_file =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"outputs/Report_{Sys.Date()}.docx"</span>)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>À medida que o arquivo é renderizado, o console do RStudio mostrará o andamento da renderização em até 100% e uma mensagem final para indicar que a renderização foi concluída.</p>
</section>
<section id="opções-3-pacote-reportfactory" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="opções-3-pacote-reportfactory">Opções 3: pacote <strong>reportfactory</strong></h3>
<p>O pacote R <strong>reportfactory</strong> oferece um método alternativo de organização e compilação de relatórios R Markdown <em>voltados para cenários onde você executa relatórios rotineiramente (por exemplo, diariamente, semanalmente …).</em> Facilita a compilação de vários arquivos R Markdown e o organização de seus resultados. Em essência, ele fornece uma “fábrica” a partir da qual você pode executar os relatórios R Markdown, obter pastas com carimbo de data e hora automaticamente para as saídas e ter controle de versão “leve”.</p>
<p>Leia mais sobre esse fluxo de trabalho na página <a href="reportfactory.pt.html">Organização de relatórios de rotina</a>.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="relatórios-parametrizados" class="level2" data-number="40.6">
<h2 data-number="40.6" class="anchored" data-anchor-id="relatórios-parametrizados"><span class="header-section-number">40.6</span> Relatórios parametrizados</h2>
<p>Você pode usar a parametrização para tornar um relatório dinâmico, de modo que possa ser executado com uma configuração específica (por exemplo, uma data ou local específico ou com certas opções de knit). Abaixo, nos concentramos no básico, mas há mais <a href="https://bookdown.org/yihui/rmarkdown/parameterized-reports.html">detalhes online</a> sobre relatórios parametrizados.</p>
<p>Usando a lista de linha do Ebola como exemplo, digamos que queremos executar um relatório de vigilância padrão para cada hospital a cada dia. Mostramos como fazer isso usando parâmetros.</p>
<p><em>Importante: relatórios dinâmicos também são possíveis sem a estrutura formal de parâmetros (sem <code>params:</code>), usando objetos R simples em um script R adjacente. Isso é explicado no final desta seção.</em></p>
<section id="configurando-parâmetros" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="configurando-parâmetros">Configurando parâmetros</h3>
<p>Você tem várias opções para especificar valores de parâmetro para sua saída R Markdown.</p>
<section id="opção-1-defina-os-parâmetros-em-yaml" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="opção-1-defina-os-parâmetros-em-yaml">Opção 1: Defina os parâmetros em YAML</h4>
<p>Edite o YAML para incluir uma opção <code>params:</code>, com declarações recuadas para cada parâmetro que você deseja definir. Neste exemplo, criamos os parâmetros <code>data</code> e<code>hospital</code>, para os quais especificamos valores. Esses valores estão sujeitos a alterações cada vez que o relatório é executado. Se você usar o botão “Knit” para produzir a saída, os parâmetros terão esses valores padrão. Da mesma forma, se você usar <code>render()</code> os parâmetros terão esses valores padrão, a menos que seja especificado de outra forma no comando <code>render()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Em segundo plano, esses valores de parâmetro estão contidos em uma lista somente leitura chamada <code>params</code>. Assim, você pode inserir os valores dos parâmetros no código R da mesma forma que faria com outro objeto / valor R em seu ambiente. Simplesmente digite <code>params$</code> seguido do nome do parâmetro. Por exemplo, <code>params$hospital</code> para representar o nome do hospital (“Hospital Central” por padrão).</p>
<p>Observe que os parâmetros também podem conter valores <code>true</code> ou <code>false</code> e, portanto, podem ser incluídos nas opções do <strong>knitr</strong> para um bloco R. Por exemplo, você pode definir <code>{r, eval = params$run}</code> em vez de <code>{r, eval = FALSE}</code>, e agora se o trecho é executado ou não depende do valor de um parâmetro <code>run:</code>.</p>
<p>Observe que para os parâmetros que são datas, eles serão inseridos como uma string. Portanto, para que <code>params$date</code> seja interpretado no código R, ele provavelmente precisará ser empacotado com <code>as.Date()</code> ou uma função semelhante para converter para a classe Date.</p>
</section>
<section id="opção-2-defina-os-parâmetros-em-render" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="opção-2-defina-os-parâmetros-em-render">Opção 2: Defina os parâmetros em <code>render()</code></h4>
<p>Como mencionado acima, uma alternativa para pressionar o botão “Knit” para produzir a saída é executar a função <code>render()</code> a partir de um script separado. Neste último caso, você pode especificar os parâmetros a serem usados naquela renderização para o argumento <code>params =</code> de <code>render()</code>.</p>
<p>Observe que quaisquer valores de parâmetro fornecidos aqui irão <em>sobrescrever</em> seus valores padrão se escritos dentro do YAML. Escrevemos os valores entre aspas, pois neste caso eles devem ser definidos como valores de caractere / string.</p>
<p>O comando abaixo renderiza “monitoramento_report.Rmd”, especifica um nome de arquivo de saída dinâmica e pasta, e fornece uma <code>list()</code> de dois parâmetros e seus valores para o argumento <code>params =</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">input =</span> <span class="st">"surveillance_report.Rmd"</span>,  </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_file =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"outputs/Report_{Sys.Date()}.docx"</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">params =</span> <span class="fu">list</span>(<span class="at">date =</span> <span class="st">"2021-04-10"</span>, <span class="at">hospital  =</span> <span class="st">"Central Hospital"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="opção-3-defina-os-parâmetros-usando-uma-interface-gráfica-do-usuário" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="opção-3-defina-os-parâmetros-usando-uma-interface-gráfica-do-usuário">Opção 3: Defina os parâmetros usando uma interface gráfica do usuário</h4>
<p>Para uma sensação mais interativa, você também pode usar a Interface Gráfica do Usuário (GUI) para selecionar manualmente os valores dos parâmetros. Para fazer isso, podemos clicar no menu suspenso ao lado do botão ‘Knit’ e escolher ‘Knit com parâmetros’.</p>
<p>Um pop-up aparecerá permitindo que você digite valores para os parâmetros que são estabelecidos no YAML do documento.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/5_parametersGUI.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="../images/markdown/5_parametersGUI.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Você pode conseguir o mesmo por meio de um comando <code>render()</code> especificando <code>params = "ask "</code>, como demonstrado abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">input =</span> <span class="st">"surveillance_report.Rmd"</span>,  </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_file =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"outputs/Report_{Sys.Date()}.docx"</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">params =</span> “ask”)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No entanto, digitar valores nesta janela pop-up está sujeito a erros e erros ortográficos. Você pode preferir adicionar restrições aos valores que podem ser inseridos nos menus suspensos. Você pode fazer isso adicionando no YAML várias especificações para cada entrada <code>params:</code>.</p>
<ul>
<li><code>label:</code> é como o título para aquele menu suspenso específico</li>
<li><code>value:</code> é o valor padrão (inicial)</li>
<li><code>input:</code> definido como <code>select</code> para o menu suspenso</li>
<li><code>choices:</code> Dê os valores elegíveis no menu suspenso</li>
</ul>
<p>Abaixo, essas especificações são escritas para o parâmetro <code>hospital</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span><span class="at"> “Town:”</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">value</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">input</span><span class="kw">:</span><span class="at"> select</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">choices</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">Central Hospital</span><span class="kw">,</span><span class="at"> Military Hospital</span><span class="kw">,</span><span class="at"> Port Hospital</span><span class="kw">,</span><span class="at"> St. Mark</span><span class="st">'s Maternity Hospital (SMMH)]</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="st">---</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ao exportar (através do botão ‘knit com parâmetros’ ou por <code>render()</code>), a janela pop-up terá opções suspensas para selecionar.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/5_parametersGUIB.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/markdown/5_parametersGUIB.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="exemplo-parametrizado" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exemplo-parametrizado">Exemplo parametrizado</h3>
<p>O código a seguir cria parâmetros para <code>data</code> e<code>hospital</code>, que são usados no R Markdown como <code>params$date</code> e <code>params$hospital</code>, respectivamente.</p>
<p>Na saída do relatório resultante, veja como os dados são filtrados para o hospital específico e o título do gráfico se refere ao hospital e à data corretos. Usamos o arquivo “linelist_cleaned.rds” aqui, mas seria particularmente apropriado se a própria lista de linha também tivesse um carimbo de data para alinhar com a data parametrizada.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/6_Rmdexample.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="../images/markdown/6_Rmdexample.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Exportar isso produz a saída final com a fonte e o layout padrão.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/6_RmdexampleB.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="../images/markdown/6_RmdexampleB.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="parametrização-sem-params" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="parametrização-sem-params">Parametrização sem <code>params</code></h3>
<p>Se você estiver renderizando um arquivo R Markdown com <code>render()</code> de um script separado, você pode criar o impacto da parametrização sem usar a funcionalidade <code>params:</code>.</p>
<p>Por exemplo, no <em>script R</em> que contém o comando <code>render()</code>, você pode simplesmente definir <code>hospital</code> e <code>date</code> como dois objetos R (valores) antes do comando <code>render()</code>. No R Markdown, você não precisaria ter uma seção <code>params:</code> no YAML, e nos referiríamos ao objeto <code>date</code> ao invés de <code>params$date</code> e <code>hospital</code> ao invés de<code>params$hospital</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a R script that is separate from the R Markdown</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># define R objects</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>hospital <span class="ot">&lt;-</span> <span class="st">"Central Hospital"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="st">"2021-04-10"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Render the R markdown</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> <span class="st">"create_output.Rmd"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Seguir essa abordagem significa que você não pode “tricotar com parâmetros”, usar a GUI ou incluir opções de knit dentro dos parâmetros. No entanto, permite um código mais simples, o que pode ser vantajoso.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="reiterando-relatórios" class="level2" data-number="40.7">
<h2 data-number="40.7" class="anchored" data-anchor-id="reiterando-relatórios"><span class="header-section-number">40.7</span> Reiterando relatórios</h2>
<p>Podemos querer executar um relatório várias vezes, variando os parâmetros de entrada, para produzir um relatório para cada jurisdição / unidade. Isso pode ser feito usando ferramentas para <em>iteração</em>, que são explicadas em detalhes na página <a href="iteration.pt.html">Iteração, loops e listas</a>. As opções incluem o pacote <strong>purrr</strong> ou o uso de um <em>for loop</em> conforme explicado abaixo.</p>
<p>Abaixo, usamos um simples <em>for loop</em> para gerar um relatório de vigilância para todos os hospitais de interesse. Isso é feito com um comando (em vez de alterar manualmente o parâmetro do hospital um por vez). O comando para renderizar os relatórios deve existir em um script separado <em>fora</em> do relatório Rmd. Este script também conterá objetos definidos para “fazer um loop” - a data de hoje e um vetor de nomes de hospitais para fazer o loop.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>hospitals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Central Hospital"</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Military Hospital"</span>, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Port Hospital"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"St. Mark's Maternity Hospital (SMMH)"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Em seguida, alimentamos esses valores um de cada vez no comando <code>render()</code> usando um loop, que executa o comando uma vez para cada valor no vetor <code>hospitais</code>. A letra <code>i</code> representa a posição do índice (1 a 4) do hospital que está sendo usado nessa iteração, de modo que <code>hospital_list[1]</code> seria “Hospital Central”. Esta informação é fornecida em dois lugares no comando <code>render()</code>:</p>
<ol type="1">
<li>Para o nome do arquivo, de forma que o nome do arquivo da primeira iteração, se produzido em 10 de abril de 2021, seria “Report_Central Hospital_2021-04-10.docx”, salvo na subpasta ‘output’ do diretório de trabalho.<br>
</li>
<li>Para <code>params =</code> tal que o Rmd use o nome do hospital internamente sempre que o valor <code>params$hospital</code> é chamado (por exemplo, para filtrar o conjunto de dados para o hospital específico apenas). Neste exemplo, quatro arquivos seriam criados - um para cada hospital.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(hospitals)){</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">input =</span> <span class="st">"surveillance_report.Rmd"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">output_file =</span> <span class="fu">str_glue</span>(<span class="st">"output/Report_{hospitals[i]}_{Sys.Date()}.docx"</span>),</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">params =</span> <span class="fu">list</span>(<span class="at">hospital  =</span> hospitals[i]))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>}       </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><!-- No cenário em que você não está usando esta forma estrita de parametrização, mas salvando objetos no ambiente, conforme discutido no final da seção de parametrização, a função de renderização ficaria assim:  --></p>
<!-- ```md -->
<!-- for(i in 1:length(hospital_list)){ -->
<!-- rmarkdown::render("surveillance_report.Rmd", -->
<p>&lt;! - output_file = paste0 (“output / Report_”, hospital_list [i], refdate, “.docx”) -&gt;</p>
<!-- }        -->
<!-- ``` -->
<p>&lt;! - O texto dentro da marcação precisaria então se referir a <code>hospital_list [i]</code> e <code>refdate</code>. -&gt;</p>
<!-- ======================================================= -->
</section>
<section id="modelos" class="level2" data-number="40.8">
<h2 data-number="40.8" class="anchored" data-anchor-id="modelos"><span class="header-section-number">40.8</span> Modelos</h2>
<p>Usando um documento de modelo que contém qualquer formatação desejada, você pode ajustar a estética de como a saída Rmd ficará. Você pode criar, por exemplo, um arquivo MS Word ou PowerPoint que contenha páginas / slides com as dimensões, marcas d’água, planos de fundo e fontes desejados.</p>
<section id="documentos-do-word" class="level3 numerados" data-number="40.8.1">
<h3 class="numerados anchored" data-number="40.8.1" data-anchor-id="documentos-do-word"><span class="header-section-number">40.8.1</span> Documentos do Word</h3>
<p>Para criar um modelo, inicie um novo documento do Word (ou use uma saída existente com a formatação que mais lhe convier) e edite as fontes definindo os Estilos. Em Estilo, os títulos 1, 2 e 3 referem-se aos vários níveis de cabeçalho de redução (<code># Cabeçalho 1</code>, <code>## Cabeçalho 2</code> e <code>### Cabeçalho 3</code> respectivamente). Clique com o botão direito no estilo e clique em ‘modificar’ para alterar a formatação da fonte, bem como o parágrafo (por exemplo, você pode introduzir quebras de página antes de certos estilos que podem ajudar com o espaçamento). Outros aspectos do documento do Word, como margens, tamanho da página, cabeçalhos, etc., podem ser alterados como um documento do Word normal no qual você está trabalhando diretamente.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/7_template.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="../images/markdown/7_template.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="documentos-do-powerpoint" class="level3 numerados" data-number="40.8.2">
<h3 class="numerados anchored" data-number="40.8.2" data-anchor-id="documentos-do-powerpoint"><span class="header-section-number">40.8.2</span> Documentos do PowerPoint</h3>
<p>Como acima, crie um novo conjunto de slides ou use um arquivo PowerPoint existente com a formatação desejada. Para outras edições, clique em ‘Exibir’ e ‘Slide Master’. A partir daqui, você pode alterar a aparência do slide ‘mestre’ editando a formatação do texto nas caixas de texto, bem como as dimensões do plano de fundo / página para a página geral.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/8_ppttemplate.PNG" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="../images/markdown/8_ppttemplate.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Infelizmente, editar arquivos PowerPoint é um pouco menos flexível:</p>
<ul>
<li>Um cabeçalho de primeiro nível (<code># Cabeçalho 1</code>) se tornará automaticamente o título de um novo slide,</li>
<li>Um texto de <code>## Header 2</code> não aparecerá como uma legenda, mas como um texto dentro da caixa de texto principal do slide (a menos que você encontre uma maneira de manipular a visualização mestre).</li>
<li>Plotagens e tabelas geradas irão automaticamente para novos slides. Você precisará combiná-los, por exemplo, a função <strong>patchwork</strong> para combinar ggplots, de modo que apareçam na mesma página. Veja esta <a href="https://mattherman.info/blog/ppt-patchwork/">postagem no blog</a> sobre como usar o pacote <strong>patchwork</strong> para colocar várias imagens em um slide.</li>
</ul>
<p>Veja o <a href="https://davidgohel.github.io/officer/">pacote <strong>officer</strong></a> para uma ferramenta para trabalhar mais a fundo com apresentações em PowerPoint.</p>
</section>
<section id="integração-de-modelos-no-yaml" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="integração-de-modelos-no-yaml">Integração de modelos no YAML</h3>
<p>Uma vez que um modelo é preparado, o detalhe disso pode ser adicionado no YAML do Rmd abaixo da linha de ‘output’ e abaixo de onde o tipo de documento é especificado (que vai para uma linha separada). Nota <code>reference_doc</code> pode ser usado para modelos de slides do PowerPoint.</p>
<p>É mais fácil salvar o modelo na mesma pasta onde está o arquivo Rmd (como no exemplo abaixo) ou em uma subpasta.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">word_document</span><span class="kw">:</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">reference_docx</span><span class="kw">:</span><span class="at"> </span><span class="st">"template.docx"</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="at"> </span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="formatando-arquivos-html" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="formatando-arquivos-html">Formatando arquivos HTML</h3>
<p>Os arquivos HTML não usam modelos, mas podem ter os estilos configurados no YAML. HTMLs são documentos interativos e são particularmente flexíveis. Cobrimos algumas opções básicas aqui.</p>
<ul>
<li><p>Índice: Podemos adicionar um índice com <code>toc: true</code> abaixo, e também especificar que ele permanece visível (“floats”) conforme você rola, com <code>toc_float: true</code>.</p></li>
<li><p>Temas: Podemos nos referir a alguns temas pré-fabricados, que vêm de uma biblioteca de temas Bootswatch. No exemplo abaixo, usamos cerulean. Outras opções incluem: diário, plano, escuro, legível, laboratório espacial, unido, cosmo, lúmen, papel, arenito, simplex e yeti. No original, journal, flatly, darkly, readable, spacelab, united, cosmo, lumen, paper, sandstone, simplex, e yeti</p></li>
<li><p>Realçar: Configurar isso muda a aparência do texto destacado (por exemplo, código dentro dos pedaços que são mostrados). Os estilos suportados incluem default, tango, pygments, kate, monochrome, espresso, zenburn, haddock, breezedark, e textmate.</p></li>
</ul>
<p>Aqui está um exemplo de como integrar as opções acima no YAML.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"HTML example"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_float</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> cerulean</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> kate</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Abaixo estão dois exemplos de saídas HTML, ambas com índices flutuantes, mas diferentes temas e estilos de destaque selecionados:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/9_html.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="../images/markdown/9_html.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="conteúdo-dinâmico" class="level2" data-number="40.9">
<h2 data-number="40.9" class="anchored" data-anchor-id="conteúdo-dinâmico"><span class="header-section-number">40.9</span> Conteúdo dinâmico</h2>
<p>Em uma saída HTML, o conteúdo do seu relatório pode ser dinâmico. Abaixo estão alguns exemplos:</p>
<section id="tabelas-1" class="level3 numeradas" data-number="40.9.1">
<h3 class="numeradas anchored" data-number="40.9.1" data-anchor-id="tabelas-1"><span class="header-section-number">40.9.1</span> Tabelas</h3>
<p>Em um relatório HTML, você pode imprimir quadros / tabelas de dados de forma que o conteúdo seja dinâmico, com filtros e barras de rolagem. Existem vários pacotes que oferecem esse recurso.</p>
<p>Para fazer isso com o pacote <strong>DT</strong>, como é usado em todo este manual, você pode inserir um trecho de código como este:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/markdown/10_dynamictable.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="../images/markdown/10_dynamictable.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>A função <code>datatable()</code> imprimirá o quadro de dados fornecido como uma tabela dinâmica para o leitor. Você pode definir <code>rownames = FALSE</code> para simplificar o lado esquerdo da tabela. <code>filter = "top"</code> fornece um filtro para cada coluna. No argumento <code>option()</code> forneça uma lista de outras especificações. Abaixo, incluímos dois: <code>pageLength = 5</code> define o número de linhas que aparecem como 5 (as linhas restantes podem ser visualizadas através das setas), e <code>scrollX = TRUE</code> habilita uma barra de rolagem na parte inferior da tabela (para colunas que se estendem muito para a direita).</p>
<p>Se seu conjunto de dados for muito grande, considere mostrar apenas as primeiras X linhas envolvendo o quadro de dados em <code>head()</code>.</p>
</section>
<section id="widgets-html" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="widgets-html">Widgets HTML</h3>
<p>[HTML widgets for R] (http://www.htmlwidgets.org/) são uma classe especial de pacotes R que permitem maior interatividade utilizando bibliotecas JavaScript. Você pode embuti-los nas saídas HTML R Markdown.</p>
<p>Alguns exemplos comuns desses widgets incluem:</p>
<ul>
<li>Plotly (usado nesta página do manual e na página <a href="interactive_plots.pt.html">Gráficos interativos</a>)</li>
<li>visNetwork (usado na página <a href="transmission_chains.pt.html">Cadeias de transmissão</a> deste manual)</li>
<li>Folheto (usado na página <a href="gis.pt.html">Noções básicas de GIS</a> deste manual)</li>
<li>dygraphs (úteis para mostrar dados de séries temporais de forma interativa)</li>
<li>DT (<code>datatable()</code>) (usado para mostrar tabelas dinâmicas com filtro, classificação, etc.)</li>
</ul>
<p>A função <code>ggplotly()</code> de <strong>plotly</strong> é particularmente fácil de usar. Veja a página <a href="interactive_plots.pt.html">Gráficos interativos</a>.</p>
</section>
</section>
<section id="recursos" class="level2" data-number="40.10">
<h2 data-number="40.10" class="anchored" data-anchor-id="recursos"><span class="header-section-number">40.10</span> Recursos</h2>
<p>Mais informações podem ser encontradas em:</p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown/" class="uri">https://bookdown.org/yihui/rmarkdown/</a></li>
<li><a href="https://rmarkdown.rstudio.com/articles_intro.html" class="uri">https://rmarkdown.rstudio.com/articles_intro.html</a></li>
</ul>
<p>Uma boa explicação de markdown vs knitr vs Rmarkdown está aqui: <a href="https://stackoverflow.com/questions/40563479/relationship-between-r-markdown-knitr-pandoc-and-bookdown" class="uri">https://stackoverflow.com/questions/40563479/relationship-between-r-markdown-knitr-pandoc-and-bookdown</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/interactive_plots.pt.html" class="pagination-link" aria-label="Gráficos interativos">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Gráficos interativos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/reportfactory.pt.html" class="pagination-link" aria-label="Organização de relatórios de rotina">
        <span class="nav-page-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organização de relatórios de rotina</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","selector":".lightbox","closeEffect":"zoom","openEffect":"zoom","loop":false});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>