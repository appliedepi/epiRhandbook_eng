<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Manual de R para Epidemiologistas - 3&nbsp; Introdução ao R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/transition_to_R.pt.html" rel="next">
<link href="../new_pages/data_used.pt.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QXDW878QLX');
</script> -->

</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">
  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"
    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"
    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"
    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"
    class="alert-link">R Help Desk service</a>. -->
</div>

<script>

  // Function to extract the last two characters from the URL path to determine the language, adjusting for .html extension
  function getLanguageFromURL() {
    let path = window.location.pathname;
    
    // Check if the URL ends with .html and remove it
    if (path.endsWith('.html')) {
      path = path.substring(0, path.length - 5);
    }

    // Extract the last two characters for the language code
    const lang = path.substr(-2);
    return lang;
  }

  const language = getLanguageFromURL();
  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru'];
  const defaultLanguage = 'en';
  const isSupportedLanguage = supportedLanguages.includes(language);

  // Translations for the content
  const translations = {
    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',
    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',
    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',
    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',
    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',
    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',
    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',
    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'
  };

  // Default to English if the detected language is not supported
  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];


  // Select the element where the content should be displayed
  const alertElement = document.querySelector('.alert');
  if (alertElement) {
    alertElement.innerHTML = contentToDisplay;
    alertElement.style.display = 'block'; // Make sure to display the element
  }

</script>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.pt.html">Básico</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.pt.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Manual de R para Epidemiologistas</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_quarto" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo escuro"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bem-vindo</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Sobre este livro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Notas editoriais e técnicas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Baixe o livro e os dados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Básico</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.pt.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transição para o R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Pacotes sugeridos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importar e exportar</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Gerenciamento de Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Limpeza de dados e principais funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trabalhando com datas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Caracteres e strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fatores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Pivoteando dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Agrupando dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Juntando dados (Joins)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Eliminação de duplicidades</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Iterações, loops e listas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Análise dos Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Tabelas descritivas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Testes estatísticos simples</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Regressão simples e múltipla</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Campos em branco/faltantes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Normalização de taxas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Médias móveis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Séries temporais e detecção de surtos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Modelagem de epidemias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Rastreamento de contatos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Analises de pesquisa de questionários (<em>survey</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Análise de sobrevivência</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Introdução ao GIS</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Visualização de Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Tabelas para apresentação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">O básico do ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Dicas do ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Curvas epidêmicas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Pirâmides demográficas e escalas Likert</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Gráficos de calor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Diagramas e gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Análise de Combinações</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Cadeias de Transmissão</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Árvores filogenéticas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Gráficos interativos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Relatórios e dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Relatórios com R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organização de relatórios de rotina</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Painéis (Dashboards) com R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Painéis com Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Miscelânea</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Escrevendo funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Interações de diretório</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Controle de versão e colaboração com Git e Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Erros comuns</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Conseguindo ajuda</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R em drives (pastas) na rede</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.pt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Data Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#porque-usar-o-r" id="toc-porque-usar-o-r" class="nav-link active" data-scroll-target="#porque-usar-o-r"><span class="header-section-number">3.1</span> Porque usar o R?</a></li>
  <li><a href="#termos-chave" id="toc-termos-chave" class="nav-link" data-scroll-target="#termos-chave"><span class="header-section-number">3.2</span> Termos chave</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning"><span class="header-section-number">3.3</span> Recursos para a aprendizagem</a>
  <ul class="collapse">
  <li><a href="#recursos-dentro-do-rstudio" id="toc-recursos-dentro-do-rstudio" class="nav-link" data-scroll-target="#recursos-dentro-do-rstudio">Recursos dentro do RStudio</a></li>
  <li><a href="#página-de-dicas" id="toc-página-de-dicas" class="nav-link" data-scroll-target="#página-de-dicas">Página de dicas</a></li>
  <li><a href="#twitter" id="toc-twitter" class="nav-link" data-scroll-target="#twitter">Twitter</a></li>
  <li><a href="#recursos-online-gratuitos" id="toc-recursos-online-gratuitos" class="nav-link" data-scroll-target="#recursos-online-gratuitos">Recursos online gratuitos</a></li>
  <li><a href="#idiomas-além-do-inglês" id="toc-idiomas-além-do-inglês" class="nav-link" data-scroll-target="#idiomas-além-do-inglês">Idiomas além do inglês</a></li>
  </ul></li>
  <li><a href="#instalação" id="toc-instalação" class="nav-link" data-scroll-target="#instalação"><span class="header-section-number">3.4</span> Instalação</a>
  <ul class="collapse">
  <li><a href="#r-e-r-studio" id="toc-r-e-r-studio" class="nav-link" data-scroll-target="#r-e-r-studio">R e R Studio</a></li>
  <li><a href="#outros-softwares-você-pode-precisar-instalar" id="toc-outros-softwares-você-pode-precisar-instalar" class="nav-link" data-scroll-target="#outros-softwares-você-pode-precisar-instalar">Outros softwares você <em>pode</em> precisar instalar</a></li>
  </ul></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio"><span class="header-section-number">3.5</span> RStudio</a>
  <ul class="collapse">
  <li><a href="#se-orientando-no-rstudio" id="toc-se-orientando-no-rstudio" class="nav-link" data-scroll-target="#se-orientando-no-rstudio">Se orientando no RStudio</a></li>
  <li><a href="#configurações-do-rstudio" id="toc-configurações-do-rstudio" class="nav-link" data-scroll-target="#configurações-do-rstudio">Configurações do RStudio</a></li>
  <li><a href="#atalhos-no-teclado" id="toc-atalhos-no-teclado" class="nav-link" data-scroll-target="#atalhos-no-teclado">Atalhos no teclado</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">3.6</span> Funções</a>
  <ul class="collapse">
  <li><a href="#funções-simples" id="toc-funções-simples" class="nav-link" data-scroll-target="#funções-simples">Funções simples</a></li>
  <li><a href="#funções-com-argumentos-múltiplos" id="toc-funções-com-argumentos-múltiplos" class="nav-link" data-scroll-target="#funções-com-argumentos-múltiplos">Funções com argumentos múltiplos</a></li>
  <li><a href="#escrevendo-funções" id="toc-escrevendo-funções" class="nav-link" data-scroll-target="#escrevendo-funções">Escrevendo funções</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">3.7</span> Pacotes</a>
  <ul class="collapse">
  <li><a href="#instalar-e-carregar" id="toc-instalar-e-carregar" class="nav-link" data-scroll-target="#instalar-e-carregar">Instalar e carregar</a></li>
  <li><a href="#sintaxe-do-código" id="toc-sintaxe-do-código" class="nav-link" data-scroll-target="#sintaxe-do-código">Sintaxe do código</a></li>
  <li><a href="#auxílio-para-as-funções" id="toc-auxílio-para-as-funções" class="nav-link" data-scroll-target="#auxílio-para-as-funções">Auxílio para as funções</a></li>
  <li><a href="#atualizando-pacotes" id="toc-atualizando-pacotes" class="nav-link" data-scroll-target="#atualizando-pacotes">Atualizando pacotes</a></li>
  <li><a href="#apagar-pacotes" id="toc-apagar-pacotes" class="nav-link" data-scroll-target="#apagar-pacotes">Apagar pacotes</a></li>
  <li><a href="#dependências" id="toc-dependências" class="nav-link" data-scroll-target="#dependências">Dependências</a></li>
  <li><a href="#funções-mascaradas" id="toc-funções-mascaradas" class="nav-link" data-scroll-target="#funções-mascaradas">Funções mascaradas</a></li>
  <li><a href="#desprender-descarregar" id="toc-desprender-descarregar" class="nav-link" data-scroll-target="#desprender-descarregar">Desprender / descarregar</a></li>
  <li><a href="#instalar-uma-versão-mais-antiga" id="toc-instalar-uma-versão-mais-antiga" class="nav-link" data-scroll-target="#instalar-uma-versão-mais-antiga">Instalar uma versão mais antiga</a></li>
  <li><a href="#pacotes-sugeridos" id="toc-pacotes-sugeridos" class="nav-link" data-scroll-target="#pacotes-sugeridos">Pacotes sugeridos</a></li>
  </ul></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">3.8</span> Scripts</a>
  <ul class="collapse">
  <li><a href="#comentando" id="toc-comentando" class="nav-link" data-scroll-target="#comentando">Comentando</a></li>
  <li><a href="#estilo" id="toc-estilo" class="nav-link" data-scroll-target="#estilo">Estilo</a></li>
  <li><a href="#exemplo-de-script" id="toc-exemplo-de-script" class="nav-link" data-scroll-target="#exemplo-de-script">Exemplo de Script</a></li>
  <li><a href="#r-markdown" id="toc-r-markdown" class="nav-link" data-scroll-target="#r-markdown">R markdown</a></li>
  <li><a href="#notebooks-r" id="toc-notebooks-r" class="nav-link" data-scroll-target="#notebooks-r">Notebooks R</a></li>
  <li><a href="#shiny" id="toc-shiny" class="nav-link" data-scroll-target="#shiny"><span class="header-section-number">3.8.1</span> Shiny</a></li>
  <li><a href="#código-dobrável" id="toc-código-dobrável" class="nav-link" data-scroll-target="#código-dobrável">Código dobrável</a></li>
  </ul></li>
  <li><a href="#diretório-de-trabalho" id="toc-diretório-de-trabalho" class="nav-link" data-scroll-target="#diretório-de-trabalho"><span class="header-section-number">3.9</span> Diretório de trabalho</a>
  <ul class="collapse">
  <li><a href="#abordagem-recomendada" id="toc-abordagem-recomendada" class="nav-link" data-scroll-target="#abordagem-recomendada">Abordagem recomendada</a></li>
  <li><a href="#definido-por-comando" id="toc-definido-por-comando" class="nav-link" data-scroll-target="#definido-por-comando">Definido por comando</a></li>
  <li><a href="#definindo-manualmente" id="toc-definindo-manualmente" class="nav-link" data-scroll-target="#definindo-manualmente">Definindo manualmente</a></li>
  <li><a href="#dentro-de-um-projeto-r" id="toc-dentro-de-um-projeto-r" class="nav-link" data-scroll-target="#dentro-de-um-projeto-r">Dentro de um projeto R</a></li>
  <li><a href="#diretório-de-trabalho-em-r-markdown" id="toc-diretório-de-trabalho-em-r-markdown" class="nav-link" data-scroll-target="#diretório-de-trabalho-em-r-markdown">Diretório de trabalho em R markdown</a></li>
  <li><a href="#fornecendo-o-caminho-dos-arquivos" id="toc-fornecendo-o-caminho-dos-arquivos" class="nav-link" data-scroll-target="#fornecendo-o-caminho-dos-arquivos">Fornecendo o caminho dos arquivos</a></li>
  </ul></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects"><span class="header-section-number">3.10</span> Objetos</a>
  <ul class="collapse">
  <li><a href="#tudo-é-um-objeto" id="toc-tudo-é-um-objeto" class="nav-link" data-scroll-target="#tudo-é-um-objeto">Tudo é um objeto</a></li>
  <li><a href="#definindo-objetos--" id="toc-definindo-objetos--" class="nav-link" data-scroll-target="#definindo-objetos--">Definindo objetos (<code>&lt;-</code>)</a></li>
  <li><a href="#estrutura-de-um-objeto" id="toc-estrutura-de-um-objeto" class="nav-link" data-scroll-target="#estrutura-de-um-objeto">Estrutura de um objeto</a></li>
  <li><a href="#classe-de-objetos" id="toc-classe-de-objetos" class="nav-link" data-scroll-target="#classe-de-objetos">Classe de objetos</a></li>
  <li><a href="#colunasvariáveis" id="toc-colunasvariáveis" class="nav-link" data-scroll-target="#colunasvariáveis">Colunas/Variáveis (<code>$</code>)</a></li>
  <li><a href="#accessarindexar-com-colchetes" id="toc-accessarindexar-com-colchetes" class="nav-link" data-scroll-target="#accessarindexar-com-colchetes">Accessar/indexar com colchetes (<code>[ ]</code>)</a></li>
  <li><a href="#remover-objetos" id="toc-remover-objetos" class="nav-link" data-scroll-target="#remover-objetos">Remover objetos</a></li>
  </ul></li>
  <li><a href="#piping-encadeamento" id="toc-piping-encadeamento" class="nav-link" data-scroll-target="#piping-encadeamento"><span class="header-section-number">3.11</span> Piping (Encadeamento, <code>%&gt;%</code>)</a>
  <ul class="collapse">
  <li><a href="#pipes" id="toc-pipes" class="nav-link" data-scroll-target="#pipes"><strong>Pipes</strong></a></li>
  <li><a href="#definir-objetos-intermediários" id="toc-definir-objetos-intermediários" class="nav-link" data-scroll-target="#definir-objetos-intermediários">Definir objetos intermediários</a></li>
  </ul></li>
  <li><a href="#operadores" id="toc-operadores" class="nav-link" data-scroll-target="#operadores"><span class="header-section-number">3.12</span> Principais operadores e funções</a>
  <ul class="collapse">
  <li><a href="#operador-de-atribuição" id="toc-operador-de-atribuição" class="nav-link" data-scroll-target="#operador-de-atribuição">Operador de atribuição</a></li>
  <li><a href="#operadores-relacionais-e-lógicos" id="toc-operadores-relacionais-e-lógicos" class="nav-link" data-scroll-target="#operadores-relacionais-e-lógicos">Operadores relacionais e lógicos</a></li>
  <li><a href="#valores-faltantes" id="toc-valores-faltantes" class="nav-link" data-scroll-target="#valores-faltantes">Valores faltantes</a></li>
  <li><a href="#matemática-e-estatística" id="toc-matemática-e-estatística" class="nav-link" data-scroll-target="#matemática-e-estatística">Matemática e estatística</a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><code>%in%</code></a></li>
  </ul></li>
  <li><a href="#erros-avisos" id="toc-erros-avisos" class="nav-link" data-scroll-target="#erros-avisos"><span class="header-section-number">3.13</span> Erros &amp; avisos</a>
  <ul class="collapse">
  <li><a href="#erros-versus-avisos" id="toc-erros-versus-avisos" class="nav-link" data-scroll-target="#erros-versus-avisos">Erros versus Avisos</a></li>
  <li><a href="#dicas-gerais-de-sintaxe" id="toc-dicas-gerais-de-sintaxe" class="nav-link" data-scroll-target="#dicas-gerais-de-sintaxe">Dicas gerais de sintaxe</a></li>
  <li><a href="#ajudas-de-código" id="toc-ajudas-de-código" class="nav-link" data-scroll-target="#ajudas-de-código">Ajudas de código</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.pt.html">Básico</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.pt.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao R</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="basics" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/basics_header_close.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/basics_header_close.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Bem-vindo!</p>
<p>Esta página analisa o essencial de R. Ela não pretende ser um tutorial abrangente, mas fornece o básico e pode ser útil para refrescar a sua memória. A secção <a href="#learning">Recurso para a aprendizagem</a> tem links para a tutoriais mais abrangentes.</p>
<p>Partes desta página foram adaptadas com a permissão do <a href="https://r4epis.netlify.app/">projecto R4Epis</a>.</p>
<p>Ver a página em <a href="transition_to_R.pt.html">Transição para R</a> para dicas sobre como mudar para R de STATA, SAS, ou Excel.</p>
<!-- ======================================================= -->
<section id="porque-usar-o-r" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="porque-usar-o-r"><span class="header-section-number">3.1</span> Porque usar o R?</h2>
<p>Segundo a definição do site <a href="https://www.r-project.org/about.html"><em>R project</em></a>, R é uma linguagem de programação e também um ambiente para computação estatística e gráfica. É altamente versátil, extensível, e orientado para a comunidade.</p>
<p><strong>Custo</strong></p>
<p>R é de utilização livre! Há uma política forte na comunidade para que o material seja gratuito e de código aberto.</p>
<p><strong>Reprodutibilidade</strong></p>
<p>A prática de conduzir a análise e a gestão dos dados por meio de uma linguagem de programação (em comparação com o Excel ou outra dessas ferramentas que requerem cliques manuais) melhora a <strong>reprodutibilidade</strong>, torna a <strong>detecção de erros</strong> mais fácil e alivia sua carga de trabalho.</p>
<p><strong>Comunidade</strong></p>
<p>A comunidade de usuários de R é enorme e colaborativa. Novos pacotes e ferramentas para resolver problemas da vida real são desenvolvidos diariamente e recebe críticas e contribuições da comunidade de utilizadores. Como um exemplo, <a href="https://rladies.org/">R-Ladies</a> é uma organização mundial cuja missão é promover a diversidade de gênero na comunidade R, e é uma das maiores organizações de utilizadores de R. É provável que tenha uma divisão perto de você!</p>
</section>
<section id="termos-chave" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="termos-chave"><span class="header-section-number">3.2</span> Termos chave</h2>
<p><strong>RStudio</strong> - RStudio é uma Interface Gráfica de Utilizador (GUI) para uma utilização mais fácil da linguagem <strong>R</strong>. Leia mais <a href="#rstudio">na secção RStudio</a>.</p>
<p><strong>Objetos</strong> - Tudo o que se armazena em R - conjuntos de dados, variáveis, uma lista de nomes de cidades, um número total da população, mesmo saídas como gráficos - são <em>objetos</em> aos quais é <em>atribuído um nome</em> e <em>podem ser referenciados</em> em comandos posteriores. Ler mais <a href="#objects">na secção Objectos</a>.</p>
<p><strong>Funções</strong> - Uma função é uma operação de código que aceita entradas e devolve uma saída transformada. Leia mais <a href="#functions">na secção Funções</a>.</p>
<p><strong>Pacotes</strong> - Um pacote R é um pacote partilhável de funções. Leia mais <a href="#packages">na secção Pacotes</a></p>
<p><strong>Scripts/Códigos</strong> - Um script é um arquivo que contém as linhas de comando que escreveu. Leia mais <a href="#scripts">na secção Scripts</a></p>
</section>
<section id="learning" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="learning"><span class="header-section-number">3.3</span> Recursos para a aprendizagem</h2>
<section id="recursos-dentro-do-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="recursos-dentro-do-rstudio">Recursos dentro do RStudio</h3>
<p><strong>Documentação de ajuda</strong></p>
<p>Pesquisar na aba “Ajuda” do RStudio pela documentação sobre pacotes do R e funções específicas. Isto está dentro do painel que também contém “Arquivos”, “Gráficos” e “Pacotes” (tipicamente no painel inferior direito). Como atalho, também se pode digitar o nome de um pacote ou função no console do R após um ponto de interrogação para abrir a página de Ajuda relevante. Não inclui parênteses.</p>
<p>Por exemplo: <code>?filter</code> ou <code>?diagrammeR</code>.</p>
<p><strong>Tutoriais interativos</strong></p>
<p>Há várias maneiras de aprender R interactivamente <em>dentro</em> do RStudio.</p>
<p>O próprio RStudio oferece um painel Tutorial que é alimentado pelo pacote do R <a href="https://blog.rstudio.com/2020/02/25/rstudio-1-3-integrated-tutorials/"><strong>learnr</strong></a>. Basta instalar este pacote e abrir um tutorial através da nova aba “Tutorial” no painel superior direito do RStudio, que também contém os separadores Environment (Ambiente) e History (Histórico).</p>
<p>O pacote do R <a href="https://swirlstats.com/"><strong>swirl</strong></a> oferece cursos interativos no Console do R. Instale e carregue este pacote, depois execute o comando <code>swirl()</code> (parênteses vazios) no Console do R. Você verá avisos aparecerem no Console. Responda digitando no Console. Ele irá guiá-lo através de um curso à sua escolha.</p>
</section>
<section id="página-de-dicas" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="página-de-dicas">Página de dicas</h3>
<p>Há várias “cheatsheets” (“colinhas”) em pdf disponíveis no <a href="https://rstudio.com/resources/cheatsheets/">website do RStudio</a>, por exemplo:</p>
<ul>
<li>Fatores com o pacote <strong>forcats</strong></li>
<li>Datas e horas com o pacote <strong>lubridate</strong></li>
<li>Caracteres com o pacote <strong>stringr</strong></li>
<li>Operações iterativas com o pacote <strong>purrr</strong></li>
<li>Importação de dados</li>
<li>Folha de dica para transformação de dadas com o pacote <strong>dplyr</strong></li>
<li>R Markdown (para criar documentos como PDF, Word, Powerpoint…)</li>
<li>Shiny (para construir aplicativos de web interativos)</li>
<li>Visualização de dados com o pacote <strong>ggplot2</strong></li>
<li>Cartografia (GIS)</li>
<li>Pacote <strong>leaflet</strong> (mapas interativos)</li>
<li>Python com R (pacote <strong>reticulate</strong>)</li>
</ul>
<p>Este é um recurso online do R especificamente para <a href="https://jules32.github.io/r-for-excel-users/">usuários do Excel</a></p>
</section>
<section id="twitter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="twitter">Twitter</h3>
<p>R tem uma vibrante comunidade no twitter onde você pode aprender dicas, atalhos e notícias, siga estas contas:</p>
<ul>
<li>Siga nos! <a href="https://twitter.com/epirhandbook">@epiRhandbook</a></li>
<li>R Function A Day (Uma função por dia) <a href="https://twitter.com/rfunctionaday">@rfuntionaday</a> é um recurso <em>incrível</em></li>
<li>R for Data Science (R para Ciência de Dados) <a href="https://twitter.com/rstats4ds?lang=en">@rstats4ds</a></li>
<li>RStudio <a href="https://twitter.com/rstudio?lang=en">@RStudio</a></li>
<li>Dicas do RStudio<a href="https://twitter.com/rstudiotips">@rstudiotips</a></li>
<li>R-Bloggers <a href="https://twitter.com/Rbloggers">@Rbloggers</a></li>
<li>R-ladies <a href="https://twitter.com/RLadiesGlobal">@RLadiesGlobal</a></li>
<li>Hadley Wickham <a href="https://twitter.com/hadleywickham?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">@hadleywickham</a></li>
</ul>
<p>Também:</p>
<p><strong>#epitwitter</strong> e <strong>#rstats</strong></p>
</section>
<section id="recursos-online-gratuitos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="recursos-online-gratuitos">Recursos online gratuitos</h3>
<p>Um texto definitivo é o livro <a href="https://r4ds.had.co.nz/">R for Data Science</a> de Garrett Grolemund e Hadley Wickham</p>
<p>O site do projeto <a href="https://r4epis.netlify.app/">R4Epis</a> tem como objetivo “desenvolver ferramentas padronizadas de limpeza, análise e relatório de dados para cobrir tipos comuns de surtos e pesquisas populacionais que seriam conduzidas em um ambiente de resposta a emergências de MSF”. Você pode encontrar materiais de treinamento básicos do R, modelos para relatórios do RMarkdown sobre surtos e pesquisas e tutoriais para ajudá-lo a configurá-los.</p>
</section>
<section id="idiomas-além-do-inglês" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="idiomas-além-do-inglês">Idiomas além do inglês</h3>
<p><a href="https://www.rstudio.com/collections/espanol/">Materiais do RStudio em Espanhol</a></p>
<p><a href="https://juba.github.io/tidyverse/index.html">Introdução ao R e ao tidyverse (Francês)</a></p>
<p><a href="https://livro.curso-r.com/index.html">Ciência de Dados em R (Português)</a></p>
<!-- ======================================================= -->
</section>
</section>
<section id="instalação" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="instalação"><span class="header-section-number">3.4</span> Instalação</h2>
<section id="r-e-r-studio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-e-r-studio">R e R Studio</h3>
<p><strong>Como instalar o R</strong></p>
<p>Visite o site <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a> e faça o <em>download</em> da versão mais recente do R que seja adequada para o seu computador.</p>
<p><strong>Como instalar o RStudio</strong></p>
<p>Visite esse website <a href="https://rstudio.com/products/rstudio/download/" class="uri">https://rstudio.com/products/rstudio/download/</a> e faça o <em>download</em> da versão gratuita mais recente para Desktop do RStudio que seja adequada para seu computador.</p>
<p><strong>Permissões</strong></p>
<p>Note que você deve instalar R e RStudio em um drive onde você tenha permissões de leitura e escrita. Caso contrário, sua capacidade de instalar pacotes R (um problema de ocorrência freqüente) será impactada. Se você encontrar problemas, tente abrir o RStudio clicando com o botão direito do mouse no ícone e selecionando “Executar como administrador”. Outras dicas podem ser encontradas na página <a href="network_drives.pt.html">R em unidades de rede</a>.</p>
<p><strong>Como atualizar o R e o RStudio</strong></p>
<p>Sua versão de R é exibida (“printada”) no o Console R na inicialização. Você também pode executar o <code>sessionInfo()</code>.</p>
<p>Para atualizar o R, vá para o site mencionado acima e reinstale o R. Alternativamente, você pode utilizar o pacote <strong>installr</strong> (no Windows) executando <code>installr::updateR()</code>. Isto abrirá caixas de diálogo para ajudá-lo a baixar a última versão R e atualizar seus pacotes para a nova versão R. Mais detalhes podem ser encontrados na <strong>installr</strong> <a href="https://www.r-project.org/nosvn/pandoc/installr.html">documentação</a>.</p>
<p>Esteja ciente de que a antiga versão R ainda existirá em seu computador. Você pode executar temporariamente uma versão antiga (antiga “instalação”) do R clicando em “Tools” (Ferramentas) -&gt; “Global Options” (Opções Globais) no RStudio e escolhendo uma versão R. Isto pode ser útil se você quiser usar um pacote que não tenha sido atualizado para funcionar na versão mais nova do R.</p>
<p>Para atualizar o RStudio, você pode ir ao site acima e fazer o download novamente do RStudio. Outra opção é clicar em “Help” (Ajuda) -&gt; “Check for Updates” (Verificar Atualizações) dentro do RStudio, mas isto pode não mostrar as últimas atualizações.</p>
<p>Para ver quais versões do R, RStudio, ou pacotes foram usados quando este Manual foi feito, veja a página em <a href="editorial_style.pt.html">Notas editoriais e técnicas</a>.</p>
</section>
<section id="outros-softwares-você-pode-precisar-instalar" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="outros-softwares-você-pode-precisar-instalar">Outros softwares você <em>pode</em> precisar instalar</h3>
<ul>
<li>TinyTeX (<em>para compilaar documentos de RMarkdown em PDF</em>)</li>
<li>Pandoc (<em>para compilar documentos de RMarkdown</em>)</li>
<li>RTools (<em>para construir pacotes em R</em>)</li>
<li>phantomjs (<em>para salvar imagens ou redes animadas, como redes de transmissão</em>)</li>
</ul>
<section id="tinytex" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="tinytex">TinyTex</h4>
<p>TinyTex é uma distribuição do LaTeX customizada, útil quando for tentar produzir PDFs no R. Veja <a href="https://yihui.org/tinytex/" class="uri">https://yihui.org/tinytex/</a> para mais informações.</p>
<p>Para instalar o TinyTex no R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'tinytex'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># para desisntalar o TinyTeX, corra tinytex::uninstall_tinytex()</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pandoc" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="pandoc">Pandoc</h4>
<p>Sua versão de R é impressa no o Console R na inicialização. Você também pode executar o Pandoc é um conversor de documentos, um software separado do R. <strong>Ele vem junto com o RStudio , provavelmente não precisará ser baixado.</strong> Ele ajuda no processo de conversão de documentos Rmarkdown para formatos como .pdf e adição de funcionalidades complexas.</p>
</section>
<section id="rtools" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rtools">RTools</h4>
<p>RTools é uma coleção de softwares para construção de pacotes para R.</p>
<p>Instale desse website: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</section>
<section id="phantomjs" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="phantomjs">phantomjs</h4>
<p>Esta ferramenta é freqüentemente usada para tirar “fotografias da tela” de páginas da web. Por exemplo, quando você cria uma cadeia de transmissão com o pacote <strong>epicontacts</strong>, um arquivo HTML é produzido e ele é interativo e dinâmico. Se você quiser uma imagem estática, pode ser útil usar o pacote <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> para automatizar este processo. Isto exigirá o programa externo “phantomjs”. Você pode instalar o phantomjs através do pacote <strong>webshot</strong> com o comando <code>webshot::install_phantomjs()</code>.</p>
<!-- ======================================================= -->
</section>
</section>
</section>
<section id="rstudio" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="rstudio"><span class="header-section-number">3.5</span> RStudio</h2>
<section id="se-orientando-no-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="se-orientando-no-rstudio">Se orientando no RStudio</h3>
<p><strong>Primeiramente, abra o RStudio.</strong> Como os ícones deles podem ser muito parecidos, certifique-se de que você está abrindo mesmo o <em>RStudio</em> e não R.</p>
<p>Para que o RStudio funcione, você também deve ter R instalado no computador (veja acima as instruções de instalação).</p>
<p><strong>RStudio</strong> é uma interface (GUI) para facilitar o uso de <strong>R</strong>. Você pode pensar em R como sendo o motor de um veículo, fazendo o trabalho crucial, e RStudio como a carroceria do veículo (com assentos, acessórios, etc.) que ajuda você realmente a usar o motor para seguir em frente! Você pode ver a ficha completa da interface de usuário do RStudio (PDF) <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">aqui</a></p>
<p>Por padrão, o RStudio exibe quatro painéis retangulares.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/RStudio_overview.PNG" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../images/RStudio_overview.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: black;"><strong><em>DICA:</em></strong> Se o seu RStudio mostrar apenas um painel esquerdo, é porque não há nenhum script aberto ainda</span></p>
<p><strong>O Painel Fonte (Source)</strong> Este painel, por padrão localizado na parte superior esquerda, é um espaço onde é possível editar, executar e salvar seus <a href="#scripts">scripts</a>. Os scripts contêm os comandos que você deseja executar. Este painel também pode exibir conjuntos de dados (quadros de dados) para visualização.</p>
<p>Para usuários da Stata, este painel é similar às janelas de seu Do-file e Data Editor.</p>
<p><strong>O Painel do Console R</strong></p>
<p>O Console R, ou simplesmente Console, é por padrão o painel esquerdo ou inferior esquerdo do RStudio. Ele é a casa do “motor” de R. É aqui que os comandos são realmente executados e as saídas não gráficas e as mensagens de erro/aviso aparecem. Você pode digitar e executar comandos diretamente no Console, mas perceba que estes comandos não são salvos como são ao executar comandos de um script.</p>
<p>Se você está familiarizado com Stata, o Console R é como a Janela de Comando e também a Janela de Resultados.</p>
<p><strong>O Painel Ambiente (Environment)</strong></p>
<p>Este painel, por padrão na parte superior direita, é mais freqüentemente usado para ver resumos breves de <a href="#objetos">objetos</a> no Ambiente R na sessão atual. Estes objetos podem incluir conjuntos de dados importados, modificados ou criados, parâmetros que você definiu (por exemplo, uma semana epidemiológica específica para a análise), ou vetores ou listas que você definiu durante a análise (por exemplo, nomes de regiões). Você pode clicar na seta ao lado de um nome de data frame para ver suas variáveis.</p>
<p>No Stata, isto é mais parecido com a janela Gerenciador de Variáveis.</p>
<p>Este painel também contém a aba <em>History</em> onde você pode ver comandos que você pode ver anteriormente. Tem também uma aba “Tutorial” onde você pode completar tutoriais R interativos se você tiver o pacote <strong>learnr</strong> instalado. Tem também um painel “Conections” para conexões externas, e pode ter um painel “Git” se você optar por fazer interface com o Github.</p>
<p><strong>Paineis: Gráficos (Plots), Visualizador (Viewer), Pacotes (Packages), Ajuda (Help)</strong></p>
<p>O painel inferior-direito inclui várias abas importantes. Gráficos típicos, incluindo mapas, serão exibidos no painel Plo. Saídas interativas ou HTML serão exibidas no painel do Visualizador (Viewer). O painel de Ajuda (Help) pode exibir documentação e arquivos de ajuda. O painel Arquivos (Files) é um navegador que pode ser usado para abrir ou excluir arquivos. O painel Pacotes (Packages) permite ver, instalar, atualizar, excluir, carregar/descarregar pacotes R, e ver qual versão do pacote você tem. Para saber mais sobre pacotes, veja a <a href="#packages">seção pacotes</a> abaixo.</p>
<p>Este painel contém os equivalentes Stata das janelas Plots Manager e Project Manager.</p>
</section>
<section id="configurações-do-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="configurações-do-rstudio">Configurações do RStudio</h3>
<p>Altere as configurações e a aparência do RStudio no menu suspenso <em>Ferramentas</em> (Tools), selecionando <em>Opções Globais</em> (Global Options). Lá você pode alterar as configurações padrão, incluindo a cor da aparência/fundo.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/RStudio_tools_options_1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/RStudio_tools_options.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Restart (Reiniciar)</strong></p>
<p>Se seu R travar, você pode reiniciar o R indo ao menu Sessão (Session) e clicando em “Reiniciar R” (Restart R). Isto evita o incômodo de fechar e abrir o RStudio. Tudo em seu ambiente R será removido quando você fizer isso.</p>
</section>
<section id="atalhos-no-teclado" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="atalhos-no-teclado">Atalhos no teclado</h3>
<p>Alguns atalhos de teclado muito úteis estão abaixo. Veja todos os atalhos de teclado para Windows, Mac e Linux na segunda página deste RStudio <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">cheatsheet da interface do usuário</a>.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>Windows/Linux</th>
<th>Mac</th>
<th>Ação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Esc</td>
<td>Esc</td>
<td>Interrompe comando atual <br> (útil se você acidentalmente executou um comando incompleto e não pode escapar de ver o “+” no console R)</td>
</tr>
<tr class="even">
<td>Ctrl+s</td>
<td>Cmd+s</td>
<td>Salva (script)</td>
</tr>
<tr class="odd">
<td>Tab</td>
<td>Tab</td>
<td>Auto-completa</td>
</tr>
<tr class="even">
<td>Ctrl + Enter</td>
<td>Cmd + Enter</td>
<td>Roda a(s) linha(s) atual(is)/seleção de código</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + C</td>
<td>Cmd + Shift + c</td>
<td>comenta/descomenta as linhas selecionadas</td>
</tr>
<tr class="even">
<td>Alt + -</td>
<td>Option + -</td>
<td>Insere <code>&lt;-</code></td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + m</td>
<td>Cmd + Shift + m</td>
<td>Insere <code>%&gt;%</code></td>
</tr>
<tr class="even">
<td>Ctrl + l</td>
<td>Cmd + l</td>
<td>Limpa o console</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + b</td>
<td>Cmd + Option + b</td>
<td>Roda do início até a linha atual</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + t</td>
<td>Cmd + Option + t</td>
<td>Roda a seção de código atual (R Markdown)</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + i</td>
<td>Cmd + Shift + r</td>
<td>Insere chunk de código (no R Markdown)</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + c</td>
<td>Cmd + Option + c</td>
<td>Roda o chunk atual (R Markdown)</td>
</tr>
<tr class="odd">
<td>up/down arrows in R console</td>
<td>Same</td>
<td>Alterna entre os comandos executados recentemente</td>
</tr>
<tr class="even">
<td>Shift + up/down arrows in script</td>
<td>Same</td>
<td>Seleciona múltiplas linhas de código</td>
</tr>
<tr class="odd">
<td>Ctrl + f</td>
<td>Cmd + f</td>
<td>Procura e substitui no script atual</td>
</tr>
<tr class="even">
<td>Ctrl + Shift + f</td>
<td>Cmd + Shift + f</td>
<td>Encontra em arquivos (pesquisa/substitui em vários script)</td>
</tr>
<tr class="odd">
<td>Alt + l</td>
<td>Cmd + Option + l</td>
<td>Oculta código atual</td>
</tr>
<tr class="even">
<td>Shift + Alt + l</td>
<td>Cmd + Shift + Option+l</td>
<td>Exibe código sele</td>
</tr>
</tbody>
</table>
<p><span style="color: darkgreen;"><strong><em>DICA:</em></strong> Use sua tecla Tab ao digitar para ativar a funcionalidade de auto-completar do RStudio. Isto pode evitar erros ortográficos. Pressione Tab enquanto digita para produzir um menu suspenso de funções e objetos prováveis, com base no que você digitou até agora.</span></p>
<!-- ======================================================= -->
</section>
</section>
<section id="functions" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="functions"><span class="header-section-number">3.6</span> Funções</h2>
<p>As funções estão no cerne do uso de R. As funções são a forma como você executa tarefas e operações. Muitas funções vêm instaladas com R, muitas mais estão disponíveis para download em <em>packages</em> (explicado na seção <a href="#packages">pacotes</a>), e você pode até mesmo escrever suas próprias funções personalizadas!</p>
<p>Esta seção básica sobre funções explica:</p>
<ul>
<li>O que é uma função e como funcionam</li>
<li>O que são os <em>argumentos/parâmetros</em> de uma função</li>
<li>Como conseguir ajuda para compreender uma função</li>
</ul>
<p><em>Uma nota rápida sobre a sintaxe:</em> Neste manual, as funções são escritas em texto de código com parênteses abertos, como este: <code>filter()</code>. Como explicado na seção <a href="#packages">pacotes</a>, as funções são baixadas dentro de <em>pacotes</em>. Neste manual, os nomes dos pacotes são escritos em <strong>negrito</strong>, como <strong>dplyr</strong>. Às vezes, no código de exemplo, você pode ver o nome da função ligado explicitamente ao nome de seu pacote com um par de dois-pontos (<code>::</code>) como este: <code>dplyr::filter()</code>. O propósito desta ligação é explicado na seção de pacotes.</p>
<!-- ======================================================= -->
<section id="funções-simples" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="funções-simples">Funções simples</h3>
<p><strong>Uma função é como uma máquina que recebe entradas, faz alguma ação com essas entradas e produz uma saída.</strong> O que é a saída depende da função.</p>
<p><strong>Funções normalmente operam sobre algum objeto colocado dentro dos parênteses da função</strong>. Por exemplo, a função <code>sqrt()</code> calcula a raiz quadrada de um número:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>O objeto fornecido a uma função também pode ser uma coluna em um conjunto de dados (veja a seção <a href="#objetos">Objetos</a> para detalhes sobre todos os tipos de objetos). Como R pode armazenar vários conjuntos de dados, será necessário especificar tanto o conjunto de dados quanto a coluna. Uma maneira de fazer isso é utilizar a notação <code>$</code> para ligar o nome do conjunto de dados e o nome da coluna (<code>dataset$coluna</code>). No exemplo abaixo, a função <code>summary()</code> é aplicada à coluna numérica <code>age</code> (idade) no conjunto de dados <code>linelist</code>, e a saída é um resumo dos valores numéricos e valores ausentes da coluna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Imprimir estatísticas resumidas da coluna 'age' (idade) no conjunto de dados 'linelist'.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> Nos bastidores, uma função representa um código adicional complexo que foi condensado para o usuário em um comando fácil.</span></p>
<!-- ======================================================= -->
</section>
<section id="funções-com-argumentos-múltiplos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="funções-com-argumentos-múltiplos">Funções com argumentos múltiplos</h3>
<p>As funções frequentemente pedem várias entradas, chamadas <strong><em>argumentos</em></strong>, ou <strong>parâmetros</strong>, localizadas dentro dos parênteses da função, geralmente separadas por vírgulas.</p>
<ul>
<li>Alguns argumentos são necessários para que a função funcione corretamente, outros são opcionais</li>
<li>Argumentos opcionais têm configurações padrão</li>
<li>Os argumentos podem ter caráter, numérico, lógico (TRUE/FALSE)(<em>verdadeiro/falso</em>), e outros inputs</li>
</ul>
<p>Aqui está uma função ficcional divertida, chamada <code>oven_bake()</code> ( do inglês: assar no forno), como um exemplo de uma função típica. Ela pega um objeto de entrada (por exemplo, um conjunto de dados, ou neste exemplo “dough” - massa) e realiza operações sobre ele como especificado por argumentos adicionais (<code>minutes =</code> e <code>temperature =</code>). A saída pode ser impressa para o console, ou salva como um objeto utilizando o operador de atribuição <code>&lt;-</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Function_Bread_Example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/Function_Bread_Example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Em um exemplo mais realístico</strong>, o comando <code>age_pyramid()</code> abaixo produz uma pirâmide etária baseado em faixas-etárias e uma coluna divisória binária, como <code>gender</code> (gênero). A função recebe três argumentos dentro dos parênteses, separados por vírgulas. Os valores fornecidos aos argumentos estabelecem <code>linelist</code> como o quadro de dados a utilizar, <code>age_cat5</code> como a coluna a contar, e <code>gender</code> como a coluna binária a utilizar para dividir a pirâmide por cor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crie uma pirâmide etária</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(<span class="at">data =</span> linelist, <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="at">split_by =</span> <span class="st">"gender"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.pt_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="basics.pt_files/figure-html/unnamed-chunk-6-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>O comando acima pode ser escrito de forma equivalente ao abaixo, em um estilo mais longo com uma nova linha para cada argumento. Este estilo pode ser mais fácil de ler, e mais fácil de escrever “comentários” com <code>#</code> para explicar cada parte (comentar extensivamente é uma boa prática!). Para executar este comando mais longo, você pode destacar todo o comando e clicar em “Run”, ou simplesmente colocar o cursor na primeira linha e, em seguida, pressionar simultaneamente as teclas Ctrl e Enter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crie uma pirâmide etária</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> linelist,        <span class="co"># Use a linelist de casos</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="co"># disponibilize a coluna de faixa-etária</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"gender"</span>     <span class="co">#usee a coluna de gênero para criar dois lados da pirâmide </span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.pt_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="basics.pt_files/figure-html/unnamed-chunk-7-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>A primeira metade de uma atribuição de argumentos (por exemplo, <code>dados =</code>) não precisa ser especificada se os argumentos forem escritos em uma ordem específica (especificada na documentação da função). O código abaixo produz exatamente a mesma pirâmide que o acima, porque a função espera a ordem dos argumentos: quadro de dados, variável <code>age_group</code>, variável <code>split_by</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Esse comando retorna o mesmo gráfico gerado acima</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(linelist, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Um comando mais complexo de <code>age_pyramid()</code> poderia incluir os argumentos <em>opcionais</em> para:</strong></p>
<ul>
<li>Mostrar proporções em vez de contagens (definir <code>proportional = TRUE</code> quando o padrão é <code>FALSE</code>)</li>
<li>Especifique as duas cores a serem utilizadas (<code>pal =</code> é a abreviação de “paleta” e é fornecido com um vetor de dois nomes de cores. Veja a página <a href="#objetos">objetos</a> para saber como a função <code>c()</code> faz um vetor)</li>
</ul>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> Para argumentos que você especificar com ambas as partes do argumento (por exemplo, <code>proportional = TRUE</code>), sua ordem entre todos os argumentos não importa.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  linelist,                    <span class="co"># use a linelist de casos</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age_cat5"</span>,                  <span class="co"># coluna de faixa-etária</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gender"</span>,                    <span class="co"># divida por gênero</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportional =</span> <span class="cn">TRUE</span>,         <span class="co"># porcentagem em vez de contagens</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"purple"</span>)  <span class="co"># cores</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.pt_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="basics.pt_files/figure-html/unnamed-chunk-8-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="escrevendo-funções" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="escrevendo-funções">Escrevendo funções</h3>
<p>R é uma linguagem que é orientada em torno de funções, portanto você deve se sentir capacitado para escrever suas próprias funções. A criação de funções traz várias vantagens:</p>
<ul>
<li>Para facilitar a programação modular - a separação do código em peças independentes e gerenciáveis</li>
<li>Substituir o processo repetitivo de copia e cola, que pode ser propenso a erros.</li>
<li>Dar nomes memoráveis aos pedaços de código</li>
</ul>
<p>Como escrever uma função é abordado em profundidade na página <a href="writing_functions.pt.html">Escrevendo funções</a>.</p>
<!-- A function is given a name and defined with the assignment operator `<-` to a special **base** R function called `function()`. Within the parentheses, the arguments that the function will accept are defined. This is followed by curly brackets `{ }`, within which the actual code of the function is written.     -->
<!-- The arguments should be provided in the syntax `argument = default`, separated by commas.   -->
<!-- Here is an example where we create a function `staff_calc()` to serve as a staffing calculator for COVID-19 case investigation and contact tracing calls.   -->
<!-- The arguments (inputs) and their default values will be:   -->
<!-- * `daily_cases = NULL` The number of new COVID-19 cases per day   -->
<!-- * `contacts_each = 5` The number contacts enumerated for each case   -->
<!-- * `time_case = 0.5`  Number of hours to complete a case investigaton by phone   -->
<!-- * `time_contact = 0.25`  Number of hours to complete a contact follow-up by phone   -->
<!-- * `time_day = 8` The number of hours one staff works per day   -->
<!-- Below, the function is created. The code ends with the special function `return()`, which is what the function produces.    -->
<!-- ```{r message=FALSE, warning=FALSE, out.width = "75%", out.height="75%"} -->
<!-- staff_calc <- function(daily_cases = NULL, contacts_each = 5, -->
<!--                        time_case = 0.5, time_contact = 0.25, time_day = 8){ -->
<!--   # Define total daily hours for calling cases -->
<!--   case_hours <- daily_cases * time_case  -->
<!--   # Define total daily hours for calling contacts -->
<!--   contact_hours <- daily_cases * contacts_each * time_contact -->
<!--   # Calculate number of staff required -->
<!--   staff_required <- (case_hours + contact_hours)/time_day -->
<!--   return(staff_required) -->
<!-- } -->
<!-- ``` -->
<!-- Once this code is run, the function will be defined and will appear in the R Environment. We can run the function. Below all the default values are used and the `daily_cases = ` is set to 150.   -->
<!-- There are many other nuances to understand when writing functions, as discussed in the page [Writing functions].   -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="packages" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="packages"><span class="header-section-number">3.7</span> Pacotes</h2>
<p><strong>Pacotes contém funções.</strong></p>
<p>Um pacote R é um pacote compartilhável de código e documentação que contém funções pré-definidas. Os usuários da comunidade R desenvolvem pacotes o tempo todo, atendendo a problemas específicos, e é provável que alguém possa ajudar com seu trabalho inclusive! Você com certeza irá instalar e usar centenas de pacotes em seu uso de R.</p>
<p>Na instalação, o R contém pacotes de <strong>“base”</strong> e funções que executam tarefas elementares e comuns. Mas muitos usuários do R criam funções especializadas, que são verificadas pela comunidade R e que você pode baixar como um <strong>package</strong> (pacote) para seu próprio uso. Neste manual, os nomes dos pacotes estão escritos em <strong>negrito</strong>. Um dos aspectos mais desafiadores do R é que muitas vezes há muitas funções ou pacotes a serem escolhidos para complementar uma determinada tarefa.</p>
<section id="instalar-e-carregar" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instalar-e-carregar">Instalar e carregar</h3>
<p><em>As funções</em> estão contidas nos <strong>pacotes</strong> que podem ser baixados (“instalados”) para seu computador a partir da Internet. Uma vez que um pacote é baixado, ele é armazenado em sua “biblioteca” (do inglês, <em>library</em>). Você pode então acessar as funções que ele contém durante sua sessão R atual “carregando” este pacote.</p>
<p><em>Pense em R como sua biblioteca pessoal</em>: Quando você baixa um pacote, sua biblioteca ganha um novo livro de funções, mas cada vez que você quiser usar uma função naquele livro, você deve pegar emprestado (“carregar”) aquele livro de sua biblioteca.</p>
<p>Em resumo: para usar as funções disponíveis em um pacote R, duas etapas devem ser implementadas:</p>
<ol type="1">
<li><p>O pacote precisa ser <strong>instalado</strong> (uma vez), <em>e</em></p></li>
<li><p>O pacote precisa ser <strong>carregado</strong> (a cada sessão de R que abrir)</p></li>
</ol>
<section id="sua-biblioteca" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="sua-biblioteca">Sua biblioteca</h4>
<p>Sua “biblioteca” é na verdade uma pasta em seu computador, contendo uma subpasta para cada pacote que foi instalado. Descubra onde R está instalado em seu computador, e procure uma pasta chamada “win-library”. Por exemplo: <code>R\win-library\4.0</code> (a 4.0 é a versão R - você terá uma biblioteca diferente para cada versão R que você baixou).</p>
<p>Você pode exibir (“printar”) o caminho do arquivo para sua biblioteca digitando <code>.libPaths()</code> (parênteses vazios). Isto se torna especialmente importante se você trabalhar com <a href="network_drives.pt.html">R em unidades de rede</a>.</p>
</section>
<section id="instalar-do-cran" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="instalar-do-cran">Instalar do CRAN</h4>
<p>Na maioria das vezes, os usuários R baixam pacotes da CRAN. CRAN (Comprehensive R Archive Network) é um repositório público on-line de pacotes R que foram publicados por membros da comunidade R.</p>
<p>Você está preocupado com vírus e segurança ao fazer o download de um pacote da CRAN? Leia <a href="https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security">este artigo</a> sobre o assunto.</p>
</section>
<section id="como-instalar-e-carregar" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="como-instalar-e-carregar">Como instalar e carregar</h4>
<p>Neste manual, sugerimos o uso do pacote <strong>pacman</strong> (abreviação para “package manager” que significa “gerenciador de pacotes” em inglês). Ele oferece uma função conveniente <code>p_load()</code> que instalará um pacote se necessário <em>e</em> o carregará para utilização na sessão R atual.</p>
<p>A sintaxe é bastante simples. Basta listar os nomes dos pacotes dentro dos parênteses <code>p_load()</code>, separados por vírgulas. Este comando instalará os pacotes <strong>rio</strong>, <strong>tidyverse</strong>, e <strong>here</strong> se ainda não estiverem instalados, e os carregará para utilização. Isto torna a abordagem <code>p_load()</code> conveniente e concisa se compartilhar scripts com outros. Observe que os nomes dos pacotes são sensíveis a maiúsculas e minúsculas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instala (se necessário) e os carrega para o uso</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rio, tidyverse, here)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note que utilizamos a sintaxe <code>pacman::p_load()</code> que escreve explicitamente o nome do pacote (<strong>pacman</strong>) antes do nome da função (<code>p_load()</code>), conectado por duas colunas <code>::</code>. Esta sintaxe é útil porque também carrega o pacote <strong>pacman</strong> (assumindo que já esteja instalado).</p>
<p>Existem funções alternativas do R <strong>base</strong> que você verá com freqüência. A função do R <strong>base</strong> para instalar um pacote é <code>install.packages()</code>. O nome do pacote a ser instalado deve ser fornecido entre parênteses <em>em aspas</em>. Se você quiser instalar vários pacotes em um comando, eles devem ser listados dentro de um vetor de caracteres <code>c()</code>.</p>
<p>Nota: este comando <em>instala</em> um pacote, mas <em>não</em> o carrega para utilização na sessão atual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># essa função disponível no R base instala um único pacote </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install multiple packages with base R</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"rio"</span>, <span class="st">"here"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A instalação também pode ser feita clicando e apontando para o painel “Pacotes” do RStudio e clicando em “Instalar” e procurando pelo nome do pacote desejado.</p>
<p>A função do R <strong>base</strong> para <strong>carregar</strong> um pacote para utilização (após ter sido instalado) é <code>library()</code>. Ela pode carregar apenas um pacote de cada vez (outro motivo para utilizar <code>p_load()</code>). Você pode fornecer o nome do pacote com ou sem aspas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># com o R base, você pode carregar os pacotes dessa forma </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para verificar se um pacote está instalado e/ou carregado, você pode visualizar o painel de Pacotes no RStudio. Se o pacote estiver instalado, ele é mostrado lá com o número da versão. Se sua caixa for marcada, ela é carregada para a sessão atual.</p>
<p><strong>Instalar a partir do Github</strong>.</p>
<p>Às vezes, você precisa instalar um pacote que ainda não está disponível na CRAN. Ou talvez o pacote esteja disponível na CRAN, mas você quer a versão <em>em desenvolvimento</em> com novos recursos ainda não oferecidos na versão publicada mais estável da CRAN. Estes são frequentemente hospedados no site <a href="https://github.com/">github.com</a> em um “repositório” de código gratuito e voltado para o público. Leia mais sobre Github na página do manual <a href="collaboration.pt.html">Controle de versão e colaboração com Git e Github</a>.</p>
<p>Para baixar os pacotes R do Github, você pode utilizar a função <code>p_load_gh()</code> do <strong>pacman</strong>, que instalará o pacote se necessário, e o carregará para utilização em sua sessão R atual. As alternativas para instalar incluem a utilização dos pacotes <strong>remotes</strong> ou <strong>devtools</strong>. Leia mais sobre todas as funções <strong>pacman</strong> na <a href="https://cran.r-project.org/web/packages/pacman/pacman.pdf">documentação do pacote</a>.</p>
<p>Para instalar a partir do Github, você precisa fornecer mais informações. Você tem que fornecer:</p>
<ol type="1">
<li><p>A identificação do proprietário do repositório Github</p></li>
<li><p>O nome do repositório que contém o pacote</p></li>
<li><p><em>(opcional) O nome do “ramo” (o “branch” da versão de desenvolvimento específico) que você deseja baixar</em></p></li>
</ol>
<p>Nos exemplos abaixo, a primeira palavra entre aspas representa a ID do Github do proprietário do repositório, após a barra é o nome do repositório (o nome do pacote).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instala/carrega o pacote epicontacts do seu repositório Github </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se você quiser instalar de um “branch” (versão) diferente da principal, adicione o nome do “branch” após um “@”, após o nome do repositório.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instale o "branch"(ramo) "timeline" do pacte epicontacts do Github</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts@timeline"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se não houver diferença entre a versão do Github e a versão em seu computador, nenhuma ação será tomada. Você pode “forçar” uma reinstalação utilizando <code>p_load_current_gh()</code> com o argumento <code>update = TRUE</code>. Leia mais sobre <strong>pacman</strong> nesta <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">vinheta online</a></p>
<p><strong>Instale a partir de ZIP ou TAR</strong></p>
<p>Você poderia instalar um pacote de um endereço URL:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>packageurl <span class="ot">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(packageurl, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ou, faça o download dele para seu computador em um arquivo comprimido (“zipado”):</p>
<p>Opção 1: usando<code>install_local()</code> do pacote <strong>remotes</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_local</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Opção 2: usando <code>install.packages()</code> do R <strong>base</strong>, fornecendo o caminho do arquivo comprimido e configurando os parâmetros <code>type = "source</code> e <code>repos = NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sintaxe-do-código" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sintaxe-do-código">Sintaxe do código</h3>
<p>For clarity in this handbook, functions are sometimes preceded by the name of their package using the <code>::</code> symbol in the following way: <code>package_name::function_name()</code></p>
<p>Once a package is loaded for a session, this explicit style is not necessary. One can just use <code>function_name()</code>. However writing the package name is useful when a function name is common and may exist in multiple packages (e.g.&nbsp;<code>plot()</code>). Writing the package name will also load the package if it is not already loaded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Este comando usa o pacote "rio" e sua função   "import()" para importar uma base de dados.</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"linelist.xlsx"</span>, <span class="at">which =</span> <span class="st">"Sheet1"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="auxílio-para-as-funções" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="auxílio-para-as-funções">Auxílio para as funções</h3>
<p>Para maior clareza neste manual, as funções são algumas vezes precedidas pelo nome de seu pacote utilizando o símbolo <code>::</code> da seguinte forma: <code>nome_do_pacote::nome_da_função()</code></p>
<p>Uma vez carregado um pacote para uma sessão, este estilo explícito não é mais necessário. Pode-se simplesmente utilizar <code>nome_da_função()</code>. Entretanto, escrever o nome do pacote é útil quando um nome de função é muito comum e pode existir em vários pacotes (por exemplo, <code>plot()</code>). Escrever o nome do pacote também irá carregar o pacote se ele ainda não estiver carregado.</p>
</section>
<section id="atualizando-pacotes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="atualizando-pacotes">Atualizando pacotes</h3>
<p>Você pode atualizar os pacotes, reinstalando-os. Você também pode clicar no botão verde “Atualizar” em seu painel de Pacotes RStudio para ver quais pacotes têm novas versões para instalar. Esteja ciente de que seu código antigo pode precisar ser atualizado se houver uma grande revisão de como uma função funciona!</p>
</section>
<section id="apagar-pacotes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="apagar-pacotes">Apagar pacotes</h3>
<p>Utilize <code>p_delete()</code> de <strong>pacman</strong>, ou <code>remove.packages()</code> do R <strong>base</strong>. Alternativamente, procure a pasta que contém sua biblioteca e exclua manualmente a pasta.</p>
</section>
<section id="dependências" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="dependências">Dependências</h3>
<p>Os pacotes muitas vezes dependem de outros pacotes para funcionar. Estes são chamados de dependências. Se uma dependência falhar na instalação, então o pacote dependendo dela também pode falhar na instalação.</p>
<p>Veja as dependências de um pacote com <code>p_depends()</code>, e veja quais pacotes dependem dele com <code>p_depends_reverse()</code>.</p>
</section>
<section id="funções-mascaradas" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="funções-mascaradas">Funções mascaradas</h3>
<p>Não é raro que dois ou mais pacotes contenham o mesmo nome de função. Por exemplo, o pacote <strong>dplyr</strong> tem uma função <code>filter()</code>, mas o pacote <strong>stats</strong> também. A função padrão <code>filter()</code> depende da ordem em que estes pacotes são carregados primeiro na sessão R - a última será o padrão para o comando <code>filter()</code>.</p>
<p>Você pode verificar a ordem em seu painel Environment (Ambiente) do R Studio - clique no menu suspenso para Global Environment (“Ambiente Global”) e veja a ordem dos pacotes. Funções de pacotes <em>mais abaixo</em> nessa lista suspensa mascararão funções com o mesmo nome em pacotes que aparecem mais altos na lista suspensa. Ao carregar um pacote pela primeira vez, R avisará no console se estiver ocorrendo mascaramento, mas isto pode ser fácil de perder.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/masking_functions.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/masking_functions.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="1">
<li>Especifique o nome do pacote no comando. Por exemplo, utilize <code>dplyr::filter()</code></li>
<li>Reorganize a ordem na qual os pacotes são carregados (por exemplo, dentro de <code>p_load()</code>), e <em>inicie uma nova sessão R</em>.</li>
</ol>
</section>
<section id="desprender-descarregar" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="desprender-descarregar">Desprender / descarregar</h3>
<p>Para separar (descarregar) um pacote, use este comando, com o nome correto do pacote e apenas um “dois pontos”. Note que isto pode não resolver o mascaramento.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>PACKAGE_NAME_HERE, <span class="at">unload=</span><span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="instalar-uma-versão-mais-antiga" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instalar-uma-versão-mais-antiga">Instalar uma versão mais antiga</h3>
<p>Veja este <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">guia</a> para instalar uma versão mais antiga de um pacote em particular.</p>
</section>
<section id="pacotes-sugeridos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="pacotes-sugeridos">Pacotes sugeridos</h3>
<p>Veja a página em <a href="packages_suggested.pt.html">Pacotes sugeridos</a> para uma listagem de pacotes que recomendamos para o dia-a-dia em epidemiologia.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="scripts" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="scripts"><span class="header-section-number">3.8</span> Scripts</h2>
<p>Os scripts (que significa “roteiro” em inglês) são uma parte fundamental da programação. Eles são documentos que contêm seus comandos (por exemplo, funções para criar e modificar conjuntos de dados, visualizações de impressão, etc.). Você pode salvar um script e executá-lo novamente mais tarde. Há muitas vantagens em armazenar e executar seus comandos a partir de um script (versus digitar comandos um a um na “linha de comando” do console R):</p>
<ul>
<li>Portabilidade - você pode compartilhar seu trabalho com outros enviando-lhes seus scripts<br>
</li>
<li>Reprodutibilidade - para que você e outros saibam exatamente o que você fez</li>
<li>Controle de versão - para que você possa acompanhar as mudanças feitas por você ou colegas<br>
</li>
<li>Comentando/anotando - para explicar a seus colegas o que você tem feito</li>
</ul>
<section id="comentando" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="comentando">Comentando</h3>
<p>Em um script você também pode anotar (“fazer comentários”) ao longo do seu código R. Comentar é útil para explicar a si mesmo e aos outros leitores o que você está fazendo. Você pode adicionar um comentário digitando o símbolo “hashtag” (#) e escrevendo seu comentário depois dele. O texto comentado aparecerá em uma cor diferente da do código R.</p>
<p>Qualquer código escrito após o # não será executado. Portanto, colocar um # antes do código também é uma maneira útil de bloquear temporariamente uma linha de código (“comentar fora”) se você não quiser apagá-lo). Você pode fazer isso em várias linhas ao mesmo tempo, selecionando-as e pressionando Ctrl+Shift+c (Cmd+Shift+c no Mac).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Um comentário pode ser uma linha por si só</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># importar dados</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"linelist_raw.xlsx"</span>) <span class="sc">%&gt;%</span>   <span class="co"># também pode ser após o código</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(age &gt; 50)                          # também pode ser usado para desativar uma linha de código</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Comente sobre <em>o que</em> você está fazendo e sobre <strong>por que</strong> você está fazendo.</li>
<li>Divida seu código em seções lógicas…</li>
<li>Acompanhe seu código com uma descrição passo a passo em texto do que você está fazendo (por exemplo, passos numerados)</li>
</ul>
</section>
<section id="estilo" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="estilo">Estilo</h3>
<p>É importante estar consciente de seu estilo de codificação - especialmente se estiver trabalhando em equipe. Defendemos o uso do <strong>tidyverse</strong> <a href="https://style.tidyverse.org/">guia de estilo</a>. Há também pacotes como <strong>styler</strong> e <strong>lintr</strong> que o ajudam a se adequar a este estilo.</p>
<p>Alguns pontos muito básicos para tornar seu código legível para outros:</p>
<p>* Ao nomear objetos, utilize apenas letras minúsculas, números e sublinhados <code>_</code>, por exemplo <code>my_data</code>. * Utilize espaços frequentes, inclusive ao redor dos operadores, por exemplo <code>n = 1</code> e <code>age_new &lt;- age_old + 3</code></p>
</section>
<section id="exemplo-de-script" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exemplo-de-script">Exemplo de Script</h3>
<p>Abaixo está um exemplo de um pequeno script R. Lembre-se, quanto melhor você explicar sucintamente seu código nos comentários, mais seus colegas vão gostar de você!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/example_script.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../images/example_script.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-markdown">R markdown</h3>
<p>Um script R markdown é um tipo de script R no qual o script em si <em>resulta</em> um documento de saída (PDF, Word, HTML, Powerpoint, etc.). Estas são ferramentas incrivelmente úteis e versáteis, freqüentemente usadas para criar relatórios dinâmicos e automatizados. Mesmo este website e manual são produzidos com um script R markdown!</p>
<p>Vale a pena notar que usuários iniciantes de R também podem usar R Markdown - não se intimidem! Para saber mais, consulte a página do manual nos documentos <a href="reportfactory.pt.html">Relatórios com R Markdown</a>.</p>
<!-- ======================================================= -->
</section>
<section id="notebooks-r" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="notebooks-r">Notebooks R</h3>
<p>Não há diferença entre escrever em um Rmarkdown versus um caderno R. Entretanto, a execução do documento difere ligeiramente. Consulte este <a href="http://uc-r.github.io/r_notebook">site</a> para obter mais detalhes.</p>
<!-- ======================================================= -->
</section>
<section id="shiny" class="level3" data-number="3.8.1">
<h3 data-number="3.8.1" class="anchored" data-anchor-id="shiny"><span class="header-section-number">3.8.1</span> Shiny</h3>
<p>Os aplicativos/websites shiny estão contidas em um script, que deve ser chamado de <code>app.R</code>. Este arquivo tem três componentes:</p>
<ol type="1">
<li>Uma interface de usuário (ui)<br>
</li>
<li>Uma função de servidor<br>
</li>
<li>Uma chamada para a função <code>shinyApp</code>.</li>
</ol>
<p>Veja a página do manual em <a href="shiny_basics.pt.html">Dashboards com Shiny</a>, ou este tutorial online: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Tutorial com shiny</a></p>
<p><em>Nos tempos mais antigos, o arquivo acima era dividido em dois arquivos (<code>ui.R</code> e <code>server.R</code>)</em></p>
</section>
<section id="código-dobrável" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="código-dobrável">Código dobrável</h3>
<p>Você pode colapsar/dobrar (do inglês <em>folding</em>) porções de código para facilitar a leitura de seu roteiro.</p>
<p>Para isso, crie um cabeçalho de texto com #, escreva seu cabeçalho, e siga-o com pelo menos 4 traços (-), hashes (#) ou igual a (=). Quando você tiver feito isto, uma pequena seta aparecerá na “sarjeta” à esquerda (pelo número da linha). Você pode clicar nesta seta e o código abaixo até o próximo cabeçalho cair e um ícone de seta dupla aparecerá em seu lugar.</p>
<p>Para expandir o código, clique novamente na seta na sarjeta, ou no ícone de duas fileiras. Há também atalhos de teclado como explicado na seção <a href="#rstudio">RStudio</a> desta página.</p>
<p>Ao criar cabeçalhos com #, você também ativará o Índice na parte inferior de seu script (veja abaixo) que você pode usar para navegar em seu script. Você pode criar subtítulos adicionando mais # símbolos, por exemplo, # para primário, # # para secundário e ### para terciário.</p>
<p>Abaixo estão duas versões de um script de exemplo. À esquerda está o original com os cabeçalhos comentados. À direita, quatro traços foram escritos após cada cabeçalho, tornando-os colapsáveis. Dois deles foram colapsados, e você pode ver que a Tabela de Conteúdos na parte inferior agora mostra cada seção.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../images/code_folding1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="../images/code_folding2.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Outras áreas de código que são automaticamente elegíveis para fazer esse “dobramento” incluem as regiões entre chaves <code>{ }</code> tais como definições de funções ou blocos condicionais ( declarações “if else”). Pode ler mais sobre dobramento de código no RStudio <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections">site</a>.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="diretório-de-trabalho" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="diretório-de-trabalho"><span class="header-section-number">3.9</span> Diretório de trabalho</h2>
<p>O diretório de trabalho é o local da pasta raiz usada por R para seu trabalho - onde R procura e salva arquivos por padrão. Por padrão, ele salvará novos arquivos e saídas para este local, e procurará por arquivos para importar (por exemplo, conjuntos de dados) também aqui.</p>
<p>O diretório de trabalho aparece em texto cinza na parte superior do painel do RStudio Console. Você também pode imprimir o diretório de trabalho atual executando <code>getwd()</code> (deixe os parênteses vazios).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/working_directory_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="../images/working_directory_1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="abordagem-recomendada" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="abordagem-recomendada">Abordagem recomendada</h3>
<p><strong>Veja a página sobre <a href="r_projects.pt.html">projetos R</a> para obter detalhes sobre nossa abordagem recomendada para gerenciar seu diretório de trabalho.</strong> Uma maneira comum, eficiente e sem problemas para gerenciar seu diretório de trabalho e caminhos de arquivos é combinar estes 3 elementos em um fluxo de trabalho orientado segundo <a href="r-projects.pt.qmd">projeto R</a></p>
<ol type="1">
<li>Um projeto R para armazenar todos os seus arquivos (ver página em <a href="r_projects.pt.html">projetos R</a>)<br>
</li>
<li>O pacote <strong>here</strong> para localização de arquivos (ver página em <a href="importing.pt.html">Importação e exportação</a>)<br>
</li>
<li>O pacote <strong>rio</strong> para arquivos de importação/exportação (ver página em <a href="importing.pt.html">Importação e exportação</a>)</li>
</ol>
<!-- ======================================================= -->
</section>
<section id="definido-por-comando" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="definido-por-comando">Definido por comando</h3>
<p>Até recentemente, muitas pessoas aprendendo R eram ensinadas a começar seus roteiros com um comando <code>setwd()</code>. Em vez disso, considere a utilização de um fluxo de trabalho orientados segundo <a href="r_projects.pt.html">projeto R</a> e leia as <a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/">razões para não utilizar <code>setwd()</code></a>. Em resumo, seu trabalho torna-se específico para seu computador, os caminhos de arquivos utilizados para importar e exportar arquivos tornam-se ” frágeis”, e isso dificulta seriamente a colaboração e a utilização de seu código em qualquer outro computador. Existem alternativas fáceis!</p>
<p>Como observado acima, embora não recomendamos esta abordagem na maioria das circunstâncias, você pode utilizar o comando <code>setwd()</code> com o caminho do arquivo da pasta desejada escrito entre aspas, como no exemplo abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Documents/R Files/My analysis"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: red;"><strong><em>PERIGO:</em></strong> Definir um diretório de trabalho com <code>setwd()</code> <em>pode</em> ser “frágil” se o caminho do arquivo for específico para um computador. Em vez disso, use caminhos de arquivo relativos a um diretório raiz do R Project (com o pacote <strong>here</strong>).</span></p>
<!-- ======================================================= -->
</section>
<section id="definindo-manualmente" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="definindo-manualmente">Definindo manualmente</h3>
<p>Para definir o diretório de trabalho manualmente (que seria o equivalente de apontar e clicar de <code>setwd()</code>), clique no menu suspenso Sessão (<em>Session</em>) e vá para “Definir diretório de trabalho” (<em>Set Workig Directory</em>) e depois “Escolher diretório” (<em>Choose Directory</em>). Isso definirá o diretório de trabalho para essa sessão específica do R. Nota: se estiver usando esta abordagem, você terá que fazer isso manualmente toda vez que abrir o RStudio.</p>
<!-- ======================================================= -->
</section>
<section id="dentro-de-um-projeto-r" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="dentro-de-um-projeto-r">Dentro de um projeto R</h3>
<p>Se estiver usando um projeto R, o diretório de trabalho será padronizado para a pasta raiz do projeto R que contém o arquivo “.rproj”. Isso se aplicará se você abrir o RStudio clicando em abrir o Projeto R (o arquivo com extensão “.rproj”).</p>
<!-- ======================================================= -->
</section>
<section id="diretório-de-trabalho-em-r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="diretório-de-trabalho-em-r-markdown">Diretório de trabalho em R markdown</h3>
<p>Em um script R markdown, o diretório de trabalho padrão é a pasta na qual o arquivo Rmarkdown (<code>.Rmd</code>) é salvo. Se estiver usando um projeto R e um pacote <strong>here</strong>, isso não se aplica e o diretório de trabalho será <code>here()</code> conforme explicado na página <a href="r_projects.pt.html">projetos R</a>.</p>
<p>Se você quiser alterar o diretório de trabalho de um R markdown autônomo (não em um projeto R), se você usar <code>setwd()</code>, isso se aplicará apenas a esse trecho de código específico. Para fazer a alteração para todos os trechos de código em um markdown R, edite o trecho de configuração para adicionar o parâmetro <code>root.dir =</code>, como abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">'desired/directorypath'</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>É muito mais fácil usar apenas o markdown do R dentro de um projeto R e usar o pacote <strong>here</strong>.</p>
<!-- ======================================================= -->
</section>
<section id="fornecendo-o-caminho-dos-arquivos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="fornecendo-o-caminho-dos-arquivos">Fornecendo o caminho dos arquivos</h3>
<p>Talvez a fonte mais comum de frustração para um iniciante em R (pelo menos em uma máquina Windows) seja digitar um caminho de arquivo para importar ou exportar dados. Há uma explicação completa de como melhor inserir caminhos de arquivo na página <a href="importing.pt.html">Importar e exportar</a>, mas aqui estão alguns pontos-chave:</p>
<p><strong>Caminhos quebrados</strong></p>
<p>Abaixo está um exemplo de um caminho de arquivo “absoluto” ou “endereço completo”. Eles provavelmente quebrarão se forem usados por outro computador. Uma exceção é se você estiver usando uma unidade compartilhada/de rede.</p>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p><strong>Direção da barra</strong></p>
<p><em>Se digitar um caminho de arquivo, observe a direção das barras.</em> Use <em>barras normais</em> (<code>/</code>) para separar os componentes (“data/provincial.csv”). Para usuários do Windows, a maneira padrão de exibição dos caminhos de arquivo é com <em>barras invertidas</em> (ou contra-barra) (\) - portanto, você precisará alterar a direção de cada barra. Se você usar o pacote <strong>here</strong> conforme descrito na página <a href="r_projects.pt.html">projetos R</a>, a direção da barra não será um problema.</p>
<p><strong>Caminhos relativos</strong></p>
<p>Geralmente, recomendamos fornecer caminhos de arquivo “relativos” - ou seja, o caminho <em>relativo</em> à raiz do seu projeto R. Você pode fazer isso usando o pacote <strong>here</strong> conforme explicado na página <a href="r_projects.pt.html">projetos R</a>. Um caminho de arquivo relativo pode ser assim:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import csv linelist from the data/linelist/clean/ sub-folders of an R project</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelists"</span>, <span class="st">"marin_country.csv"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mesmo usando caminhos de arquivo relativos em um projeto R, você ainda pode usar caminhos absolutos para importar/exportar dados fora do seu projeto R.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="objects" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="objects"><span class="header-section-number">3.10</span> Objetos</h2>
<p>Tudo em R é um objeto, e R é uma linguagem “orientada a objetos”. Estas seções explicarão:</p>
<ul>
<li>Como criar objetos (<code>&lt;-</code>)</li>
<li>Tipos de objetos (por exemplo, quadros de dados, vetores..)<br>
</li>
<li>Como acessar subpartes de objetos (por exemplo, variáveis em um conjunto de dados)<br>
</li>
<li>Classes de objetos (por exemplo, numérico, lógico, inteiro, duplo, caractere, fator)</li>
</ul>
<!-- ======================================================= -->
<section id="tudo-é-um-objeto" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tudo-é-um-objeto">Tudo é um objeto</h3>
<p><em>Esta seção é adaptada do <a href="https://r4epis.netlify.app/training/r_basics/objects/">projeto R4Epis</a>.</em><br>
Tudo o que você armazena no R - conjuntos de dados, variáveis, uma lista de nomes de vilarejos, um número total da população, até saídas como gráficos - são <strong>objetos</strong> que recebem um <strong>nome</strong> e <strong>podem ser referenciados</strong> em comandos posteriores.</p>
<p>Um objeto existe quando você atribui um valor a ele (consulte a seção de atribuição abaixo). Quando lhe é atribuído um valor, o objeto aparece no Ambiente (<em>Environment</em>) (veja o painel superior direito do RStudio). Ele pode então ser operado, manipulado, alterado e redefinido.</p>
<!-- ======================================================= -->
</section>
<section id="definindo-objetos--" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="definindo-objetos--">Definindo objetos (<code>&lt;-</code>)</h3>
<p><strong>Crie objetos <em>atribuindo-lhes um valor</em> com o operador &lt;-.</strong><br>
Você pode pensar no operador de atribuição <code>&lt;-</code> como as palavras “é definido como”. Os comandos de atribuição geralmente seguem uma ordem padrão:</p>
<p><strong>nome_do_objeto</strong> &lt;- <strong>valor</strong> (ou processo/cálculo que produz um valor)</p>
<p>Por exemplo, você pode querer registrar a semana do relatório epidemiológico atual como um objeto para referência no código posterior. Neste exemplo, o objeto <code>semana_atual</code> é criado quando é atribuído o valor <code>"2018-W10"</code> (as aspas fazem disso um valor de caractere). O objeto <code>semana_atual</code> aparecerá no painel RStudio Environment (canto superior direito) e poderá ser referenciado em comandos posteriores.</p>
<p>Veja os comandos R e sua saída nas caixas abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>semana_atual <span class="ot">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># esse comando cria o objeto semana_atual ao atribuir a ele um valor </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>semana_atual                <span class="co"># esse comento exibe ("printa") o valor atual do objeto semana_atual no Console </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W10"</code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> Observe que o <code>[1]</code> na saída do console R está simplesmente indicando que você está visualizando o primeiro item da saída</span></p>
<p><span style="color: orange;"><strong><em>CUIDADO:</em></strong> <strong>O valor de um objeto pode ser sobrescrito</strong> a qualquer momento executando um comando de atribuição para redefinir seu valor. Assim, a <strong>ordem dos comandos executados é muito importante</strong>..</span></p>
<p>O comando a seguir irá redefinir o valor de <code>semana_atual</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>semana_atual <span class="ot">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># atribui um NOVO valor para o objeto semana_atual </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>semana_atual                <span class="co"># Exibe ("printa") o valor atual do objeto semana_atual no console </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W51"</code></pre>
</div>
</div>
<p><strong>Sinal de igual <code>=</code></strong></p>
<p>Você também verá sinais de igual no código R:</p>
<ul>
<li>Um sinal de igual duplo <code>==</code> entre dois objetos ou valores faz uma <em>pergunta</em> lógica: “isso é igual a isso?”.<br>
</li>
<li>Você também verá sinais de igual dentro de funções usadas para especificar valores de argumentos de função (leia sobre isso nas seções abaixo), por exemplo <code>max(age, na.rm = TRUE)</code>.<br>
</li>
<li>Você <em>pode</em> usar um único sinal de igual <code>=</code> no lugar de <code>&lt;-</code> para criar e definir objetos, mas isso é desencorajado. Você pode ler sobre por que isso é desencorajado <a href="https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/">aqui</a>.</li>
</ul>
<p><strong>Bases de dados</strong></p>
<p>Os conjuntos de dados também são objetos (geralmente “dataframes”) e devem receber nomes quando são importados. No código abaixo, o objeto <code>linelist</code> é criado e atribuído o valor de um arquivo CSV importado com o pacote <strong>rio</strong> e sua função <code>import()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># o objeto linelist é criado e a ele é atribuído o valor do arquivo CSV importado</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"my_linelist.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você pode ler mais sobre como importar e exportar conjuntos de dados na seção [Importar e exportar](#importing.</p>
<p><span style="color: orange;"><strong><em>CUIDADO:</em></strong> Uma nota rápida sobre a nomeação de objetos:</span></p>
<ul>
<li>Os nomes dos objetos não devem conter espaços, mas você deve usar sublinhado (_) ou um ponto (.) em vez de um espaço.<br>
</li>
<li>Os nomes dos objetos diferenciam maiúsculas de minúsculas (o que significa que Dataset_A é diferente de dataset_A).</li>
<li>Os nomes dos objetos devem começar com uma letra (não pode começar com um número como 1, 2 ou 3).</li>
</ul>
<p><strong>Saídas (Outputs)</strong></p>
<p>Saídas como tabelas e gráficos fornecem um exemplo de como as saídas podem ser salvas como objetos ou apenas exibidas (“printadas” no console) sem serem salvas. Uma tabulação cruzada de gênero e resultado usando a função do R <strong>base</strong> <code>table()</code> pode ser exibida diretamente no console R (<em>sem</em> ser salva).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exibe apenas no console R</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p>Mas a mesma tabela pode ser salva como um objeto nomeado. Então, opcionalmente, pode ser printado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>gen_out_table <span class="ot">&lt;-</span> <span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># printar</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>gen_out_table</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p><strong>Colunas</strong></p>
<p>As colunas em um conjunto de dados também são objetos e podem ser definidas, sobrescritas e criadas conforme descrito abaixo na seção Colunas.</p>
<p>Você pode usar o operador de atribuição do R <strong>base</strong> para criar uma nova coluna. Abaixo, a nova coluna <code>bmi</code> (IMC - Índice de Massa Corporal, do inglês <em>Body Mass Index</em>) é criada, e para cada linha o novo valor é resultado de uma operação matemática sobre o valor da linha nas colunas <code>wt_kg</code> e <code>ht_cm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar uma nova colna bmi (que é o valor de IMC) usando a sintaxe do R base</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>linelist<span class="sc">$</span>bmi <span class="ot">&lt;-</span> linelist<span class="sc">$</span>wt_kg <span class="sc">/</span> (linelist<span class="sc">$</span>ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No entanto, neste manual, enfatizamos uma abordagem diferente para definir colunas, que usa a função <code>mutate()</code> do pacote <strong>dplyr</strong> e <em>piping</em> com o operador pipe (<code>%&gt;%</code>). A sintaxe é mais fácil de ler e há outras vantagens explicadas na página em <a href="cleaning.pt.html">Limpeza de dados e principais funções</a>. Você pode ler mais sobre <em>tubulação</em> na seção Tubulação abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar uma nova colna bmi (que é o valor de IMC) usando a sintaxe do dplyr</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> wt_kg <span class="sc">/</span> (ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="estrutura-de-um-objeto" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="estrutura-de-um-objeto">Estrutura de um objeto</h3>
<p><strong>Os objetos podem ser um único dado (por exemplo, <code>meu_numero &lt;- 24</code>) ou podem consistir em dados estruturados.</strong></p>
<p>O gráfico abaixo é emprestado de <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">este tutorial R online</a>. Ele mostra algumas estruturas de dados comuns e seus nomes. Não estão incluídos nesta imagem os dados espaciais, que são discutidos na página <a href="gis.pt.html">Noções básicas de GIS</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/R_data_structures.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="../images/R_data_structures.png" class="quarto-figure quarto-figure-center figure-img" style="width:75.0%;height:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Em epidemiologia (e particularmente epidemiologia de campo), você encontrará <em>mais comumente</em> dataframes e vetores:</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 49%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Estrutura comum</th>
<th>Explicação</th>
<th>Exemplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Vetores</td>
<td>Um conteiner para uma sequência de objetos singulares, de uma mesma classe (es: numérico, caractere).</td>
<td><strong>“Variáveis” (colunas) em data frames são vetores</strong> (ex: a coluna <code>age_years</code>).</td>
</tr>
<tr class="even">
<td>Data Frames</td>
<td colspan="2">Vetores (ex: colunas) que estão unidas e têm todas o mesmo número de linhas. | <code>linelist</code> é data frame.</td>
</tr>
</tbody>
</table>
<p>Observe que para criar um vetor que “independente” (não faz parte de um data frame) a função <code>c()</code> é usada para combinar os diferentes elementos. Por exemplo, se estiver criando um vetor de cores para uma paleta de cores de um gráfico: <code>vector_de_cores &lt;- c("blue", "red2", "orange", "grey")</code></p>
<!-- ======================================================= -->
</section>
<section id="classe-de-objetos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="classe-de-objetos">Classe de objetos</h3>
<p>Todos os objetos armazenados em R possuem uma <em>classe</em> que informa ao R como lidar com o objeto. Existem muitas classes possíveis, mas as mais comuns incluem:</p>
<table class="table">
<thead>
<tr class="header">
<th>Classe</th>
<th>Explicação</th>
<th>Exemplos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Character</td>
<td>Caracteres, esses são textos/palavras/frases <strong>“dentro de aspas”</strong>. Nenhuma operação matemática pode ser realizada com esses objetos.</td>
<td>“Objetos do tipo caractere ficam entre aspas”</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Números <strong>inteiros</strong> (sem decimais)</td>
<td>-5, 14, or 2000</td>
</tr>
<tr class="odd">
<td>Numeric</td>
<td>Números que <strong>podem incluir decimais</strong>. Se estiverem dentro de aspas, serão considerados como caractere</td>
<td>23.1 or 14</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>Fatores, são vatores que tem uma <strong>ordem específica</strong> ou hierarquia de valores</td>
<td>Uma variável de status econômico com valores ordenados</td>
</tr>
<tr class="odd">
<td>Date</td>
<td><strong>Uma vez que o R é informado que um certo grupo de dados corresponde a Data</strong>, esses valores só podem ser apresentados e manipulados de algumas maneiras especiais. Veja a página sobre <a href="dates.pt.html">Trabalhando com datas</a> para mais informações</td>
<td>2018-04-12 ou 15/3/1954 ou Qua 4 Jan 1980</td>
</tr>
<tr class="even">
<td>Logical</td>
<td>Valores lógicos que precisam um dos dois valores especiais TRUE (verdadeiro) ou FALSE (note que eles <strong>não</strong> não “TRUE” e “FALSE” entre aspas)</td>
<td><code>TRUE</code> ou <code>FALSE</code></td>
</tr>
<tr class="odd">
<td>data.frame</td>
<td>Uma data frame é como o R armazena uma <strong>base de dados típica</strong>. Consiste de vetores (colunas) de dados unidos, que tenha o mesmo número de observações (linhas). | O exemplo AJS nomeado <code>linelist_raw</code> contém 68 variáveis com 300 observações (linhas) cada. |</td>
<td></td>
</tr>
<tr class="even">
<td>tibble</td>
<td>tibble é uma variação do data frame, a principal diferença operacional é que eles printam melhor no console (exibem as primeiras 10 linhas e apenas as colunas que cabem na tela)</td>
<td>Qualquer data frame, lista ou matriz pode ser convertido em um tibble com <code>as_tibble()</code></td>
</tr>
<tr class="odd">
<td>list</td>
<td>Uma lista é como um vetor, mas contém outros objetos que podem ser de outras classes diferentes</td>
<td>Uma lista pode conter um único número, um dataframe, um vetor e até outra lista dentro dele!</td>
</tr>
</tbody>
</table>
<p><strong>Você pode testar a classe de um objeto fornecendo seu nome para a função <code>class()</code></strong>. Nota: você pode fazer referência a uma coluna específica dentro de um conjunto de dados utilizando a notação <code>$</code> para separar o nome do conjunto de dados e o nome da coluna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist)         <span class="co"># a classe deve ser uma data frame ou tibble</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>age)     <span class="co"># classe deve ser numérica </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>gender)  <span class="co"># classe deve ser caractere </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Às vezes, uma coluna será convertida automaticamente para uma classe diferente pelo R. Cuidado com isso! Por exemplo, se você tiver um vetor ou coluna de números, mas um valor de caractere for inserido… a coluna inteira mudará para caractere de classe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>num_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>) <span class="co"># define um vetor só de números</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># este vetor é da classe numérico</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>num_vector[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"three"</span>   <span class="co"># converte o terceiro elemento para um caractere</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># o vetor agora é classe caractere</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Um exemplo comum disso é quando se manipula um data frame para exibir uma tabela - se você fizer uma linha total e tentar colar/colar porcentagens na mesma célula dos números (por exemplo, <code>23 (40%)</code>), toda a coluna numérica acima será convertida em caractere e não poderá mais ser utilizada para cálculos matemáticos.** Algumas vezes, será necessário converter objetos ou colunas em outra classe.**</p>
<table class="table">
<thead>
<tr class="header">
<th>Função</th>
<th>Ação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>as.character()</code></td>
<td>Converte para a classe caractere</td>
</tr>
<tr class="even">
<td><code>as.numeric()</code></td>
<td>Converte para a classe numérica</td>
</tr>
<tr class="odd">
<td><code>as.integer()</code></td>
<td>Converte para a classe inteiro</td>
</tr>
<tr class="even">
<td><code>as.Date()</code></td>
<td>Converte para a classe Data - Nota: Veja a seção sobre <a href="dates.pt.html">datas</a> para detalhes</td>
</tr>
<tr class="odd">
<td><code>factor()</code></td>
<td>Converte para a classe fator - Nota: Redefinir a ordem dos níveis requer argumentos extras</td>
</tr>
</tbody>
</table>
<p>Da mesma forma, existem as funções do R <strong>base</strong> para verificar se um objeto é de uma classe específica, como <code>is.numeric()</code>, <code>is.character()</code>, <code>is.double()</code>, <code>is.factor()</code>, <code>is.integer()</code></p>
<p>Aqui está <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">mais material on-line sobre classes e estruturas de dados em R</a>.</p>
<!-- ======================================================= -->
</section>
<section id="colunasvariáveis" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="colunasvariáveis">Colunas/Variáveis (<code>$</code>)</h3>
<p><strong>Uma coluna em um data frame é tecnicamente um “vetor” (ver tabela acima)</strong> - uma série de valores que devem ser todos da mesma classe (tanto caracter, numérico, lógico, etc.).</p>
<p>Um vetor pode existir independentemente de um data frame, por exemplo, um vetor de nomes de colunas que você deseja incluir como variáveis explicativas em um modelo. Para criar um vetor independente, utilize a função <code>c()</code> como abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define o vetor independente de entradas dp tipo caractere </span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># printa os valores desse vetor nomeado  </span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>explanatory_vars</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender" "fever"  "chills" "cough"  "aches"  "vomit" </code></pre>
</div>
</div>
<p><strong>As colunas em uma data frame também são vetores e podem ser chamadas, referenciadas, extraídas ou criadas utilizando o símbolo <code>$</code>.</strong> O símbolo <code>$</code> liga o nome da coluna ao nome de sua moldura de dados. Neste manual, tentamos utilizar a palavra “coluna” em vez de “variável”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obter o comprimento do vetor age</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(linelist<span class="sc">$</span>age) <span class="co"># (age é uma coluna no data frame linelist)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ao digitar o nome do data frame seguido de <code>$</code> você verá também um menu suspenso de todas as colunas data frame. Você pode percorrê-las usando sua tecla de seta, selecionar uma com sua tecla Enter e evitar erros ortográficos!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Calling_Names.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/Calling_Names.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: darkgreen;"><strong><em>DICA AVANÇADA:</em></strong> Alguns objetos mais complexos (por exemplo, uma lista, ou um objeto ‘epicontacts’) podem ter múltiplos níveis que podem ser acessados através de múltiplos sinais de dólar. Por exemplo <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</section>
<section id="accessarindexar-com-colchetes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessarindexar-com-colchetes">Accessar/indexar com colchetes (<code>[ ]</code>)</h3>
<p>Talvez seja necessário visualizar partes de objetos, também chamadas de “indexação”, o que muitas vezes é feito utilizando os colchetes <code>[ ]</code>. Utilizar <code>$</code> em um data frame para acessar uma coluna é também um tipo de indexação.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>)  <span class="co"># define o vetor</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>my_vector[<span class="dv">5</span>]                                  <span class="co"># printa o quinto elemento</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "e"</code></pre>
</div>
</div>
<p>Os colchetes também funcionam para retornar partes específicas de uma saída retornada, tais como a saída de uma função summary():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Todo o resumo</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apenas o segundo elemento,sem nome, usando colchetes simples</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[<span class="dv">2</span>]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1st Qu. 
      6 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apenas o segundo elemento,sem nome, usando colchetes duplos</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extrais um elemento pelo nome, sem mostrar o nome aparecer no console</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="st">"Median"</span>]]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<p>Os colchetes também trabalham em data frames para visualizar linhas e colunas específicas. Você pode fazer isso utilizando a sintaxe <code>dataframe[linhas, colunas]</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar uma linha específica (2) de uma base de dados, com todas as colunas (não esqueça a vírgula!) </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>,]</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vert todas as linhas, mas só uma coluna</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>linelist[, <span class="st">"date_onset"</span>]</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver valores da linha 2, e as colunas 5 a 10</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co"># VVer valores da linha 2, e as colunas 5 a 10 e a 18</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">18</span>)] </span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver valores da linha 2 a 20 , e colunas específicas</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Ver linhas e colunas baseado em critérios</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Noque que o dataframe precira ainda ser nomeado no critério!  </span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>linelist[linelist<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">25</span> , <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Use View() para ver as saídas no Painel Visualizador do RStudio Viewer (mais fácil de ler)</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Note o  "V" maúsculo na função View() </span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="st">"date_onset"</span>])</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Salve como um novo objeto</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>new_table <span class="ot">&lt;-</span> linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>)] </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Observe que você também pode alcançar a indexação de linha/coluna acima em dataframes e tibbles utilizando <strong>dplyr</strong> sintaxe (funções <code>filter()</code> para linhas, e <code>select()</code> para colunas). Leia mais sobre estas funções centrais na página <a href="cleaning.pt.html">Dados de limpeza e principais funções</a>.</p>
<p>Para filtrar com base no “número da linha”, você pode utilizar a função <strong>dplyr</strong> <code>row_number()</code> com parênteses abertos como parte de uma instrução de filtragem lógica. Muitas vezes você utilizará o operador <code>%in%</code> e uma faixa de números como parte dessa declaração lógica, como mostrado abaixo. Para ver as <em>primeiras</em> N fileiras , você também pode utilizar a função especial <strong>dplyr</strong> <code>head()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar as primeiras 100 linhas</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">100</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show row 5 only</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows 2 through 20, and three specific columns (note no quotes necessary on column names)</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date_onset, outcome, age)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ao indexar um objeto de classe <strong>lista</strong>, parênteses simples sempre retornam coma classe lista, mesmo que apenas um único objeto seja retornado. Entretanto, colchetes duplos podem ser usados para acessar um único elemento e retornar uma classe diferente da lista.<br>
Os parênteses também podem ser escritos um após o outro, como demonstrado abaixo.</p>
<p>Esta <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">explicação visual da indexação de listas, com pimenteiros</a> é bem-humorada e útil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define uma lista demo</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Primeiro elemento na lista é um vetor do tipo caractere </span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hospitals =</span> <span class="fu">c</span>(<span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span>),</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># segundo elemento na lista é um dataframe com endereços  </span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">addresses   =</span> <span class="fu">data.frame</span>(</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> <span class="fu">c</span>(<span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span>),</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">city   =</span> <span class="fu">c</span>(<span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span>)</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veja como fica a lista quando exibida no console. Veja como há dois elementos nomeados:</p>
<ul>
<li><code>hospitals</code>,, um vetor de caracteres.</li>
<li><code>addresses</code>, um quadro de dados de endereços</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"

$addresses
           street     city
1 145 Medical Way  Andover
2  1048 Brown Ave Hamilton
3   999 El Camino  El Paso</code></pre>
</div>
</div>
<p>Agora nos extraímos usando vários métodos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">1</span>] <span class="co"># esse retorna o elemanto da classe "lista" - o nome do elemento ainda é exibido </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]] <span class="co"># este retorna apenas o vetor de caracter (sem nome) </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"hospitals"</span>]] <span class="co"># você também pode indexar pelo nome do elemento da lista  </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]][<span class="dv">3</span>] <span class="co"># Isto retorna o terceiro elemento do vetor de caracteres "hospitals" </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]][<span class="dv">1</span>] <span class="co"># Isto retorna a primeira coluna  ("street") da data frame de endereços</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           street
1 145 Medical Way
2  1048 Brown Ave
3   999 El Camino</code></pre>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="remover-objetos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="remover-objetos">Remover objetos</h3>
<p>Você pode remover objetos individuais de seu ambiente R colocando o nome na função <code>rm()</code> (sem aspas):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(object_name)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você pode reomver todos os objetos (limpar o ambiente de trabalho) ao executar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all =</span> <span class="cn">TRUE</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="piping-encadeamento" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="piping-encadeamento"><span class="header-section-number">3.11</span> Piping (Encadeamento, <code>%&gt;%</code>)</h2>
<p><strong>Duas abordagens gerais para trabalhar com objetos são:</strong></p>
<ol type="1">
<li><strong>Pipes/tidyverse</strong> - pipes send an object from function to function - emphasis is on the <em>action</em>, not the object<br>
</li>
<li><strong>Definir objetos intermediários</strong> - um objeto é redefinido repetidamente - a ênfase está no objeto.</li>
</ol>
<!-- ======================================================= -->
<section id="pipes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="pipes"><strong>Pipes</strong></h3>
<p><strong>Explicado de forma simples, o operador do pipe (<code>%&gt;%</code>) passa uma saída intermediária de uma função para a próxima.</strong><br>
Você pode pensar nisso como dizendo “então”. Muitas funções podem ser ligadas com <code>%&gt;%</code>.</p>
<ul>
<li><strong>Piping enfatiza uma seqüência de ações, não o objeto sobre o qual as ações estão sendo realizadas</strong><br>
</li>
<li>Pipes são melhores quando uma seqüência de ações deve ser executada em um único objeto.<br>
</li>
<li>Os pipes vêm do pacote <strong>magrittr</strong>, que é automaticamente incluído nos pacotes <strong>dplyr</strong> e <strong>tidyverse</strong></li>
<li>Os pipes podem tornar o código mais limpo e fácil de ler, mais intuitivo</li>
</ul>
<p>Leia mais sobre esta abordagem no tidyverse <a href="https://style.tidyverse.org/pipes.html">guia de estilo</a></p>
<p>Aqui está um exemplo falso para comparação, usando funções fictícias para “assar um bolo”. Primeiro, o método do pipe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Um exemplo falso de como assar um bolo usando a sintaxe do pipe </span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> flour <span class="sc">%&gt;%</span>       <span class="co">#para definir o bolo, comece com farinha, e então ...</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(eggs) <span class="sc">%&gt;%</span>   <span class="co"># adicione ovos</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(oil) <span class="sc">%&gt;%</span>    <span class="co"># adicione óleo</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(water) <span class="sc">%&gt;%</span>  <span class="co"># adicione água</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mix_together</span>(         <span class="co"># misture</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">utensil =</span> spoon,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">degrees =</span> <span class="dv">350</span>,   <span class="co"># asse</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">system =</span> <span class="st">"fahrenheit"</span>,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">minutes =</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">let_cool</span>()            <span class="co"># deixe esfriar</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Aqui está outro <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremamente%20useful,code%20and%20combine%20multiple%20operations">link</a> descrevendo a utilidade dos pipes.</p>
<p>O pipe não é uma função do R <strong>base</strong>. Para utilizar o pipe, o pacote <strong>magrittr</strong> deve ser instalado e carregado (isto é normalmente feito carregando os pacotes <strong>tidyverse</strong> ou <strong>dplyr</strong> que o inclui). Você pode <a href="https://magrittr.tidyverse.org/">ler mais sobre pipe na documentação magrittr</a>.</p>
<p>Observe que, assim como outros comandos R, os pipes podem ser utilizados apenas para exibir o resultado, ou para salvar/reservar um objeto, dependendo se o operador de atribuição <code>&lt;-</code> está envolvido. Veja os dois abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar ou sobrescrever um objeto, definindo como contagens agregadas por faixa-etária  (não "printado")</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>linelist_summary <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printa a tabela de contagens no console, mas nao a salva  </span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  age_cat    n
1     0-4 1095
2     5-9 1095
3   10-14  941
4   15-19  743
5   20-29 1073
6   30-49  754
7   50-69   95
8     70+    6
9    &lt;NA&gt;   86</code></pre>
</div>
</div>
<p><strong><code>%&lt;&gt;%</code></strong><br>
Este é um “tubo de atribuição” do pacote <strong>magrittr</strong>, que <em>encadeia um objeto para frente e também re-define o objeto</em>. Deve ser o primeiro operador pipe da cadeia. É um “atalho”. Os dois comandos abaixo são equivalentes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="definir-objetos-intermediários" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="definir-objetos-intermediários">Definir objetos intermediários</h3>
<p>Esta abordagem para mudar objetos/dataframes pode ser melhor se:</p>
<ul>
<li>Você precisa manipular vários objetos…</li>
<li>Há etapas intermediárias que são significativas e merecem nomes de objetos separados</li>
</ul>
<p><strong>Riscos:</strong></p>
<ul>
<li>Criar novos objetos para cada etapa significa criar muitos objetos. Se você usar o errado, talvez não se dê conta disso!</li>
<li>Nomear todos os objetos pode ser confuso…</li>
<li>Os erros podem não ser facilmente detectáveis</li>
</ul>
<p>Ou nomear cada objeto intermediário, ou sobrescrever o original, ou combinar todas as funções em conjunto. Todos vêm com seus próprios riscos.</p>
<p>Abaixo está o mesmo exemplo falso de “bolo” como acima, mas usando este estilo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># um exemplo falso de como assar um bolo usado este método (definindo objetos intermediários) </span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>batter_1 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flour, eggs)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>batter_2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_1, oil)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>batter_3 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_2, water)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>batter_4 <span class="ot">&lt;-</span> <span class="fu">mix_together</span>(<span class="at">object =</span> batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>)</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">bake</span>(batter_4, <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>)</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(cake)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Combine todas as funções em uma só - isso dificulta a leitura):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># um exemplo de combinação/aninhamento de múltiplas funções  juntas - difícil de ler</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(<span class="fu">bake</span>(<span class="fu">mix_together</span>(batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>), <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
</section>
<section id="operadores" class="level2" data-number="3.12">
<h2 data-number="3.12" class="anchored" data-anchor-id="operadores"><span class="header-section-number">3.12</span> Principais operadores e funções</h2>
<p>Esta seção detalha os operadores em R, como por exemplo:</p>
<ul>
<li>Operadores de definição<br>
</li>
<li>Operadores relacionais (menos do que, igual a…)</li>
<li>Operadores lógicos (e, ou…)<br>
</li>
<li>Lidando com valores faltantes…</li>
<li>Operadores matemáticos e funções (+/-, &gt;, sum(), median(), …)<br>
</li>
<li>O operador <code>%in%</code></li>
</ul>
<!-- ======================================================= -->
<section id="operador-de-atribuição" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="operador-de-atribuição">Operador de atribuição</h3>
<p><strong><code>&lt;-</code></strong></p>
<p>O operador de atribuição básica em R é <code>&lt;-</code>. De tal forma que <code>nome_objeto &lt;- valor</code>.<br>
Este operador de atribuição também pode ser escrito como <code>=</code>. Aconselhamos o uso de <code>&lt;-</code> para uso geral em R.<br>
Aconselhamos também o uso de <code>&lt;-</code> para uso geral em R. Aconselhamos também o uso de espaços em torno de tais operadores, para facilitar a leitura.</p>
<p><strong><code>&lt;&lt;-</code></strong></p>
<p>Se você estiver <a href="writing_functions.pt.html">Escrevendo funções</a>, ou utilizando R de forma interativa com scripts de origem, então você pode precisar utilizar este operador de atribuição <code>&lt;&lt;-</code> (do R <strong>base</strong>). Este operador é utilizado para definir um objeto em um ambiente R ‘pai’ superior. Veja isto <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">referência on-line</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>Este é um “pipe de atribuição” do pacote <strong>magrittr</strong>, que canaliza um objeto para frente e <em>também re-define o objeto</em>. Deve ser o primeiro operador pipe da cadeia. É a abreviação, como mostrado abaixo em dois exemplos equivalentes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O código acima é equivalente ao abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>Isso é usado para adicionar dados a árvores filogenéticas com o pacote <strong>ggtree</strong>. Veja a página em <a href="phylogenetic_trees.pt.html">Árvores Filogenéticas</a> ou este <a href="https://yulab-smu.top/treedata-book/">livro de recursos online</a>.</p>
<!-- ======================================================= -->
</section>
<section id="operadores-relacionais-e-lógicos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="operadores-relacionais-e-lógicos">Operadores relacionais e lógicos</h3>
<p>Os operadores relacionais comparam valores e são freqüentemente utilizados na definição de novas variáveis e subconjuntos de conjuntos de dados. Aqui estão os operadores relacionais comuns em R:</p>
<table class="table">
<thead>
<tr class="header">
<th>Significado</th>
<th>Operador</th>
<th>Examplo</th>
<th>Resultado do exemplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Igual a</td>
<td><code>==</code></td>
<td><code>"A" == "a"</code></td>
<td><code>FALSE</code> (porque o R é sensível a letras maiúscula/minúsculas) <br> <em>Note que == (iguais duplos) é diferente de = (símbolo de igual normal), que age como o operador de atribuição <code>&lt;-</code></em></td>
</tr>
<tr class="even">
<td>Não igual (diferente)</td>
<td><code>!=</code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>Maior que</td>
<td><code>&gt;</code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Menor que</td>
<td><code>&lt;</code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Maior ou igual a</td>
<td><code>&gt;=</code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Menor ou igual a</td>
<td><code>&lt;=</code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Valor está faltante</td>
<td><code>is.na()</code></td>
<td><code>is.na(7)</code></td>
<td><code>FALSE</code> (veja página em <a href="missing_data.pt.html">Dados faltantes</a>)</td>
</tr>
<tr class="even">
<td>Valor não faltante</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<p>Operadores lógicos, como AND e OR, geralmente são usados para conectar operadores relacionais e criar critérios mais complicados. Instruções complexas podem exigir parênteses ( ) para agrupamento e ordem de aplicação.</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th>Significado</th>
<th>Operador</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td>OR</td>
<td><code>|</code> (barra vertical)</td>
</tr>
<tr class="odd">
<td>Parentheses</td>
<td><code>( )</code> Usado para agrupar critérios e clarificar a ordem das operações</td>
</tr>
</tbody>
</table>
<p>Por exemplo, abaixo, temos uma linelist com duas variáveis que queremos utilizar para criar nossa definição de caso, <code>hep_e_rdt</code>, um resultado de teste e <code>other_cases_in_hh</code>, que nos dirá se há outros casos na casa. O comando abaixo utiliza a função <code>case_when()</code> para criar a nova variável <code>case_def</code> de tal forma que:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>linelist_cleaned <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">case_def =</span> <span class="fu">case_when</span>(</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(rdt_result) <span class="sc">&amp;</span> <span class="fu">is.na</span>(other_case_in_home)            <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">==</span> <span class="st">"Positive"</span>                                 <span class="sc">~</span> <span class="st">"Confirmed"</span>,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">!=</span> <span class="st">"Positive"</span> <span class="sc">&amp;</span> other_cases_in_home <span class="sc">==</span> <span class="st">"Yes"</span>  <span class="sc">~</span> <span class="st">"Probable"</span>,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                                     <span class="sc">~</span> <span class="st">"Suspected"</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 68%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Critérios no exemplo acima</th>
<th>Valor da nova variável “case_def”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Se o valor das variáveis <code>rdt_result</code> e <code>other_cases_in_home</code> estiverem faltando</td>
<td><code>NA</code> (faltante)</td>
</tr>
<tr class="even">
<td>Se o valor em <code>rdt_result</code> for “Positive”</td>
<td><code>Confirmed</code></td>
</tr>
<tr class="odd">
<td>If the value in <code>rdt_result</code> is NOT “Positive” AND the value in <code>other_cases_in_home</code> is “Yes”</td>
<td><code>Probable</code></td>
</tr>
<tr class="even">
<td>If one of the above criteria are not met</td>
<td><code>Suspected</code></td>
</tr>
</tbody>
</table>
<p><em>Note that R is case-sensitive, so “Positive” is different than “positive”…</em></p>
<!-- ======================================================= -->
</section>
<section id="valores-faltantes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="valores-faltantes">Valores faltantes</h3>
<p>Em R, os valores ausentes são representados pelo valor especial <code>NA</code> (um valor “reservado”) (letras maiúsculas N e A - não entre aspas). Se você importar dados que registram dados ausentes de outra maneira (por exemplo, 99, “Missing” ou .), convém recodificar esses valores para <code>NA</code>. Como fazer isso é abordado na página <a href="importing.pt.html">Importação e exportação</a>.</p>
<p><strong>Para testar se um valor é <code>NA</code>, use a função especial <code>is.na()</code></strong>, que retorna <code>TRUE</code> ou <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>rdt_result <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span>)   <span class="co"># dois casos positivos, um suspeito e um desconhecido </span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(rdt_result)  <span class="co"># Testa se o valor de  rdt_result é NA</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>Leia mais sobre valores ausentes, infinitos, <code>NULL</code> e impossíveis na página em <a href="missing_data.pt.html">Campos em branco/faltantes</a>. Saiba como converter valores ausentes ao importar dados na página em <a href="importing.pt.html">Importação e exportação</a>.</p>
<!-- ======================================================= -->
</section>
<section id="matemática-e-estatística" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="matemática-e-estatística">Matemática e estatística</h3>
<p>Todos os operadores e funções nesta página estão disponíveis automaticamente usando o pacote R <strong>base</strong>.</p>
<section id="operadores-mmatemáticos" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="operadores-mmatemáticos">Operadores mmatemáticos</h4>
<p>Estes são frequentemente usados para realizar adição, divisão, para criar novas colunas, etc. Abaixo estão os operadores matemáticos comuns em R. Colocar ou não os espaços ao redor dos operadores não é importante.</p>
<table class="table">
<thead>
<tr class="header">
<th>Propósito</th>
<th>Exemplo no R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>adição</td>
<td><code>2 + 3</code></td>
</tr>
<tr class="even">
<td>subtração</td>
<td><code>2 - 3</code></td>
</tr>
<tr class="odd">
<td>multiplicação</td>
<td><code>2 \* 3</code></td>
</tr>
<tr class="even">
<td>divisão</td>
<td><code>30 / 5</code></td>
</tr>
<tr class="odd">
<td>potência</td>
<td><code>2\^3</code></td>
</tr>
<tr class="even">
<td>ordem das operações</td>
<td><code>( )</code></td>
</tr>
</tbody>
</table>
</section>
<section id="funções-matemáticas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="funções-matemáticas">Funções matemáticas</h4>
<table class="table">
<colgroup>
<col style="width: 41%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th>Propósito</th>
<th>Função</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>arredondamento</td>
<td><code>round(x, digits = n)</code></td>
</tr>
<tr class="even">
<td>arredondamento</td>
<td><code>janitor::round_half_up(x, digits = n)</code></td>
</tr>
<tr class="odd">
<td>teto (arredondar para cima)</td>
<td><code>ceiling(x)</code></td>
</tr>
<tr class="even">
<td>chão (arredondar para baixo)</td>
<td><code>floor(x)</code></td>
</tr>
<tr class="odd">
<td>valor obsoluto (módulo)</td>
<td><code>abs(x)</code></td>
</tr>
<tr class="even">
<td>raiz quadrada</td>
<td><code>sqrt(x)</code></td>
</tr>
<tr class="odd">
<td>exponencial</td>
<td><code>exponent(x)</code></td>
</tr>
<tr class="even">
<td>logaritmo natural/neperiano</td>
<td><code>log(x)</code></td>
</tr>
<tr class="odd">
<td>logaritmo na base 10</td>
<td><code>log10(x)</code></td>
</tr>
<tr class="even">
<td>logaritmo na base 2</td>
<td><code>log2(x)</code></td>
</tr>
</tbody>
</table>
<p>Nota: para <code>round()</code> o <code>digits =</code> especifica o número de casas decimais colocadas. Use <code>signif()</code> para arredondar para um número de algarismos significativos.</p>
</section>
<section id="notação-científica" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="notação-científica">Notação científica</h4>
<p>A probabilidade de notação científica ser usada depende do valor da opção <code>scipen</code>.</p>
<p>Da documentação de <code>?options</code>: scipen é uma penalidade a ser aplicada ao decidir imprimir valores numéricos em notação fixa ou exponencial. Os valores positivos tendem para a notação fixa e os negativos para a notação científica: a notação fixa será preferida, a menos que seja mais do que os dígitos ‘scipen’ mais largos.</p>
<p>Se estiver definido para um número baixo (por exemplo, 0), ele estará sempre “ligado”. Para “desativar” a notação científica em sua sessão R, defina-a como um número muito alto, por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># desligar a notação científica</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="arredondando" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="arredondando">Arredondando</h4>
<p><span style="color: red;"><strong><em>PERIGO:</em></strong> A função <code>round()</code> usa “arredondamento do banqueiro” que arredonda de .5 somente se o número superior for par. Use <code>round_half_up()</code> do <strong>janitor</strong> para arredondar consistentemente metades para o número inteiro mais próximo. Veja <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">esta explicação</a></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use a função de arredondamento adequanda para o seu trabalho </span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">round_half_up</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</section>
<section id="funções-estatísticas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="funções-estatísticas">Funções estatísticas</h4>
<p><span style="color: orange;"><strong><em>CUIDADO:</em></strong> As funções abaixo incluirão, por padrão, valores ausentes nos cálculos. Valores ausentes resultarão em uma saída de <code>NA</code>, a menos que o argumento <code>na.rm = TRUE</code> seja especificado. Isso pode ser escrito de forma abreviada como <code>na.rm = T</code>.</span></p>
<table class="table">
<thead>
<tr class="header">
<th>Objetivo</th>
<th>Função</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>média aritmética</td>
<td><code>mean(x, na.rm=T)</code></td>
</tr>
<tr class="even">
<td>mediana</td>
<td><code>median(x, na.rm=T)</code></td>
</tr>
<tr class="odd">
<td>desvio padrão</td>
<td><code>sd(x, na.rm=T)</code></td>
</tr>
<tr class="even">
<td>quantis*</td>
<td><code>quantile(x, probs)</code></td>
</tr>
<tr class="odd">
<td>soma</td>
<td><code>sum(x, na.rm=T)</code></td>
</tr>
<tr class="even">
<td>valor mínimo</td>
<td><code>min(x, na.rm=T)</code></td>
</tr>
<tr class="odd">
<td>valor máximo</td>
<td><code>max(x, na.rm=T)</code></td>
</tr>
<tr class="even">
<td>range de valores numéricos</td>
<td><code>range(x, na.rm=T)</code></td>
</tr>
<tr class="odd">
<td>resumo**</td>
<td><code>summary(x)</code></td>
</tr>
</tbody>
</table>
<p>Notas:</p>
<ul>
<li>* <code>quantile()</code>: <code>x</code> é o vetor numérico a ser examinado e <code>probs =</code> é um vetor numérico com probabilidades entre 0 e 1,0, por exemplo, <code>c(0.5 , 0.8 , 0,.85)</code></li>
<li>** <code>summary()</code>: fornece um resumo em um vetor numérico incluindo média, mediana e percentis comuns</li>
</ul>
<p><span style="color: red;"><strong><em>PERIGO:</em></strong> Ao fornecer um vetor de números para uma das funções acima, certifique-se de concatenar os números dentro de <code>c()</code> .</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se fornecer números brutos para uma função, concatene-os antes com c()</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)    <span class="co"># !!! INCORRETO !!!  </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)) <span class="co"># CORRETO</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.666667</code></pre>
</div>
</div>
</section>
<section id="outras-funções-úteis" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="outras-funções-úteis">Outras funções úteis</h4>
<table class="table">
<colgroup>
<col style="width: 31%">
<col style="width: 19%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Objetivo</th>
<th>Função</th>
<th>Examplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>criar uma sequência de números</td>
<td>seq(from, to, by)</td>
<td><code>seq(1, 10, 2)</code></td>
</tr>
<tr class="even">
<td>repetir x, n vezes</td>
<td>rep(x, ntimes)</td>
<td><code>rep(1:3, 2)</code> or <code>rep(c("a", "b", "c"), 3)</code></td>
</tr>
<tr class="odd">
<td>subdividir um vetor numérico</td>
<td>cut(x, n)</td>
<td><code>cut(linelist$age, 5)</code></td>
</tr>
<tr class="even">
<td>pegar uma amostra aleatória</td>
<td>sample(x, size)</td>
<td><code>sample(linelist$id, size = 5, replace = TRUE)</code></td>
</tr>
</tbody>
</table>
<!-- ======================================================= -->
</section>
</section>
<section id="in" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="in"><code>%in%</code></h3>
<p>Um operador muito útil para combinar valores e avaliar rapidamente se um valor está dentro de um vetor ou dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>meu_vetor <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a"</span> <span class="sc">%in%</span> meu_vetor</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="st">"h"</span> <span class="sc">%in%</span> meu_vetor</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Para perguntar se um valor <strong>não</strong> está em (<code>%in%</code>) é um vetor, coloque um ponto de exclamação (!) <strong>na frente</strong> da instrução lógica:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># para negar, coloque a exclamação na frente </span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"a"</span> <span class="sc">%in%</span> meu_vetor</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"h"</span> <span class="sc">%in%</span> meu_vetor</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><code>%in%</code> é muito útil ao usar a função <strong>dplyr</strong> <code>case_when()</code>. Você pode definir um vetor anteriormente e depois referenciá-lo. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">child_hospitaled =</span> <span class="fu">case_when</span>(</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    hospitalized <span class="sc">%in%</span> affirmative <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Hospitalized Child"</span>,</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                      <span class="sc">~</span> <span class="st">"Not"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note: If you want to detect a partial string, perhaps using <code>str_detect()</code> from <strong>stringr</strong>, it will not accept a character vector like <code>c("1", "Yes", "yes", "y")</code>. Instead, it must be given a <em>regular expression</em> - one condensed string with OR bars, such as “1|Yes|yes|y”. For example, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. See the page on <a href="characters_strings.pt.html">Caracteres e strings</a> for more information.</p>
<p>You can convert a character vector to a named regular expression with this command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>affirmative</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># condensar</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">paste0</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)  <span class="co"># opção com R base</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">str_c</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)   <span class="co"># opção co pacote stringr</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>affirmative_str_search</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
</div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="erros-avisos" class="level2" data-number="3.13">
<h2 data-number="3.13" class="anchored" data-anchor-id="erros-avisos"><span class="header-section-number">3.13</span> Erros &amp; avisos</h2>
<p>Esta seção explica:</p>
<ul>
<li>A diferença entre erros e avisos<br>
</li>
<li>Dicas gerais de sintaxe para escrever código R<br>
</li>
<li>Ajudas para o código.</li>
</ul>
<p>Erros e avisos comuns e dicas de solução de problemas podem ser encontrados na página em <a href="errors.pt.html">Erros e ajuda</a>.</p>
<!-- ======================================================= -->
<section id="erros-versus-avisos" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="erros-versus-avisos">Erros versus Avisos</h3>
<p>Quando um comando é executado, o Console R pode mostrar mensagens de aviso ou erro em texto vermelho.</p>
<ul>
<li><p>Um <strong>aviso</strong> significa que o R concluiu seu comando, mas teve que executar etapas adicionais ou produziu uma saída incomum da qual você deve estar ciente.</p></li>
<li><p>Um <strong>erro</strong> significa que o R não conseguiu completar seu comando.</p></li>
</ul>
<p>Procurar pistas:</p>
<ul>
<li><p>A mensagem de erro/aviso geralmente inclui um número de linha para o problema.</p></li>
<li><p>Se um objeto “é desconhecido” ou “não encontrado”, talvez você o tenha escrito incorretamente, esquecido de chamar um pacote com library() ou esquecido de executar novamente seu script após fazer alterações.</p></li>
</ul>
<p>Se tudo mais falhar, copie a mensagem de erro no Google junto com alguns termos-chave: é provável que alguém já tenha trabalhado com isso!</p>
<!-- ======================================================= -->
</section>
<section id="dicas-gerais-de-sintaxe" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="dicas-gerais-de-sintaxe">Dicas gerais de sintaxe</h3>
<p>Algumas coisas para lembrar ao escrever comandos em R, para evitar erros e avisos:</p>
<ul>
<li>Sempre feche os parênteses - dica: conte o número de abertura “(” e fechamento de parênteses “)” para cada pedaço de código</li>
<li>Evite espaços em nomes de colunas e objetos. Use sublinhado ( _ ) ou pontos ( . )</li>
<li>Acompanhe e lembre-se de separar os argumentos de uma função com vírgulas</li>
<li>R diferencia maiúsculas de minúsculas, o que significa que <code>Variable_A</code> é <em>diferente</em> de <code>variable_A</code></li>
</ul>
<!-- ======================================================= -->
</section>
<section id="ajudas-de-código" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ajudas-de-código">Ajudas de código</h3>
<p>Qualquer script (RMarkdown ou outro) dará pistas quando você cometer um erro. Por exemplo, se você esqueceu de escrever uma vírgula onde for necessário, ou de fechar um parêntese, o RStudio irá levantar uma bandeira nessa linha, no lado direito do script, para avisá-lo.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/data_used.pt.html" class="pagination-link" aria-label="Baixe o livro e os dados">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Baixe o livro e os dados</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/transition_to_R.pt.html" class="pagination-link" aria-label="Transição para o R">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transição para o R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","openEffect":"zoom","selector":".lightbox","loop":false,"closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>