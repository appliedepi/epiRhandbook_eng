<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="vn" xml:lang="vn"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cẩm nang dịch tễ học với R - 3&nbsp; R Cơ bản</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/transition_to_R.vn.html" rel="next">
<link href="../new_pages/data_used.vn.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QXDW878QLX');
</script> -->

</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">
  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"
    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"
    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"
    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"
    class="alert-link">R Help Desk service</a>. -->
</div>

<script>

  // Function to extract the last two characters from the URL path to determine the language, adjusting for .html extension
  function getLanguageFromURL() {
    let path = window.location.pathname;
    
    // Check if the URL ends with .html and remove it
    if (path.endsWith('.html')) {
      path = path.substring(0, path.length - 5);
    }

    // Extract the last two characters for the language code
    const lang = path.substr(-2);
    return lang;
  }

  const language = getLanguageFromURL();
  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru'];
  const defaultLanguage = 'en';
  const isSupportedLanguage = supportedLanguages.includes(language);

  // Translations for the content
  const translations = {
    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',
    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',
    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',
    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',
    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',
    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',
    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',
    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'
  };

  // Default to English if the detected language is not supported
  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];


  // Select the element where the content should be displayed
  const alertElement = document.querySelector('.alert');
  if (alertElement) {
    alertElement.innerHTML = contentToDisplay;
    alertElement.style.display = 'block'; // Make sure to display the element
  }

</script>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.vn.html">Nhập môn về R</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.vn.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Cơ bản</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Cẩm nang dịch tễ học với R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_quarto" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chào mừng</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Về cuốn sách này</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Biên tập và ghi chú kỹ thuật</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Tải sách và dữ liệu</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Nhập môn về R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.vn.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Cơ bản</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chuyển đổi sang R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Package đề xuất</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Dự án R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Nhập xuất dữ liệu</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Quản lý dữ liệu</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Làm sạch số liệu và các hàm quan trọng</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Làm việc với ngày tháng</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ký tự và chuỗi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Kiểu dữ liệu danh mục - Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Xoay trục dữ liệu</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Nhóm dữ liệu</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Nối dữ liệu</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Loại bỏ trùng lặp</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Lặp, vòng lặp, và danh sách</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Phân tích dữ liệu</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Bảng mô tả</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Các kiểm định thống kê cơ bản</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Hồi quy đơn và đa biến</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Dữ liệu Missing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Tỷ suất chuẩn hóa</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Đường trung bình động</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Chuỗi thời gian và phát hiện ổ dịch</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Mô hình hóa dịch bệnh</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Truy vết tiếp xúc</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Phân tích khảo sát</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Phân tích sống còn</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">GIS cơ bản</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Trực quan hóa dữ liệu</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Trình bày bảng</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">ggplot cơ bản</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Các mẹo với ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Đường cong dịch bệnh</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Tháp dân số và thang đo Likert</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Biểu đồ nhiệt</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Sơ đồ và biểu đồ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Biểu đồ kết hợp</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Chuỗi lây nhiễm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Cây phả hệ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Biểu đồ tương tác</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Báo cáo và dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Báo cáo với R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Tổ chức báo cáo định kỳ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Dashboards với R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards với Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Các chủ điểm khác</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Viết hàm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Tương tác với thư mục làm việc</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Version control với Git và Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Các lỗi thường gặp</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Nhờ sự trợ giúp</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R trên ổ cứng mạng</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.vn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Data Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#tại-sao-sử-dụng-r" id="toc-tại-sao-sử-dụng-r" class="nav-link active" data-scroll-target="#tại-sao-sử-dụng-r"><span class="header-section-number">3.1</span> Tại sao sử dụng R?</a></li>
  <li><a href="#các-thuật-ngữ-chính" id="toc-các-thuật-ngữ-chính" class="nav-link" data-scroll-target="#các-thuật-ngữ-chính"><span class="header-section-number">3.2</span> Các thuật ngữ chính</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning"><span class="header-section-number">3.3</span> Tài nguyên học liệu</a>
  <ul class="collapse">
  <li><a href="#tài-nguyên-trong-rstudio" id="toc-tài-nguyên-trong-rstudio" class="nav-link" data-scroll-target="#tài-nguyên-trong-rstudio">Tài nguyên trong RStudio</a></li>
  <li><a href="#cheatsheets" id="toc-cheatsheets" class="nav-link" data-scroll-target="#cheatsheets">Cheatsheets</a></li>
  <li><a href="#twitter" id="toc-twitter" class="nav-link" data-scroll-target="#twitter">Twitter</a></li>
  <li><a href="#nguồn-tài-nguyên-trực-tuyến-miễn-phí" id="toc-nguồn-tài-nguyên-trực-tuyến-miễn-phí" class="nav-link" data-scroll-target="#nguồn-tài-nguyên-trực-tuyến-miễn-phí">Nguồn tài nguyên trực tuyến miễn phí</a></li>
  <li><a href="#các-ngôn-ngữ-khác-ngoài-tiếng-anh" id="toc-các-ngôn-ngữ-khác-ngoài-tiếng-anh" class="nav-link" data-scroll-target="#các-ngôn-ngữ-khác-ngoài-tiếng-anh">Các ngôn ngữ khác ngoài Tiếng Anh</a></li>
  </ul></li>
  <li><a href="#cài-đặt" id="toc-cài-đặt" class="nav-link" data-scroll-target="#cài-đặt"><span class="header-section-number">3.4</span> Cài đặt</a>
  <ul class="collapse">
  <li><a href="#r-và-rstudio" id="toc-r-và-rstudio" class="nav-link" data-scroll-target="#r-và-rstudio">R và RStudio</a></li>
  <li><a href="#những-phần-mềm-khác-bạn-có-thể-cần-cài-đặt" id="toc-những-phần-mềm-khác-bạn-có-thể-cần-cài-đặt" class="nav-link" data-scroll-target="#những-phần-mềm-khác-bạn-có-thể-cần-cài-đặt">Những phần mềm khác bạn <em>có thể</em> cần cài đặt</a></li>
  </ul></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio"><span class="header-section-number">3.5</span> RStudio</a>
  <ul class="collapse">
  <li><a href="#làm-quen" id="toc-làm-quen" class="nav-link" data-scroll-target="#làm-quen">Làm quen</a></li>
  <li><a href="#các-cài-đặt-của-rstudio" id="toc-các-cài-đặt-của-rstudio" class="nav-link" data-scroll-target="#các-cài-đặt-của-rstudio">Các cài đặt của RStudio</a></li>
  <li><a href="#các-phím-tắt" id="toc-các-phím-tắt" class="nav-link" data-scroll-target="#các-phím-tắt">Các phím tắt</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">3.6</span> Hàm</a>
  <ul class="collapse">
  <li><a href="#các-hàm-cơ-bản" id="toc-các-hàm-cơ-bản" class="nav-link" data-scroll-target="#các-hàm-cơ-bản">Các hàm cơ bản</a></li>
  <li><a href="#hàm-với-nhiều-đối-số" id="toc-hàm-với-nhiều-đối-số" class="nav-link" data-scroll-target="#hàm-với-nhiều-đối-số">Hàm với nhiều đối số</a></li>
  <li><a href="#viết-hàm" id="toc-viết-hàm" class="nav-link" data-scroll-target="#viết-hàm">Viết hàm</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">3.7</span> Packages</a>
  <ul class="collapse">
  <li><a href="#cài-đặt-và-gọi" id="toc-cài-đặt-và-gọi" class="nav-link" data-scroll-target="#cài-đặt-và-gọi">Cài đặt và Gọi</a></li>
  <li><a href="#cú-pháp-code" id="toc-cú-pháp-code" class="nav-link" data-scroll-target="#cú-pháp-code">Cú pháp code</a></li>
  <li><a href="#trợ-giúp-về-hàm" id="toc-trợ-giúp-về-hàm" class="nav-link" data-scroll-target="#trợ-giúp-về-hàm">Trợ giúp về hàm</a></li>
  <li><a href="#cập-nhật-packages" id="toc-cập-nhật-packages" class="nav-link" data-scroll-target="#cập-nhật-packages">Cập nhật packages</a></li>
  <li><a href="#xóa-packages" id="toc-xóa-packages" class="nav-link" data-scroll-target="#xóa-packages">Xóa packages</a></li>
  <li><a href="#sự-phụ-thuộc" id="toc-sự-phụ-thuộc" class="nav-link" data-scroll-target="#sự-phụ-thuộc">Sự phụ thuộc</a></li>
  <li><a href="#hàm-bị-che-giấu" id="toc-hàm-bị-che-giấu" class="nav-link" data-scroll-target="#hàm-bị-che-giấu">Hàm bị che giấu</a></li>
  <li><a href="#gỡ-package" id="toc-gỡ-package" class="nav-link" data-scroll-target="#gỡ-package">Gỡ package</a></li>
  <li><a href="#cài-đặt-phiên-bản-cũ-hơn" id="toc-cài-đặt-phiên-bản-cũ-hơn" class="nav-link" data-scroll-target="#cài-đặt-phiên-bản-cũ-hơn">Cài đặt phiên bản cũ hơn</a></li>
  <li><a href="#packages-đề-xuất" id="toc-packages-đề-xuất" class="nav-link" data-scroll-target="#packages-đề-xuất">Packages đề xuất</a></li>
  </ul></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">3.8</span> Scripts</a>
  <ul class="collapse">
  <li><a href="#bình-luận" id="toc-bình-luận" class="nav-link" data-scroll-target="#bình-luận">Bình luận</a></li>
  <li><a href="#phong-cách-viết-code" id="toc-phong-cách-viết-code" class="nav-link" data-scroll-target="#phong-cách-viết-code">Phong cách viết code</a></li>
  <li><a href="#ví-dụ-về-script" id="toc-ví-dụ-về-script" class="nav-link" data-scroll-target="#ví-dụ-về-script">Ví dụ về Script</a></li>
  <li><a href="#r-markdown" id="toc-r-markdown" class="nav-link" data-scroll-target="#r-markdown">R markdown</a></li>
  <li><a href="#r-notebooks" id="toc-r-notebooks" class="nav-link" data-scroll-target="#r-notebooks">R notebooks</a></li>
  <li><a href="#shiny" id="toc-shiny" class="nav-link" data-scroll-target="#shiny">Shiny</a></li>
  <li><a href="#thu-gọn-code" id="toc-thu-gọn-code" class="nav-link" data-scroll-target="#thu-gọn-code">Thu gọn Code</a></li>
  </ul></li>
  <li><a href="#thư-mục-làm-việc" id="toc-thư-mục-làm-việc" class="nav-link" data-scroll-target="#thư-mục-làm-việc"><span class="header-section-number">3.9</span> Thư mục làm việc</a>
  <ul class="collapse">
  <li><a href="#gợi-ý-cách-tiếp-cận" id="toc-gợi-ý-cách-tiếp-cận" class="nav-link" data-scroll-target="#gợi-ý-cách-tiếp-cận">Gợi ý cách tiếp cận</a></li>
  <li><a href="#thiết-lập-bằng-lệnh" id="toc-thiết-lập-bằng-lệnh" class="nav-link" data-scroll-target="#thiết-lập-bằng-lệnh">Thiết lập bằng lệnh</a></li>
  <li><a href="#thiết-lập-thủ-công" id="toc-thiết-lập-thủ-công" class="nav-link" data-scroll-target="#thiết-lập-thủ-công">Thiết lập thủ công</a></li>
  <li><a href="#thiết-lập-bên-trong-một-dự-án-r" id="toc-thiết-lập-bên-trong-một-dự-án-r" class="nav-link" data-scroll-target="#thiết-lập-bên-trong-một-dự-án-r">Thiết lập bên trong một dự án R</a></li>
  <li><a href="#thư-mục-làm-việc-với-r-markdown" id="toc-thư-mục-làm-việc-với-r-markdown" class="nav-link" data-scroll-target="#thư-mục-làm-việc-với-r-markdown">Thư mục làm việc với R markdown</a></li>
  <li><a href="#cung-cấp-đường-dẫn-tệp" id="toc-cung-cấp-đường-dẫn-tệp" class="nav-link" data-scroll-target="#cung-cấp-đường-dẫn-tệp">Cung cấp đường dẫn tệp</a></li>
  </ul></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects"><span class="header-section-number">3.10</span> Đối tượng</a>
  <ul class="collapse">
  <li><a href="#mọi-thứ-đều-là-một-đối-tượng" id="toc-mọi-thứ-đều-là-một-đối-tượng" class="nav-link" data-scroll-target="#mọi-thứ-đều-là-một-đối-tượng">Mọi thứ đều là một đối tượng</a></li>
  <li><a href="#định-nghĩa-một-đối-tượng--" id="toc-định-nghĩa-một-đối-tượng--" class="nav-link" data-scroll-target="#định-nghĩa-một-đối-tượng--">Định nghĩa một đối tượng (<code>&lt;-</code>)</a></li>
  <li><a href="#objectstructure" id="toc-objectstructure" class="nav-link" data-scroll-target="#objectstructure"><span class="header-section-number">3.10.1</span> Cấu trúc đối tượng</a></li>
  <li><a href="#kiểu-đối-tượng" id="toc-kiểu-đối-tượng" class="nav-link" data-scroll-target="#kiểu-đối-tượng">Kiểu đối tượng</a></li>
  <li><a href="#cột-biến-số" id="toc-cột-biến-số" class="nav-link" data-scroll-target="#cột-biến-số">Cột / Biến số (<code>$</code>)</a></li>
  <li><a href="#truy-cập-indexing-đối-tượng-bằng-dấu-ngoặc-vuông" id="toc-truy-cập-indexing-đối-tượng-bằng-dấu-ngoặc-vuông" class="nav-link" data-scroll-target="#truy-cập-indexing-đối-tượng-bằng-dấu-ngoặc-vuông">Truy cập / indexing đối tượng bằng dấu ngoặc vuông (<code>[ ]</code>)</a></li>
  <li><a href="#xóa-đối-tượng" id="toc-xóa-đối-tượng" class="nav-link" data-scroll-target="#xóa-đối-tượng">Xóa đối tượng</a></li>
  </ul></li>
  <li><a href="#piping" id="toc-piping" class="nav-link" data-scroll-target="#piping"><span class="header-section-number">8.1</span> Piping (<code>%&gt;%</code>)</a>
  <ul class="collapse">
  <li><a href="#pipes" id="toc-pipes" class="nav-link" data-scroll-target="#pipes"><strong>Pipes</strong></a></li>
  <li><a href="#định-nghĩa-đối-tượng-trung-gian" id="toc-định-nghĩa-đối-tượng-trung-gian" class="nav-link" data-scroll-target="#định-nghĩa-đối-tượng-trung-gian">Định nghĩa đối tượng trung gian</a></li>
  </ul></li>
  <li><a href="#operators" id="toc-operators" class="nav-link" data-scroll-target="#operators"><span class="header-section-number">8.2</span> Các toán tử và hàm chính</a>
  <ul class="collapse">
  <li><a href="#toán-tử-gán" id="toc-toán-tử-gán" class="nav-link" data-scroll-target="#toán-tử-gán">Toán tử gán</a></li>
  <li><a href="#toán-tử-quan-hệ-và-logic" id="toc-toán-tử-quan-hệ-và-logic" class="nav-link" data-scroll-target="#toán-tử-quan-hệ-và-logic">Toán tử quan hệ và logic</a></li>
  <li><a href="#giá-trị-missing" id="toc-giá-trị-missing" class="nav-link" data-scroll-target="#giá-trị-missing">Giá trị Missing</a></li>
  <li><a href="#toán-học-và-thống-kê" id="toc-toán-học-và-thống-kê" class="nav-link" data-scroll-target="#toán-học-và-thống-kê">Toán học và thống kê</a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><code>%in%</code></a></li>
  </ul></li>
  <li><a href="#lỗi-và-cảnh-báo" id="toc-lỗi-và-cảnh-báo" class="nav-link" data-scroll-target="#lỗi-và-cảnh-báo"><span class="header-section-number">12.1</span> Lỗi và cảnh báo</a>
  <ul class="collapse">
  <li><a href="#lỗi-và-cảnh-báo-1" id="toc-lỗi-và-cảnh-báo-1" class="nav-link" data-scroll-target="#lỗi-và-cảnh-báo-1">Lỗi và Cảnh báo</a></li>
  <li><a href="#mẹo-cú-pháp-chung" id="toc-mẹo-cú-pháp-chung" class="nav-link" data-scroll-target="#mẹo-cú-pháp-chung">Mẹo cú pháp chung</a></li>
  <li><a href="#trợ-giúp-viết-code" id="toc-trợ-giúp-viết-code" class="nav-link" data-scroll-target="#trợ-giúp-viết-code">Trợ giúp viết code</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.vn.html">Nhập môn về R</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.vn.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Cơ bản</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="basics" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Cơ bản</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/basics_header_close.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/basics_header_close.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Chào mừng bạn!</p>
<p>Chương này sẽ mô tả những kỹ thuật cơ bản của R. Đây không phải là hướng dẫn sử dụng toàn diện, nhưng sẽ cung cấp những kiến thức cơ bản và có thể hữu ích trong việc làm mới hiểu biết của bạn. Phần <a href="#learning">Tài nguyên học liệu</a> sẽ liên kết đến những hướng dẫn sử dụng R bao quát hơn.</p>
<p>Các phần của chương này đã được điều chỉnh dưới sự cho phép của <a href="https://r4epis.netlify.app/">Dự án R4Epis</a>.</p>
<p>Xem chương <a href="../new_pages/transition_to_R.vn.html">Chuyển đổi sang R</a> để biết các mẹo khi chuyển đổi từ STATA, SAS hoặc Excel sang R.</p>
<!-- ======================================================= -->
<section id="tại-sao-sử-dụng-r" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="tại-sao-sử-dụng-r"><span class="header-section-number">3.1</span> Tại sao sử dụng R?</h2>
<p>Như đã được công bố trên <a href="https://www.r-project.org/about.html">trang web dự án R</a>, R là một ngôn ngữ và môi trường lập trình cho tính toán và đồ họa thống kê. Nó rất linh hoạt, có khả năng mở rộng và hướng tới cộng đồng.</p>
<p><strong>Chi phí</strong></p>
<p>R được sử dụng miễn phí! Có sự tồn tại mạnh mẽ về đạo đức trong cộng đồng người sử dụng nguồn tài nguyên mở và miễn phí.</p>
<p><strong>Khả năng tái lập</strong></p>
<p>Thực hiện quản lý và phân tích dữ liệu của bạn thông qua một ngôn ngữ lập trình (so sánh với Excel hoặc công cụ khác mà thao tác chính là nhấp chuột/thao tác thủ công) giúp nâng cao <strong>khả năng tái lập</strong>, giúp <strong>phát hiện lỗi</strong> dễ dàng hơn và giảm bớt khối lượng công việc của bạn.</p>
<p><strong>Cộng đồng</strong></p>
<p>R có cộng đồng người dùng khổng lồ và có tính hợp tác. Các package và công cụ mới nhằm giải quyết các vấn đề thực tế được phát triển hàng ngày và được kiểm tra bởi cộng đồng người dùng. Ví dụ, <a href="https://rladies.org/">R-Ladies</a> là một tổ chức toàn cầu có sứ mệnh thúc đẩy sự đa dạng giới trong cộng đồng R và là một trong những tổ chức người dùng R lớn nhất. Thậm chí có thể có một phần của nhóm này đang ở gần bạn!</p>
</section>
<section id="các-thuật-ngữ-chính" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="các-thuật-ngữ-chính"><span class="header-section-number">3.2</span> Các thuật ngữ chính</h2>
<p><strong>RStudio</strong> - RStudio là Giao diện đồ họa người dùng (GUI) giúp sử dụng <strong>R</strong> dễ dàng hơn. Đọc thêm <a href="#rstudio">trong mục RStudio</a>.</p>
<p><strong>Đối tượng</strong> - Bao gồm mọi thứ bạn lưu trữ trong R - bộ dữ liệu, biến, danh sách tên làng, quy mô dân số, thậm chí cả các kết quả đầu ra như đồ thị - là các <em>đối tượng</em> được <em>gán tên</em> và <em>có thể được tham chiếu</em> trong các lệnh sau này. Đọc thêm <a href="#objects">trong mục Đối tượng</a>.</p>
<p><strong>Hàm</strong> - Mỗi hàm là một code hoạt động mà chấp nhận dữ liệu đầu vào và trả về kết quả đầu ra đã được biến đổi. Đọc thêm <a href="#functions">trong mục Các hàm</a>.</p>
<p><strong>Packages</strong> - Mỗi package R là một gói câu lệnh có khả năng chia sẻ. Đọc thêm <a href="#packages">trong mục Packages</a>.</p>
<p><strong>Scripts</strong> - Mỗi script là một tệp tài liệu chứa các lệnh của bạn. Đọc thêm <a href="#scripts">trong mục Scripts</a></p>
</section>
<section id="learning" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="learning"><span class="header-section-number">3.3</span> Tài nguyên học liệu</h2>
<section id="tài-nguyên-trong-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tài-nguyên-trong-rstudio">Tài nguyên trong RStudio</h3>
<p><strong>Tài liệu trợ giúp</strong></p>
<p>Tìm kiếm tab “Help” của RStudio về tài liệu liên quan đến package R và các hàm cụ thể. Tab này nằm trong cửa sổ chứa các tab Files, Plots và Packages (thường ở cửa sổ phía dưới bên phải). Như một lối tắt, bạn cũng có thể nhập tên của một package hoặc câu lệnh vào R Console sau dấu hỏi chấm và không bao gồm dấu ngoặc đơn để mở trang trợ giúp liên quan.</p>
<p>Ví dụ: <code>?filter</code> hoặc <code>?diagrammeR</code>.</p>
<p><strong>Các hướng dẫn có sự tương tác</strong></p>
<p>R có thể được học thông qua một số tương tác <em>trong</em> RStudio.</p>
<p>RStudio cung cấp một cửa sổ Tutorial được hỗ trợ bởi package <a href="https://blog.rstudio.com/2020/02/25/rstudio-1-3-integrated-tutorials/"><strong>learnr</strong></a>. Chỉ cần cài đặt package này và mở hướng dẫn qua tab “Tutorial” trong cửa sổ RStudio phía trên bên phải (cũng chứa các tab Environment và History).</p>
<p>Package <a href="https://swirlstats.com/"><strong>swirl</strong></a> cung cấp các nội dung học tương tác trong R Console. Cài đặt và tải package này, rồi chạy lệnh <code>swirl()</code> (dấu ngoặc đơn trống) trong R Console. Bạn sẽ thấy các thông báo xuất hiện trong cửa sổ Console. Phản hồi bằng cách nhập vào Console. Nó sẽ hướng dẫn bạn qua một nội dung học do bạn lựa chọn.</p>
</section>
<section id="cheatsheets" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cheatsheets">Cheatsheets</h3>
<p>Có rất nhiều “cheatsheets” PDF có sẵn trên <a href="https://rstudio.com/resources/cheatsheets/">trang web của RStudio</a>, ví dụ như:</p>
<ul>
<li>Factors với package <strong>forcats</strong><br>
</li>
<li>Ngày và thời gian với package <strong>lubridate</strong><br>
</li>
<li>Chuỗi với package <strong>stringr</strong><br>
</li>
<li>Các vòng lặp với package <strong>purrr</strong><br>
</li>
<li>Nhập dữ liệu<br>
</li>
<li>Cheatsheet biến đổi dữ liệu với package <strong>dplyr</strong><br>
</li>
<li>R Markdown (để tạo các tài liệu như PDF, Word, Powerpoint…)<br>
</li>
<li>Shiny (để xây dựng các ứng dụng web tương tác)<br>
</li>
<li>Trực quan hóa dữ liệu với package <strong>ggplot2</strong><br>
</li>
<li>Bản đồ (GIS)<br>
</li>
<li>Package <strong>leaflet</strong> (bản đồ tương tác)<br>
</li>
<li>Python với R (package <strong>reticulate</strong>)</li>
</ul>
<p>Đây là tài nguyên R trực tuyến dành riêng cho <a href="https://jules32.github.io/r-for-excel-users/">Người dùng Excel</a></p>
</section>
<section id="twitter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="twitter">Twitter</h3>
<p>R có một cộng đồng twitter sôi động, nơi bạn có thể tìm hiểu các mẹo, lối tắt và tin tức - hãy theo dõi các tài khoản sau:</p>
<ul>
<li>Theo dõi chúng tôi: <a href="https://twitter.com/epirhandbook">@epiRhandbook</a><br>
</li>
<li>R Function A Day <a href="https://twitter.com/rfunctionaday">@rfuntionaday</a> là một nguồn tài nguyên <em>tuyệt vời</em></li>
<li>R for Data Science <a href="https://twitter.com/rstats4ds?lang=en">@rstats4ds</a><br>
</li>
<li>RStudio <a href="https://twitter.com/rstudio?lang=en">@RStudio</a><br>
</li>
<li>RStudio Tips <a href="https://twitter.com/rstudiotips">@rstudiotips</a><br>
</li>
<li>R-Bloggers <a href="https://twitter.com/Rbloggers">@Rbloggers</a><br>
</li>
<li>R-ladies <a href="https://twitter.com/RLadiesGlobal">@RLadiesGlobal</a><br>
</li>
<li>Hadley Wickham <a href="https://twitter.com/hadleywickham?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">@hadleywickham</a></li>
</ul>
<p>Cũng như:</p>
<p><strong>#epitwitter</strong> và <strong>#rstats</strong></p>
</section>
<section id="nguồn-tài-nguyên-trực-tuyến-miễn-phí" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="nguồn-tài-nguyên-trực-tuyến-miễn-phí">Nguồn tài nguyên trực tuyến miễn phí</h3>
<p>Cuốn sách <a href="https://r4ds.had.co.nz/">R for Data Science</a> (R dành cho Khoa học Dữ liệu) của Garrett Grolemund và Hadley Wickham</p>
<p>Trang web của dự án <a href="https://r4epis.netlify.app/">R4Epis</a> nhằm mục đích “phát triển các công cụ làm sạch, phân tích và báo cáo dữ liệu được chuẩn hóa dùng trong các trường hợp bùng phát dịch phổ biến và các cuộc điều tra dựa trên dân số mà sẽ được tiến hành trong các ứng phó khẩn cấp của Tổ chức Bác sỹ không biên giới” Bạn có thể tìm thấy tài liệu đào tạo cơ bản về R, các mẫu báo cáo RMarkdown và khảo sát về các đợt bùng phát dịch, cũng như các hướng dẫn để giúp bạn thiết lập chúng.</p>
</section>
<section id="các-ngôn-ngữ-khác-ngoài-tiếng-anh" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="các-ngôn-ngữ-khác-ngoài-tiếng-anh">Các ngôn ngữ khác ngoài Tiếng Anh</h3>
<p><a href="https://www.rstudio.com/collections/espanol/">Tài liệu RStudio bằng tiếng Tây Ban Nha</a></p>
<p><a href="https://juba.github.io/tidyverse/index.html">Giới thiệu cơ bản về R (tiếng Pháp)</a></p>
<!-- ======================================================= -->
</section>
</section>
<section id="cài-đặt" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="cài-đặt"><span class="header-section-number">3.4</span> Cài đặt</h2>
<section id="r-và-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-và-rstudio">R và RStudio</h3>
<p><strong>Làm thế nào để cài đặt R</strong></p>
<p>Truy cập vào trang web <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a> và tải phiên bản mới nhất của R phù hợp với máy tính của bạn.</p>
<p><strong>Làm thế nào để cài đặt RStudio</strong></p>
<p>Truy cập vào trang web <a href="https://rstudio.com/products/rstudio/download/" class="uri">https://rstudio.com/products/rstudio/download/</a> và tải phiên bản Desktop mới nhất của RStudio phù hợp với máy tính của bạn.</p>
<p><strong>Quyền truy cập</strong><br>
Lưu ý rằng bạn nên cài đặt R và RStudio vào một ổ đĩa mà bạn có quyền đọc và ghi lại. Nếu không, khả năng cài đặt các package R (thường xuyên xảy ra) của bạn sẽ bị ảnh hưởng. Nếu bạn gặp sự cố, hãy thử mở RStudio bằng cách nhấp chuột phải vào biểu tượng và chọn “Run as administrator”. Các mẹo khác có thể được tìm thấy trong chương <a href="../new_pages/network_drives.vn.html">R trên ổ cứng mạng</a>.</p>
<p><strong>Làm thế nào để cập nhật R và RStudio</strong></p>
<p>Phiên bản R của bạn được in ra R Console khi khởi động. Bạn cũng có thể chạy lệnh <code>sessionInfo()</code>.</p>
<p>Để cập nhật R, truy cập đến trang web được nhắc đến ở trên và cài đặt lại R. Ngoài ra, bạn có thể sử dụng package <strong>installr</strong> (trên Windows) bằng cách chạy câu lệnh <code>installr::updateR()</code>. Thao tác này sẽ mở ra các hộp thoại giúp bạn tải xuống phiên bản R mới nhất và cập nhật các package của bạn lên phiên bản R mới. Có thể tìm thấy thêm chi tiết trong <a href="https://www.r-project.org/nosvn/pandoc/installr.html">tài liệu</a> <strong>installr</strong> .</p>
<p>Lưu ý rằng phiên bản R cũ sẽ vẫn tồn tại trong máy tính của bạn. Bạn có thể tạm thời chạy phiên bản cũ hơn (“installation” cũ hơn) của R bằng cách nhấp vào “Tools” -&gt; “Global Options” trong RStudio và chọn một phiên bản R. Điều này có thể hữu ích nếu bạn muốn sử dụng một package chưa được cập nhật để hoạt động trên phiên bản R mới nhất.</p>
<p>Để cập nhật RStudio, truy cập đến trang web được nhắc đến ở trên và cài đặt lại RStudio. Một tùy chọn khác là nhấp vào “Help” -&gt; “Check for Updates” trong RStudio, nhưng điều này có thể dẫn đến việc không hiển thị các bản cập nhật mới nhất.</p>
<p>Để xem phiên bản R, RStudio hoặc package nào đã được sử dụng khi viết Sổ tay này, hãy xem chương <a href="../new_pages/editorial_style.vn.html">Biên tập và ghi chú kỹ thuật</a>.</p>
</section>
<section id="những-phần-mềm-khác-bạn-có-thể-cần-cài-đặt" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="những-phần-mềm-khác-bạn-có-thể-cần-cài-đặt">Những phần mềm khác bạn <em>có thể</em> cần cài đặt</h3>
<ul>
<li>TinyTeX (<em>để biên dịch tài liệu RMarkdown sang PDF</em>)<br>
</li>
<li>Pandoc (<em>để biên dịch tài liệu RMarkdown</em>)<br>
</li>
<li>RTools (<em>để xây dựng các package cho R</em>)<br>
</li>
<li>phantomjs (<em>để lưu ảnh tĩnh của mạng động, chẳng hạn như chuỗi lây truyền</em>)</li>
</ul>
<section id="tinytex" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="tinytex">TinyTex</h4>
<p>TinyTex là một bản phân phối LaTeX tùy chỉnh, hữu ích khi tạo các tệp PDF từ R.<br>
Truy cập <a href="https://yihui.org/tinytex/" class="uri">https://yihui.org/tinytex/</a> để tìm hiểu thêm thông tin.</p>
<p>Để cài đặt TinyTex từ R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'tinytex'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to uninstall TinyTeX, run tinytex::uninstall_tinytex()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pandoc" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="pandoc">Pandoc</h4>
<p>Pandoc là một công cụ chuyển đổi văn bản, một phần mềm tách biệt với R. <strong>Nó đi kèm với RStudio và không cần phải tải xuống.</strong> Nó hỗ trợ quá trình chuyển đổi văn bản từ Rmarkdown sang các định dạng như .pdf và có bổ sung thêm một số tính năng phức tạp.</p>
</section>
<section id="rtools" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rtools">RTools</h4>
<p>RTools là một phần mềm được sử dụng để xây dựng package cho R</p>
<p>Cài đặt từ trang web: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</section>
<section id="phantomjs" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="phantomjs">phantomjs</h4>
<p>Phần mềm này thường được sử dụng để chụp “chụp ảnh màn hình” trang web. Ví dụ khi bạn tạo một chuỗi lây truyền với package <strong>epicontacts</strong>, một tệp HTML có thể tương tác và chuyển động được tạo ra. Nếu bạn muốn có hình ảnh tĩnh, sử dụng package <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> để tự động hóa quá trình này. Việc này sẽ yêu cầu chương trình bên ngoài “phantomjs”. Bạn có thể cài đặt phantomjs thông qua package <strong>webshot</strong> bằng lệnh <code>webshot::install_phantomjs()</code>.</p>
<!-- ======================================================= -->
</section>
</section>
</section>
<section id="rstudio" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="rstudio"><span class="header-section-number">3.5</span> RStudio</h2>
<section id="làm-quen" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="làm-quen">Làm quen</h3>
<p><strong>Đầu tiên, mở RStudio.</strong> Biểu tượng của chúng có sự tương đồng, hãy chắc chắn bạn đang mở <em>RStudio</em> chứ không phải R.</p>
<p>Để RStudio hoạt động bạn cũng cần phải cài đặt R trên máy tính (xem hướng dẫn cài đặt ở bên trên).</p>
<p><strong>RStudio</strong> là một giao diện người dùng (GUI) giúp sử dụng <strong>R</strong> dễ dàng hơn. Bạn có thể coi R như một động cơ đang đảm đương công việc chính của một phương tiện và RStudio là phần thân của phương tiện (với ghế ngồi, các phụ kiện,…) giúp bạn sử dụng động cơ tiến về phía trước. Bạn có thể xem toàn bộ cheatsheet giao diện người dùng của RStudio (PDF) tại <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">đây</a></p>
<p>RStudio mặc định hiển thị bốn cửa sổ hình chữ nhật.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/RStudio_overview.PNG" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../images/RStudio_overview.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: black;"><strong><em>MẸO:</em></strong> Nếu RStudio của bạn chỉ hiển thị một cửa sổ bên trái thì đó là do bạn chưa mở scripts nào.</span></p>
<p><strong>Cửa sổ mã nguồn</strong><br>
Cửa sổ này, mặc định hiển thị phía trên bên trái, là một khoảng trống để chỉnh sửa, chạy và lưu các <a href="#scripts">scripts</a> của bạn. Script chứa các lệnh mà bạn muốn chạy. Cửa sổ này cũng có thể hiển thị thông tin dữ liệu (data frames).</p>
<p>Đối với người dùng Stata, cửa sổ này tương tự với các cửa sổ Do-file và Data Editor.</p>
<p><strong>Cửa sổ R Console</strong></p>
<p>R Console, mặc định ở cửa sổ bên trái hoặc phía dưới bên trái của RStudio, là ngôi nhà của “động cơ” R. Đây là nơi các lệnh thực sự được chạy, các kết quả đầu ra không phải là đồ họa và các thông báo lỗi/cảnh báo sẽ xuất hiện. Bạn có thể nhập và chạy các lệnh trực tiếp trong R Console, nhưng sẽ sớm nhận ra các lệnh này không được lưu như khi chạy lệnh từ một script.</p>
<p>Nếu bạn đã quen thuộc với Stata, R Console giống như cửa sổ Command Window và Results Window.</p>
<p><strong>Cửa sổ Environment</strong><br>
Cửa sổ này, mặc định ở phía trên bên phải, thường được sử dụng để xem tóm tắt ngắn gọn về các <a href="#objects">đối tượng</a> itrong R Environment ở phiên hiện tại. Các đối tượng này có thể bao gồm các tập dữ liệu đã được nhập, chỉnh sửa hoặc tạo mới, các tham số bạn đã xác định (ví dụ: một tuần dịch tễ cụ thể để phân tích), vectơ hoặc các danh sách bạn đã xác định trong quá trình phân tích (ví dụ: tên các vùng). Bạn có thể nhấp vào mũi tên bên cạnh tên của data frames để xem các biến số của nó.</p>
<p>Cửa sổ này gần giống với cửa sổ Variables Manager trong Stata.</p>
<p>Cửa sổ này cũng chứa <em>History</em> - nơi mà bạn có thể xem các lệnh đã làm trước đó. Nó cũng có một tab “Tutorial” - là nơi mà bạn có thể hoàn thành các hướng dẫn tương tác với R nếu bạn đã cài đặt package <strong>learnr</strong>. Nó cũng chứa một tab “Connections” cho phép các kết nối bên ngoài và có thể có cửa sổ “Git” nếu bạn chọn giao diện với Github.</p>
<p><strong>Cửa sổ Plots, Viewer, Packages, và Help</strong><br>
Cửa sổ phía dưới bên phải bao gồm một số tab quan trọng. Các đồ họa chính điển hình bao gồm bản đồ sẽ được hiển thị trong Cửa sổ Plot. Các kết quả đầu ra tương tác hoặc HTML sẽ được hiển thị trong cửa sổ Viewer. Cửa sổ File là một trình duyệt có thể được sử dụng để mở hoặc xóa tệp. Cửa sổ Packages cho phép bạn xem, cài đặt, cập nhật, xóa, tải/dỡ các package R và xem bạn có phiên bản package nào. Để tìm hiểu thêm về các package hãy xem <a href="#packages">mục packages</a> bên dưới.</p>
<p>Cửa sổ này chứa các nội dung tương đương với các cửa sổ Plots Manager và Project Manager trong Stata.</p>
</section>
<section id="các-cài-đặt-của-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="các-cài-đặt-của-rstudio">Các cài đặt của RStudio</h3>
<p>Thay đổi các cài đặt và giao diện của RStudio trong thanh menu thả xuống <em>Tools</em>, bằng cách chọn <em>Global Options</em>. Ở đó, bạn có thể thay đổi cài đặt mặc định, bao gồm cả màu giao diện/nền.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/RStudio_tools_options_1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/RStudio_tools_options.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Khởi động lại</strong></p>
<p>Nếu R của bạn bị treo, bạn có thể khởi động lại R bằng cách di chuột đến menu Session và nhấp vào “Restart R”. Thao tác này giúp tránh rắc rối khi đóng và mở RStudio. Mọi thứ trong môi trường R của bạn sẽ bị xóa khi thực hiện thao tác này.</p>
</section>
<section id="các-phím-tắt" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="các-phím-tắt">Các phím tắt</h3>
<p>Dưới đây là một vài phím tắt rất hữu dụng. Tất cả các phím tắt cho Windows, Max và Linux nằm ở chương 2 <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">cheatsheet giao diện người dùng</a> của RStudio.</p>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Windows/Linux</th>
<th>Mac</th>
<th>Hành động</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Esc</td>
<td>Esc</td>
<td>Ngắt lệnh hiện tại (hữu ích nếu bạn vô tình chạy một lệnh chưa hoàn chỉnh và không thể thoát khỏi việc nhìn thấy “+” trong R console)</td>
</tr>
<tr class="even">
<td>Ctrl+s</td>
<td>Cmd+s</td>
<td>Lưu (script)</td>
</tr>
<tr class="odd">
<td>Tab</td>
<td>Tab</td>
<td>Tự động điền</td>
</tr>
<tr class="even">
<td>Ctrl + Enter</td>
<td>Cmd + Enter</td>
<td>Chạy (các) dòng/phần code đang được chọn</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + C</td>
<td>Cmd + Shift + c</td>
<td>Bình luận/bỏ bình luận các dòng được đánh dấu</td>
</tr>
<tr class="even">
<td>Alt + -</td>
<td>Option + -</td>
<td>Chèn <code>&lt;-</code></td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + m</td>
<td>Cmd + Shift + m</td>
<td>Chèn <code>%&gt;%</code></td>
</tr>
<tr class="even">
<td>Ctrl + l</td>
<td>Cmd + l</td>
<td>Dọn dẹp R console</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + b</td>
<td>Cmd + Option + b</td>
<td>Chạy từ đầu đến dòng hiện tại</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + t</td>
<td>Cmd + Option + t</td>
<td>Chạy code chunk hiện tại (R Markdown)</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + i</td>
<td>Cmd + Shift + r</td>
<td>Chèn code chunk (vào R Markdown)</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + c</td>
<td>Cmd + Option + c</td>
<td>Chạy code chunk hiện tại (R Markdown)</td>
</tr>
<tr class="odd">
<td>up/down arrows in R console</td>
<td>Tương tự</td>
<td>Chuyển đổi qua các lệnh đã chạy gần đây</td>
</tr>
<tr class="even">
<td>Shift + up/down arrows in script</td>
<td>Tương tự</td>
<td>Chọn nhiều dòng code</td>
</tr>
<tr class="odd">
<td>Ctrl + f</td>
<td>Cmd + f</td>
<td>Tìm và thay thế trong script hiện tại</td>
</tr>
<tr class="even">
<td>Ctrl + Shift + f</td>
<td>Cmd + Shift + f</td>
<td>Tìm trong các tệp (tìm/thay thế trên nhiều script)</td>
</tr>
<tr class="odd">
<td>Alt + l</td>
<td>Cmd + Option + l</td>
<td>Thu gọn code đã chọn</td>
</tr>
<tr class="even">
<td>Shift + Alt + l</td>
<td>Cmd + Shift + Option+l</td>
<td>Mở rộng code đã chọn</td>
</tr>
</tbody>
</table>
<p><span style="color: darkgreen;"><strong><em>MẸO:</em></strong> Sử dụng phím Tab của bạn khi nhập để sử dụng chức năng tự động hoàn thành của RStudio. Điều này có thể giúp ngăn ngừa các lỗi chính tả. Nhấn Tab trong khi nhập để hiện ra menu thả xuống gồm các hàm và đối tượng có thể có, dựa trên những gì bạn đã nhập.</span></p>
<!-- ======================================================= -->
</section>
</section>
<section id="functions" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="functions"><span class="header-section-number">3.6</span> Hàm</h2>
<p>Các hàm là phần cốt lõi của việc sử dụng R. Hàm là cách bạn thực hiện các tác vụ và hoạt động. Nhiều hàm được cài đặt sẵn với R, nhiều hàm khác sẵn sàng để tải xuống trong các <em>packages</em> (giải thích trong phần <a href="#packages">packages</a>), và bạn thậm chí có thể viết các hàm tùy chỉnh của riêng mình!</p>
<p>Phần khái niệm cơ bản của hàm giải thích:</p>
<ul>
<li>Thế nào là một hàm và cách mà chúng hoạt động<br>
</li>
<li>Thế nào là <em>đối số</em> của hàm<br>
</li>
<li>Làm cách nào để nhận được sự trợ giúp khi tìm hiểu một hàm</li>
</ul>
<p><em>Lưu ý nhanh về cú pháp:</em> Trong cuốn sổ tay này, các hàm được viết dưới dạng code văn bản với dấu mở ngoặc đơn như sau: <code>filter()</code>. Như đã giải thích trong phần <a href="#packages">packages</a>, các hàm được tải xuống có sẵn trong các <em>packages</em>. Trong sổ tay này, tên các package được <strong>in đậm</strong>, ví dụ như <strong>dplyr</strong>. Đôi khi trong code ví dụ, bạn có thể thấy tên hàm được liên kết rõ ràng với tên package của chính hàm đó bằng hai dấu hai chấm (<code>::</code>) như thế này: <code>dplyr::filter()</code>. Mục đích của việc liên kết này sẽ được giải thích trong phần package.</p>
<!-- ======================================================= -->
<section id="các-hàm-cơ-bản" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="các-hàm-cơ-bản">Các hàm cơ bản</h3>
<p><strong>Một hàm giống như một cỗ máy nhận các dữ liệu đầu vào, thực hiện một số thao tác với dữ liệu đó và sản xuất kết quả đầu ra.</strong> Kết quả đầu ra như thế nào phụ thuộc vào hàm mà bạn sử dụng.</p>
<p><strong>Các hàm thường hoạt động dựa trên các đối tượng được đặt trong dấu ngoặc đơn của hàm</strong>. Ví dụ, hàm <code>sqrt()</code> tính căn bậc hai của một số:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>Đối tượng được dùng cho một hàm cũng có thể là một cột trong tập dữ liệu (xem phần <a href="#objects">Đối tượng</a> để biết chi tiết về tất cả các loại đối tượng). Vì R có thể lưu trữ nhiều tập dữ liệu, bạn sẽ cần xác định cả tập dữ liệu và cột. Một cách để làm điều này là sử dụng ký hiệu <code>$</code> để liên kết tên của tập dữ liệu và tên của cột (<code>dataset$column</code>). Trong ví dụ dưới đây, hàm <code>summary()</code> được áp dụng cho cột <code>age</code> trong tập dữ liệu <code>linelist</code>, và kết quả đầu ra là bản tóm tắt các giá trị số và giá trị missing của cột.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print summary statistics of column 'age' in the dataset 'linelist'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>LƯU Ý:</em></strong> Đằng sau một hàm là hệ thống code bổ sung phức tạp đã được gói gọn cho người dùng thành một lệnh đơn giản.</span></p>
<!-- ======================================================= -->
</section>
<section id="hàm-với-nhiều-đối-số" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hàm-với-nhiều-đối-số">Hàm với nhiều đối số</h3>
<p>Các hàm thường yêu cầu một số dữ liệu đầu vào, được gọi là <strong><em>đối số</em></strong>, đặt trong dấu ngoặc đơn của hàm, thường được phân tách bằng dấu phẩy.</p>
<ul>
<li>Một vài đối số là bắt buộc để hàm hoạt động chính xác, những đối số khác là tùy chọn<br>
</li>
<li>Những đối số tùy chọn có thiết lập mặc định<br>
</li>
<li>Các đối số có thể nhận ký tự, số, logic (TRUE / FALSE) và các dữ liệu đầu vào khác</li>
</ul>
<p>Dưới đây là một hàm giả định thú vị, được gọi là <code>oven_bake()</code>, là ví dụ về một hàm điển hình. Hàm này nhận một đối tượng đầu vào (ví dụ: một tập dữ liệu, hoặc trong ví dụ này là “bột”) và thực hiện các hoạt động được xác định bởi các đối số bổ sung (<code>minutes =</code> and <code>temperature =</code>). Kết quả đầu ra có thể được in ra cửa sổ console hoặc được lưu dưới dạng một đối tượng bằng cách sử dụng toán tử gán <code>&lt;-</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Function_Bread_Example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/Function_Bread_Example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Trong một ví dụ thực tế hơn</strong>, hàm <code>age_pyramid()</code> dưới đây tạo một biểu đồ tháp tuổi dựa trên nhóm tuổi đã xác định và cột phân tách nhị phân, ví dụ như <code>giới tính</code>. Hàm được cung cấp bởi ba đối số trong dấu ngoặc đơn và được phân tách nhau bằng dấu phẩy. Các giá trị được cung cấp cho các đối số thiết lập <code>linelist</code> là dataframe được sử dụng, <code>age_cat5</code> là cột để đếm và <code>giới tính</code> là cột nhị phân để sử dụng chia kim tự tháp theo màu.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an age pyramid</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(<span class="at">data =</span> linelist, <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="at">split_by =</span> <span class="st">"gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.vn_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="basics.vn_files/figure-html/unnamed-chunk-6-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Lệnh trên có thể được viết tương tự như bên dưới, theo cách dài hơn với một dòng mới cho mỗi đối số. Phong cách này có thể dễ đọc và dễ viết “bình luận” hơn với <code>#</code> để giải thích từng phần (bình luận mở rộng là một thực hành tốt!). Để chạy lệnh dài hơn này, bạn có thể bôi đen toàn bộ lệnh và nhấp vào “Run” hoặc chỉ cần đặt con trỏ vào dòng đầu tiên rồi nhấn đồng thời phím Ctrl và phím Enter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an age pyramid</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> linelist,        <span class="co"># use case linelist</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="co"># provide age group column</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"gender"</span>     <span class="co"># use gender column for two sides of pyramid</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.vn_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="basics.vn_files/figure-html/unnamed-chunk-7-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Không cần xác định nửa đầu của phép gán đối số (ví dụ: <code>data =</code>) nếu các đối số được viết theo một thứ tự cụ thể (được chỉ định trong tài liệu của hàm). Đoạn code dưới đây tạo ra cùng một kim tự tháp như ở trên, bởi vì hàm kì vọng thứ tự đối số là: data frame, biến <code>age_group</code>, biến <code>split_by</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This command will produce the exact same graphic as above</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(linelist, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Một lệnh <code>age_pyramid()</code> phức tạp hơn có thể bao gồm các đối số <em>tùy chọn</em> để:</strong></p>
<ul>
<li>Hiển thị tỷ lệ thay vì số lượng (đặt <code>proportional = TRUE</code> khi giá trị mặc định là <code>FALSE</code>)<br>
</li>
<li>Chỉ định hai màu để sử dụng (<code>pal =</code> là viết tắt của “bảng màu” và được cung cấp với một vectơ gồm hai tên màu. Xem chương <a href="#objectstructure">đối tượng</a> để biết cách hàm <code>c()</code> tạo ra một vectơ)</li>
</ul>
<p><span style="color: black;"><strong><em>LƯU Ý:</em></strong> Đối với các đối số mà bạn xác định với cả hai phần của đối số (ví dụ: <code>proportional = TRUE</code>), thứ tự của chúng trong tất cả các đối số không quan trọng.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  linelist,                    <span class="co"># use case linelist</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age_cat5"</span>,                  <span class="co"># age group column</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gender"</span>,                    <span class="co"># split by gender</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportional =</span> <span class="cn">TRUE</span>,         <span class="co"># percents instead of counts</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"purple"</span>)  <span class="co"># colors</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.vn_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="basics.vn_files/figure-html/unnamed-chunk-8-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="viết-hàm" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="viết-hàm">Viết hàm</h3>
<p>R là một ngôn ngữ được định hướng xung quanh hàm, vì thế bạn nên cảm thấy được trao quyền để tự viết các hàm của riêng mình. Việc tạo ra hàm mang đến một vài lợi thế:</p>
<ul>
<li>Tạo điều kiện thuận lợi cho lập trình mô-đun - tách code thành các phần độc lập và có thể quản lý<br>
</li>
<li>Thay thế việc copy-and-paste lặp đi lặp lại, điều mà có thể dễ xảy ra lỗi<br>
</li>
<li>Đặt tên dễ nhớ cho các đoạn code</li>
</ul>
<p>Cách viết một hàm được trình bày cụ thể trong chương <a href="#viết-hàm">Viết hàm</a>.</p>
<!-- A function is given a name and defined with the assignment operator `<-` to a special **base** R function called `function()`. Within the parentheses, the arguments that the function will accept are defined. This is followed by curly brackets `{ }`, within which the actual code of the function is written.     -->
<!-- The arguments should be provided in the syntax `argument = default`, separated by commas.   -->
<!-- Here is an example where we create a function `staff_calc()` to serve as a staffing calculator for COVID-19 case investigation and contact tracing calls.   -->
<!-- The arguments (inputs) and their default values will be:   -->
<!-- * `daily_cases = NULL` The number of new COVID-19 cases per day   -->
<!-- * `contacts_each = 5` The number contacts enumerated for each case   -->
<!-- * `time_case = 0.5`  Number of hours to complete a case investigaton by phone   -->
<!-- * `time_contact = 0.25`  Number of hours to complete a contact follow-up by phone   -->
<!-- * `time_day = 8` The number of hours one staff works per day   -->
<!-- Below, the function is created. The code ends with the special function `return()`, which is what the function produces.    -->
<!-- ```{r message=FALSE, warning=FALSE, out.width = "75%", out.height="75%"} -->
<!-- staff_calc <- function(daily_cases = NULL, contacts_each = 5, -->
<!--                        time_case = 0.5, time_contact = 0.25, time_day = 8){ -->
<!--   # Define total daily hours for calling cases -->
<!--   case_hours <- daily_cases * time_case  -->
<!--   # Define total daily hours for calling contacts -->
<!--   contact_hours <- daily_cases * contacts_each * time_contact -->
<!--   # Calculate number of staff required -->
<!--   staff_required <- (case_hours + contact_hours)/time_day -->
<!--   return(staff_required) -->
<!-- } -->
<!-- ``` -->
<!-- Once this code is run, the function will be defined and will appear in the R Environment. We can run the function. Below all the default values are used and the `daily_cases = ` is set to 150.   -->
<!-- There are many other nuances to understand when writing functions, as discussed in the page [Writing functions].   -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="packages" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="packages"><span class="header-section-number">3.7</span> Packages</h2>
<p><strong>Packages chứa các hàm.</strong></p>
<p>Một package trong phần mềm R là một gói code và các tài liệu hướng dẫn có thể chia sẻ được chứa các hàm được định nghĩa trước. Cộng đồng người dùng phần mềm R luôn phát triển những package giúp giải quyết các vấn đề cụ thể, điều này có thể sẽ giúp bạn trong công việc của mình! Bạn sẽ có thể cần cài đặt và sử dụng hàng trăm package trong quá trình sử dụng phần mềm R.</p>
<p>Khi cài đặt, R đã có sẵn các package và hàm <strong>“cơ bản”</strong> giúp thực hiện các nhiệm vụ đơn giản. Nhưng nhiều người dùng R tạo ra các hàm chuyên biệt, được cộng đồng R kiểm chứng và bạn có thể tải xuống dưới dạng <strong>package</strong> để sử dụng theo cách của riêng mình. Trong sách này, tên package được viết <strong>in đậm</strong>. Một trong những khía cạnh thách thức hơn cả của R đó là thường có nhiều hàm hoặc package để lựa chọn nhằm hoàn thành một nhiệm vụ nhất định.</p>
<section id="cài-đặt-và-gọi" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cài-đặt-và-gọi">Cài đặt và Gọi</h3>
<p><em>Các hàm</em> được chứa trong <strong>packages</strong> có thể được tải (“cài đặt”) về máy tính của bạn từ internet. Khi một package được tải xuống, package đó sẽ được lưu trữ trong “thư viện” của bạn. Sau đó, bạn có thể truy cập các hàm mà nó chứa trong phiên làm việc hiện tại trên R của bạn bằng cách “Gọi” package.</p>
<p><em>Hãy coi R là thư viện cá nhân của bạn</em>: Khi bạn tải xuống một package, thư viện của bạn nhận được một cuốn sách mới gồm các hàm, nhưng mỗi lần bạn muốn sử dụng một hàm trong cuốn sách đó, bạn phải mượn (“gọi”) cuốn sách đó từ thư viện của mình.</p>
<p>Tóm lại: để sử dụng các hàm có sẵn trong package R, phải thực hiện 2 bước:</p>
<ol type="1">
<li>Package phải được <strong>cài đặt</strong> (một lần), <em>và</em><br>
</li>
<li>Package phải được <strong>gọi</strong> (trong mỗi phiên làm việc của R)</li>
</ol>
<section id="thư-viện-của-bạn" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="thư-viện-của-bạn">Thư viện của bạn</h4>
<p>“Thư viện” của bạn thực ra là một thư mục trên máy tính của bạn, bao gồm các thư mục chứa các package đã được cài đặt. Hãy tìm nơi R được cài đặt trong máy tính của bạn và tìm kiếm một thư mục có tên “win-library”. Ví dụ: <code>R\win-library\4.0</code> (4.0 là phiên bản R - bạn sẽ có các thư viện khác nhau tùy theo phiên bản R mà bạn đã tải xuống).</p>
<p>Bạn có thể in ra đường dẫn tệp đến thư viện của mình bằng cách gõ lệnh <code>.libPaths()</code> (dấu ngoặc bỏ trống). Điều này trở nên đặc biệt quan trọng nếu làm việc với <a href="../new_pages/network_drives.vn.html">R trên ổ cứng mạng</a>.</p>
</section>
<section id="cài-đặt-từ-cran" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="cài-đặt-từ-cran">Cài đặt từ CRAN</h4>
<p>Thông thường, người dùng R tải các package xuống từ CRAN. CRAN (Comprehensive R Archive Network - Mạng lưu trữ R toàn diện) là một kho công cộng trực tuyến gồm các package R đã được xuất bản bởi các thành viên cộng đồng R.</p>
<p>Bạn có cần lo lắng về vi-rút và bảo mật khi tải xuống một package từ CRAN? Đọc <a href="https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security">bài viết sau</a> để hiểm thêm về chủ đề này.</p>
</section>
<section id="làm-thế-nào-để-cài-đặt-và-gọi" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="làm-thế-nào-để-cài-đặt-và-gọi">Làm thế nào để cài đặt và gọi</h4>
<p>Trong sách này, chúng tôi khuyên bạn nên sử dụng package <strong>pacman</strong> (viết tắt của “package manager”). Nó cung cấp một hàm thuận tiện <code>p_load()</code> mà sẽ cài đặt một package nếu cần <em>và</em> gọi nó để sử dụng trong phiên làm việc hiện tại.</p>
<p>Cú pháp khá đơn giản. Chỉ cần liệt kê tên của các package trong dấu ngoặc đơn của hàm <code>p_load()</code> và phân tách chúng bằng dấu phẩy. Lệnh dưới đây sẽ cài đặt các package sau <strong>rio</strong>, <strong>tidyverse</strong>, và <strong>here</strong> nếu chúng chưa được cài đặt và sẽ gọi chúng ra để sử dụng. Điều này làm cho cách tiếp cận <code>p_load()</code> trở nên thuận tiện và ngắn gọn nếu chia sẻ scripts với người khác. Lưu ý rằng tên package có phân biệt chữ hoa chữ thường.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install (if necessary) and load packages for use</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rio, tidyverse, here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lưu ý rằng chúng ta đã sử dụng cú pháp <code>pacman::p_load()</code> để viết rõ ràng tên package (<strong>pacman</strong>) trước tên hàm (<code>p_load()</code>), được nối với nhau bằng hai dấu hai chấm <code>::</code>. Cú pháp này tiện dụng vì nó cũng gọi package <strong>pacman</strong> (giả sử package này đã được cài đặt).</p>
<p>Ngoài ra còn có các hàm <strong>base</strong> R thay thế mà bạn sẽ gặp thường xuyên. Hàm <strong>base</strong> R để cài đặt một package là <code>install.packages()</code>. Tên của package muốn cài đặt phải được đặt trong dấu ngoặc đơn bên trong <em>dấu ngoặc kép</em>. Nếu bạn muốn cài đặt nhiều package trong một lệnh, chúng phải được liệt kê trong một vectơ dạng ký tự <code>c()</code>.</p>
<p>Lưu ý: lệnh này <em>cài đặt</em> một package, nhưng <em>không</em> gọi nó ra để sử dụng trong phiên làm việc hiện tại.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install a single package with base R</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install multiple packages with base R</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"rio"</span>, <span class="st">"here"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Việc cài đặt cũng có thể được thực hiện bằng cách chọn và nhấp chuột vào cửa sổ RStudio “Package” và chọn “Install”, sau đó tìm kiếm tên package mong muốn cài đặt.</p>
<p>Hàm <strong>base</strong> R để <strong>gọi</strong> một package ra sử dụng (sau khi nó đã được cài đặt) là <code>library()</code>. Hàm này chỉ có thể gọi một package tại một thời điểm (cách khác của lệnh <code>p_load()</code>). Bạn có thể nhập tên package có hoặc không có dấu ngoặc kép.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages for use, with base R</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Để kiểm tra xem một package đã được cài đặt và/hoặc đã được gọi hay chưa, bạn có thể xem Cửa số Package trong RStudio. Nếu package được cài đặt, nó sẽ hiển thị ở đó với số phiên bản. Nếu checkbox của nó được đánh dấu nghĩa là nó đã được gọi cho phiên làm việc hiện tại.</p>
<p><strong>Cài đặt từ Github</strong></p>
<p>Đôi khi, bạn cần cài đặt một package chưa có sẵn từ CRAN. Hoặc có lẽ package đã có sẵn trên CRAN nhưng bạn muốn <em>phiên bản mới hơn</em> với các tính năng mới chưa được cung cấp trong phiên bản cũ. Chúng thường được lưu trữ trên trang web <a href="https://github.com/">github.com</a> trong một “kho lưu trữ (repository)” code công khai và miễn phí. Đọc thêm về Github trong chương [Version control với Git và Github].</p>
<p>Để download packages R từ Github, bạn có thể dụng hàm <code>p_load_gh()</code> từ <strong>pacman</strong>, hàm này sẽ cài đặt package nếu cần và gọi nó để sử dụng cho phiên làm việc R hiện tại. Cách khác để cài đặt bao gồm sử dụng package <strong>remotes</strong> hoặc <strong>devtools</strong>. Đọc thêm về các hàm của <strong>pacman</strong> tại <a href="https://cran.r-project.org/web/packages/pacman/pacman.pdf">Tài liệu về package</a>.</p>
<p>Để cài đặt từ Github, bạn phải cung cấp thêm các thông tin sau:</p>
<ol type="1">
<li>Github ID của chủ sở hữu</li>
<li>Tên của repository chứa package<br>
</li>
<li><em>(Tùy chọn) Tên của “nhánh” (phiên bản phát triển cụ thể) mà bạn muốn tải xuống</em></li>
</ol>
<p>Trong các ví dụ dưới đây, từ đầu tiên trong dấu ngoặc kép là Github ID của chủ sở hữu kho lưu trữ, sau dấu gạch chéo là tên của kho lưu trữ (tên của package).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install/load the epicontacts package from its Github repository</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nếu bạn muốn cài đặt từ một “nhánh” (phiên bản) khác với nhánh chính, hãy thêm tên nhánh sau dấu “@”, được đặt phía sau tên kho lưu trữ.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install the "timeline" branch of the epicontacts package from Github</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts@timeline"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nếu không có sự khác biệt giữa phiên bản Github và phiên bản trên máy tính của bạn, bạn không cần thực hiện thao tác này. Thay vào đó, bạn có thể “buộc” phải cài đặt lại bằng cách sử dụng <code>p_load_current_gh()</code> với đối số <code>update = TRUE</code>. Đọc thêm về <strong>pacman</strong> tại <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">Minh họa trực tuyến</a></p>
<p><strong>Cài đặt từ ZIP hoặc TAR</strong></p>
<p>Bạn có thể cài đặt package từ một URL:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>packageurl <span class="ot">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(packageurl, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hoặc, tải xuống máy tính của bạn dưới dạng tệp nén:</p>
<p>Cách 1: sử dụng lệnh <code>install_local()</code> từ package <strong>remotes</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_local</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cách 2: sử dụng lệnh <code>install.packages()</code> của <strong>base</strong> R, cung cấp đường dẫn tệp đến tệp ZIP và thiết lập <code>type = "source</code> và <code>repos = NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="cú-pháp-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cú-pháp-code">Cú pháp code</h3>
<p>Để tăng sự tường minh trong cuốn sách này, các hàm đôi khi sẽ được đặt sau tên package của chúng bằng cách sử dụng ký hiệu <code>::</code> theo cách sau: <code>package_name::function_name()</code></p>
<p>Khi một package được gọi cho một phiên làm việc, việc làm này là không cần thiết. Bạn chỉ cần sử dụng <code>function_name()</code>. Tuy nhiên, việc viết tên package sẽ hữu ích khi một tên hàm phổ biến và có thể tồn tại trong nhiều package (ví dụ: <code>plot()</code>). Việc viết tên package sẽ giúp gọi package trong trường hợp nó chưa được gọi ra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This command uses the package "rio" and its function "import()" to import a dataset</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"linelist.xlsx"</span>, <span class="at">which =</span> <span class="st">"Sheet1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="trợ-giúp-về-hàm" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="trợ-giúp-về-hàm">Trợ giúp về hàm</h3>
<p>Để đọc thêm thông tin về một hàm, bạn có thể tìm kiếm hàm đó trong cửa sổ Help của RStudio nằm ở góc dưới bên phải. Hoặc bạn cũng có thể chạy một lệnh chẳng hạn như <code>?thefunctionname</code> (đặt tên của hàm sau dấu chấm hỏi) và trang Trợ giúp sẽ xuất hiện trong cửa sổ Help. Cuối cùng, hãy thử tìm kiếm trên internet.</p>
</section>
<section id="cập-nhật-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cập-nhật-packages">Cập nhật packages</h3>
<p>Bạn có thể cập nhật các packages bằng cách cài đặt lại chúng. Bạn cũng có thể bấm vào nút “Update” màu xanh lá cây trong cửa sổ packages của RStudio để xem packages nào có phiên bản mới để cài đặt. Lưu ý rằng code cũ của bạn có thể cần được cập nhật nếu có một bản sửa đổi lớn về cách hoạt động của một hàm!</p>
</section>
<section id="xóa-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="xóa-packages">Xóa packages</h3>
<p>Sử dụng <code>p_delete()</code> từ <strong>pacman</strong>, hoặc <code>remove.packages()</code> từ <strong>base</strong> R. Ngoài ra, hãy tìm thư mục chứa thư viện của bạn và xóa thư mục theo cách thủ công.</p>
</section>
<section id="sự-phụ-thuộc" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sự-phụ-thuộc">Sự phụ thuộc</h3>
<p>Các packages thường phụ thuộc vào các packages khác để hoạt động. Chúng được gọi là sự phụ thuộc. Nếu một package không cài đặt được, thì package phụ thuộc vào nó có khả năng cũng không thể cài đặt được.</p>
<p>Xem sự phụ thuộc của một package với lệnh <code>p_depends()</code>, và xem package nào phụ thuộc vào nó với <code>p_depends_reverse()</code></p>
</section>
<section id="hàm-bị-che-giấu" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hàm-bị-che-giấu">Hàm bị che giấu</h3>
<p>Không có gì lạ nếu hai hoặc nhiều packages chứa cùng một tên hàm. Ví dụ: packages <strong>dplyr</strong> có hàm <code>filter()</code>, nhưng package <strong>stats</strong> cũng vậy. Hàm <code>filter()</code> mặc định phụ thuộc vào thứ tự các package này được gọi lên trong phiên làm việc R - packages được gọi ra sau sẽ là mặc định cho hàm <code>filter()</code>.</p>
<p>Bạn có thể kiểm tra thứ tự của chúng trong cửa sổ Environment của R Studio - nhấp vào menu thả xuống “Global Environment” và xem thứ tự của các packages. Các hàm thuộc các packages <em>ở vị trí thấp hơn</em> trong danh sách thả xuống đó sẽ che giấu các hàm cùng tên trong các packages xuất hiện ở vị trí bên trên trong danh sách thả xuống. Khi bạn vừa gọi một package, R sẽ cảnh báo bạn trong bảng điều khiển nếu xảy ra hiện tượng này, nhưng điều này rất hay bị bỏ quên.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/masking_functions.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/masking_functions.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Dưới đây là những cách bạn có thể sửa lỗi hàm bị che giấu:</p>
<ol type="1">
<li>Ghi rõ tên package trong lệnh. Ví dụ, sử dụng <code>dplyr::filter()</code><br>
</li>
<li>Sắp xếp lại thứ tự mà các package được tải (ví dụ trong <code>p_load()</code>), và <strong>bắt đầu một phiên làm việc R mới</strong></li>
</ol>
</section>
<section id="gỡ-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="gỡ-package">Gỡ package</h3>
<p>Để gỡ (detach) một package, hãy sử dụng lệnh dưới đây, với tên package chính xác và chỉ có một dấu hai chấm. Lưu ý rằng điều này có thể không giải quyết được việc hàm bị che giấu.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>PACKAGE_NAME_HERE, <span class="at">unload=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cài-đặt-phiên-bản-cũ-hơn" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cài-đặt-phiên-bản-cũ-hơn">Cài đặt phiên bản cũ hơn</h3>
<p>Xem <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">hướng dẫn</a> này để cài đặt phiên bản cũ hơn của một package cụ thể.</p>
</section>
<section id="packages-đề-xuất" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="packages-đề-xuất">Packages đề xuất</h3>
<p>Xem chương <a href="../new_pages/packages_suggested.vn.html">Package đề xuất</a> để biết danh sách các packages thường được sử dụng trong dịch tễ học.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="scripts" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="scripts"><span class="header-section-number">3.8</span> Scripts</h2>
<p>Scripts là một phần cơ bản của lập trình. Chúng là các tài liệu chứa các câu lệnh của bạn (ví dụ: các hàm để tạo và chỉnh sửa bộ số liệu, các hàm để in các biểu đồ trực quan hóa số liệu, v.v.). Bạn có thể lưu một scripts và chạy lại sau này. Có nhiều lợi ích để lưu trữ và chạy các lệnh của bạn từ một scripts (so với nhập “từng lệnh” vào R console):</p>
<ul>
<li>Tiện dụng - bạn có thể chia sẻ công việc của mình với người khác bằng cách gửi cho họ các tập lệnh của bạn<br>
</li>
<li>Khả năng tái lập - để bạn và những người khác biết chính xác những gì bạn đã làm<br>
</li>
<li>Kiểm soát phiên bản - để bạn có thể theo dõi các thay đổi do chính bạn hoặc đồng nghiệp thực hiện<br>
</li>
<li>Dễ dàng nhận xét/chú thích - để giải thích cho đồng nghiệp của bạn những gì bạn đã làm</li>
</ul>
<section id="bình-luận" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="bình-luận">Bình luận</h3>
<p>Khi viết script, bạn có thể thêm các chú thích (“bình luận”) xung quanh code R của bạn. Bình luận là cần thiết để giải thích cho chính bạn và những người đọc khác hiểu những gì bạn đang làm. Bạn có thể thêm bình luận bằng cách nhập dấu thăng (#) và viết bình luận của bạn sau đó. Nội dung bình luận sẽ xuất hiện với màu khác với code R.</p>
<p>Bất kỳ code nào được viết sau dấu # sẽ không được chạy. Do đó, đặt dấu # trước dòng code cũng là một cách hữu ích để tạm thời vô hiệu hóa một dòng code (“comment out”) nếu bạn không muốn xóa nó). Bạn có thể comment out/in nhiều dòng cùng một lúc bằng cách bôi đen chúng và nhấn Ctrl + Shift + c (Cmd + Shift + c trong Mac).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A comment can be on a line by itself</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import data</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"linelist_raw.xlsx"</span>) <span class="sc">%&gt;%</span>   <span class="co"># a comment can also come after code</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(age &gt; 50)                          # It can also be used to deactivate / remove a line of code</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Bình luận <em>những gì</em> bạn đang làm <em>và <strong>tại sao</strong> bạn làm như vậy</em>.<br>
</li>
<li>Chia code của bạn thành các phần hợp lý<br>
</li>
<li>Kèm theo code của bạn với mô tả từng bước về những gì đang được thực hiện (ví dụ: các bước được đánh số)</li>
</ul>
</section>
<section id="phong-cách-viết-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="phong-cách-viết-code">Phong cách viết code</h3>
<p>Phong cách viết code của bạn rất quan trọng - đặc biệt là khi làm việc theo nhóm. Chúng tôi khuyên bạn nên tuân theo <a href="https://style.tidyverse.org/">hướng dẫn</a> phong cách viết code <strong>tidyverse</strong> . Bên cạnh đó còn có các packages khác như <strong>styler</strong> và <strong>lintr</strong> để giúp bạn tuân theo phong cách này.</p>
<p>Một vài điểm rất cơ bản để làm cho code của bạn dễ dàng đọc được đối với người khác:<br>
* Khi đặt tên cho các đối tượng, chỉ sử dụng các chữ cái viết thường, số và dấu gạch dưới <code>_</code>, ví dụ: <code>my_data</code><br>
* Thường xuyên sử dụng dấu cách, bao gồm cả xung quanh các toán tử, ví dụ: <code>n = 1</code> và <code>age_new &lt;- age_old + 3</code></p>
</section>
<section id="ví-dụ-về-script" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ví-dụ-về-script">Ví dụ về Script</h3>
<p>Dưới đây là một ví dụ về một đoạn ngắn R script. Hãy nhớ rằng, bạn càng giải thích ngắn gọn lệnh code của mình trong phần bình luận, thì đồng nghiệp của bạn sẽ càng thích bạn!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/example_script.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../images/example_script.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-markdown">R markdown</h3>
<p>R markdown là một dạng của R script và có khả năng <em>xuất</em> thành các tệp đầu ra (PDF, Word, HTML, Powerpoint, v.v.). Đây là những công cụ vô cùng hữu ích và linh hoạt thường được sử dụng để tạo các báo cáo tự động. Ngay cả trang web và cuốn sách này cũng được viết bằng R markdown!</p>
<p>Bạn cần biết rằng những người mới bắt đầu dùng R cũng có thể sử dụng R Markdown - do đó đừng sợ! Để tìm hiểu thêm, hãy xem chương <a href="../new_pages/rmarkdown.vn.html">Báo cáo với R Markdown</a> trong cuốn sách này.</p>
<!-- ======================================================= -->
</section>
<section id="r-notebooks" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-notebooks">R notebooks</h3>
<p>Không có sự khác biệt trong cách viết giữa R markdown và R notebook. Tuy nhiên, việc thực thi của hai loại file này hơi khác nhau một chút. Xem trang <a href="http://uc-r.github.io/r_notebook">Web</a> này để biết thêm chi tiết.</p>
<!-- ======================================================= -->
</section>
<section id="shiny" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="shiny">Shiny</h3>
<p>Shiny apps/websites được chứa trong một script có tên <code>app.R</code>. Tệp này có ba thành phần:</p>
<ol type="1">
<li>Giao diện người dùng (ui)<br>
</li>
<li>Một hàm máy chú<br>
</li>
<li>Một lệng gọi hàm <code>shinyApp</code></li>
</ol>
<p>Xem thêm trong cuốn sách này tại chương <a href="../new_pages/shiny_basics.vn.html">Dashboards với Shiny</a>, hoặc hướng dẫn trực tuyến này: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny tutorial</a></p>
<p><em>Trước đây, tệp bên trên được chia thành 2 tệp con (<code>ui.R</code> và <code>server.R</code>)</em></p>
</section>
<section id="thu-gọn-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="thu-gọn-code">Thu gọn Code</h3>
<p>Bạn có thể thu gọn các đoạn code để làm cho script của bạn dễ đọc hơn.</p>
<p>Để làm điều này, hãy tạo tiêu đề văn bản bằng dấu thăng #, viết tiêu đề của bạn và thêm vào phía sau nó ít nhất hoặc là 4 dấu gạch ngang (-), dấu thăng (#) hoặc dấu bằng (=). Ngay sau đó, một mũi tên nhỏ sẽ xuất bên cạnh ở bên phải số thự tự của dòng lệnh. Bạn có thể nhấp vào mũi tên này và phần code bên dưới sẽ được thu gọn cho đến trước tiêu đề tiếp theo và một mũi tên hai chiều xuất hiện ở đây.</p>
<p>Để mở rộng lại đoạn code đã thu gọn, hãy nhấp lại vào mũi tên hoặc biểu tượng mũi tên hai chiều. Ngoài ra còn có thể sử dụng thêm các phím tắt như đã được giải thích trong <a href="#rstudio">mục RStudio</a> của chương này.</p>
<p>Bằng cách tạo tiêu đề bằng #, bạn cũng sẽ kích hoạt Mục lục ở cuối tập lệnh của mình (xem bên dưới) mà bạn có thể sử dụng để điều hướng tập lệnh của mình. Bạn có thể tạo tiêu đề phụ bằng cách thêm các ký hiệu #, ví dụ: # # cho tiêu đề chính, ## fcho tiêu đề thứ hai, và ### cho tiêu đề thứ ba.</p>
<p>Dưới đây là hai phiên bản của một ví dụ cho script. Ở bên trái là bản gốc với các tiêu đề được chú thích. Ở bên phải, bốn dấu gạch ngang đã được viết sau mỗi tiêu đề, làm cho chúng có thể thu gọn được. Hai trong số chúng đã được thu gọn và bạn có thể thấy Mục lục ở dưới cùng hiện hiển thị từng phần.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../images/code_folding1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="../images/code_folding2.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Các phần code khác mặc định đủ điều kiện để thu gọn bao gồm các phần “nằm giữa” hai dấu ngoặc nhọn <code>{ }</code>, chẳng hạn như định nghĩa hàm hoặc các khối điều kiện (câu lệnh if else). Bạn có thể đọc thêm về cách thu gọn code tại <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections">trang của Rstudio</a>.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="thư-mục-làm-việc" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="thư-mục-làm-việc"><span class="header-section-number">3.9</span> Thư mục làm việc</h2>
<p>Thư mục làm việc là vị trí thư mục gốc được R sử dụng cho công việc của bạn - nơi R tìm kiếm và lưu các tệp theo mặc định. Mặc định là, R sẽ lưu các tệp mới và xuất tệp vào vị trí này, đồng thời sẽ tìm kiếm các tệp để nhập dữ liệu (ví dụ: bộ dữ liệu) tại đây.</p>
<p>Thư mục làm việc xuất hiện bằng dòng chữ màu xám ở phía trên cửa sổ Rstudio Console. Bạn cũng có thể in thư mục làm việc hiện tại bằng cách chạy lệnh <code>getwd()</code> (để trống dấu ngoặc đơn).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/working_directory_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="../images/working_directory_1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="gợi-ý-cách-tiếp-cận" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="gợi-ý-cách-tiếp-cận">Gợi ý cách tiếp cận</h3>
<p><strong>Xem thêm tại chương <a href="../new_pages/r_projects.vn.html">Dự án R</a> để biết chi tiết về gợi ý các cách tiếp cận của chúng tôi trong việc quản lý thư mục làm việc của bạn.</strong><br>
Một cách phổ biến, hiệu quả và không gặp sự cố khi quản lý thư mục làm việc và đường dẫn tệp là kết hợp 3 yếu tố này trong một quy trình làm việc với <a href="../new_pages/r_projects.vn.html">Dự án R</a> có định hướng :</p>
<ol type="1">
<li>Một dự án R để lưu trữ tất cả tệp của bạn (xem chương [Dự án R])<br>
</li>
<li>Package <strong>here</strong> để định vị tệp (xem chương <a href="../new_pages/importing.vn.html">Nhập xuất dữ liệu</a>)<br>
</li>
<li>Packge <strong>rio</strong> để nhập/xuất tệp (xem chương <a href="../new_pages/importing.vn.html">Nhập xuất dữ liệu</a>)</li>
</ol>
<!-- ======================================================= -->
</section>
<section id="thiết-lập-bằng-lệnh" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="thiết-lập-bằng-lệnh">Thiết lập bằng lệnh</h3>
<p>Cho tới gần đây, nhiều người học R đã được dạy để bắt đầu script của họ bằng lệnh <code>setwd()</code>. Hãy thay đổi thói quen đó bằng cách sử dụng <a href="../new_pages/r_projects.vn.html">Dự án R</a> và đọc thêm tài liệu sau để hiểu <a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/">lý do không nên sử dụng <code>setwd()</code></a>. Một cách ngắn gọn là, công việc của bạn chỉ thực hiện được trên máy tính của bạn, các đường dẫn tệp được sử dụng để nhập và xuất tệp trở nên “dễ lỗi” và điều này cản trở nghiêm trọng đến việc cộng tác và sử dụng code của bạn trên bất kỳ máy tính nào khác. Bạn có những lựa chọn khác dễ dàng hơn!</p>
<p>Như đã nói ở trên, mặc dù chúng tôi không khuyến nghị phương pháp này trong hầu hết các trường hợp, bạn vẫn có thể sử dụng lệnh <code>setwd()</code> với đường dẫn tệp thư mục mong muốn trong dấu ngoặc kép, ví dụ:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Documents/R Files/My analysis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: red;"><strong><em>NGUY HIỂM:</em></strong> thiết lập một thư mục làm việc với <code>setwd()</code> <em>có thể</em> dẫn đến “lỗi” nếu đường dẫn tệp dành riêng cho một máy tính. Thay vào đó, hãy sử dụng đường dẫn tệp liên quan đến thư mục gốc Dự án R (với package <strong>here</strong>).</span></p>
<!-- ======================================================= -->
</section>
<section id="thiết-lập-thủ-công" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="thiết-lập-thủ-công">Thiết lập thủ công</h3>
<p>Để thiết lập thư mục làm việc một cách thủ công (trỏ và nhấp tương đương với <code>setwd()</code>), hãy chọn mục Session trên thanh công cụ và chọn “Set Working Directory”, sau đó chọn “Choose Directory”. Chú ý: nếu sử dụng phương pháp này, bạn sẽ phải thực hiện việc này theo cách thủ công mỗi khi mở RStudio.</p>
<!-- ======================================================= -->
</section>
<section id="thiết-lập-bên-trong-một-dự-án-r" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="thiết-lập-bên-trong-một-dự-án-r">Thiết lập bên trong một dự án R</h3>
<p>Nếu bạn đang mở một dự án R, thư mục làm việc sẽ mặc định là thư mục gốc của dự án R có chứa tệp “.rproj”. Điều này sẽ áp dụng nếu bạn mở RStudio bằng cách nhấp vào mở R Project (tệp có phần mở rộng “.rproj”).</p>
<!-- ======================================================= -->
</section>
<section id="thư-mục-làm-việc-với-r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="thư-mục-làm-việc-với-r-markdown">Thư mục làm việc với R markdown</h3>
<p>Trong script ở R markdown, thư mục làm việc mặc định là thư mục chứa tệp R markdown (<code>.Rmd</code>). Nếu sử dụng dự án R và package <strong>here</strong>, điều này sẽ không được áp dụng. Để biết thư mục làm việc là gì, sử dụng lệnh <code>here()</code> như đã được giải thích tại chương <a href="../new_pages/r_projects.vn.html">Dự án R</a>.</p>
<p>Nếu bạn muốn thay đổi thư mục làm việc của một tệp độc lập ở R markdown (không phải ở dự án R), nếu bạn sử dụng <code>setwd()</code> điều này sẽ chỉ áp dụng chỉ cho đoạn code đó. Để thực hiện thay đổi cho tất cả các đoạn code trong R markdown, hãy điều chỉnh ở bước thiết lập để thêm tham số <code>root.dir =</code>, như bên dưới:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">'desired/directorypath'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cách này dễ hơn nhiều so với chỉ sử dụng R markdown bên trong một dự án R và sử dụng package <strong>here</strong>.</p>
<!-- ======================================================= -->
</section>
<section id="cung-cấp-đường-dẫn-tệp" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cung-cấp-đường-dẫn-tệp">Cung cấp đường dẫn tệp</h3>
<p>Có lẽ điều khiến những người mới bắt đầu với R cảm thấy nản nhất (ít nhất là với người dùng máy tính Windows) đó là gõ đường dẫn tệp để nhập xuất dữ liệu. Chúng tôi có giải thích cặn kẽ về cách tạo đường dẫn tệp đầu vào tốt nhất trong chương <a href="../new_pages/importing.vn.html">Nhập xuất dữ liệu</a>, nhưng dưới đây là một số điểm chính:</p>
<p><strong>Đường dẫn tệp bị lỗi</strong></p>
<p>Dưới đây là ví dụ về đường dẫn tệp “tuyệt đối” hoặc “địa chỉ đầy đủ”. Chúng có thể bị lỗi nếu được sử dụng bởi một máy tính khác. Một ngoại lệ là nếu bạn đang sử dụng ổ đĩa chia sẻ/mạng.</p>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p><strong>Đường dẫn với dấu gạch chéo</strong></p>
<p><em>Nếu nhập đường dẫn tệp, hãy lưu ý hướng của các dấu gạch chéo.</em> Sử dụng dấu <em>gạch chéo xuôi</em> (<code>/</code>) để tách các thành phần (“data/provincial.csv”). Đối với người dùng Windows, cách mặc định mà đường dẫn tệp được hiển thị là dấu <em>gạch chéo ngược</em> (\) - vì vậy bạn sẽ cần phải thay đổi hướng của mỗi dấu gạch chéo. Nếu bạn sử dụng package <strong>here</strong> được miêu tả ở <a href="../new_pages/r_projects.vn.html">Dự án R</a> thì dấu gạch chéo không còn là vấn đề với bạn nữa.</p>
<p><strong>Đường dẫn tệp tương đối</strong></p>
<p>Nói chung, chúng tôi khuyên bạn nên cung cấp các đường dẫn tệp theo cách “tương đối” - nghĩa là, đường dẫn <em>liên quan đến</em> thư mục gốc Dự án R của bạn. Bạn có thể thực hiện việc này bằng cách sử dụng package <strong>here</strong> như được giải thích trong chương <a href="../new_pages/r_projects.vn.html">Dự án R</a>. Một đường dẫn tệp tương đối sẽ trông như thế này:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import csv linelist from the data/linelist/clean/ sub-folders of an R project</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelists"</span>, <span class="st">"marin_country.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ngay cả khi sử dụng đường dẫn tệp tương đối trong dự án R, bạn vẫn có thể sử dụng đường dẫn tuyệt đối để nhập/xuất dữ liệu ở bên ngoài dự án R của bạn.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="objects" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="objects"><span class="header-section-number">3.10</span> Đối tượng</h2>
<p>Mọi thứ trong R đều là một đối tượng, và R là một ngôn ngữ “lập trình hướng đối tượng”. Các phần dưới đây sẽ giải thích:</p>
<ul>
<li>Cách tạo ra các đối tượng (<code>&lt;-</code>)</li>
<li>Các loại đối tượng (ví dụ: data frames, vectors..)<br>
</li>
<li>Cách truy cập các tập con của đối tượng (ví dụ: các biến số trong một bộ dữ liệu)<br>
</li>
<li>Các loại đối tượng (ví dụ: numeric, logical, integer, double, character, factor)</li>
</ul>
<!-- ======================================================= -->
<section id="mọi-thứ-đều-là-một-đối-tượng" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="mọi-thứ-đều-là-một-đối-tượng">Mọi thứ đều là một đối tượng</h3>
<p><em>Phần này được dựa theo sách <a href="https://r4epis.netlify.app/training/r_basics/objects/">R4Epis project</a>.</em><br>
Mọi thứ bạn lưu trữ trong R - bao gồm bộ dữ liệu, biến số, danh sách tên làng, tổng số dân, thậm chí cả kết quả đầu ra như biểu đồ - đều là <strong>các đối tượng</strong>, được <strong>gán tên</strong> và <strong>có thể được tham chiếu</strong> trong các lệnh sau đó.</p>
<p>Một đối tượng tồn tại khi bạn đã gán giá trị cho nó (xem phần gán bên dưới). Khi nó được gán một giá trị, đối tượng sẽ xuất hiện trong cửa sổ Environment (xem cửa sổ phía trên bên phải của RStudio). Sau đó, nó có thể được sử dụng, thao tác, thay đổi và định nghĩa lại.</p>
<!-- ======================================================= -->
</section>
<section id="định-nghĩa-một-đối-tượng--" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="định-nghĩa-một-đối-tượng--">Định nghĩa một đối tượng (<code>&lt;-</code>)</h3>
<p><strong>Tạo ra một đối tượng <em>bằng cách gán cho chúng một giá trị</em> bằng toán tử &lt;-.</strong><br>
Bạn có thể nghĩ về toán tử gán <code>&lt;-</code> tương đương với từ “được định nghĩa là”. Các lệnh gán thường tuân theo một trật tự quy định:</p>
<p><strong>tên đối tượng</strong> &lt;- <strong>giá trị của đối tượng</strong> (hoặc quy trình / tính toán tạo ra giá trị)</p>
<p>Ví dụ: bạn muốn ghi nhận một báo cáo tuần dịch tễ học hiện tại dưới dạng một đối tượng để tham chiếu tới code của bạn sau này. Trong ví dụ này, đối tượng <code>current_week</code> được tạo khi nó được gán giá trị <code>"2018-W10"</code> (dấu ngoặc kép sẽ quy định đây là giá trị dạng chữ). Đối tượng <code>current_week</code> sẽ xuất hiện trong cửa sổ RStudio Environment (phía trên bên phải) và có thể được tham chiếu tới các lệnh sau này.</p>
<p>Xem các lệnh R và kết quả của chúng như dưới đây.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># this command creates the object current_week by assigning it a value</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># this command prints the current value of current_week object in the console</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W10"</code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>CHÚ Ý:</em></strong> Lưu ý rằng số <code>[1]</code> trong kết quả ở R console đơn giản là chỉ ra rằng bạn đang xem mục đầu tiên của đầu ra</span></p>
<p><span style="color: orange;"><strong><em>THẬN TRỌNG:</em></strong> <strong>Giá trị của một đối tượng có thể bị ghi đè</strong> bất kỳ lúc nào bằng cách chạy lệnh gán để định nghĩa lại giá trị của nó. Do đó, <strong>thứ tự của các lệnh được chạy rất quan trọng</strong>.</span></p>
<p>Lệnh sau sẽ định nghĩa lại giá trị của đối tượng <code>current_week</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># assigns a NEW value to the object current_week</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># prints the current value of current_week in the console</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W51"</code></pre>
</div>
</div>
<p><strong>Dấu bằng <code>=</code></strong></p>
<p>Bạn cũng sẽ thấy các dấu bằng trong R code:</p>
<ul>
<li>Hai dấu bằng <code>==</code> giữa hai đối tượng hoặc giá trị dùng để đặt một <em>câu hỏi</em> logic: “cái này có bằng cái kia không?”.<br>
</li>
<li>Bạn cũng sẽ thấy các dấu bằng trong các hàm được sử dụng để xác định giá trị của các đối số của hàm (đọc thêm ở các phần bên dưới), ví dụ: <code>max(age, na.rm = TRUE)</code>.<br>
</li>
<li>Bạn <em>có thể</em> sử dụng một dấu bằng <code>=</code> thay cho dấu <code>&lt;-</code> để tạo và định nghĩa các đối tượng, nhưng điều này không được khuyến khích. Bạn có thể đọc về lý do tại sao điều này không được khuyến khích ở <a href="https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/">đây</a>.</li>
</ul>
<p><strong>Bộ dữ liệu</strong></p>
<p>Bộ dữ liệu (datasets) cũng là một đối tượng (thường là một “dataframes”) và phải được gán tên khi chúng được nhập. Trong đoạn mã dưới đây, đối tượng <code>linelist</code> được tạo và gán giá trị từ tệp CSV, tệp này được nhập bằng package <strong>rio</strong> và hàm <code>import()</code> của package này.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linelist is created and assigned the value of the imported CSV file</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"my_linelist.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Bạn có thể đọc thêm về nhập và xuất dữ liệu trong chương <a href="../new_pages/importing.vn.html">Nhập xuất dữ liệu</a>.</p>
<p><span style="color: orange;"><strong><em>THẬN TRỌNG:</em></strong> Lưu ý nhanh về cách đặt tên đối tượng:</span></p>
<ul>
<li>Tên đối tượng không được chứa dấu cách, nhưng bạn nên sử dụng dấu gạch dưới (_) hoặc dấu chấm (.) thay vì dấu cách.<br>
</li>
<li>Tên đối tượng phân biệt chữ hoa và chữ thường (nghĩa là Dataset_A khác với dataset_A).</li>
<li>Tên đối tượng phải bắt đầu bằng chữ cái (không được bắt đầu bằng số như 1, 2 hoặc 3).</li>
</ul>
<p><strong>Kết quả đầu ra</strong></p>
<p>Các kết quả đầu ra như bảng và biểu đồ cung cấp một ví dụ về cách các kết quả đầu ra có thể được lưu dưới dạng đối tượng hoặc chỉ được in ra mà không cần lưu. Ví dụ, một bảng chéo giữa giới tính và biến kết cục được tạo ra bởi hàm <code>table()</code> trong <strong>base</strong> R, có thể được in trực tiếp vào R console (<em>mà không</em> cần lưu).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># printed to R console only</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p>Nhưng bảng này cũng có thể được lưu dưới dạng một đối tượng được đặt tên. Sau đó, bạn có thể in nó ra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>gen_out_table <span class="ot">&lt;-</span> <span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>gen_out_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p><strong>Cột</strong></p>
<p>Các cột trong tập dữ liệu cũng là các đối tượng và có thể được định nghĩa, ghi đè và tạo như được mô tả bên dưới trong phần Cột.</p>
<p>Bạn có thể sử dụng toán tử gán từ <strong>base</strong> R để tạo một cột mới. Dưới đây, cột mới <code>bmi</code> (Body Mass Index) được tạo, và giá trị mới ứng với mỗi hàng là kết quả của một phép toán trên giá trị của các hàng trong cột <code>wt_kg</code> và cột <code>ht_cm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new "bmi" column using base R syntax</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>linelist<span class="sc">$</span>bmi <span class="ot">&lt;-</span> linelist<span class="sc">$</span>wt_kg <span class="sc">/</span> (linelist<span class="sc">$</span>ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tuy nhiên, trong cuốn sách này, chúng tôi tập trung vào một cách tiếp cận khác để định nghĩa cột, sử dụng hàm <code>mutate()</code> trong package <strong>dplyr</strong> và <em>piping</em> với toán tử pipe (<code>%&gt;%</code>). Cú pháp dễ đọc hơn và có những ưu điểm khác đã được giải thích trong cuốn sách này ở chương <a href="../new_pages/cleaning.vn.html">Làm sạch số liệu và các hàm quan trọng</a>. Bạn có thể đọc thêm về <em>piping</em> trong phần Piping phía bên dưới.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new "bmi" column using dplyr syntax</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> wt_kg <span class="sc">/</span> (ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="objectstructure" class="level3" data-number="3.10.1">
<h3 data-number="3.10.1" class="anchored" data-anchor-id="objectstructure"><span class="header-section-number">3.10.1</span> Cấu trúc đối tượng</h3>
<p><strong>Các đối tượng có thể là một phần dữ liệu đơn lẻ (ví dụ: <code>my_number &lt;- 24</code>), hoặc chúng có thể bao gồm dữ liệu có cấu trúc.</strong></p>
<p>Hình ảnh dưới đây được tham khảo từ <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">hướng dẫn R trực tuyến này</a>. Nó cho thấy một số cấu trúc dữ liệu phổ biến và tên của chúng. Hình ảnh này không bao gồm dữ liệu không gian. Bạn có thể xem thêm về dữ liệu không gian tại chương <a href="../new_pages/gis.vn.html">GIS cơ bản</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/R_data_structures.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="../images/R_data_structures.png" class="quarto-figure quarto-figure-center figure-img" style="width:75.0%;height:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Trong dịch tễ học (và đặc biệt là dịch tễ học thực địa), bạn sẽ <em>thường xuyên</em> phải tiếp xúc với data frames và vectors:</p>
<table class="table">
<colgroup>
<col style="width: 11%">
<col style="width: 51%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>Cấu trúc thường gặp</th>
<th>Giái thích</th>
<th>Ví dụ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Vectors</td>
<td>Một vùng chứa cho một chuỗi các đối tượng đơn lẻ, tất cả đều thuộc cùng một loại (e.g.&nbsp;số, chữ).</td>
<td><strong>“Biến” (Cột) trong dữ liệu là vectors</strong> (ví dụ: cột <code>age_years</code>).</td>
</tr>
<tr class="even">
<td>Data Frames</td>
<td>Vectors (ví dụ: các cột) được liên kết với nhau mà tất cả đều có cùng số hàng.</td>
<td>`linelist` là một data frame.</td>
</tr>
</tbody>
</table>
<p>Lưu ý rằng để tạo một vectơ “độc lập” (mà không phải là một phần của data frame), hàm <code>c()</code> được sử dụng để kết hợp các phần tử khác nhau. Ví dụ: nếu tạo một vectơ màu sắc thang màu của biểu đồ: <code>vector_of_colors &lt;- c("blue", "red2", "orange", "grey")</code></p>
<!-- ======================================================= -->
</section>
<section id="kiểu-đối-tượng" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="kiểu-đối-tượng">Kiểu đối tượng</h3>
<p>Tất cả các đối tượng được lưu trữ trong R đều có một <em>kiểu</em> dữ liệu cho biết cách nó được xử lý. Có nhiều kiểu đối tượng, nhưng những kiểu phổ biến bao gồm:</p>
<table class="table">
<tbody>
<tr class="odd">
<td><h1 id="kiểu" data-number="4"><span class="header-section-number">4</span> Kiểu</h1>
<p>Ký tự</p></td>
<td><h1 id="giải-thích" data-number="5"><span class="header-section-number">5</span> Giải thích</h1>
<p>Là các chữ/từ/câu được đặt <strong>“trong dấu ngoặc kép”</strong>. Đối tượng kiểu ký tự thì không thể tính toán</p></td>
<td><h1 id="ví-dụ" data-number="6"><span class="header-section-number">6</span> Ví dụ</h1>
<p>“Những ký tự nằm trong dấu ngoặc kép”</p></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Số nguyên</td>
<td>Các số <strong>nguyên</strong> (không có phần thập phân)</td>
<td>-5, 14, hoặc 2000</td>
<td></td>
</tr>
<tr class="even">
<td>Số thực</td>
<td>Bao gồm các số nguyên và <strong>có thể bao gồm phần thập phân</strong>. Nếu trong dấu ngoặc kép, chúng sẽ được coi là dạng ký tự</td>
<td>23.1 hoặc 14</td>
<td></td>
</tr>
<tr class="odd">
<td>Danh mục</td>
<td>Đây là các vector có <strong>trật tự xác định</strong> hoặc các giá trị có nhiều danh mục</td>
<td>Biến số của tình trạng kinh tế với các giá trị theo tứ tự</td>
<td></td>
</tr>
<tr class="even">
<td>Ngày tháng</td>
<td><strong>Khi R được thông báo rằng một dữ liệu ở dạng ngày tháng R</strong>, những dữ liệu này có thể được thao tác và hiển thị theo những cách đặc biệt. Xem thêm về biến ngày tháng tại chương <a href="../new_pages/dates.vn.html">Làm việc với ngày tháng</a>. | 2018-04-12 hoặc 15/3/1954 hoặc Wed 4 Jan 1980</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Logic</td>
<td>Giá trị của biến chỉ có thể là hai giá trị đặc biệt sau TRUE hoặc FALSE (lưu ý đây <strong>không phải</strong> là “TRUE” và”FALSE” trong dấu ngoặc kép)</td>
<td>TRUE hoặc FALSE</td>
<td></td>
</tr>
<tr class="even">
<td>data.frame</td>
<td>Một data.frame trong R lưu trữ một <strong>tập dữ liệu điển hình</strong>. Data.frame bao gồm các vector (cột) dữ liệu được liên kết với nhau, tất cả chúng đều có cùng một số lượng quan sát (hàng).</td>
<td>Tập dữ liệu mẫu AJS có tên là <code>linelist_raw</code>chứa 68 biến với 300 quan sát (mỗi hàng)</td>
<td></td>
</tr>
<tr class="odd">
<td>tibble</td>
<td>tibbles là một dạng khác của data.frame, sự khác biệt chính là tibble in đẹp hơn trong R console (hiển thị 10 hàng đầu tiên và chỉ các cột vừa với màn hình)</td>
<td>data frame, danh sách, hoặc ma trận có thể chuyển đổi thành tibble bằng hàm <code>as_tibble()</code></td>
<td></td>
</tr>
<tr class="even">
<td>Danh sách</td>
<td>Một danh sách giống như một vector, nhưng chứa các đối tượng có kiểu khác nhau</td>
<td>Một danh sách có thể chứa một số duy nhất, một data.frame, một vector và thậm chí một danh sách khác bên trong nó!</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Bạn có thể kiểm tra kiểu của một đối tượng bằng cách cung cấp tên của nó tới hàm <code>class()</code></strong>. Lưu ý: bạn có thể tham chiếu một cột cụ thể trong tập dữ liệu bằng cách sử dụng ký hiệu <code>$</code> để phân tách tên của tập dữ liệu và tên của cột.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist)         <span class="co"># class should be a data frame or tibble</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>age)     <span class="co"># class should be numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>gender)  <span class="co"># class should be character</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Đôi khi, một cột sẽ được tự động chuyển đổi thành một kiểu khác bởi R. Hãy coi chừng điều này! Ví dụ: nếu bạn có một vectơ hoặc cột kiểu số, nhưng nếu có bất kỳ một giá trị dạng ký tự nào xuất hiện trong cột thì toàn bộ cột sẽ thay đổi thành kiểu ký tự.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>num_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>) <span class="co"># define vector as all numbers</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># vector is numeric class</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>num_vector[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"three"</span>   <span class="co"># convert the third element to a character</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># vector is now character class</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Một ví dụ phổ biến của điều này là khi thao tác với một bộ dữ liệu để tạo bảng - nếu bạn tạo một hàng tính tổng và cố gắng dán /gắn phần trăm với số trong cùng một ô (ví dụ: <code>23 (40%)</code>), toàn bộ cột dạng số ở trên sẽ chuyển đổi thành ký tự và không còn có thể được sử dụng cho các phép tính toán học nữa.</p>
<p><strong>Đôi khi, bạn sẽ cần chuyển đổi các đối tượng hoặc cột sang một loại khác.</strong></p>
<table class="table">
<tbody>
<tr class="odd">
<td><h1 id="hàm" data-number="7"><span class="header-section-number">7</span> Hàm</h1>
<p><code>as.character()</code></p></td>
<td><h1 id="chức-năng" data-number="8"><span class="header-section-number">8</span> Chức năng</h1>
<p>Chuyển sang kiểu ký tự</p></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>as.numeric()</code></td>
<td>Chuyển sang kiểu số</td>
<td></td>
</tr>
<tr class="even">
<td><code>as.integer()</code></td>
<td>Chuyển sang kiểu số nguyên</td>
<td></td>
</tr>
<tr class="odd">
<td><code>as.Date()</code></td>
<td>Chuyển sang kiểu ngày tháng - Chú ý: Xem mục <a href="../new_pages/dates.vn.html">Ngày tháng</a> để biết thêm chi tiết</td>
<td></td>
</tr>
<tr class="even">
<td><code>factor()</code></td>
<td>Chuyển sang kiểu danh mục- Chú ý: nếu muốn định nghĩa lại thứ tự của các giá trị trong biến factor thì cần thêm các đối số bổ sung</td>
<td></td>
</tr>
</tbody>
</table>
<p>Tương tự như vậy, một số hàm <strong>base</strong> R có thể kiểm tra xem một đối tượng CÓ thuộc của một kiểu dữ liệu cụ thể nào hay không, chẳng hạn như <code>is.numeric()</code>, <code>is.character()</code>, <code>is.double()</code>, <code>is.factor()</code>, <code>is.integer()</code></p>
<p>Bạn có thể tham khảo <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">một tài liệu trực tuyến về các kiểu và cấu trúc dữ liệu trong R</a> tại đây.</p>
<!-- ======================================================= -->
</section>
<section id="cột-biến-số" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cột-biến-số">Cột / Biến số (<code>$</code>)</h3>
<p><strong>Một cột trong data frame về mặt kỹ thuật là một “vector” (xem bảng ở trên)</strong> - bao gồm một chuỗi các giá trị cùng loại (ký tự, số, lôgic, v.v.).</p>
<p>Một vectơ có thể tồn tại độc lập với một data frame, ví dụ: vectơ tên cột mà bạn muốn đưa vào làm biến giải thích trong mô hình. Để tạo một vectơ “độc lập”, hãy sử dụng hàm <code>c()</code> như dưới đây:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the stand-alone vector of character values</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print the values in this named vector</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>explanatory_vars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender" "fever"  "chills" "cough"  "aches"  "vomit" </code></pre>
</div>
</div>
<p><strong>Các cột trong data frame cũng là vectơ và có thể được gọi, tham chiếu, trích xuất hoặc tạo bằng ký hiệu <code>$</code>.</strong> Ký hiệu <code>$</code> kết nối tên của cột với tên của data frame tương ứng. Trong cuốn sách này, chúng tôi cố gắng sử dụng từ “cột” thay vì “biến số”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve the length of the vector age_years</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(linelist<span class="sc">$</span>age) <span class="co"># (age is a column in the linelist data frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Bằng cách nhập tên của một dataframe, theo sau bởi ký tự <code>$</code>, bạn sẽ thấy menu gợi ý của tất cả các tên cột trong dataframe. Bạn có thể di chuyển giữa các cột bằng phím mũi tên, chọn cột bằng phím Enter để tránh lỗi chính tả!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Calling_Names.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/Calling_Names.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: darkgreen;"><strong><em>MẸO NÂNG CAO:</em></strong> Một số đối tượng phức tạp hơn (ví dụ: một danh sách hoặc đối tượng <code>epicontacts</code>) có thể có nhiều cấp độ có thể được truy cập thông qua nhiều ký tự đô la. Ví dụ: <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</section>
<section id="truy-cập-indexing-đối-tượng-bằng-dấu-ngoặc-vuông" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="truy-cập-indexing-đối-tượng-bằng-dấu-ngoặc-vuông">Truy cập / indexing đối tượng bằng dấu ngoặc vuông (<code>[ ]</code>)</h3>
<p>Khi cần xem một phần của đối tượng, còn được gọi là “indexing”, bạn có thể sử dụng dấu ngoặc vuông <code>[ ]</code>. Sử dụng <code>$</code> trên dataframe để truy cập một cột cũng là một kiểu indexing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>)  <span class="co"># define the vector</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>my_vector[<span class="dv">5</span>]                                  <span class="co"># print the 5th element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "e"</code></pre>
</div>
</div>
<p>Dấu ngoặc vuông cũng hoạt động để xem các phần cụ thể trong kết quả đầu ra, chẳng hạn như đầu ra của hàm <code>summary()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All of the summary</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Just the second element of the summary, with name (using only single brackets)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1st Qu. 
      6 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Just the second element, without name (using double brackets)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract an element by name, without showing the name</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="st">"Median"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<p>Dấu ngoặc vuông cũng hoạt động trên data frames để xem các hàng và cột cụ thể. Bạn có thể thực hiện việc này bằng cú pháp <code>dataframe[rows, columns]</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View a specific row (2) from dataset, with all columns (don't forget the comma!)</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>,]</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View all rows, but just one column</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>linelist[, <span class="st">"date_onset"</span>]</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View values from row 2 and columns 5 through 10</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View values from row 2 and columns 5 through 10 and 18</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">18</span>)] </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows 2 through 20, and specific columns</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows and columns based on criteria</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Note the dataframe must still be named in the criteria!</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>linelist[linelist<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">25</span> , <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Use View() to see the outputs in the RStudio Viewer pane (easier to read) </span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Note the capital "V" in View() function</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="st">"date_onset"</span>])</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as a new object</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>new_table <span class="ot">&lt;-</span> linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lưu ý rằng bạn cũng có thể indexing hàng / cột trong một data frames và tibbles bằng cách sử dụng cú pháp của package <strong>dplyr</strong> (hàm <code>filter()</code> đối với hàng, và <code>select()</code> đối với cột). Đọc thêm về các hàm quan trọng này trong chương <a href="../new_pages/cleaning.vn.html">Làm sạch số liệu và các hàm quan trọng</a>.</p>
<p>Để lọc dựa trên “số thứ tự hàng”, bạn có thể sử dụng hàm <code>row_number()</code>trong package <strong>dplyr</strong> với dấu ngoặc đơn mở như một phần của biểu thức lọc logic. Thường thì bạn sẽ sử dụng toán tử <code>%in%</code> và một khoảng giá trị số như một phần của câu lệnh logic đó, như được trình bày dưới đây. Để xem N hàng <em>đầu tiên</em>, bạn cũng có thể sử dụng hàm <code>head()</code> của package <strong>dplyr</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View first 100 rows</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">100</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show row 5 only</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows 2 through 20, and three specific columns (note no quotes necessary on column names)</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date_onset, outcome, age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Khi indexing một đối tượng chứa một <strong>danh sách</strong> bằng một dấu ngoặc vuông sẽ luôn trả về kiểu danh sách, ngay cả khi chỉ một đối tượng được trả về . Tuy nhiên, hai dấu ngoặc vuông có thể được sử dụng để truy cập một phần tử đơn lẻ đối và trả về một kiểu không phải là một danh sách.<br>
Dấu ngoặc vuông cũng có thể được viết sau nhau, như được minh họa bên dưới.</p>
<p>Bạn có thể xem một <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">giải thích trực quan về việc indexing với ví dụ về hộp lắc hạt tiêu</a> tại đây, rất hài hước và hữu ích.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define demo list</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First element in the list is a character vector</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hospitals =</span> <span class="fu">c</span>(<span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># second element in the list is a data frame of addresses</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">addresses   =</span> <span class="fu">data.frame</span>(</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> <span class="fu">c</span>(<span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span>),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">city   =</span> <span class="fu">c</span>(<span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Đây là cách mà một danh sách được in trong R console. Có hai phần tử được đặt tên:</p>
<ul>
<li><code>hospitals</code>, một vector chứa ký tự<br>
</li>
<li><code>addresses</code>, một data frame chứa các địa chỉ</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"

$addresses
           street     city
1 145 Medical Way  Andover
2  1048 Brown Ave Hamilton
3   999 El Camino  El Paso</code></pre>
</div>
</div>
<p>Dưới đây là các phương pháp indexing mà bạn có thể sử dụng:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">1</span>] <span class="co"># this returns the element in class "list" - the element name is still displayed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]] <span class="co"># this returns only the (unnamed) character vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"hospitals"</span>]] <span class="co"># you can also index by name of the list element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]][<span class="dv">3</span>] <span class="co"># this returns the third element of the "hospitals" character vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]][<span class="dv">1</span>] <span class="co"># This returns the first column ("street") of the address data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           street
1 145 Medical Way
2  1048 Brown Ave
3   999 El Camino</code></pre>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="xóa-đối-tượng" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="xóa-đối-tượng">Xóa đối tượng</h3>
<p>Bạn có thể xóa từng đối tượng riêng lẻ khỏi cửa sổ R environment bằng cách để tên của đối tượng cần xóa vào trong hàm <code>rm()</code> (không có dấu ngoặc kép):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(object_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Bạn có thể xóa tất cả các đối tượng (xóa không gian làm việc của bạn) bằng cách chạy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="piping" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="piping"><span class="header-section-number">8.1</span> Piping (<code>%&gt;%</code>)</h2>
<p><strong>Hai cách tiếp cận chung để làm việc với các đối tượng là:</strong></p>
<ol type="1">
<li><strong>Pipes/tidyverse</strong> - pipes chuyển một đối tượng từ hàm này sang hàm khác - tập trung vào <em>hành động</em> chứ không phải đối tượng<br>
</li>
<li><strong>Xác định đối tượng trung gian</strong> - một đối tượng được xác định lại nhiều lần - tập trung vào đối tượng</li>
</ol>
<!-- ======================================================= -->
<section id="pipes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="pipes"><strong>Pipes</strong></h3>
<p><strong>Giải thích một cách đơn giản, toán tử pipe (<code>%&gt;%</code>) nhận dữ liệu đầu ra trung gian từ một hàm và chuyển tiếp sang hàm tiếp theo.</strong><br>
Hiểu đơn giản thì pipe nghĩa là “tiếp tục”. Nhiều hàm có thể được liên kết với nhau bằng toán tử <code>%&gt;%</code>.</p>
<ul>
<li><strong>Piping nhấn mạnh một chuỗi các hành động, không phải đối tượng mà các hành động đang áp dụng</strong><br>
</li>
<li>Pipes được áp dụng tốt nhất khi một chuỗi hành động phải được thực hiện trên một đối tượng<br>
</li>
<li>Pipes đến từ package <strong>magrittr</strong>, và đã tự động được thêm vào packages <strong>dplyr</strong> và <strong>tidyverse</strong></li>
<li>Pipes làm cho code gọn hơn, dễ đọc hơn và trực quan hơn</li>
</ul>
<p>Đọc thêm về cách tiếp cận này trong package tidyverse tại đây <a href="https://style.tidyverse.org/pipes.html">Hướng dẫn</a></p>
<p>Đây là một ví dụ mô phỏng, ẩn dụ việc phân tích dữ liệu sử dụng các hàm như là các quy trình “nướng bánh”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A fake example of how to bake a cake using piping syntax</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> flour <span class="sc">%&gt;%</span>       <span class="co"># to define cake, start with flour, and then...</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(eggs) <span class="sc">%&gt;%</span>   <span class="co"># add eggs</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(oil) <span class="sc">%&gt;%</span>    <span class="co"># add oil</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(water) <span class="sc">%&gt;%</span>  <span class="co"># add water</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mix_together</span>(         <span class="co"># mix together</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">utensil =</span> spoon,</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">degrees =</span> <span class="dv">350</span>,   <span class="co"># bake</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">system =</span> <span class="st">"fahrenheit"</span>,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">minutes =</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">let_cool</span>()            <span class="co"># let it cool down</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Đây là một <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremely%20useful,code%20and%20combine%20multiple%20operations">link</a> khác mô tả công dụng của pipe.</p>
<p>Piping không phải là một hàm trong <strong>base</strong> R. Để sử dụng piping, package <strong>magrittr</strong> phải được cài đặt và gọi ra trong mỗi phiên làm việc (điều này thường được thực hiện bằng cách gọi package <strong>tidyverse</strong> hoặc <strong>dplyr</strong>). Bạn có thể <a href="https://magrittr.tidyverse.org/">đọc thêm về piping trong tài liệu magrittr</a>.</p>
<p>Lưu ý rằng cũng giống như các hàm R khác, các pipes có thể được sử dụng để hiển thị kết quả hoặc lưu lại một đối tượng, tùy thuộc vào việc toán tử gán <code>&lt;-</code> có được thực hiện hay không. Xem hai ví dụ dưới đây:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create or overwrite object, defining as aggregate counts by age category (not printed)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>linelist_summary <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the table of counts in the console, but don't save it</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  age_cat    n
1     0-4 1095
2     5-9 1095
3   10-14  941
4   15-19  743
5   20-29 1073
6   30-49  754
7   50-69   95
8     70+    6
9    &lt;NA&gt;   86</code></pre>
</div>
</div>
<p><strong><code>%&lt;&gt;%</code></strong><br>
</p>
<p>Đây là một “assignment pipe (pipe dùng để gán)” từ package <strong>magrittr</strong>, package này sẽ <em>pipe một đối tượng theo chiều tiến lên và cũng tái định nghĩa lại đối tượng</em>. Đối tượng cần đứng đầu trong chuỗi pipe. Nó nhanh hơn sử dụng pipe thông thường. Hai lệnh dưới đây là tương đương với nhau:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="định-nghĩa-đối-tượng-trung-gian" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="định-nghĩa-đối-tượng-trung-gian">Định nghĩa đối tượng trung gian</h3>
<p>Cách tiếp cận này dùng để thay đổi đối tượng/dataframes sẽ phát huy hiệu quả nếu:</p>
<ul>
<li>Bạn cần thao tác trên nhiều đối tượng<br>
</li>
<li>Các bước trung gian có ý nghĩa cụ thể và xứng đáng tạo các tên đối tượng riêng biệt</li>
</ul>
<p><strong>Các nguy cơ:</strong></p>
<ul>
<li>Tạo đối tượng mới cho mỗi bước có nghĩa là bạn sẽ tạo thêm rất nhiều đối tượng. Nếu bạn sử dụng không cẩn thận, bạn có thể dễ dàng bị nhầm lẫn!<br>
</li>
<li>Đặt thêm nhiều tên cho nhiều đối tượng có thể gây nhầm lẫn<br>
</li>
<li>Nếu có lỗi thì không dễ để phát hiện</li>
</ul>
<p>Đặt tên cho từng đối tượng trung gian hoặc ghi đè lên đối tượng gốc hoặc kết hợp tất cả hàm với nhau đều đi kèm với những rủi ro.</p>
<p>Dưới đây vẫn là ví dụ mô phỏng quy trình làm “bánh” tương tự như trên, nhưng sử dụng phong cách này:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a fake example of how to bake a cake using this method (defining intermediate objects)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>batter_1 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flour, eggs)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>batter_2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_1, oil)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>batter_3 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_2, water)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>batter_4 <span class="ot">&lt;-</span> <span class="fu">mix_together</span>(<span class="at">object =</span> batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">bake</span>(batter_4, <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>)</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(cake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Kết hợp tất cả các hàm với nhau - câu lệnh rất khó đọc:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># an example of combining/nesting mutliple functions together - difficult to read</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(<span class="fu">bake</span>(<span class="fu">mix_together</span>(batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>), <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
</section>
<section id="operators" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="operators"><span class="header-section-number">8.2</span> Các toán tử và hàm chính</h2>
<p>Mục này sẽ trình bày chi tiết các toán tử trong R, chẳng hạn như :</p>
<ul>
<li>Toán tử định nghĩa<br>
</li>
<li>Toán tử quan hệ (nhỏ hơn, bằng nhau..)<br>
</li>
<li>Toán tử logic (và, hoặc..)<br>
</li>
<li>Xử lý missing<br>
</li>
<li>Các toán tử và hàm toán học (+/-, &gt;, sum(), median(), …)<br>
</li>
<li>Toán tử <code>%in%</code></li>
</ul>
<!-- ======================================================= -->
<section id="toán-tử-gán" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="toán-tử-gán">Toán tử gán</h3>
<p><strong><code>&lt;-</code></strong></p>
<p>Toán tử gán cơ bản trong R là <code>&lt;-</code>. Chẳng hạn như <code>object_name &lt;- value</code>.<br>
Toán tử gán này cũng có thể được viết là <code>=</code>. Chúng tôi khuyên bạn nên sử dụng <code>&lt;-</code>.<br>
Bạn nên sử dụng dấu cách trong khi viết code với toán tử gán để dễ đọc hơn.</p>
<p><strong><code>&lt;&lt;-</code></strong></p>
<p>Khi <a href="../new_pages/writing_functions.vn.html">Viết hàm</a>, hoặc khi sử dụng R với scipt nguồn, thì bạn có thể cần sử dụng toán tử gán này <code>&lt;&lt;-</code> (từ <strong>base</strong> R). Toán tử này được sử dụng để định nghĩa một đối tượng trong một hàm lồng trong một hàm khác. Xem thêm tại <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">nguồn tham khảo online này</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>Đây là một “pipe gán” từ package <strong>magrittr</strong>, package này sẽ <em>gán một đối tượng theo chiều tiến lên và cũng định nghĩa lại đối tượng</em>. Pipe gán phải là toán tử đầu tiên trong chuỗi pipe code. Đây là cách viết ngắn gọn, như được trình bày dưới đây là hai ví dụ tương đương với nhau:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Đoạn code bên trên tương đương với code dưới đây:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>Toán tử này được sử dụng dể thêm dữ liệu vào Cây phả hệ với package <strong>ggtree</strong>. Xem thêm chương <a href="../new_pages/phylogenetic_trees.vn.html">Cây phả hệ</a> hoặc <a href="https://yulab-smu.top/treedata-book/">Sách online này</a>.</p>
<!-- ======================================================= -->
</section>
<section id="toán-tử-quan-hệ-và-logic" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="toán-tử-quan-hệ-và-logic">Toán tử quan hệ và logic</h3>
<p>Toán tử quan hệ so sánh các giá trị và thường được sử dụng khi định nghĩa các biến mới và tập con của bộ dữ liệu. Dưới đây là các toán tử quan hệ phổ biến trong R:</p>
<table class="table">
<tbody>
<tr class="odd">
<td><h1 id="ý-nghĩa" data-number="9"><span class="header-section-number">9</span> Ý nghĩa</h1>
<p>Bằng</p></td>
<td><h1 id="toán-tử" data-number="10"><span class="header-section-number">10</span> Toán tử</h1>
<p><code>==</code></p></td>
<td><h1 id="ví-dụ-1" data-number="11"><span class="header-section-number">11</span> Ví dụ</h1>
<p><code>"A" == "a"</code></p></td>
<td><h1 id="kết-quả-đầu-ra-của-ví-dụ" data-number="12"><span class="header-section-number">12</span> Kết quả đầu ra của ví dụ</h1>
<p><code>FALSE</code> (vì R phân biệt chữ hoa chữ thường) Lưu ý rằng <em>== (hai dấu bằng) khác với = (một dấu bằng), một dấu bằng hoạt động tương tự với toán tử gán <code>&lt;-</code></em></p></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Không bằng</td>
<td><code>!=</code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Lớn hơn</td>
<td><code>&gt;</code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Nhỏ hơn</td>
<td><code>&lt;</code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Lớn hơn hoặc bằng</td>
<td><code>&gt;=</code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Nhỏ hơn hoặc bằng</td>
<td><code>&lt;=</code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Giá trị bị missing</td>
<td><code>is.na()</code></td>
<td><code>is.na(7)</code></td>
<td><code>FALSE</code> (Xem thêm chương <a href="../new_pages/missing_data.vn.html">Dữ liệu Missing</a>)</td>
<td></td>
</tr>
<tr class="odd">
<td>Giá trị không missing</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>Các toán tử logic, chẳng hạn như AND và OR, thường được sử dụng để kết nối các quan hệ và tạo ra các điều kiện phức tạp hơn. Các biểu thức phức tạp có thể yêu cầu dấu ngoặc đơn () để phân nhóm và thứ tự áp dụng.</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th>Ý nghĩa</th>
<th>Toán tử</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td>OR</td>
<td><code>|</code> (thanh dọc)</td>
</tr>
<tr class="odd">
<td>Dấu ngoặc đơn</td>
<td><code>( )</code> Được sử dụng để nhóm các tiêu chí lại với nhau và làm rõ thứ tự hoạt động</td>
</tr>
</tbody>
</table>
<p>Ví dụ: chúng ta có một số liệu có tên linelist với hai biến mà chúng tôi muốn sử dụng để minh họa, <code>hep_e_rdt</code>: kết quả xét nghiệm và <code>other_cases_in_hh</code>: những trường hợp khác trong gia đình. Lệnh dưới đây sử dụng hàm <code>case_when()</code> để tạo biến mới <code>case_def</code> như sau:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>linelist_cleaned <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">case_def =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(rdt_result) <span class="sc">&amp;</span> <span class="fu">is.na</span>(other_case_in_home)            <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">==</span> <span class="st">"Positive"</span>                                 <span class="sc">~</span> <span class="st">"Confirmed"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">!=</span> <span class="st">"Positive"</span> <span class="sc">&amp;</span> other_cases_in_home <span class="sc">==</span> <span class="st">"Yes"</span>  <span class="sc">~</span> <span class="st">"Probable"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                                     <span class="sc">~</span> <span class="st">"Suspected"</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 70%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>Điều kiện trong ví dụ ở trên</th>
<th>Giá trị kết quả trong biến mới “case_def”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nếu giá trị của biến <code>rdt_result</code> và <code>other_cases_in_home</code> bị missing</td>
<td><code>NA</code> (missing)</td>
</tr>
<tr class="even">
<td>Nếu giá trị trong <code>rdt_result</code> là “Positive”</td>
<td>“Confirmed”</td>
</tr>
<tr class="odd">
<td>Nếu giá trị trong <code>rdt_result</code> KHÔNG phải là “Positive” VÀ giá trị trong <code>other_cases_in_home</code> là “Yes”</td>
<td>“Probable”</td>
</tr>
<tr class="even">
<td>Nếu một trong các tiêu chí trên không được đáp ứng</td>
<td>“Suspected”</td>
</tr>
</tbody>
</table>
<p>Lưu ý rằng R có phân biệt chữ hoa chữ thường, vì vậy <em>“Positive” khác với “positive”…</em></p>
<!-- ======================================================= -->
</section>
<section id="giá-trị-missing" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="giá-trị-missing">Giá trị Missing</h3>
<p>Trong R, giá trị missing được biểu diễn bằng giá trị đặc biệt <code>NA</code> (giá trị “dành riêng cho missing”) (chữ N và A viết hoa - không nằm trong dấu ngoặc kép). Nếu dữ liệu bạn nhập vào R bị missing theo cách khác (ví dụ: 99, “Missing”, or .), bạn có thể sẽ cần phải mã hóa lại các giá trị đó thành <code>NA</code>. Cách thực hiện việc này được đề cập trong chương <a href="../new_pages/importing.vn.html">Nhập xuất dữ liệu</a>.</p>
<p><strong>Để kiểm tra xem một giá trị có phải là <code>NA</code> hay không, sử dụng hàm đặc biệt <code>is.na()</code></strong>, kết quả sẽ trả về <code>TRUE</code> hoặc <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>rdt_result <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span>)   <span class="co"># two positive cases, one suspected, and one unknown</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(rdt_result)  <span class="co"># Tests whether the value of rdt_result is NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>Đọc thêm về missing, vô hạn, <code>NULL</code>, và các giá trị không thể trong chương <a href="../new_pages/missing_data.vn.html">Dữ liệu Missing</a>. Tìm hiểu thêm cách chuyển đổi các giá trị bị missing khi nhập dữ liệu trong chương <a href="importing.vn/qmd">Nhập xuất dữ liệu</a>.</p>
<!-- ======================================================= -->
</section>
<section id="toán-học-và-thống-kê" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="toán-học-và-thống-kê">Toán học và thống kê</h3>
<p>Tất cả các toán tử và hàm trong chương này đều có sẵn bằng cách sử dụng <strong>base</strong> R.</p>
<section id="toán-tử-toán-học" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="toán-tử-toán-học">Toán tử toán học</h4>
<p>Chúng thường được sử dụng để thực hiện phép cộng, phép chia, để tạo cột mới, v.v. Dưới đây là các toán tử toán học phổ biến trong R. Việc bạn có đặt dấu cách xung quanh các toán tử hay không là không quan trọng.</p>
<table class="table">
<thead>
<tr class="header">
<th>Mục đích</th>
<th>Ví dụ trong R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>phép cộng</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>phép trừ</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>phép nhân</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>phép chia</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>số mũ</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>thứ tự hoạt động</td>
<td>( )</td>
</tr>
</tbody>
</table>
</section>
<section id="các-hàm-toán-học" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="các-hàm-toán-học">Các hàm toán học</h4>
<table class="table">
<thead>
<tr class="header">
<th>Mục tiêu</th>
<th>Hàm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>làm tròn</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>làm tròn</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>làm tròn lên</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>làm tròn xuống</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>giá trị tuyệt đối</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>căn bậc hai</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>số mũ</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>logarit tự nhiên</td>
<td>log(x)</td>
</tr>
<tr class="odd">
<td>logarit cơ số 10</td>
<td>log10(x)</td>
</tr>
<tr class="even">
<td>logarit cơ số 2</td>
<td>log2(x)</td>
</tr>
</tbody>
</table>
<p>lưu ý: sử dụng hàm <code>round()</code> và <code>digits =</code> để xác định số chữ số thập phân được hiển thị. Sử dụng hàm <code>signif()</code> để làm tròn đến số chữ số nhất định.</p>
</section>
<section id="ký-hiệu-khoa-học" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="ký-hiệu-khoa-học">Ký hiệu khoa học</h4>
<p>Khả năng ký hiệu khoa học được sử dụng phụ thuộc vào giá trị của <code>scipen</code>.</p>
<p>Từ tài liệu hướng dẫn của <code>?options</code>: scipen được áp dụng khi quyết định in các giá trị số theo ký hiệu cố định hoặc hàm mũ. Giá trị dương thuộc về ký hiệu cố định còn giá trị âm thuộc về ký hiệu khoa học: ký hiệu cố định sẽ luôn được ưu tiên trừ khi có nhiều chữ số ‘scipen’.</p>
<p>Nếu như có rất nhiều số bé cần hiển thị (vd: số 0), mặc định tính năng này sẽ “được bật”. Để “tắt” tính năng ký hiệu khoa học trong phiên làm việc của bạn, hãy thiết lập nó với một số rất lớn, ví dụ:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># turn off scientific notation</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="làm-tròn" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="làm-tròn">Làm tròn</h4>
<p><span style="color: red;"><strong><em>NGUY HIỂM:</em></strong> Hàm <code>round()</code> sử dụng “cách làm tròn của ngân hàng” nghĩa là chỉ làm tròn với số .5 nếu số được làm tròn lên là số chẵn. Sử dụng hàm <code>round_half_up()</code> từ package <strong>janitor</strong> để thống nhất cách làm tròn với giá trị .5. Xem thêm <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">giải thích sau đây</a></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use the appropriate rounding function for your work</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">round_half_up</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</section>
<section id="các-hàm-thống-kê" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="các-hàm-thống-kê">Các hàm thống kê</h4>
<p><span style="color: orange;"><strong><em>CẨN TRỌNG:</em></strong> Các hàm sau đây sẽ mặc định bao gồm cả giá trị missing khi tính toán. Giá trị missing sẽ trả về kết quả đầu ra chứa <code>NA</code>, trừ khi đối số <code>na.rm = TRUE</code> được xác định khi viết hàm. Nó cũng có thể viết ngắn gọn thành <code>na.rm = T</code>.</span></p>
<table class="table">
<thead>
<tr class="header">
<th>Mục đích</th>
<th>Hàm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>trung bình</td>
<td>mean(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>trung vị</td>
<td>median(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>độ lệch chuẩn</td>
<td>sd(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>phân vị*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>tổng</td>
<td>sum(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>giá trị nhỏ nhất</td>
<td>min(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>giá trị lớn nhất</td>
<td>max(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>khoảng giá trị số</td>
<td>range(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>tóm tắt**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul>
<li><code>*quantile()</code>: <code>x</code> là vectơ số cần khảo sát, và <code>probs =</code> là một vectơ số với các xác suất nằm giữa 0 và 1.0, ví dụ <code>c(0.5, 0.8, 0.85)</code></li>
<li><code>**summary()</code>: trả về tóm tắt một vectơ số bao gồm giá trị trung bình, trung vị, và các khoảng phân vị thường gặp</li>
</ul>
<p><span style="color: red;"><strong><em>NGUY HIỂM:</em></strong> Nếu cung cấp một vectơ số cho một trong các hàm trên, hãy đảm bảo các số được đặt trong hàm <code>c()</code> .</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If supplying raw numbers to a function, wrap them in c()</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)    <span class="co"># !!! INCORRECT !!!  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)) <span class="co"># CORRECT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.666667</code></pre>
</div>
</div>
</section>
<section id="một-số-hàm-hữu-ích-khác" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="một-số-hàm-hữu-ích-khác">Một số hàm hữu ích khác</h4>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 20%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>Mục đích</th>
<th>Hàm</th>
<th>Ví dụ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Tạo chuỗi số liên tục</td>
<td>seq(from, to, by)</td>
<td><code>seq(1, 10, 2)</code></td>
</tr>
<tr class="even">
<td>lặp x, n lần</td>
<td>rep(x, ntimes)</td>
<td><code>rep(1:3, 2)</code> or <code>rep(c("a", "b", "c"), 3)</code></td>
</tr>
<tr class="odd">
<td>chia nhỏ một vectơ số</td>
<td>cut(x, n)</td>
<td><code>cut(linelist$age, 5)</code></td>
</tr>
<tr class="even">
<td>lấy một mẫu ngẫu nhiên</td>
<td>sample(x, size)</td>
<td><code>sample(linelist$id, size = 5, replace = TRUE)</code></td>
</tr>
</tbody>
</table>
<!-- ======================================================= -->
</section>
</section>
<section id="in" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="in"><code>%in%</code></h3>
<p>Một toán tử rất hữu ích để nhanh chóng tìm kiếm xem một giá trị có nằm trong một vectơ hoặc một dataframe hay không.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Để truy vấn một giá trị <strong>không</strong> <code>%in%</code> một vectơ, hãy đặt dấu chấm than (!) <strong>phía trước</strong> biểu thức logic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to negate, put an exclamation in front</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><code>%in%</code> sẽ rất hữu dụng khi dùng hàm <code>case_when()</code> của package <strong>dplyr</strong>. Bạn có thể định nghĩa một vectơ trước đó, sau đó tham chiếu đến nó. ví dụ:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">child_hospitaled =</span> <span class="fu">case_when</span>(</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    hospitalized <span class="sc">%in%</span> affirmative <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Hospitalized Child"</span>,</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                      <span class="sc">~</span> <span class="st">"Not"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lưu ý: Nếu bạn muốn phát hiện một phần của chuỗi, có lẽ việc sử dụng hàm <code>str_detect()</code> từ package <strong>stringr</strong>, sẽ không chấp nhận một vectơ ký tự kiểu như <code>c("1", "Yes", "yes", "y")</code>. Thay vào đó, nó cần được cung cấp dưới dạng một <em>biểu thức chính quy</em> - một chuối cô đọng với thanh dọc cho phép so sánh OR, chẳng hạn như “1|Yes|yes|y”. Ví dụ, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. Xem thêm chương <a href="../new_pages/characters_strings.vn.html">Ký tự và chuỗi</a> để biết thêm chi tiết.</p>
<p>Bạn có thể chuyển đổi một vectơ ký tự thành một biểu thức chính quy được đặt tên bằng lệnh này:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>affirmative</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># condense to </span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">paste0</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)  <span class="co"># option with base R</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">str_c</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)   <span class="co"># option with stringr package</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>affirmative_str_search</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
</div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="lỗi-và-cảnh-báo" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="lỗi-và-cảnh-báo"><span class="header-section-number">12.1</span> Lỗi và cảnh báo</h2>
<p>Phần này giải thích:</p>
<ul>
<li>Sự khác biệt giữa lỗi và cảnh báo<br>
</li>
<li>Mẹo cú pháp chung để viết code R<br>
</li>
<li>Trợ giúp viết code</li>
</ul>
<p>Các lỗi thường gặp và cảnh báo cũng như mẹo khắc phục sự cố có thể được tìm thấy trong chương <a href="../new_pages/errors.vn.html">Các lỗi thường gặp</a>.</p>
<!-- ======================================================= -->
<section id="lỗi-và-cảnh-báo-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="lỗi-và-cảnh-báo-1">Lỗi và Cảnh báo</h3>
<p>Khi một lệnh được thực thi, cửa sổ R Console có thể hiển thị cho bạn cảnh báo hoặc thông báo lỗi bằng văn bản màu đỏ.</p>
<ul>
<li><p>Một <strong>cảnh báo</strong> nghĩa là R đã hoàn thành lệnh của bạn, nhưng phải thực hiện các bước bổ sung hoặc tạo ra kết quả bất thường mà bạn cần lưu ý.</p></li>
<li><p>Một <strong>lỗi</strong> nghĩa là R không thể hoàn thành lệnh của bạn.</p></li>
</ul>
<p>Tìm manh mối:</p>
<ul>
<li><p>Thông báo lỗi/cảnh báo thường sẽ bao gồm số dòng xảy ra sự cố.</p></li>
<li><p>Nếu một đối tượng “không xác định được (is unknown)” hoặc “không tìm thấy (not found)”, có lẽ bạn đã viết sai chính tả, quên gọi một package bằng hàm library(), hoặc quên chạy lại tập lệnh của bạn sau khi thực hiện các thay đổi.</p></li>
</ul>
<p>Nếu vẫn thất bại, hãy sao chép thông báo lỗi vào Google cùng với một số từ khóa chính - rất có thể ai đó cũng đã gặp lỗi này rồi!</p>
<!-- ======================================================= -->
</section>
<section id="mẹo-cú-pháp-chung" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="mẹo-cú-pháp-chung">Mẹo cú pháp chung</h3>
<p>Một số điều cần nhớ khi viết lệnh trong R, để tránh lỗi và cảnh báo:</p>
<ul>
<li>Luôn đóng dấu ngoặc đơn - mẹo: đếm số lần mở dấu ngoặc đơn “(” và đóng dấu ngoặc đơn “)” cho mỗi đoạn mã</li>
<li>Tránh để khoảng trắng trong tên cột và đối tượng. Thay vào đó, hãy sử dụng dấu gạch dưới (_) hoặc dấu chấm (.)</li>
<li>Theo dõi và nhớ tách các đối số của hàm bằng dấu phẩy</li>
<li>R phân biệt chữ hoa và chữ thường, nghĩa là <code>Variable_A</code> <em>khác</em> với <code>variable_A</code></li>
</ul>
<!-- ======================================================= -->
</section>
<section id="trợ-giúp-viết-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="trợ-giúp-viết-code">Trợ giúp viết code</h3>
<p>Bất kỳ tập lệnh nào (RMarkdown hoặc những cái khác) sẽ cung cấp manh mối khi bạn mắc lỗi. Ví dụ: nếu bạn quên viết dấu phẩy ở vị trí cần thiết hoặc quên đóng dấu ngoặc đơn, RStudio sẽ treo cờ trên dòng đó, ở phía bên trái của script, để cảnh báo bạn.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/data_used.vn.html" class="pagination-link" aria-label="Tải sách và dữ liệu">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Tải sách và dữ liệu</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/transition_to_R.vn.html" class="pagination-link" aria-label="Chuyển đổi sang R">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chuyển đổi sang R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","selector":".lightbox","closeEffect":"zoom","loop":false,"descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>