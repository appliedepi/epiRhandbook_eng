<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>38 Interactive plots | The Epidemiologist R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Data visualisation is increasingly required to be interrogable by the audience. Consequently, is is becoming common to create interactive plots. There are several ways to include these but the two...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="38 Interactive plots | The Epidemiologist R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="Data visualisation is increasingly required to be interrogable by the audience. Consequently, is is becoming common to create interactive plots. There are several ways to include these but the two...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="38 Interactive plots | The Epidemiologist R Handbook">
<meta name="twitter:description" content="Data visualisation is increasingly required to be interrogable by the audience. Consequently, is is becoming common to create interactive plots. There are several ways to include these but the two...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.24/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/tabwid.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/scrool.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&amp;A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">About this book</li>
<li><a class="" href="editorial-and-technical-notes.html"><span class="header-section-number">1</span> Editorial and technical notes</a></li>
<li><a class="" href="download-handbook-and-data.html"><span class="header-section-number">2</span> Download handbook and data</a></li>
<li class="book-part">Basics</li>
<li><a class="" href="r-basics.html"><span class="header-section-number">3</span> R Basics</a></li>
<li><a class="" href="transition-to-r.html"><span class="header-section-number">4</span> Transition to R</a></li>
<li><a class="" href="suggested-packages-1.html"><span class="header-section-number">5</span> Suggested packages</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R projects</a></li>
<li><a class="" href="import-and-export.html"><span class="header-section-number">7</span> Import and export</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning-data-and-core-functions.html"><span class="header-section-number">8</span> Cleaning data and core functions</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">9</span> Working with dates</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">10</span> Characters and strings</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Factors</a></li>
<li><a class="" href="pivoting-data.html"><span class="header-section-number">12</span> Pivoting data</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">13</span> Grouping data</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">14</span> Joining data</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration-loops-and-lists.html"><span class="header-section-number">16</span> Iteration, loops, and lists</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive-tables.html"><span class="header-section-number">17</span> Descriptive tables</a></li>
<li><a class="" href="simple-statistical-tests.html"><span class="header-section-number">18</span> Simple statistical tests</a></li>
<li><a class="" href="univariate-and-multivariable-regression.html"><span class="header-section-number">19</span> Univariate and multivariable regression</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Missing data</a></li>
<li><a class="" href="standardised-rates.html"><span class="header-section-number">21</span> Standardised rates</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">22</span> Moving averages</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">23</span> Time series and outbreak detection</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">24</span> Epidemic modeling</a></li>
<li><a class="" href="contact-tracing-1.html"><span class="header-section-number">25</span> Contact tracing</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Survey analysis</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Survival analysis</a></li>
<li><a class="" href="gis-basics.html"><span class="header-section-number">28</span> GIS basics</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="tables-for-presentation.html"><span class="header-section-number">29</span> Tables for presentation</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> ggplot basics</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> ggplot tips</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">32</span> Epidemic curves</a></li>
<li><a class="" href="demographic-pyramids-and-likert-scales.html"><span class="header-section-number">33</span> Demographic pyramids and Likert-scales</a></li>
<li><a class="" href="heat-plots.html"><span class="header-section-number">34</span> Heat plots</a></li>
<li><a class="" href="diagrams-and-charts.html"><span class="header-section-number">35</span> Diagrams and charts</a></li>
<li><a class="" href="combinations-analysis.html"><span class="header-section-number">36</span> Combinations analysis</a></li>
<li><a class="" href="phylogenetic-trees-1.html"><span class="header-section-number">37</span> Phylogenetic trees</a></li>
<li><a class="active" href="interactive-plots.html"><span class="header-section-number">38</span> Interactive plots</a></li>
<li class="book-part">Reports and dashboards</li>
<li><a class="" href="reports-with-r-markdown.html"><span class="header-section-number">39</span> Reports with R Markdown</a></li>
<li><a class="" href="organizing-routine-reports.html"><span class="header-section-number">40</span> Organizing routine reports</a></li>
<li><a class="" href="dashboards-with-r-markdown.html"><span class="header-section-number">41</span> Dashboards with R Markdown</a></li>
<li><a class="" href="dashboards-with-shiny.html"><span class="header-section-number">42</span> Dashboards with Shiny</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="writing-functions-1.html"><span class="header-section-number">43</span> Writing functions</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">44</span> Directory interactions</a></li>
<li><a class="" href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">45</span> Version control and collaboration with Git and Github</a></li>
<li><a class="" href="common-errors.html"><span class="header-section-number">46</span> Common errors</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">47</span> Getting help</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">48</span> R on network drives</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">49</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="interactive-plots" class="section level1" number="38">
<h1>
<span class="header-section-number">38</span> Interactive plots<a class="anchor" aria-label="anchor" href="#interactive-plots"><i class="fas fa-link"></i></a>
</h1>
<p>Data visualisation is increasingly required to be interrogable by the audience. Consequently, is is becoming common to create interactive plots. There are several ways to include these but the two most common are <strong>plotly</strong> and <strong>shiny</strong>.</p>
<p>In this page we will focus on converting an existing <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> plot into an interactive plot with <strong>plotly</strong>. You can read more about <strong>shiny</strong> in the <a href="dashboards-with-shiny.html#dashboards-with-shiny">Dashboards with Shiny</a> page. What is worth mentioning is that interactive plots are only useable in HTML format R markdown documents, not PDF or Word documents.</p>
<p>Below is a basic epicurve that has been transformed to be interactive using the integration of <strong>ggplot2</strong> and <strong>plotly</strong> (hover your mouse over the plot, zoom in, or click items in the legend).</p>
<div id="htmlwidget-9bbbf8a93f53013cceae" style="width:75%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9bbbf8a93f53013cceae">{"x":{"data":[{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235,16575.765],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.3,342.3],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"outcome","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"6f7cb71fe4":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"6f7cb71fe4","visdat":{"6f7cb71fe4":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ======================================================= --><div id="preparation-31" class="section level2" number="38.1">
<h2>
<span class="header-section-number">38.1</span> Preparation<a class="anchor" aria-label="anchor" href="#preparation-31"><i class="fas fa-link"></i></a>
</h2>
<div id="load-packages-28" class="section level3 unnumbered">
<h3>Load packages<a class="anchor" aria-label="anchor" href="#load-packages-28"><i class="fas fa-link"></i></a>
</h3>
<p>This code chunk shows the loading of packages required for the analyses. In this handbook we emphasize <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> from <strong>pacman</strong>, which installs the package if necessary <em>and</em> loads it for use. You can also load installed packages with <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> from <strong>base</strong> R. See the page on <a href="r-basics.html#r-basics">R basics</a> for more information on R packages.</p>
<div class="sourceCode" id="cb1733"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,       <span class="co"># import/export</span></span>
<span>  <span class="va">here</span>,      <span class="co"># filepaths</span></span>
<span>  <span class="va">lubridate</span>, <span class="co"># working with dates</span></span>
<span>  <span class="va">plotly</span>,    <span class="co"># interactive plots</span></span>
<span>  <span class="va">scales</span>,    <span class="co"># quick percents</span></span>
<span>  <span class="va">tidyverse</span>  <span class="co"># data management and visualization</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
</div>
<div id="start-with-a-ggplot" class="section level3 unnumbered">
<h3>Start with a <code>ggplot()</code><a class="anchor" aria-label="anchor" href="#start-with-a-ggplot"><i class="fas fa-link"></i></a>
</h3>
<p>In this page we assume that you are beginning with a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> plot that you want to convert to be interactive. We will build several of these plots in this page, using the case <code>linelist</code> used in many pages of this handbook.</p>
</div>
<div id="import-data-24" class="section level3 unnumbered">
<h3>Import data<a class="anchor" aria-label="anchor" href="#import-data-24"><i class="fas fa-link"></i></a>
</h3>
<p>To begin, we import the cleaned linelist of cases from a simulated Ebola epidemic. If you want to follow along, <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">click to download the “clean” linelist</a> (as .rds file). Import data with the <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> function from the <strong>rio</strong> package (it handles many file types like .xlsx, .csv, .rds - see the <a href="import-and-export.html#import-and-export">Import and export</a> page for details).</p>
<div class="sourceCode" id="cb1734"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import case linelist </span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>The first 50 rows of the linelist are displayed below.</p>
<div id="htmlwidget-0b679c595f8bbbbbfb79" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0b679c595f8bbbbbfb79">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="plot-with-ggplotly" class="section level2" number="38.2">
<h2>
<span class="header-section-number">38.2</span> Plot with <code>ggplotly()</code><a class="anchor" aria-label="anchor" href="#plot-with-ggplotly"><i class="fas fa-link"></i></a>
</h2>
<p>The function <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> from the <strong>plotly</strong> package makes it easy to convert a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> to be interactive. Simply save your <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> and then pipe it to the <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> function.</p>
<p>Below, we plot a simple line representing the proportion of cases who died in a given week:</p>
<p>We begin by creating a summary dataset of each epidemiological week, and the percent of cases with a known outcome that died.</p>
<div class="sourceCode" id="cb1735"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weekly_deaths</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>epiweek <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span><span class="va">date_onset</span>, <span class="st">"week"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># create and group data by epiweek column</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                                              <span class="co"># create new summary data frame:</span></span>
<span>    n_known_outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,      <span class="co"># number of cases per group with known outcome</span></span>
<span>    n_death  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,          <span class="co"># number of cases per group who died</span></span>
<span>    pct_death <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">n_death</span> <span class="op">/</span> <span class="va">n_known_outcome</span><span class="op">)</span>           <span class="co"># percent of cases with known outcome who died</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Here is the first 50 rows of the <code>weekly_deaths</code> dataset.</p>
<div id="htmlwidget-c48450ac69f59995a5dc" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c48450ac69f59995a5dc">{"x":{"filter":"none","vertical":false,"data":[["2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15"],[0,0,3,4,7,10,8,17,16,14,25,16,25,23,40,46,62,66,92,91,120,146,159,223,214,213,210,199,199,180,163,134,116,140,120,94,86,94,70,76,88,74,70,63,52,59,64,56,52,41],[0,0,0,2,3,5,1,11,11,8,12,11,11,9,22,21,43,33,51,46,61,72,85,118,110,115,131,120,112,97,98,86,79,84,68,52,42,62,43,39,46,43,39,41,27,33,34,37,31,23],[null,null,0,50,42.8571428571429,50,12.5,64.7058823529412,68.75,57.1428571428571,48,68.75,44,39.1304347826087,55,45.6521739130435,69.3548387096774,50,55.4347826086957,50.5494505494505,50.8333333333333,49.3150684931507,53.4591194968553,52.914798206278,51.4018691588785,53.9906103286385,62.3809523809524,60.3015075376884,56.2814070351759,53.8888888888889,60.1226993865031,64.1791044776119,68.1034482758621,60,56.6666666666667,55.3191489361702,48.8372093023256,65.9574468085106,61.4285714285714,51.3157894736842,52.2727272727273,58.1081081081081,55.7142857142857,65.0793650793651,51.9230769230769,55.9322033898305,53.125,66.0714285714286,59.6153846153846,56.0975609756098]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>epiweek<\/th>\n      <th>n_known_outcome<\/th>\n      <th>n_death<\/th>\n      <th>pct_death<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Then we create the plot with <strong>ggplot2</strong>, using <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>.</p>
<div class="sourceCode" id="cb1736"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deaths_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">weekly_deaths</span><span class="op">)</span><span class="op">+</span>            <span class="co"># begin with weekly deaths data</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek</span>, y <span class="op">=</span> <span class="va">pct_death</span><span class="op">)</span><span class="op">)</span>  <span class="co"># make line </span></span>
<span></span>
<span><span class="va">deaths_plot</span>   <span class="co"># print</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1332-1.png" width="672"></div>
<p>We can make this interactive by simply passing this plot to <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code>, as below. Hover your mouse over the line to show the x and y values. You can zoom in on the plot, and drag it around. You can also see icons in the upper-right of the plot. In order, they allow you to:</p>
<ul>
<li>Download the current view as a PNG image<br>
</li>
<li>Zoom in with a select box<br>
</li>
<li>“Pan”, or move across the plot by clicking and dragging the plot<br>
</li>
<li>Zoom in, zoom out, or return to default zoom<br>
</li>
<li>Reset axes to defaults<br>
</li>
<li>Toggle on/off “spike lines” which are dotted lines from the interactive point extending to the x and y axes<br>
</li>
<li>Adjustments to whether data show when you are not hovering on the line</li>
</ul>
<div class="sourceCode" id="cb1737"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deaths_plot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-649601d5f0ab31d76d66" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-649601d5f0ab31d76d66">{"x":{"data":[{"x":[16166,16173,16180,16187,16194,16201,16208,16215,16222,16229,16236,16243,16250,16257,16264,16271,16278,16285,16292,16299,16306,16313,16320,16327,16334,16341,16348,16355,16362,16369,16376,16383,16390,16397,16404,16411,16418,16425,16432,16439,16446,16453,16460,16467,16474,16481,16488,16495,16502,16509,16516,16523,16530,16537,16544,16551,null],"y":[null,null,0,50,42.8571428571429,50,12.5,64.7058823529412,68.75,57.1428571428571,48,68.75,44,39.1304347826087,55,45.6521739130435,69.3548387096774,50,55.4347826086957,50.5494505494505,50.8333333333333,49.3150684931507,53.4591194968553,52.914798206278,51.4018691588785,53.9906103286385,62.3809523809524,60.3015075376884,56.2814070351759,53.8888888888889,60.1226993865031,64.1791044776119,68.1034482758621,60,56.6666666666667,55.3191489361702,48.8372093023256,65.9574468085106,61.4285714285714,51.3157894736842,52.2727272727273,58.1081081081081,55.7142857142857,65.0793650793651,51.9230769230769,55.9322033898305,53.125,66.0714285714286,59.6153846153846,56.0975609756098,53.4883720930233,63.8297872340426,42.4242424242424,65.7894736842105,57.1428571428571,52.3809523809524,62.7906976744186],"text":["epiweek: 2014-04-06<br />pct_death:      NaN","epiweek: 2014-04-13<br />pct_death:      NaN","epiweek: 2014-04-20<br />pct_death:  0.00000","epiweek: 2014-04-27<br />pct_death: 50.00000","epiweek: 2014-05-04<br />pct_death: 42.85714","epiweek: 2014-05-11<br />pct_death: 50.00000","epiweek: 2014-05-18<br />pct_death: 12.50000","epiweek: 2014-05-25<br />pct_death: 64.70588","epiweek: 2014-06-01<br />pct_death: 68.75000","epiweek: 2014-06-08<br />pct_death: 57.14286","epiweek: 2014-06-15<br />pct_death: 48.00000","epiweek: 2014-06-22<br />pct_death: 68.75000","epiweek: 2014-06-29<br />pct_death: 44.00000","epiweek: 2014-07-06<br />pct_death: 39.13043","epiweek: 2014-07-13<br />pct_death: 55.00000","epiweek: 2014-07-20<br />pct_death: 45.65217","epiweek: 2014-07-27<br />pct_death: 69.35484","epiweek: 2014-08-03<br />pct_death: 50.00000","epiweek: 2014-08-10<br />pct_death: 55.43478","epiweek: 2014-08-17<br />pct_death: 50.54945","epiweek: 2014-08-24<br />pct_death: 50.83333","epiweek: 2014-08-31<br />pct_death: 49.31507","epiweek: 2014-09-07<br />pct_death: 53.45912","epiweek: 2014-09-14<br />pct_death: 52.91480","epiweek: 2014-09-21<br />pct_death: 51.40187","epiweek: 2014-09-28<br />pct_death: 53.99061","epiweek: 2014-10-05<br />pct_death: 62.38095","epiweek: 2014-10-12<br />pct_death: 60.30151","epiweek: 2014-10-19<br />pct_death: 56.28141","epiweek: 2014-10-26<br />pct_death: 53.88889","epiweek: 2014-11-02<br />pct_death: 60.12270","epiweek: 2014-11-09<br />pct_death: 64.17910","epiweek: 2014-11-16<br />pct_death: 68.10345","epiweek: 2014-11-23<br />pct_death: 60.00000","epiweek: 2014-11-30<br />pct_death: 56.66667","epiweek: 2014-12-07<br />pct_death: 55.31915","epiweek: 2014-12-14<br />pct_death: 48.83721","epiweek: 2014-12-21<br />pct_death: 65.95745","epiweek: 2014-12-28<br />pct_death: 61.42857","epiweek: 2015-01-04<br />pct_death: 51.31579","epiweek: 2015-01-11<br />pct_death: 52.27273","epiweek: 2015-01-18<br />pct_death: 58.10811","epiweek: 2015-01-25<br />pct_death: 55.71429","epiweek: 2015-02-01<br />pct_death: 65.07937","epiweek: 2015-02-08<br />pct_death: 51.92308","epiweek: 2015-02-15<br />pct_death: 55.93220","epiweek: 2015-02-22<br />pct_death: 53.12500","epiweek: 2015-03-01<br />pct_death: 66.07143","epiweek: 2015-03-08<br />pct_death: 59.61538","epiweek: 2015-03-15<br />pct_death: 56.09756","epiweek: 2015-03-22<br />pct_death: 53.48837","epiweek: 2015-03-29<br />pct_death: 63.82979","epiweek: 2015-04-05<br />pct_death: 42.42424","epiweek: 2015-04-12<br />pct_death: 65.78947","epiweek: 2015-04-19<br />pct_death: 57.14286","epiweek: 2015-04-26<br />pct_death: 52.38095","epiweek: NA<br />pct_death: 62.79070"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16146.75,16570.25],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"epiweek","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.46774193548387,72.8225806451613],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"pct_death","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"6f7c6f186dd":{"x":{},"y":{},"type":"scatter"}},"cur_data":"6f7c6f186dd","visdat":{"6f7c6f186dd":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Grouped data work with <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> as well. Below, a weekly epicurve is made, grouped by outcome. The stacked bars are interactive. Try clicking on the different items in the legend (they will appear/disappear).</p>
<div class="sourceCode" id="cb1738"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make epidemic curve with incidence2 pacakge</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"weeks"</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb1739"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot interactively  </span></span>
<span><span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-fc99c5c0852091eff7ee" style="width:95%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fc99c5c0852091eff7ee">{"x":{"data":[{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235,16575.765],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.3,342.3],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"outcome","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"6f7c6f04f09":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"6f7c6f04f09","visdat":{"6f7c6f04f09":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
<div id="modifications" class="section level2" number="38.3">
<h2>
<span class="header-section-number">38.3</span> Modifications<a class="anchor" aria-label="anchor" href="#modifications"><i class="fas fa-link"></i></a>
</h2>
<div id="file-size" class="section level3 unnumbered">
<h3>File size<a class="anchor" aria-label="anchor" href="#file-size"><i class="fas fa-link"></i></a>
</h3>
<p>When exporting in an R Markdown generated HTML (like this book!) you want to make the plot as small data size as possible (with no negative side effects in most cases). For this, just pipe the interactive plot to <code><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle()</a></code>, also from <strong>plotly</strong>.</p>
<div class="sourceCode" id="cb1740"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="buttons" class="section level3 unnumbered">
<h3>Buttons<a class="anchor" aria-label="anchor" href="#buttons"><i class="fas fa-link"></i></a>
</h3>
<p>Some of the buttons on a standard plotly are superfluous and can be distracting, so you can remove them. You can do this simply by piping the output into <code>config()</code> from <strong>plotly</strong> and specifying which buttons to remove. In the below example we specify in advance the names of the buttons to remove, and provide them to the argument <code>modeBarButtonsToRemove =</code>. We also set <code>displaylogo = FALSE</code> to remove the plotly logo.</p>
<div class="sourceCode" id="cb1741"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## these buttons are distracting and we want to remove them</span></span>
<span><span class="va">plotly_buttons_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'zoom2d'</span>,<span class="st">'pan2d'</span>,<span class="st">'lasso2d'</span>, <span class="st">'select2d'</span>,<span class="st">'zoomIn2d'</span>,</span>
<span>                              <span class="st">'zoomOut2d'</span>,<span class="st">'autoScale2d'</span>,<span class="st">'hoverClosestCartesian'</span>,</span>
<span>                              <span class="st">'toggleSpikelines'</span>,<span class="st">'hoverCompareCartesian'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>          <span class="co"># re-define interactive plot without these buttons</span></span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span>displaylogo <span class="op">=</span> <span class="cn">FALSE</span>, modeBarButtonsToRemove <span class="op">=</span> <span class="va">plotly_buttons_remove</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="heat-tiles" class="section level2" number="38.4">
<h2>
<span class="header-section-number">38.4</span> Heat tiles<a class="anchor" aria-label="anchor" href="#heat-tiles"><i class="fas fa-link"></i></a>
</h2>
<p>You can make almost any <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> plot interactive, including heat tiles. In the page on <a href="heat-plots.html#heat-plots">Heat plots</a> you can read about how to make the below plot, which displays the proportion of days per week that certain facilities reported data to their province.</p>
<p>Here is the code, although we will not describe it in depth here.</p>
<div class="sourceCode" id="cb1742"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import data</span></span>
<span><span class="va">facility_count_data</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"malaria_facility_count_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># aggregate data into Weeks for Spring district</span></span>
<span><span class="va">agg_weeks</span> <span class="op">&lt;-</span> <span class="va">facility_count_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">District</span> <span class="op">==</span> <span class="st">"Spring"</span>,</span>
<span>         <span class="va">data_date</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-08-01"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">aweek</span><span class="fu">::</span><span class="fu"><a href="https://www.repidemicsconsortium.org/aweek/reference/date2week.html">date2week</a></span><span class="op">(</span></span>
<span>    <span class="va">data_date</span>,</span>
<span>    start_date <span class="op">=</span> <span class="st">"Monday"</span>,</span>
<span>    floor_day <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    factor <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">location_name</span>, <span class="va">week</span>, .drop <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    n_days          <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    n_reports       <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    malaria_tot     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">malaria_tot</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>    n_days_reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">data_date</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    p_days_reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">n_days_reported</span> <span class="op">/</span> <span class="va">n_days</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="va">location_name</span>, <span class="va">week</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand.html">expand</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">week</span>, <span class="va">location_name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">aweek</span><span class="fu">::</span><span class="fu"><a href="https://www.repidemicsconsortium.org/aweek/reference/date2week.html">week2date</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create plot</span></span>
<span><span class="va">metrics_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">agg_weeks</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">week</span>,</span>
<span>           y <span class="op">=</span> <span class="va">location_name</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">p_days_reported</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span>colour<span class="op">=</span><span class="st">"white"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"orange"</span>, high <span class="op">=</span> <span class="st">"darkgreen"</span>, na.value <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>               date_breaks <span class="op">=</span> <span class="st">"2 weeks"</span>,</span>
<span>               date_labels <span class="op">=</span> <span class="st">"%d\n%b"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.text  <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">10</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.key.height <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    legend.key.width  <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.6</span>,<span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">0.4</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">0</span>,size<span class="op">=</span><span class="fl">14</span>,face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span>, face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Week"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Facility name"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Reporting\nperformance (%)"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Percent of days per week that facility reported data"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"District health facilities, April-May 2019"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"7-day weeks beginning on Mondays."</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metrics_plot</span> <span class="co"># print</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1336-1.png" width="672"></div>
<p>Below, we make it interactive and modify it for simple buttons and file size.</p>
<div class="sourceCode" id="cb1743"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics_plot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span>displaylogo <span class="op">=</span> <span class="cn">FALSE</span>, modeBarButtonsToRemove <span class="op">=</span> <span class="va">plotly_buttons_remove</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-fd7342e11426b5b0e3a6" style="width:95%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fd7342e11426b5b0e3a6">{"x":{"data":[{"x":[18393,18400,18407,18414,18421,18428,18435,18442,18449,18456,18463,18470],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"z":[[0,0,0,0,0.29,1,1,1,1,1,1,0.57],[0,0,0,0,0,0,0,0.29,1,0.86,0.29,0.43],[0,0,0,0.14,0.71,0.29,0.71,0.86,0.71,1,0.86,0.71],[0.29,1,1,1,1,1,1,1,1,1,1,0.71],[0,0,0,0.14,0.86,0.43,0.71,0.57,0.71,1,1,0.71],[0,0,0,0,0.86,0.86,1,1,1,1,1,0.71],[0,0,0,0,0,0,0.29,0.71,1,1,1,0.71],[0,0,0,0,0.86,1,1,1,1,1,1,0.71],[0,0,0,0,0.14,0.86,0.86,0.86,0.86,1,0.86,0.57],[0,0,0,0,0,0,0.14,0,0,0,0,0],[0,0,0,0.14,1,1,1,1,1,1,1,0.71],[0,0,0,0,0,0.29,0.86,0.71,0.86,0.86,0.71,0.71],[0,0,0,0,0,0.29,0.57,0,0,0,0,0],[0,0,0,0,0,0.71,1,1,0.86,1,1,0.71],[0,0,0,0,0.86,1,1,1,1,1,0.57,0.71]],"text":[["week: 2020-05-11<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 1<br />p_days_reported:  29","week: 2020-06-15<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 1<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-29<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-06<br />location_name: Facility 11<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 11<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-27<br />location_name: Facility 11<br />p_days_reported:  43"],["week: 2020-05-11<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 27<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-15<br />location_name: Facility 27<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 27<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 27<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 28<br />p_days_reported:  29","week: 2020-05-18<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-05-25<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-01<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-08<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 28<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 32<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 32<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 32<br />p_days_reported:  43","week: 2020-06-22<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 32<br />p_days_reported:  57","week: 2020-07-06<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 32<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 35<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 39<br />p_days_reported:  29","week: 2020-06-29<br />location_name: Facility 39<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 39<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 50<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 50<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 51<br />p_days_reported:  14","week: 2020-06-15<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 51<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 51<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 56<br />p_days_reported:  14","week: 2020-06-29<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 56<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 58<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 58<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 59<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-27<br />location_name: Facility 59<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 65<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 65<br />p_days_reported:  57","week: 2020-06-29<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 65<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 7<br />p_days_reported:  71","week: 2020-06-22<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 7<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 7<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 9<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 9<br />p_days_reported:  57","week: 2020-07-27<br />location_name: Facility 9<br />p_days_reported:  71"]],"colorscale":[[0,"#FFA500"],[0.14,"#E09D00"],[0.29,"#BE9500"],[0.43,"#9F8C00"],[0.57,"#818300"],[0.71,"#617A00"],[0.86,"#3C6F00"],[1,"#006400"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18400],"y":[1],"name":"99_340dc5ec5783e326bc90a93c14ebe904","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FFA500"],[0.00334448160535117,"#FEA500"],[0.00668896321070234,"#FDA500"],[0.0100334448160535,"#FDA400"],[0.0133779264214047,"#FCA400"],[0.0167224080267559,"#FBA400"],[0.020066889632107,"#FAA400"],[0.0234113712374582,"#FAA400"],[0.0267558528428094,"#F9A400"],[0.0301003344481605,"#F8A300"],[0.0334448160535117,"#F7A300"],[0.0367892976588629,"#F7A300"],[0.040133779264214,"#F6A300"],[0.0434782608695652,"#F5A300"],[0.0468227424749164,"#F4A300"],[0.0501672240802676,"#F4A200"],[0.0535117056856187,"#F3A200"],[0.0568561872909699,"#F2A200"],[0.0602006688963211,"#F1A200"],[0.0635451505016722,"#F1A200"],[0.0668896321070234,"#F0A100"],[0.0702341137123746,"#EFA100"],[0.0735785953177258,"#EEA100"],[0.0769230769230769,"#EEA100"],[0.0802675585284281,"#EDA100"],[0.0836120401337793,"#ECA100"],[0.0869565217391304,"#EBA000"],[0.0903010033444816,"#EBA000"],[0.0936454849498328,"#EAA000"],[0.0969899665551839,"#E9A000"],[0.100334448160535,"#E8A000"],[0.103678929765886,"#E89F00"],[0.107023411371237,"#E79F00"],[0.110367892976589,"#E69F00"],[0.11371237458194,"#E59F00"],[0.117056856187291,"#E59F00"],[0.120401337792642,"#E49F00"],[0.123745819397993,"#E39E00"],[0.127090301003344,"#E29E00"],[0.130434782608696,"#E29E00"],[0.133779264214047,"#E19E00"],[0.137123745819398,"#E09E00"],[0.140468227424749,"#E09D00"],[0.1438127090301,"#DF9D00"],[0.147157190635452,"#DE9D00"],[0.150501672240803,"#DD9D00"],[0.153846153846154,"#DD9D00"],[0.157190635451505,"#DC9D00"],[0.160535117056856,"#DB9C00"],[0.163879598662207,"#DA9C00"],[0.167224080267559,"#DA9C00"],[0.17056856187291,"#D99C00"],[0.173913043478261,"#D89C00"],[0.177257525083612,"#D79B00"],[0.180602006688963,"#D79B00"],[0.183946488294314,"#D69B00"],[0.187290969899666,"#D59B00"],[0.190635451505017,"#D49B00"],[0.193979933110368,"#D49A00"],[0.197324414715719,"#D39A00"],[0.20066889632107,"#D29A00"],[0.204013377926421,"#D19A00"],[0.207357859531773,"#D19A00"],[0.210702341137124,"#D09900"],[0.214046822742475,"#CF9900"],[0.217391304347826,"#CE9900"],[0.220735785953177,"#CE9900"],[0.224080267558528,"#CD9900"],[0.22742474916388,"#CC9900"],[0.230769230769231,"#CB9800"],[0.234113712374582,"#CB9800"],[0.237458193979933,"#CA9800"],[0.240802675585284,"#C99800"],[0.244147157190635,"#C89800"],[0.247491638795987,"#C89700"],[0.250836120401338,"#C79700"],[0.254180602006689,"#C69700"],[0.25752508361204,"#C69700"],[0.260869565217391,"#C59700"],[0.264214046822742,"#C49600"],[0.267558528428094,"#C39600"],[0.270903010033445,"#C39600"],[0.274247491638796,"#C29600"],[0.277591973244147,"#C19600"],[0.280936454849498,"#C09500"],[0.284280936454849,"#C09500"],[0.287625418060201,"#BF9500"],[0.290969899665552,"#BE9500"],[0.294314381270903,"#BD9500"],[0.297658862876254,"#BD9400"],[0.301003344481605,"#BC9400"],[0.304347826086957,"#BB9400"],[0.307692307692308,"#BA9400"],[0.311036789297659,"#BA9400"],[0.31438127090301,"#B99300"],[0.317725752508361,"#B89300"],[0.321070234113712,"#B79300"],[0.324414715719064,"#B79300"],[0.327759197324415,"#B69300"],[0.331103678929766,"#B59200"],[0.334448160535117,"#B59200"],[0.337792642140468,"#B49200"],[0.341137123745819,"#B39200"],[0.344481605351171,"#B29200"],[0.347826086956522,"#B29100"],[0.351170568561873,"#B19100"],[0.354515050167224,"#B09100"],[0.357859531772575,"#AF9100"],[0.361204013377926,"#AF9100"],[0.364548494983278,"#AE9000"],[0.367892976588629,"#AD9000"],[0.37123745819398,"#AC9000"],[0.374581939799331,"#AC9000"],[0.377926421404682,"#AB9000"],[0.381270903010033,"#AA8F00"],[0.384615384615385,"#A98F00"],[0.387959866220736,"#A98F00"],[0.391304347826087,"#A88F00"],[0.394648829431438,"#A78E00"],[0.397993311036789,"#A78E00"],[0.40133779264214,"#A68E00"],[0.404682274247492,"#A58E00"],[0.408026755852843,"#A48E00"],[0.411371237458194,"#A48D00"],[0.414715719063545,"#A38D00"],[0.418060200668896,"#A28D00"],[0.421404682274247,"#A18D00"],[0.424749163879599,"#A18D00"],[0.42809364548495,"#A08C00"],[0.431438127090301,"#9F8C00"],[0.434782608695652,"#9E8C00"],[0.438127090301003,"#9E8C00"],[0.441471571906355,"#9D8C00"],[0.444816053511706,"#9C8B00"],[0.448160535117057,"#9B8B00"],[0.451505016722408,"#9B8B00"],[0.454849498327759,"#9A8B00"],[0.45819397993311,"#998A00"],[0.461538461538462,"#998A00"],[0.464882943143813,"#988A00"],[0.468227424749164,"#978A00"],[0.471571906354515,"#968A00"],[0.474916387959866,"#968900"],[0.478260869565217,"#958900"],[0.481605351170569,"#948900"],[0.48494983277592,"#938900"],[0.488294314381271,"#938900"],[0.491638795986622,"#928800"],[0.494983277591973,"#918800"],[0.498327759197324,"#908800"],[0.501672240802676,"#908800"],[0.505016722408027,"#8F8700"],[0.508361204013378,"#8E8700"],[0.511705685618729,"#8D8700"],[0.51505016722408,"#8D8700"],[0.518394648829431,"#8C8700"],[0.521739130434783,"#8B8600"],[0.525083612040134,"#8B8600"],[0.528428093645485,"#8A8600"],[0.531772575250836,"#898600"],[0.535117056856187,"#888600"],[0.538461538461538,"#888500"],[0.54180602006689,"#878500"],[0.545150501672241,"#868500"],[0.548494983277592,"#858500"],[0.551839464882943,"#858400"],[0.555183946488294,"#848400"],[0.558528428093645,"#838400"],[0.561872909698997,"#828400"],[0.565217391304348,"#828400"],[0.568561872909699,"#818300"],[0.57190635451505,"#808300"],[0.575250836120401,"#7F8300"],[0.578595317725753,"#7F8300"],[0.581939799331104,"#7E8200"],[0.585284280936455,"#7D8200"],[0.588628762541806,"#7C8200"],[0.591973244147157,"#7C8200"],[0.595317725752508,"#7B8200"],[0.598662207357859,"#7A8100"],[0.602006688963211,"#798100"],[0.605351170568562,"#798100"],[0.608695652173913,"#788100"],[0.612040133779264,"#778000"],[0.615384615384615,"#768000"],[0.618729096989967,"#768000"],[0.622073578595318,"#758000"],[0.625418060200669,"#747F00"],[0.62876254180602,"#737F00"],[0.632107023411371,"#737F00"],[0.635451505016722,"#727F00"],[0.638795986622074,"#717F00"],[0.642140468227425,"#707E00"],[0.645484949832776,"#707E00"],[0.648829431438127,"#6F7E00"],[0.652173913043478,"#6E7E00"],[0.655518394648829,"#6D7D00"],[0.658862876254181,"#6D7D00"],[0.662207357859532,"#6C7D00"],[0.665551839464883,"#6B7D00"],[0.668896321070234,"#6A7C00"],[0.672240802675585,"#6A7C00"],[0.675585284280937,"#697C00"],[0.678929765886288,"#687C00"],[0.682274247491639,"#677C00"],[0.68561872909699,"#677B00"],[0.688963210702341,"#667B00"],[0.692307692307692,"#657B00"],[0.695652173913043,"#647B00"],[0.698996655518395,"#637A00"],[0.702341137123746,"#637A00"],[0.705685618729097,"#627A00"],[0.709030100334448,"#617A00"],[0.712374581939799,"#607900"],[0.71571906354515,"#607900"],[0.719063545150502,"#5F7900"],[0.722408026755853,"#5E7900"],[0.725752508361204,"#5D7800"],[0.729096989966555,"#5C7800"],[0.732441471571906,"#5C7800"],[0.735785953177258,"#5B7800"],[0.739130434782609,"#5A7800"],[0.74247491638796,"#597700"],[0.745819397993311,"#587700"],[0.749163879598662,"#587700"],[0.752508361204013,"#577700"],[0.755852842809364,"#567600"],[0.759197324414716,"#557600"],[0.762541806020067,"#557600"],[0.765886287625418,"#547600"],[0.769230769230769,"#537500"],[0.77257525083612,"#527500"],[0.775919732441471,"#517500"],[0.779264214046823,"#507500"],[0.782608695652174,"#507400"],[0.785953177257525,"#4F7400"],[0.789297658862876,"#4E7400"],[0.792642140468227,"#4D7400"],[0.795986622073579,"#4C7300"],[0.79933110367893,"#4C7300"],[0.802675585284281,"#4B7300"],[0.806020066889632,"#4A7300"],[0.809364548494983,"#497200"],[0.812709030100334,"#487200"],[0.816053511705686,"#477200"],[0.819397993311037,"#467200"],[0.822742474916388,"#467100"],[0.826086956521739,"#457100"],[0.82943143812709,"#447100"],[0.832775919732441,"#437100"],[0.836120401337793,"#427000"],[0.839464882943144,"#417000"],[0.842809364548495,"#407000"],[0.846153846153846,"#3F7000"],[0.849498327759197,"#3F7000"],[0.852842809364548,"#3E6F00"],[0.8561872909699,"#3D6F00"],[0.859531772575251,"#3C6F00"],[0.862876254180602,"#3B6F00"],[0.866220735785953,"#3A6E00"],[0.869565217391304,"#396E00"],[0.872909698996656,"#386E00"],[0.876254180602007,"#376E00"],[0.879598662207358,"#366D00"],[0.882943143812709,"#356D00"],[0.88628762541806,"#346D00"],[0.889632107023411,"#336D00"],[0.892976588628763,"#326C00"],[0.896321070234114,"#316C00"],[0.899665551839465,"#306C00"],[0.903010033444816,"#2F6B00"],[0.906354515050167,"#2E6B00"],[0.909698996655518,"#2D6B00"],[0.91304347826087,"#2C6B00"],[0.916387959866221,"#2B6A00"],[0.919732441471572,"#2A6A00"],[0.923076923076923,"#296A00"],[0.926421404682274,"#286A00"],[0.929765886287625,"#266900"],[0.933110367892977,"#256900"],[0.936454849498328,"#246900"],[0.939799331103679,"#236900"],[0.94314381270903,"#226800"],[0.946488294314381,"#206800"],[0.949832775919732,"#1F6800"],[0.953177257525084,"#1D6800"],[0.956521739130435,"#1C6700"],[0.959866220735786,"#1B6700"],[0.963210702341137,"#196700"],[0.966555183946488,"#176700"],[0.969899665551839,"#166600"],[0.973244147157191,"#146600"],[0.976588628762542,"#126600"],[0.979933110367893,"#106600"],[0.983277591973244,"#0E6500"],[0.986622073578595,"#0B6500"],[0.989966555183946,"#086500"],[0.993311036789298,"#056500"],[0.996655518394649,"#036400"],[1,"#006400"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":22.6771653543307,"title":"Reporting<br />performance (%)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,0.25,0.5,0.75,1],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":44.8252386882524,"r":7.30593607305936,"b":45.7617268576173,"l":91.1913657119137},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Percent of days per week that facility reported data <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18389.5,18473.5],"tickmode":"array","ticktext":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"tickvals":[18400,18414,18428,18442,18456,18470],"categoryorder":"array","categoryarray":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.531340805313408,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"<b> Week <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,15.6],"tickmode":"array","ticktext":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"categoryorder":"array","categoryarray":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.531340805313408,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"<b> Facility name <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"6f7c2ee15d6c":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"6f7c2ee15d6c","visdat":{"6f7c2ee15d6c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ## Maps {.unnumbered}   --><!-- You can also make `ggplot()` GIS maps interactive, although it makes a bit more care.  --><!-- THIS SECTION IS UNDER CONSTRUCTION  --><!-- Although **plotly** works well with `ggplot2::geom_sf` in RStudio, when you try to include its outputs in R Markdown HTML files (like this book), it doesn't work well.   --><!-- So instead you can use {**plotly**}'s own mapping tools which can be tricky but are easy when you know how. Read on...   --><!-- We're going to use Covid-19 incidence across African countries for this example. The data used can be found on the [World Health Organisation website](https://covid19.who.int/table).   --><!-- You'll also need a new type of file, a GeoJSON, which is sort of similar to a shp file for those familiar with GIS. For this book, we used one from [here](https://geojson-maps.ash.ms).   --><!-- GeoJSON files are stored in R as complex lists and you'll need to maipulate them a little. --><!-- ```{r, echo=T,} --><!-- ## You need two new packages: {rjson} and {purrr} --><!-- pacman::p_load(plotly, rjson, purrr) --><!-- ## This is a simplified version of the WHO data --><!-- df <- rio::import(here::here("data", "gis", "covid_incidence.csv")) --><!-- ## Load your geojson file --><!-- geoJSON <- rjson::fromJSON(file=here::here("data", "gis", "africa_countries.geo.json")) --><!-- ## Here are some of the properties for each element of the object --><!-- head(geoJSON$features[[1]]$properties) --><!-- ``` --><!-- This is the tricky part. For {**plotly**} to match your incidence data to GeoJSON, the countries in the geoJSON need an id in a specific place in the list of lists. For this we need to build a basic function: --><!-- ```{r} --><!-- ## The property column we need to choose here is "sovereignt" as it is the names for each country --><!-- give_id <- function(x){ --><!--   x$id <- x$properties$sovereignt  ## Take sovereignt from properties and set it as the id --><!--   return(x) --><!-- } --><!-- ## Use {purrr} to apply this function to every element of the features list of the geoJSON object --><!-- geoJSON$features <- purrr::map(.x = geoJSON$features, give_id) --><!-- ``` --><!-- <!-- ======================================================= --><p>–&gt;
<!-- ### Maps - plot {  } --></p>
<!-- UNDER CONSTRUCTION -->
<!-- ```{r, echo=FALSE, eval=FALSE, out.width=c('95%'), out.height=c('500px'),warning=F} -->
<!-- plotly::plot_ly() %>%  -->
<!--   plotly::add_trace(                    #The main plot mapping functionn -->
<!--     type="choropleth", -->
<!--     geojson=geoJSON, -->
<!--     locations=df$Name,          #The column with the names (must match id) -->
<!--     z=df$Cumulative_incidence,  #The column with the incidence values -->
<!--     zmin=0, -->
<!--     zmax=57008, -->
<!--     colorscale="Viridis", -->
<!--     marker=list(line=list(width=0)) -->
<!--   ) %>% -->
<!--   colorbar(title = "Cases per million") %>% -->
<!--   layout(title = "Covid-19 cumulative incidence", -->
<!--                  geo = list(scope = 'africa')) %>%  -->
<!--   config(displaylogo = FALSE, modeBarButtonsToRemove = plotly_buttons_remove) -->
<!-- ``` -->
<!-- ======================================================= -->
</div>
<div id="resources-31" class="section level2" number="38.5">
<h2>
<span class="header-section-number">38.5</span> Resources<a class="anchor" aria-label="anchor" href="#resources-31"><i class="fas fa-link"></i></a>
</h2>
<p>Plotly is not just for R, but also works well with Python (and really any data science language as it’s built in JavaScript). You can read more about it on the <a href="https://plotly.com/r/">plotly website</a></p>

</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="phylogenetic-trees-1.html"><span class="header-section-number">37</span> Phylogenetic trees</a></div>
<div class="next"><a href="reports-with-r-markdown.html"><span class="header-section-number">39</span> Reports with R Markdown</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#interactive-plots"><span class="header-section-number">38</span> Interactive plots</a></li>
<li>
<a class="nav-link" href="#preparation-31"><span class="header-section-number">38.1</span> Preparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#load-packages-28">Load packages</a></li>
<li><a class="nav-link" href="#start-with-a-ggplot">Start with a ggplot()</a></li>
<li><a class="nav-link" href="#import-data-24">Import data</a></li>
</ul>
</li>
<li><a class="nav-link" href="#plot-with-ggplotly"><span class="header-section-number">38.2</span> Plot with ggplotly()</a></li>
<li>
<a class="nav-link" href="#modifications"><span class="header-section-number">38.3</span> Modifications</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#file-size">File size</a></li>
<li><a class="nav-link" href="#buttons">Buttons</a></li>
</ul>
</li>
<li><a class="nav-link" href="#heat-tiles"><span class="header-section-number">38.4</span> Heat tiles</a></li>
<li><a class="nav-link" href="#resources-31"><span class="header-section-number">38.5</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2022-11-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
