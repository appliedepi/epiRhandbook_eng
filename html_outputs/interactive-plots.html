<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>39 Interactive plots | The Epidemiologist R Handbook</title>

    <meta name="author" content="the handbook team" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.9/header-attrs.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.2.5.1/tabs.js"></script>
    <script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.18/datatables.js"></script>
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
    <script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.9.3/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
    <link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
    <script src="libs/vis-4.20.1/vis.min.js"></script>
    <script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-1.57.1/plotly-basic-1.57.1.min.js"></script>
    <script src="libs/plotly-cartesian-1.57.1/plotly-cartesian-1.57.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-8.1.2/highcharts.js"></script>
    <script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
    <script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
    <script src="libs/highcharts-8.1.2/modules/stock.js"></script>
    <script src="libs/highcharts-8.1.2/modules/map.js"></script>
    <script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
    <script src="libs/highcharts-8.1.2/modules/data.js"></script>
    <script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
    <script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
    <script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
    <script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
    <script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
    <script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
    <script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
    <script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
    <script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-8.1.2/modules/organization.js"></script>
    <script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
    <script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
    <script src="libs/highcharts-8.1.2/modules/vector.js"></script>
    <script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
    <script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
    <script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
    <script src="libs/highcharts-8.1.2/modules/venn.js"></script>
    <script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
    <script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
    <script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
    <script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
    <script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
    <script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
    <script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
    <script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
    <script src="libs/highcharts-8.1.2/custom/reset.js"></script>
    <script src="libs/highcharts-8.1.2/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.8.2/highchart.js"></script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="style_bs4.css" />
    
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="interactive-plots" class="section level1" number="39">
<h1><span class="header-section-number">39</span> Interactive plots</h1>
<p>Data visualisation is increasingly required to be interrogable by the audience. Consequently, is is becoming common to create interactive plots. There are several ways to include these but the two most common are <strong>plotly</strong> and <strong>shiny</strong>.</p>
<p>In this page we will focus on converting an existing <code>ggplot()</code> plot into an interactive plot with <strong>plotly</strong>. You can read more about <strong>shiny</strong> in the <a href="dashboards-with-shiny.html#dashboards-with-shiny">Dashboards with Shiny</a> page. What is worth mentioning is that interactive plots are only useable in HTML format R markdown documents, not PDF or Word documents.</p>
<p>Below is a basic epicurve that has been transformed to be interactive using the integration of <strong>ggplot2</strong> and <strong>plotly</strong> (hover your mouse over the plot, zoom in, or click items in the legend).</p>
<div id="htmlwidget-76434bd8cfd00a0fb186" style="width:75%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-76434bd8cfd00a0fb186">{"x":{"data":[{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235,16575.765],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.3,342.3],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"outcome","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"4ca462bc3cbe":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"4ca462bc3cbe","visdat":{"4ca462bc3cbe":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
<div id="preparation-32" class="section level2" number="39.1">
<h2><span class="header-section-number">39.1</span> Preparation</h2>
<div id="load-packages-29" class="section level3 unnumbered">
<h3>Load packages</h3>
<p>This code chunk shows the loading of packages required for the analyses. In this handbook we emphasize <code>p_load()</code> from <strong>pacman</strong>, which installs the package if necessary <em>and</em> loads it for use. You can also load installed packages with <code>library()</code> from <strong>base</strong> R. See the page on <a href="r-basics.html#r-basics">R basics</a> for more information on R packages.</p>
<div class="sourceCode" id="cb1795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1795-1"><a href="interactive-plots.html#cb1795-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1795-2"><a href="interactive-plots.html#cb1795-2" aria-hidden="true" tabindex="-1"></a>  rio,       <span class="co"># import/export</span></span>
<span id="cb1795-3"><a href="interactive-plots.html#cb1795-3" aria-hidden="true" tabindex="-1"></a>  here,      <span class="co"># filepaths</span></span>
<span id="cb1795-4"><a href="interactive-plots.html#cb1795-4" aria-hidden="true" tabindex="-1"></a>  lubridate, <span class="co"># working with dates</span></span>
<span id="cb1795-5"><a href="interactive-plots.html#cb1795-5" aria-hidden="true" tabindex="-1"></a>  plotly,    <span class="co"># interactive plots</span></span>
<span id="cb1795-6"><a href="interactive-plots.html#cb1795-6" aria-hidden="true" tabindex="-1"></a>  scales,    <span class="co"># quick percents</span></span>
<span id="cb1795-7"><a href="interactive-plots.html#cb1795-7" aria-hidden="true" tabindex="-1"></a>  tidyverse  <span class="co"># data management and visualization</span></span>
<span id="cb1795-8"><a href="interactive-plots.html#cb1795-8" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
</div>
<div id="start-with-a-ggplot" class="section level3 unnumbered">
<h3>Start with a <code>ggplot()</code></h3>
<p>In this page we assume that you are beginning with a <code>ggplot()</code> plot that you want to convert to be interactive. We will build several of these plots in this page, using the case <code>linelist</code> used in many pages of this handbook.</p>
</div>
<div id="import-data-25" class="section level3 unnumbered">
<h3>Import data</h3>
<p>To begin, we import the cleaned linelist of cases from a simulated Ebola epidemic. If you want to follow along, <a href='https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds' class='download-button'>click to download the “clean” linelist</a> (as .rds file). Import data with the <code>import()</code> function from the <strong>rio</strong> package (it handles many file types like .xlsx, .csv, .rds - see the <a href="import-and-export.html#import-and-export">Import and export</a> page for details).</p>
<div class="sourceCode" id="cb1796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1796-1"><a href="interactive-plots.html#cb1796-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import case linelist </span></span>
<span id="cb1796-2"><a href="interactive-plots.html#cb1796-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_cleaned.rds&quot;</span>)</span></code></pre></div>
<p>The first 50 rows of the linelist are displayed below.</p>
<div id="htmlwidget-a9e610d8af50d47fb3e9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a9e610d8af50d47fb3e9">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="plot-with-ggplotly" class="section level2" number="39.2">
<h2><span class="header-section-number">39.2</span> Plot with <code>ggplotly()</code></h2>
<p>The function <code>ggplotly()</code> from the <strong>plotly</strong> package makes it easy to convert a <code>ggplot()</code> to be interactive. Simply save your <code>ggplot()</code> and then pipe it to the <code>ggplotly()</code> function.</p>
<p>Below, we plot a simple line representing the proportion of cases who died in a given week:</p>
<p>We begin by creating a summary dataset of each epidemiological week, and the percent of cases with a known outcome that died.</p>
<div class="sourceCode" id="cb1797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1797-1"><a href="interactive-plots.html#cb1797-1" aria-hidden="true" tabindex="-1"></a>weekly_deaths <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb1797-2"><a href="interactive-plots.html#cb1797-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">epiweek =</span> <span class="fu">floor_date</span>(date_onset, <span class="st">&quot;week&quot;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># create and group data by epiweek column</span></span>
<span id="cb1797-3"><a href="interactive-plots.html#cb1797-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(                                              <span class="co"># create new summary data frame:</span></span>
<span id="cb1797-4"><a href="interactive-plots.html#cb1797-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_known_outcome =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(outcome), <span class="at">na.rm=</span>T),      <span class="co"># number of cases per group with known outcome</span></span>
<span id="cb1797-5"><a href="interactive-plots.html#cb1797-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_death  =</span> <span class="fu">sum</span>(outcome <span class="sc">==</span> <span class="st">&quot;Death&quot;</span>, <span class="at">na.rm=</span>T),          <span class="co"># number of cases per group who died</span></span>
<span id="cb1797-6"><a href="interactive-plots.html#cb1797-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_death =</span> <span class="dv">100</span><span class="sc">*</span>(n_death <span class="sc">/</span> n_known_outcome)           <span class="co"># percent of cases with known outcome who died</span></span>
<span id="cb1797-7"><a href="interactive-plots.html#cb1797-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Here is the first 50 rows of the <code>weekly_deaths</code> dataset.</p>
<div id="htmlwidget-aa310c441f4223f65337" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa310c441f4223f65337">{"x":{"filter":"none","data":[["2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15"],[0,0,3,4,7,10,8,17,16,14,25,16,25,23,40,46,62,66,92,91,120,146,159,223,214,213,210,199,199,180,163,134,116,140,120,94,86,94,70,76,88,74,70,63,52,59,64,56,52,41],[0,0,0,2,3,5,1,11,11,8,12,11,11,9,22,21,43,33,51,46,61,72,85,118,110,115,131,120,112,97,98,86,79,84,68,52,42,62,43,39,46,43,39,41,27,33,34,37,31,23],[null,null,0,50,42.8571428571429,50,12.5,64.7058823529412,68.75,57.1428571428571,48,68.75,44,39.1304347826087,55,45.6521739130435,69.3548387096774,50,55.4347826086957,50.5494505494505,50.8333333333333,49.3150684931507,53.4591194968553,52.914798206278,51.4018691588785,53.9906103286385,62.3809523809524,60.3015075376884,56.2814070351759,53.8888888888889,60.1226993865031,64.1791044776119,68.1034482758621,60,56.6666666666667,55.3191489361702,48.8372093023256,65.9574468085106,61.4285714285714,51.3157894736842,52.2727272727273,58.1081081081081,55.7142857142857,65.0793650793651,51.9230769230769,55.9322033898305,53.125,66.0714285714286,59.6153846153846,56.0975609756098]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>epiweek<\/th>\n      <th>n_known_outcome<\/th>\n      <th>n_death<\/th>\n      <th>pct_death<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<p>Then we create the plot with <strong>ggplot2</strong>, using <code>geom_line()</code>.</p>
<div class="sourceCode" id="cb1798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1798-1"><a href="interactive-plots.html#cb1798-1" aria-hidden="true" tabindex="-1"></a>deaths_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> weekly_deaths)<span class="sc">+</span>            <span class="co"># begin with weekly deaths data</span></span>
<span id="cb1798-2"><a href="interactive-plots.html#cb1798-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> epiweek, <span class="at">y =</span> pct_death))  <span class="co"># make line </span></span>
<span id="cb1798-3"><a href="interactive-plots.html#cb1798-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1798-4"><a href="interactive-plots.html#cb1798-4" aria-hidden="true" tabindex="-1"></a>deaths_plot   <span class="co"># print</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1338-1.png" width="672" /></p>
<p>We can make this interactive by simply passing this plot to <code>ggplotly()</code>, as below. Hover your mouse over the line to show the x and y values. You can zoom in on the plot, and drag it around. You can also see icons in the upper-right of the plot. In order, they allow you to:</p>
<ul>
<li>Download the current view as a PNG image<br />
</li>
<li>Zoom in with a select box<br />
</li>
<li>“Pan”, or move across the plot by clicking and dragging the plot<br />
</li>
<li>Zoom in, zoom out, or return to default zoom<br />
</li>
<li>Reset axes to defaults<br />
</li>
<li>Toggle on/off “spike lines” which are dotted lines from the interactive point extending to the x and y axes<br />
</li>
<li>Adjustments to whether data show when you are not hovering on the line</li>
</ul>
<div class="sourceCode" id="cb1799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1799-1"><a href="interactive-plots.html#cb1799-1" aria-hidden="true" tabindex="-1"></a>deaths_plot <span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">ggplotly</span>()</span></code></pre></div>
<div id="htmlwidget-449b2730b1e2d7a5f9a0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-449b2730b1e2d7a5f9a0">{"x":{"data":[{"x":[16166,16173,16180,16187,16194,16201,16208,16215,16222,16229,16236,16243,16250,16257,16264,16271,16278,16285,16292,16299,16306,16313,16320,16327,16334,16341,16348,16355,16362,16369,16376,16383,16390,16397,16404,16411,16418,16425,16432,16439,16446,16453,16460,16467,16474,16481,16488,16495,16502,16509,16516,16523,16530,16537,16544,16551,null],"y":[null,null,0,50,42.8571428571429,50,12.5,64.7058823529412,68.75,57.1428571428571,48,68.75,44,39.1304347826087,55,45.6521739130435,69.3548387096774,50,55.4347826086957,50.5494505494505,50.8333333333333,49.3150684931507,53.4591194968553,52.914798206278,51.4018691588785,53.9906103286385,62.3809523809524,60.3015075376884,56.2814070351759,53.8888888888889,60.1226993865031,64.1791044776119,68.1034482758621,60,56.6666666666667,55.3191489361702,48.8372093023256,65.9574468085106,61.4285714285714,51.3157894736842,52.2727272727273,58.1081081081081,55.7142857142857,65.0793650793651,51.9230769230769,55.9322033898305,53.125,66.0714285714286,59.6153846153846,56.0975609756098,53.4883720930233,63.8297872340426,42.4242424242424,65.7894736842105,57.1428571428571,52.3809523809524,62.7906976744186],"text":["epiweek: 2014-04-06<br />pct_death:      NaN","epiweek: 2014-04-13<br />pct_death:      NaN","epiweek: 2014-04-20<br />pct_death:  0.00000","epiweek: 2014-04-27<br />pct_death: 50.00000","epiweek: 2014-05-04<br />pct_death: 42.85714","epiweek: 2014-05-11<br />pct_death: 50.00000","epiweek: 2014-05-18<br />pct_death: 12.50000","epiweek: 2014-05-25<br />pct_death: 64.70588","epiweek: 2014-06-01<br />pct_death: 68.75000","epiweek: 2014-06-08<br />pct_death: 57.14286","epiweek: 2014-06-15<br />pct_death: 48.00000","epiweek: 2014-06-22<br />pct_death: 68.75000","epiweek: 2014-06-29<br />pct_death: 44.00000","epiweek: 2014-07-06<br />pct_death: 39.13043","epiweek: 2014-07-13<br />pct_death: 55.00000","epiweek: 2014-07-20<br />pct_death: 45.65217","epiweek: 2014-07-27<br />pct_death: 69.35484","epiweek: 2014-08-03<br />pct_death: 50.00000","epiweek: 2014-08-10<br />pct_death: 55.43478","epiweek: 2014-08-17<br />pct_death: 50.54945","epiweek: 2014-08-24<br />pct_death: 50.83333","epiweek: 2014-08-31<br />pct_death: 49.31507","epiweek: 2014-09-07<br />pct_death: 53.45912","epiweek: 2014-09-14<br />pct_death: 52.91480","epiweek: 2014-09-21<br />pct_death: 51.40187","epiweek: 2014-09-28<br />pct_death: 53.99061","epiweek: 2014-10-05<br />pct_death: 62.38095","epiweek: 2014-10-12<br />pct_death: 60.30151","epiweek: 2014-10-19<br />pct_death: 56.28141","epiweek: 2014-10-26<br />pct_death: 53.88889","epiweek: 2014-11-02<br />pct_death: 60.12270","epiweek: 2014-11-09<br />pct_death: 64.17910","epiweek: 2014-11-16<br />pct_death: 68.10345","epiweek: 2014-11-23<br />pct_death: 60.00000","epiweek: 2014-11-30<br />pct_death: 56.66667","epiweek: 2014-12-07<br />pct_death: 55.31915","epiweek: 2014-12-14<br />pct_death: 48.83721","epiweek: 2014-12-21<br />pct_death: 65.95745","epiweek: 2014-12-28<br />pct_death: 61.42857","epiweek: 2015-01-04<br />pct_death: 51.31579","epiweek: 2015-01-11<br />pct_death: 52.27273","epiweek: 2015-01-18<br />pct_death: 58.10811","epiweek: 2015-01-25<br />pct_death: 55.71429","epiweek: 2015-02-01<br />pct_death: 65.07937","epiweek: 2015-02-08<br />pct_death: 51.92308","epiweek: 2015-02-15<br />pct_death: 55.93220","epiweek: 2015-02-22<br />pct_death: 53.12500","epiweek: 2015-03-01<br />pct_death: 66.07143","epiweek: 2015-03-08<br />pct_death: 59.61538","epiweek: 2015-03-15<br />pct_death: 56.09756","epiweek: 2015-03-22<br />pct_death: 53.48837","epiweek: 2015-03-29<br />pct_death: 63.82979","epiweek: 2015-04-05<br />pct_death: 42.42424","epiweek: 2015-04-12<br />pct_death: 65.78947","epiweek: 2015-04-19<br />pct_death: 57.14286","epiweek: 2015-04-26<br />pct_death: 52.38095","epiweek: NA<br />pct_death: 62.79070"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16146.75,16570.25],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"epiweek","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.46774193548387,72.8225806451613],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"pct_death","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"4ca4747f401d":{"x":{},"y":{},"type":"scatter"}},"cur_data":"4ca4747f401d","visdat":{"4ca4747f401d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Grouped data work with <code>ggplotly()</code> as well. Below, a weekly epicurve is made, grouped by outcome. The stacked bars are interactive. Try clicking on the different items in the legend (they will appear/disappear).</p>
<div class="sourceCode" id="cb1800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1800-1"><a href="interactive-plots.html#cb1800-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make epidemic curve with incidence2 pacakge</span></span>
<span id="cb1800-2"><a href="interactive-plots.html#cb1800-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> incidence2<span class="sc">::</span><span class="fu">incidence</span>(</span>
<span id="cb1800-3"><a href="interactive-plots.html#cb1800-3" aria-hidden="true" tabindex="-1"></a>  linelist,</span>
<span id="cb1800-4"><a href="interactive-plots.html#cb1800-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">date_index =</span> date_onset,</span>
<span id="cb1800-5"><a href="interactive-plots.html#cb1800-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;weeks&quot;</span>,</span>
<span id="cb1800-6"><a href="interactive-plots.html#cb1800-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">groups =</span> outcome) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(<span class="at">fill =</span> outcome)</span></code></pre></div>
<div class="sourceCode" id="cb1801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1801-1"><a href="interactive-plots.html#cb1801-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot interactively  </span></span>
<span id="cb1801-2"><a href="interactive-plots.html#cb1801-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">ggplotly</span>()</span></code></pre></div>
<div id="htmlwidget-e0dd9842c73f1de85818" style="width:95%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e0dd9842c73f1de85818">{"x":{"data":[{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.29999999999927,6.30000000000109,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291,6.30000000000291],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235,16575.765],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.3,342.3],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"annotations":[{"text":"outcome","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"4ca4677b115c":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"4ca4677b115c","visdat":{"4ca4677b115c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
<div id="modifications" class="section level2" number="39.3">
<h2><span class="header-section-number">39.3</span> Modifications</h2>
<div id="file-size" class="section level3 unnumbered">
<h3>File size</h3>
<p>When exporting in an R Markdown generated HTML (like this book!) you want to make the plot as small data size as possible (with no negative side effects in most cases). For this, just pipe the interactive plot to <code>partial_bundle()</code>, also from <strong>plotly</strong>.</p>
<div class="sourceCode" id="cb1802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1802-1"><a href="interactive-plots.html#cb1802-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span> </span>
<span id="cb1802-2"><a href="interactive-plots.html#cb1802-2" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">ggplotly</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1802-3"><a href="interactive-plots.html#cb1802-3" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">partial_bundle</span>()</span></code></pre></div>
</div>
<div id="buttons" class="section level3 unnumbered">
<h3>Buttons</h3>
<p>Some of the buttons on a standard plotly are superfluous and can be distracting, so you can remove them. You can do this simply by piping the output into <code>config()</code> from <strong>plotly</strong> and specifying which buttons to remove. In the below example we specify in advance the names of the buttons to remove, and provide them to the argument <code>modeBarButtonsToRemove =</code>. We also set <code>displaylogo = FALSE</code> to remove the plotly logo.</p>
<div class="sourceCode" id="cb1803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1803-1"><a href="interactive-plots.html#cb1803-1" aria-hidden="true" tabindex="-1"></a><span class="do">## these buttons are distracting and we want to remove them</span></span>
<span id="cb1803-2"><a href="interactive-plots.html#cb1803-2" aria-hidden="true" tabindex="-1"></a>plotly_buttons_remove <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;zoom2d&#39;</span>,<span class="st">&#39;pan2d&#39;</span>,<span class="st">&#39;lasso2d&#39;</span>, <span class="st">&#39;select2d&#39;</span>,<span class="st">&#39;zoomIn2d&#39;</span>,</span>
<span id="cb1803-3"><a href="interactive-plots.html#cb1803-3" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&#39;zoomOut2d&#39;</span>,<span class="st">&#39;autoScale2d&#39;</span>,<span class="st">&#39;hoverClosestCartesian&#39;</span>,</span>
<span id="cb1803-4"><a href="interactive-plots.html#cb1803-4" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&#39;toggleSpikelines&#39;</span>,<span class="st">&#39;hoverCompareCartesian&#39;</span>)</span>
<span id="cb1803-5"><a href="interactive-plots.html#cb1803-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1803-6"><a href="interactive-plots.html#cb1803-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span>          <span class="co"># re-define interactive plot without these buttons</span></span>
<span id="cb1803-7"><a href="interactive-plots.html#cb1803-7" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">config</span>(<span class="at">displaylogo =</span> <span class="cn">FALSE</span>, <span class="at">modeBarButtonsToRemove =</span> plotly_buttons_remove)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="heat-tiles" class="section level2" number="39.4">
<h2><span class="header-section-number">39.4</span> Heat tiles</h2>
<p>You can make almost any <code>ggplot()</code> plot interactive, including heat tiles. In the page on <a href="heat-plots.html#heat-plots">Heat plots</a> you can read about how to make the below plot, which displays the proportion of days per week that certain facilities reported data to their province.</p>
<p>Here is the code, although we will not describe it in depth here.</p>
<div class="sourceCode" id="cb1804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1804-1"><a href="interactive-plots.html#cb1804-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import data</span></span>
<span id="cb1804-2"><a href="interactive-plots.html#cb1804-2" aria-hidden="true" tabindex="-1"></a>facility_count_data <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;malaria_facility_count_data.rds&quot;</span>))</span>
<span id="cb1804-3"><a href="interactive-plots.html#cb1804-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1804-4"><a href="interactive-plots.html#cb1804-4" aria-hidden="true" tabindex="-1"></a><span class="co"># aggregate data into Weeks for Spring district</span></span>
<span id="cb1804-5"><a href="interactive-plots.html#cb1804-5" aria-hidden="true" tabindex="-1"></a>agg_weeks <span class="ot">&lt;-</span> facility_count_data <span class="sc">%&gt;%</span> </span>
<span id="cb1804-6"><a href="interactive-plots.html#cb1804-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(District <span class="sc">==</span> <span class="st">&quot;Spring&quot;</span>,</span>
<span id="cb1804-7"><a href="interactive-plots.html#cb1804-7" aria-hidden="true" tabindex="-1"></a>         data_date <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-01&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1804-8"><a href="interactive-plots.html#cb1804-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> aweek<span class="sc">::</span><span class="fu">date2week</span>(</span>
<span id="cb1804-9"><a href="interactive-plots.html#cb1804-9" aria-hidden="true" tabindex="-1"></a>    data_date,</span>
<span id="cb1804-10"><a href="interactive-plots.html#cb1804-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;Monday&quot;</span>,</span>
<span id="cb1804-11"><a href="interactive-plots.html#cb1804-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">floor_day =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1804-12"><a href="interactive-plots.html#cb1804-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">factor =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1804-13"><a href="interactive-plots.html#cb1804-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(location_name, week, <span class="at">.drop =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb1804-14"><a href="interactive-plots.html#cb1804-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1804-15"><a href="interactive-plots.html#cb1804-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_days          =</span> <span class="dv">7</span>,</span>
<span id="cb1804-16"><a href="interactive-plots.html#cb1804-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_reports       =</span> <span class="fu">n</span>(),</span>
<span id="cb1804-17"><a href="interactive-plots.html#cb1804-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">malaria_tot     =</span> <span class="fu">sum</span>(malaria_tot, <span class="at">na.rm =</span> T),</span>
<span id="cb1804-18"><a href="interactive-plots.html#cb1804-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_days_reported =</span> <span class="fu">length</span>(<span class="fu">unique</span>(data_date)),</span>
<span id="cb1804-19"><a href="interactive-plots.html#cb1804-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">p_days_reported =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span>(n_days_reported <span class="sc">/</span> n_days))) <span class="sc">%&gt;%</span> </span>
<span id="cb1804-20"><a href="interactive-plots.html#cb1804-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(tidyr<span class="sc">::</span><span class="fu">expand</span>(., week, location_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb1804-21"><a href="interactive-plots.html#cb1804-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> aweek<span class="sc">::</span><span class="fu">week2date</span>(week))</span>
<span id="cb1804-22"><a href="interactive-plots.html#cb1804-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1804-23"><a href="interactive-plots.html#cb1804-23" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb1804-24"><a href="interactive-plots.html#cb1804-24" aria-hidden="true" tabindex="-1"></a>metrics_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(agg_weeks,</span>
<span id="cb1804-25"><a href="interactive-plots.html#cb1804-25" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> week,</span>
<span id="cb1804-26"><a href="interactive-plots.html#cb1804-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> location_name,</span>
<span id="cb1804-27"><a href="interactive-plots.html#cb1804-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> p_days_reported))<span class="sc">+</span></span>
<span id="cb1804-28"><a href="interactive-plots.html#cb1804-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">colour=</span><span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb1804-29"><a href="interactive-plots.html#cb1804-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="at">na.value =</span> <span class="st">&quot;grey80&quot;</span>)<span class="sc">+</span></span>
<span id="cb1804-30"><a href="interactive-plots.html#cb1804-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb1804-31"><a href="interactive-plots.html#cb1804-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_breaks =</span> <span class="st">&quot;2 weeks&quot;</span>,</span>
<span id="cb1804-32"><a href="interactive-plots.html#cb1804-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">&quot;%d</span><span class="sc">\n</span><span class="st">%b&quot;</span>)<span class="sc">+</span></span>
<span id="cb1804-33"><a href="interactive-plots.html#cb1804-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span> </span>
<span id="cb1804-34"><a href="interactive-plots.html#cb1804-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb1804-35"><a href="interactive-plots.html#cb1804-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb1804-36"><a href="interactive-plots.html#cb1804-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text  =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb1804-37"><a href="interactive-plots.html#cb1804-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.height =</span> grid<span class="sc">::</span><span class="fu">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb1804-38"><a href="interactive-plots.html#cb1804-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.width  =</span> grid<span class="sc">::</span><span class="fu">unit</span>(<span class="fl">0.6</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb1804-39"><a href="interactive-plots.html#cb1804-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb1804-40"><a href="interactive-plots.html#cb1804-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">vjust=</span><span class="fl">0.2</span>),</span>
<span id="cb1804-41"><a href="interactive-plots.html#cb1804-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">size=</span><span class="fl">0.4</span>),</span>
<span id="cb1804-42"><a href="interactive-plots.html#cb1804-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb1804-43"><a href="interactive-plots.html#cb1804-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>,<span class="at">size=</span><span class="dv">14</span>,<span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb1804-44"><a href="interactive-plots.html#cb1804-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">&quot;italic&quot;</span>)</span>
<span id="cb1804-45"><a href="interactive-plots.html#cb1804-45" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb1804-46"><a href="interactive-plots.html#cb1804-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Week&quot;</span>,</span>
<span id="cb1804-47"><a href="interactive-plots.html#cb1804-47" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Facility name&quot;</span>,</span>
<span id="cb1804-48"><a href="interactive-plots.html#cb1804-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Reporting</span><span class="sc">\n</span><span class="st">performance (%)&quot;</span>,</span>
<span id="cb1804-49"><a href="interactive-plots.html#cb1804-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Percent of days per week that facility reported data&quot;</span>,</span>
<span id="cb1804-50"><a href="interactive-plots.html#cb1804-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;District health facilities, April-May 2019&quot;</span>,</span>
<span id="cb1804-51"><a href="interactive-plots.html#cb1804-51" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;7-day weeks beginning on Mondays.&quot;</span>)</span>
<span id="cb1804-52"><a href="interactive-plots.html#cb1804-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1804-53"><a href="interactive-plots.html#cb1804-53" aria-hidden="true" tabindex="-1"></a>metrics_plot <span class="co"># print</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1342-1.png" width="672" /></p>
<p>Below, we make it interactive and modify it for simple buttons and file size.</p>
<div class="sourceCode" id="cb1805"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1805-1"><a href="interactive-plots.html#cb1805-1" aria-hidden="true" tabindex="-1"></a>metrics_plot <span class="sc">%&gt;%</span> </span>
<span id="cb1805-2"><a href="interactive-plots.html#cb1805-2" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">ggplotly</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1805-3"><a href="interactive-plots.html#cb1805-3" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">partial_bundle</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1805-4"><a href="interactive-plots.html#cb1805-4" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">config</span>(<span class="at">displaylogo =</span> <span class="cn">FALSE</span>, <span class="at">modeBarButtonsToRemove =</span> plotly_buttons_remove)</span></code></pre></div>
<div id="htmlwidget-a7a8d1e7b33c7648e05a" style="width:95%;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a7a8d1e7b33c7648e05a">{"x":{"data":[{"x":[18393,18400,18407,18414,18421,18428,18435,18442,18449,18456,18463,18470],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"z":[[0,0,0,0,0.29,1,1,1,1,1,1,0.57],[0,0,0,0,0,0,0,0.29,1,0.86,0.29,0.43],[0,0,0,0.14,0.71,0.29,0.71,0.86,0.71,1,0.86,0.71],[0.29,1,1,1,1,1,1,1,1,1,1,0.71],[0,0,0,0.14,0.86,0.43,0.71,0.57,0.71,1,1,0.71],[0,0,0,0,0.86,0.86,1,1,1,1,1,0.71],[0,0,0,0,0,0,0.29,0.71,1,1,1,0.71],[0,0,0,0,0.86,1,1,1,1,1,1,0.71],[0,0,0,0,0.14,0.86,0.86,0.86,0.86,1,0.86,0.57],[0,0,0,0,0,0,0.14,0,0,0,0,0],[0,0,0,0.14,1,1,1,1,1,1,1,0.71],[0,0,0,0,0,0.29,0.86,0.71,0.86,0.86,0.71,0.71],[0,0,0,0,0,0.29,0.57,0,0,0,0,0],[0,0,0,0,0,0.71,1,1,0.86,1,1,0.71],[0,0,0,0,0.86,1,1,1,1,1,0.57,0.71]],"text":[["week: 2020-05-11<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 1<br />p_days_reported:  29","week: 2020-06-15<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 1<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-29<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-06<br />location_name: Facility 11<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 11<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-27<br />location_name: Facility 11<br />p_days_reported:  43"],["week: 2020-05-11<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 27<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-15<br />location_name: Facility 27<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 27<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 27<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 28<br />p_days_reported:  29","week: 2020-05-18<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-05-25<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-01<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-08<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 28<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 32<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 32<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 32<br />p_days_reported:  43","week: 2020-06-22<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 32<br />p_days_reported:  57","week: 2020-07-06<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 32<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 35<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 39<br />p_days_reported:  29","week: 2020-06-29<br />location_name: Facility 39<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 39<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 50<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 50<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 51<br />p_days_reported:  14","week: 2020-06-15<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 51<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 51<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 56<br />p_days_reported:  14","week: 2020-06-29<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 56<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 58<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 58<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 59<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-27<br />location_name: Facility 59<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 65<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 65<br />p_days_reported:  57","week: 2020-06-29<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 65<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 7<br />p_days_reported:  71","week: 2020-06-22<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 7<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 7<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 9<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 9<br />p_days_reported:  57","week: 2020-07-27<br />location_name: Facility 9<br />p_days_reported:  71"]],"colorscale":[[0,"#FFA500"],[0.14,"#E09D00"],[0.29,"#BE9500"],[0.43,"#9F8C00"],[0.57,"#818300"],[0.71,"#617A00"],[0.86,"#3C6F00"],[1,"#006400"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18400],"y":[1],"name":"99_340dc5ec5783e326bc90a93c14ebe904","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FFA500"],[0.00334448160535117,"#FEA500"],[0.00668896321070234,"#FDA500"],[0.0100334448160535,"#FDA400"],[0.0133779264214047,"#FCA400"],[0.0167224080267559,"#FBA400"],[0.020066889632107,"#FAA400"],[0.0234113712374582,"#FAA400"],[0.0267558528428094,"#F9A400"],[0.0301003344481605,"#F8A300"],[0.0334448160535117,"#F7A300"],[0.0367892976588629,"#F7A300"],[0.040133779264214,"#F6A300"],[0.0434782608695652,"#F5A300"],[0.0468227424749164,"#F4A300"],[0.0501672240802676,"#F4A200"],[0.0535117056856187,"#F3A200"],[0.0568561872909699,"#F2A200"],[0.0602006688963211,"#F1A200"],[0.0635451505016722,"#F1A200"],[0.0668896321070234,"#F0A100"],[0.0702341137123746,"#EFA100"],[0.0735785953177258,"#EEA100"],[0.0769230769230769,"#EEA100"],[0.0802675585284281,"#EDA100"],[0.0836120401337793,"#ECA100"],[0.0869565217391304,"#EBA000"],[0.0903010033444816,"#EBA000"],[0.0936454849498328,"#EAA000"],[0.0969899665551839,"#E9A000"],[0.100334448160535,"#E8A000"],[0.103678929765886,"#E89F00"],[0.107023411371237,"#E79F00"],[0.110367892976589,"#E69F00"],[0.11371237458194,"#E59F00"],[0.117056856187291,"#E59F00"],[0.120401337792642,"#E49F00"],[0.123745819397993,"#E39E00"],[0.127090301003344,"#E29E00"],[0.130434782608696,"#E29E00"],[0.133779264214047,"#E19E00"],[0.137123745819398,"#E09E00"],[0.140468227424749,"#E09D00"],[0.1438127090301,"#DF9D00"],[0.147157190635452,"#DE9D00"],[0.150501672240803,"#DD9D00"],[0.153846153846154,"#DD9D00"],[0.157190635451505,"#DC9D00"],[0.160535117056856,"#DB9C00"],[0.163879598662207,"#DA9C00"],[0.167224080267559,"#DA9C00"],[0.17056856187291,"#D99C00"],[0.173913043478261,"#D89C00"],[0.177257525083612,"#D79B00"],[0.180602006688963,"#D79B00"],[0.183946488294314,"#D69B00"],[0.187290969899666,"#D59B00"],[0.190635451505017,"#D49B00"],[0.193979933110368,"#D49A00"],[0.197324414715719,"#D39A00"],[0.20066889632107,"#D29A00"],[0.204013377926421,"#D19A00"],[0.207357859531773,"#D19A00"],[0.210702341137124,"#D09900"],[0.214046822742475,"#CF9900"],[0.217391304347826,"#CE9900"],[0.220735785953177,"#CE9900"],[0.224080267558528,"#CD9900"],[0.22742474916388,"#CC9900"],[0.230769230769231,"#CB9800"],[0.234113712374582,"#CB9800"],[0.237458193979933,"#CA9800"],[0.240802675585284,"#C99800"],[0.244147157190635,"#C89800"],[0.247491638795987,"#C89700"],[0.250836120401338,"#C79700"],[0.254180602006689,"#C69700"],[0.25752508361204,"#C69700"],[0.260869565217391,"#C59700"],[0.264214046822742,"#C49600"],[0.267558528428094,"#C39600"],[0.270903010033445,"#C39600"],[0.274247491638796,"#C29600"],[0.277591973244147,"#C19600"],[0.280936454849498,"#C09500"],[0.284280936454849,"#C09500"],[0.287625418060201,"#BF9500"],[0.290969899665552,"#BE9500"],[0.294314381270903,"#BD9500"],[0.297658862876254,"#BD9400"],[0.301003344481605,"#BC9400"],[0.304347826086957,"#BB9400"],[0.307692307692308,"#BA9400"],[0.311036789297659,"#BA9400"],[0.31438127090301,"#B99300"],[0.317725752508361,"#B89300"],[0.321070234113712,"#B79300"],[0.324414715719064,"#B79300"],[0.327759197324415,"#B69300"],[0.331103678929766,"#B59200"],[0.334448160535117,"#B59200"],[0.337792642140468,"#B49200"],[0.341137123745819,"#B39200"],[0.344481605351171,"#B29200"],[0.347826086956522,"#B29100"],[0.351170568561873,"#B19100"],[0.354515050167224,"#B09100"],[0.357859531772575,"#AF9100"],[0.361204013377926,"#AF9100"],[0.364548494983278,"#AE9000"],[0.367892976588629,"#AD9000"],[0.37123745819398,"#AC9000"],[0.374581939799331,"#AC9000"],[0.377926421404682,"#AB9000"],[0.381270903010033,"#AA8F00"],[0.384615384615385,"#A98F00"],[0.387959866220736,"#A98F00"],[0.391304347826087,"#A88F00"],[0.394648829431438,"#A78E00"],[0.397993311036789,"#A78E00"],[0.40133779264214,"#A68E00"],[0.404682274247492,"#A58E00"],[0.408026755852843,"#A48E00"],[0.411371237458194,"#A48D00"],[0.414715719063545,"#A38D00"],[0.418060200668896,"#A28D00"],[0.421404682274247,"#A18D00"],[0.424749163879599,"#A18D00"],[0.42809364548495,"#A08C00"],[0.431438127090301,"#9F8C00"],[0.434782608695652,"#9E8C00"],[0.438127090301003,"#9E8C00"],[0.441471571906355,"#9D8C00"],[0.444816053511706,"#9C8B00"],[0.448160535117057,"#9B8B00"],[0.451505016722408,"#9B8B00"],[0.454849498327759,"#9A8B00"],[0.45819397993311,"#998A00"],[0.461538461538462,"#998A00"],[0.464882943143813,"#988A00"],[0.468227424749164,"#978A00"],[0.471571906354515,"#968A00"],[0.474916387959866,"#968900"],[0.478260869565217,"#958900"],[0.481605351170569,"#948900"],[0.48494983277592,"#938900"],[0.488294314381271,"#938900"],[0.491638795986622,"#928800"],[0.494983277591973,"#918800"],[0.498327759197324,"#908800"],[0.501672240802676,"#908800"],[0.505016722408027,"#8F8700"],[0.508361204013378,"#8E8700"],[0.511705685618729,"#8D8700"],[0.51505016722408,"#8D8700"],[0.518394648829431,"#8C8700"],[0.521739130434783,"#8B8600"],[0.525083612040134,"#8B8600"],[0.528428093645485,"#8A8600"],[0.531772575250836,"#898600"],[0.535117056856187,"#888600"],[0.538461538461538,"#888500"],[0.54180602006689,"#878500"],[0.545150501672241,"#868500"],[0.548494983277592,"#858500"],[0.551839464882943,"#858400"],[0.555183946488294,"#848400"],[0.558528428093645,"#838400"],[0.561872909698997,"#828400"],[0.565217391304348,"#828400"],[0.568561872909699,"#818300"],[0.57190635451505,"#808300"],[0.575250836120401,"#7F8300"],[0.578595317725753,"#7F8300"],[0.581939799331104,"#7E8200"],[0.585284280936455,"#7D8200"],[0.588628762541806,"#7C8200"],[0.591973244147157,"#7C8200"],[0.595317725752508,"#7B8200"],[0.598662207357859,"#7A8100"],[0.602006688963211,"#798100"],[0.605351170568562,"#798100"],[0.608695652173913,"#788100"],[0.612040133779264,"#778000"],[0.615384615384615,"#768000"],[0.618729096989967,"#768000"],[0.622073578595318,"#758000"],[0.625418060200669,"#747F00"],[0.62876254180602,"#737F00"],[0.632107023411371,"#737F00"],[0.635451505016722,"#727F00"],[0.638795986622074,"#717F00"],[0.642140468227425,"#707E00"],[0.645484949832776,"#707E00"],[0.648829431438127,"#6F7E00"],[0.652173913043478,"#6E7E00"],[0.655518394648829,"#6D7D00"],[0.658862876254181,"#6D7D00"],[0.662207357859532,"#6C7D00"],[0.665551839464883,"#6B7D00"],[0.668896321070234,"#6A7C00"],[0.672240802675585,"#6A7C00"],[0.675585284280937,"#697C00"],[0.678929765886288,"#687C00"],[0.682274247491639,"#677C00"],[0.68561872909699,"#677B00"],[0.688963210702341,"#667B00"],[0.692307692307692,"#657B00"],[0.695652173913043,"#647B00"],[0.698996655518395,"#637A00"],[0.702341137123746,"#637A00"],[0.705685618729097,"#627A00"],[0.709030100334448,"#617A00"],[0.712374581939799,"#607900"],[0.71571906354515,"#607900"],[0.719063545150502,"#5F7900"],[0.722408026755853,"#5E7900"],[0.725752508361204,"#5D7800"],[0.729096989966555,"#5C7800"],[0.732441471571906,"#5C7800"],[0.735785953177258,"#5B7800"],[0.739130434782609,"#5A7800"],[0.74247491638796,"#597700"],[0.745819397993311,"#587700"],[0.749163879598662,"#587700"],[0.752508361204013,"#577700"],[0.755852842809364,"#567600"],[0.759197324414716,"#557600"],[0.762541806020067,"#557600"],[0.765886287625418,"#547600"],[0.769230769230769,"#537500"],[0.77257525083612,"#527500"],[0.775919732441471,"#517500"],[0.779264214046823,"#507500"],[0.782608695652174,"#507400"],[0.785953177257525,"#4F7400"],[0.789297658862876,"#4E7400"],[0.792642140468227,"#4D7400"],[0.795986622073579,"#4C7300"],[0.79933110367893,"#4C7300"],[0.802675585284281,"#4B7300"],[0.806020066889632,"#4A7300"],[0.809364548494983,"#497200"],[0.812709030100334,"#487200"],[0.816053511705686,"#477200"],[0.819397993311037,"#467200"],[0.822742474916388,"#467100"],[0.826086956521739,"#457100"],[0.82943143812709,"#447100"],[0.832775919732441,"#437100"],[0.836120401337793,"#427000"],[0.839464882943144,"#417000"],[0.842809364548495,"#407000"],[0.846153846153846,"#3F7000"],[0.849498327759197,"#3F7000"],[0.852842809364548,"#3E6F00"],[0.8561872909699,"#3D6F00"],[0.859531772575251,"#3C6F00"],[0.862876254180602,"#3B6F00"],[0.866220735785953,"#3A6E00"],[0.869565217391304,"#396E00"],[0.872909698996656,"#386E00"],[0.876254180602007,"#376E00"],[0.879598662207358,"#366D00"],[0.882943143812709,"#356D00"],[0.88628762541806,"#346D00"],[0.889632107023411,"#336D00"],[0.892976588628763,"#326C00"],[0.896321070234114,"#316C00"],[0.899665551839465,"#306C00"],[0.903010033444816,"#2F6B00"],[0.906354515050167,"#2E6B00"],[0.909698996655518,"#2D6B00"],[0.91304347826087,"#2C6B00"],[0.916387959866221,"#2B6A00"],[0.919732441471572,"#2A6A00"],[0.923076923076923,"#296A00"],[0.926421404682274,"#286A00"],[0.929765886287625,"#266900"],[0.933110367892977,"#256900"],[0.936454849498328,"#246900"],[0.939799331103679,"#236900"],[0.94314381270903,"#226800"],[0.946488294314381,"#206800"],[0.949832775919732,"#1F6800"],[0.953177257525084,"#1D6800"],[0.956521739130435,"#1C6700"],[0.959866220735786,"#1B6700"],[0.963210702341137,"#196700"],[0.966555183946488,"#176700"],[0.969899665551839,"#166600"],[0.973244147157191,"#146600"],[0.976588628762542,"#126600"],[0.979933110367893,"#106600"],[0.983277591973244,"#0E6500"],[0.986622073578595,"#0B6500"],[0.989966555183946,"#086500"],[0.993311036789298,"#056500"],[0.996655518394649,"#036400"],[1,"#006400"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":22.6771653543307,"title":"Reporting<br />performance (%)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,0.25,0.5,0.75,1],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":44.8252386882524,"r":7.30593607305936,"b":45.7617268576173,"l":91.1913657119137},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Percent of days per week that facility reported data <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18389.5,18473.5],"tickmode":"array","ticktext":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"tickvals":[18400,18414,18428,18442,18456,18470],"categoryorder":"array","categoryarray":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.531340805313408,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"<b> Week <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,15.6],"tickmode":"array","ticktext":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"categoryorder":"array","categoryarray":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.531340805313408,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"<b> Facility name <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"4ca42367746":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"4ca42367746","visdat":{"4ca42367746":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<!-- ## Maps {.unnumbered}   -->
<!-- You can also make `ggplot()` GIS maps interactive, although it makes a bit more care.  -->
<!-- THIS SECTION IS UNDER CONSTRUCTION  -->
<!-- Although **plotly** works well with `ggplot2::geom_sf` in RStudio, when you try to include its outputs in R Markdown HTML files (like this book), it doesn't work well.   -->
<!-- So instead you can use {**plotly**}'s own mapping tools which can be tricky but are easy when you know how. Read on...   -->
<!-- We're going to use Covid-19 incidence across African countries for this example. The data used can be found on the [World Health Organisation website](https://covid19.who.int/table).   -->
<!-- You'll also need a new type of file, a GeoJSON, which is sort of similar to a shp file for those familiar with GIS. For this book, we used one from [here](https://geojson-maps.ash.ms).   -->
<!-- GeoJSON files are stored in R as complex lists and you'll need to maipulate them a little. -->
<!-- ```{r, echo=T,} -->
<!-- ## You need two new packages: {rjson} and {purrr} -->
<!-- pacman::p_load(plotly, rjson, purrr) -->
<!-- ## This is a simplified version of the WHO data -->
<!-- df <- rio::import(here::here("data", "gis", "covid_incidence.csv")) -->
<!-- ## Load your geojson file -->
<!-- geoJSON <- rjson::fromJSON(file=here::here("data", "gis", "africa_countries.geo.json")) -->
<!-- ## Here are some of the properties for each element of the object -->
<!-- head(geoJSON$features[[1]]$properties) -->
<!-- ``` -->
<!-- This is the tricky part. For {**plotly**} to match your incidence data to GeoJSON, the countries in the geoJSON need an id in a specific place in the list of lists. For this we need to build a basic function: -->
<!-- ```{r} -->
<!-- ## The property column we need to choose here is "sovereignt" as it is the names for each country -->
<!-- give_id <- function(x){ -->
<!--   x$id <- x$properties$sovereignt  ## Take sovereignt from properties and set it as the id -->
<!--   return(x) -->
<!-- } -->
<!-- ## Use {purrr} to apply this function to every element of the features list of the geoJSON object -->
<!-- geoJSON$features <- purrr::map(.x = geoJSON$features, give_id) -->
<!-- ``` -->
<!-- <!-- ======================================================= -->
<p>–&gt;
<!-- ### Maps - plot {  } --></p>
<!-- UNDER CONSTRUCTION -->
<!-- ```{r, echo=FALSE, eval=FALSE, out.width=c('95%'), out.height=c('500px'),warning=F} -->
<!-- plotly::plot_ly() %>%  -->
<!--   plotly::add_trace(                    #The main plot mapping functionn -->
<!--     type="choropleth", -->
<!--     geojson=geoJSON, -->
<!--     locations=df$Name,          #The column with the names (must match id) -->
<!--     z=df$Cumulative_incidence,  #The column with the incidence values -->
<!--     zmin=0, -->
<!--     zmax=57008, -->
<!--     colorscale="Viridis", -->
<!--     marker=list(line=list(width=0)) -->
<!--   ) %>% -->
<!--   colorbar(title = "Cases per million") %>% -->
<!--   layout(title = "Covid-19 cumulative incidence", -->
<!--                  geo = list(scope = 'africa')) %>%  -->
<!--   config(displaylogo = FALSE, modeBarButtonsToRemove = plotly_buttons_remove) -->
<!-- ``` -->
<!-- ======================================================= -->
</div>
<div id="resources-32" class="section level2" number="39.5">
<h2><span class="header-section-number">39.5</span> Resources</h2>
<p>Plotly is not just for R, but also works well with Python (and really any data science language as it’s built in JavaScript). You can read more about it on the <a href="https://plotly.com/r/">plotly website</a></p>

</div>
</div>



</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2021-08-31.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
