<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Справочник эпидемиолога R - 3&nbsp; Основы R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/transition_to_R.ru.html" rel="next">
<link href="../new_pages/data_used.ru.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Поиск не дал результатов",
    "search-matching-documents-text": "Результаты поиска",
    "search-copy-link-title": "Скопировать ссылку",
    "search-hide-matches-text": "Скрыть дополнительные результаты",
    "search-more-match-text": "дополнительный результат в этом документе",
    "search-more-matches-text": "дополнительных результата(-ов) в этом документе",
    "search-clear-button-title": "Очистить",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Отменить",
    "search-submit-button-title": "Найти",
    "search-label": "Поиск"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QXDW878QLX');
</script> -->

</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">
  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"
    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"
    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"
    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"
    class="alert-link">R Help Desk service</a>. -->
</div>

<script>

  // Function to extract the last two characters from the URL path to determine the language, adjusting for .html extension
  function getLanguageFromURL() {
    let path = window.location.pathname;
    
    // Check if the URL ends with .html and remove it
    if (path.endsWith('.html')) {
      path = path.substring(0, path.length - 5);
    }

    // Extract the last two characters for the language code
    const lang = path.substr(-2);
    return lang;
  }

  const language = getLanguageFromURL();
  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru'];
  const defaultLanguage = 'en';
  const isSupportedLanguage = supportedLanguages.includes(language);

  // Translations for the content
  const translations = {
    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',
    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',
    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',
    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',
    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',
    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',
    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',
    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'
  };

  // Default to English if the detected language is not supported
  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];


  // Select the element where the content should be displayed
  const alertElement = document.querySelector('.alert');
  if (alertElement) {
    alertElement.innerHTML = contentToDisplay;
    alertElement.style.display = 'block'; // Make sure to display the element
  }

</script>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Переключить боковую панель навигации" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.ru.html">Основы</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.ru.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Основы R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Переключить боковую панель навигации" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Справочник эпидемиолога R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_quarto" title="Исходный код" class="quarto-navigation-tool px-1" aria-label="Исходный код"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Переключить темный режим"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Поиск"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Добро пожаловать</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Об этой книге</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Редакционные и технические замечания</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Скачивание руководства и данных</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Основы</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.ru.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Основы R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Переход к R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Рекомендованные пакеты</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Проекты R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Импорт и экспорт</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Управление данными</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Вычистка данных и ключевые функции</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Работа с датами</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Текст и последовательности</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Факторы</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Поворот данных</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Группирование данных</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Соединение данных</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Дедупликация</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Итерации, циклы и списки</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Анализ</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Описательные таблицы</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Простые статистические тесты</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Однофакторная и многофакторная регрессия</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Отсутствующие данные</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Стандартизированные коэффициенты</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Скользящие средние значения</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Временные ряды и обнаружение вспышек</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Моделирование эпидемий</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Отслеживание контактов</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Анализ опросов</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Анализ выживаемости</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Основы ГИС</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Визуализация данных</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Таблицы для презентации</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Основы ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Советы по использованию ggplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Эпидемические кривые</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Демографические пирамиды и шкалы Лайкерта</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Тепловые диаграммы</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Диаграммы и схемы</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Анализ комбинаций</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Цепочки передачи</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Филогенетические деревья</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Интерактивные графики</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Отчеты и информационные панели</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Отчеты с помощью R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Структурирование рутинных отчетов</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Информационные панели с R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Информационные панели с Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Разное</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Переключить раздел">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Написание функций</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Взаимодействие директорий</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Контроль версий и совместная работа с помощью Git и Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Частые ошибки</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Получение помощи</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R на сетевых дисках</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.ru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Таблица данных</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Содержание</h2>
   
  <ul>
  <li><a href="#зачем-использовать-r" id="toc-зачем-использовать-r" class="nav-link active" data-scroll-target="#зачем-использовать-r"><span class="header-section-number">3.1</span> Зачем использовать R?</a></li>
  <li><a href="#ключевые-понятия" id="toc-ключевые-понятия" class="nav-link" data-scroll-target="#ключевые-понятия"><span class="header-section-number">3.2</span> Ключевые понятия</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning"><span class="header-section-number">3.3</span> Ресурсы для обучения</a>
  <ul class="collapse">
  <li><a href="#ресурсы-внутри-rstudio" id="toc-ресурсы-внутри-rstudio" class="nav-link" data-scroll-target="#ресурсы-внутри-rstudio">Ресурсы внутри RStudio</a></li>
  <li><a href="#шпаргалки" id="toc-шпаргалки" class="nav-link" data-scroll-target="#шпаргалки">Шпаргалки</a></li>
  <li><a href="#twitter" id="toc-twitter" class="nav-link" data-scroll-target="#twitter">Twitter</a></li>
  <li><a href="#бесплатные-онлайн-ресурсы" id="toc-бесплатные-онлайн-ресурсы" class="nav-link" data-scroll-target="#бесплатные-онлайн-ресурсы">Бесплатные онлайн ресурсы</a></li>
  <li><a href="#языки-кроме-английского" id="toc-языки-кроме-английского" class="nav-link" data-scroll-target="#языки-кроме-английского">Языки кроме английского</a></li>
  </ul></li>
  <li><a href="#установка" id="toc-установка" class="nav-link" data-scroll-target="#установка"><span class="header-section-number">3.4</span> Установка</a>
  <ul class="collapse">
  <li><a href="#r-и-rstudio" id="toc-r-и-rstudio" class="nav-link" data-scroll-target="#r-и-rstudio">R и RStudio</a></li>
  <li><a href="#другие-программы-которые-вам-может-понадобиться-установить" id="toc-другие-программы-которые-вам-может-понадобиться-установить" class="nav-link" data-scroll-target="#другие-программы-которые-вам-может-понадобиться-установить">Другие программы, которые вам <em>может</em> понадобиться установить</a></li>
  </ul></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio"><span class="header-section-number">3.5</span> RStudio</a>
  <ul class="collapse">
  <li><a href="#ориентация-в-rstudio" id="toc-ориентация-в-rstudio" class="nav-link" data-scroll-target="#ориентация-в-rstudio">Ориентация в RStudio</a></li>
  <li><a href="#настройки-rstudio" id="toc-настройки-rstudio" class="nav-link" data-scroll-target="#настройки-rstudio">Настройки RStudio</a></li>
  <li><a href="#горячие-клавиши" id="toc-горячие-клавиши" class="nav-link" data-scroll-target="#горячие-клавиши">Горячие клавиши</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">3.6</span> Функции</a>
  <ul class="collapse">
  <li><a href="#простые-функции" id="toc-простые-функции" class="nav-link" data-scroll-target="#простые-функции">Простые функции</a></li>
  <li><a href="#функции-с-несколькими-аргументами" id="toc-функции-с-несколькими-аргументами" class="nav-link" data-scroll-target="#функции-с-несколькими-аргументами">Функции с несколькими аргументами</a></li>
  <li><a href="#написание-функций" id="toc-написание-функций" class="nav-link" data-scroll-target="#написание-функций">Написание Функций</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">3.7</span> Пакеты</a>
  <ul class="collapse">
  <li><a href="#установка-и-загрузка" id="toc-установка-и-загрузка" class="nav-link" data-scroll-target="#установка-и-загрузка">Установка и загрузка</a></li>
  <li><a href="#синтаксис-кода" id="toc-синтаксис-кода" class="nav-link" data-scroll-target="#синтаксис-кода">Синтаксис кода</a></li>
  <li><a href="#справка-по-функциям" id="toc-справка-по-функциям" class="nav-link" data-scroll-target="#справка-по-функциям">Справка по функциям</a></li>
  <li><a href="#обновление-пакетов" id="toc-обновление-пакетов" class="nav-link" data-scroll-target="#обновление-пакетов">Обновление пакетов</a></li>
  <li><a href="#удаление-пакетов" id="toc-удаление-пакетов" class="nav-link" data-scroll-target="#удаление-пакетов">Удаление пакетов</a></li>
  <li><a href="#взаимозависимости" id="toc-взаимозависимости" class="nav-link" data-scroll-target="#взаимозависимости">Взаимозависимости</a></li>
  <li><a href="#маскирование-функций" id="toc-маскирование-функций" class="nav-link" data-scroll-target="#маскирование-функций">Маскирование функций</a></li>
  <li><a href="#открепление-сброс" id="toc-открепление-сброс" class="nav-link" data-scroll-target="#открепление-сброс">Открепление / сброс</a></li>
  <li><a href="#установка-более-старой-версии" id="toc-установка-более-старой-версии" class="nav-link" data-scroll-target="#установка-более-старой-версии">Установка более старой версии</a></li>
  <li><a href="#рекомендованные-пакеты" id="toc-рекомендованные-пакеты" class="nav-link" data-scroll-target="#рекомендованные-пакеты">Рекомендованные пакеты</a></li>
  </ul></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">3.8</span> Скрипты</a>
  <ul class="collapse">
  <li><a href="#комментирование" id="toc-комментирование" class="nav-link" data-scroll-target="#комментирование">Комментирование</a></li>
  <li><a href="#стиль" id="toc-стиль" class="nav-link" data-scroll-target="#стиль">Стиль</a></li>
  <li><a href="#пример-скрипта" id="toc-пример-скрипта" class="nav-link" data-scroll-target="#пример-скрипта">Пример скрипта</a></li>
  <li><a href="#r-markdown" id="toc-r-markdown" class="nav-link" data-scroll-target="#r-markdown">R markdown</a></li>
  <li><a href="#r-notebooks" id="toc-r-notebooks" class="nav-link" data-scroll-target="#r-notebooks">R notebooks</a></li>
  <li><a href="#shiny" id="toc-shiny" class="nav-link" data-scroll-target="#shiny">Shiny</a></li>
  <li><a href="#сворачивание-кода" id="toc-сворачивание-кода" class="nav-link" data-scroll-target="#сворачивание-кода">Сворачивание кода</a></li>
  </ul></li>
  <li><a href="#рабочая-директория" id="toc-рабочая-директория" class="nav-link" data-scroll-target="#рабочая-директория"><span class="header-section-number">3.9</span> Рабочая директория</a>
  <ul class="collapse">
  <li><a href="#рекомендованный-подход" id="toc-рекомендованный-подход" class="nav-link" data-scroll-target="#рекомендованный-подход">Рекомендованный подход</a></li>
  <li><a href="#установка-по-команде" id="toc-установка-по-команде" class="nav-link" data-scroll-target="#установка-по-команде">Установка по команде</a></li>
  <li><a href="#установка-вручную" id="toc-установка-вручную" class="nav-link" data-scroll-target="#установка-вручную">Установка вручную</a></li>
  <li><a href="#внутри-проекта-r" id="toc-внутри-проекта-r" class="nav-link" data-scroll-target="#внутри-проекта-r">Внутри проекта R</a></li>
  <li><a href="#рабочая-директория-для-r-markdown" id="toc-рабочая-директория-для-r-markdown" class="nav-link" data-scroll-target="#рабочая-директория-для-r-markdown">Рабочая директория для R markdown</a></li>
  <li><a href="#указание-пути-к-файлу" id="toc-указание-пути-к-файлу" class="nav-link" data-scroll-target="#указание-пути-к-файлу">Указание пути к файлу</a></li>
  </ul></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects"><span class="header-section-number">3.10</span> Объекты</a>
  <ul class="collapse">
  <li><a href="#всё-является-объектом" id="toc-всё-является-объектом" class="nav-link" data-scroll-target="#всё-является-объектом">Всё является объектом</a></li>
  <li><a href="#определение-объектов--" id="toc-определение-объектов--" class="nav-link" data-scroll-target="#определение-объектов--">Определение объектов (<code>&lt;-</code>)</a></li>
  <li><a href="#структура-объекта" id="toc-структура-объекта" class="nav-link" data-scroll-target="#структура-объекта">Структура объекта</a></li>
  <li><a href="#классы-объектов" id="toc-классы-объектов" class="nav-link" data-scroll-target="#классы-объектов">Классы объектов</a></li>
  <li><a href="#столбцыпеременные" id="toc-столбцыпеременные" class="nav-link" data-scroll-target="#столбцыпеременные">Столбцы/Переменные (<code>$</code>)</a></li>
  <li><a href="#доступиндекс-с-помощью-квадратных-скобок" id="toc-доступиндекс-с-помощью-квадратных-скобок" class="nav-link" data-scroll-target="#доступиндекс-с-помощью-квадратных-скобок">Доступ/индекс с помощью квадратных скобок (<code>[ ]</code>)</a></li>
  <li><a href="#удаление-объектов" id="toc-удаление-объектов" class="nav-link" data-scroll-target="#удаление-объектов">Удаление объектов</a></li>
  </ul></li>
  <li><a href="#использование-каналов" id="toc-использование-каналов" class="nav-link" data-scroll-target="#использование-каналов"><span class="header-section-number">7.1</span> Использование каналов (<code>%&gt;%</code>)</a>
  <ul class="collapse">
  <li><a href="#каналы" id="toc-каналы" class="nav-link" data-scroll-target="#каналы"><strong>Каналы</strong></a></li>
  <li><a href="#определение-промежуточных-объектов" id="toc-определение-промежуточных-объектов" class="nav-link" data-scroll-target="#определение-промежуточных-объектов">Определение промежуточных объектов</a></li>
  </ul></li>
  <li><a href="#operators" id="toc-operators" class="nav-link" data-scroll-target="#operators"><span class="header-section-number">7.2</span> Ключевые операторы и функции</a>
  <ul class="collapse">
  <li><a href="#операторы-присвоения" id="toc-операторы-присвоения" class="nav-link" data-scroll-target="#операторы-присвоения">Операторы присвоения</a></li>
  <li><a href="#операторы-отношения-и-логические-операторы" id="toc-операторы-отношения-и-логические-операторы" class="nav-link" data-scroll-target="#операторы-отношения-и-логические-операторы">Операторы отношения и логические операторы</a></li>
  <li><a href="#отсутствующие-значения" id="toc-отсутствующие-значения" class="nav-link" data-scroll-target="#отсутствующие-значения">Отсутствующие значения</a></li>
  <li><a href="#математика-и-статистика" id="toc-математика-и-статистика" class="nav-link" data-scroll-target="#математика-и-статистика">Математика и статистика</a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><code>%in%</code></a></li>
  </ul></li>
  <li><a href="#ошибки-и-предупреждения" id="toc-ошибки-и-предупреждения" class="nav-link" data-scroll-target="#ошибки-и-предупреждения"><span class="header-section-number">7.3</span> Ошибки и предупреждения</a>
  <ul class="collapse">
  <li><a href="#ошибки-и-предупреждения-1" id="toc-ошибки-и-предупреждения-1" class="nav-link" data-scroll-target="#ошибки-и-предупреждения-1">Ошибки и предупреждения</a></li>
  <li><a href="#общие-советы-по-синтаксису" id="toc-общие-советы-по-синтаксису" class="nav-link" data-scroll-target="#общие-советы-по-синтаксису">Общие советы по синтаксису</a></li>
  <li><a href="#помощь-в-коде" id="toc-помощь-в-коде" class="nav-link" data-scroll-target="#помощь-в-коде">Помощь в коде</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.ru.html">Основы</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.ru.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Основы R</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="basics" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Основы R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/basics_header_close.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/basics_header_close.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Добро пожаловать!</p>
<p>На данной странице рассматриваются основы работы с R. Она не является подробной инструкцией, но расскажет вам об основах и может быть полезна в качестве напоминания. В разделе <a href="#learning">Ресурсы для обучения</a> даны ссылки на более подробные учебные пособия.</p>
<p>Части этой страницы были адаптированы с разрешения <a href="https://r4epis.netlify.app/">R4Epis project</a>.</p>
<p>См. страницу <a href="../new_pages/transition_to_R.ru.html">Переход к R</a> для поиска советов о том, как перейти к использованию R со STATA, SAS или Excel.</p>
<!-- ======================================================= -->
<section id="зачем-использовать-r" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="зачем-использовать-r"><span class="header-section-number">3.1</span> Зачем использовать R?</h2>
<p>Как указано на нашем <a href="https://www.r-project.org/about.html">веб-сайте проекта по R</a>, R - язык программирования и среда для статистических расчетов и графики. Он очень разнообразный, гибкий и развивается усилиями сообщества.</p>
<p><strong>Стоимость</strong></p>
<p>R можно использовать бесплатно! Сообщество придерживается принципов бесплатных и открытых материалов.</p>
<p><strong>Воспроизводимость</strong></p>
<p>Управление вашими данными и проведение анализа с использованием языка программирования (а не Excel или другого готового/ручного инструмента) повышает <strong>воспроизводимость</strong>, облегчает <strong>обнаружение ошибок</strong>, а также уменьшает объем работы.</p>
<p><strong>Сообщество</strong></p>
<p>У R очень большое и активно сотрудничающее сообщество пользователей. Новые пакеты и инструменты для решения реальных проблем разрабатываются практически ежедневно, а сообщество пользователей их проверяет. Например, <a href="https://rladies.org/">R-Ladies</a> - международная организация, чьей миссией является продвижение гендерного разнообразия в сообществе пользователей R, также является одной из крупнейших организацией пользователей R. У нее наверняка есть отделение недалеко от вас!</p>
</section>
<section id="ключевые-понятия" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="ключевые-понятия"><span class="header-section-number">3.2</span> Ключевые понятия</h2>
<p><strong>RStudio</strong> - RStudio - это графический интерфейс пользователя (ГИП), облегчающий использование <strong>R</strong>. Дополнительную информацию можно найти в <a href="#rstudio">разделе RStudio</a>.</p>
<p><strong>Объекты</strong> - Все, что вы сохраняете в R - наборы данных, переменные, список названий населенных пунктов, количество населения, а также выходные данные, такие как графики - это все <em>объекты</em>, которым <em>присваивается имя</em> и <em>на которые можно ссылаться</em> в последующих командах. Дополнительную информацию можно найти в <a href="#objects">разделе Объекты</a>.</p>
<p><strong>Функции</strong> - Функция - это закодированная операция, которая принимает входные данные и выдает преобразованный результат. Дополнительную информацию можно найти в <a href="#functions">разделе Функции</a>.</p>
<p><strong>Пакеты</strong> - Пакет R - набор функций, которыми можно поделиться. Дополнительную информацию можно найти в <a href="#packages">разделе Пакеты</a>.</p>
<p><strong>Скрипты</strong> - Скрипт - документ, который содержит ваши команды. Дополнительную информацию можно найти в <a href="#scripts">разделе Скрипты</a></p>
</section>
<section id="learning" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="learning"><span class="header-section-number">3.3</span> Ресурсы для обучения</h2>
<section id="ресурсы-внутри-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ресурсы-внутри-rstudio">Ресурсы внутри RStudio</h3>
<p><strong>Справочная документация</strong></p>
<p>Поищите документацию по пакетам и конкретным функциям R во вкладке “Help” (справка) в RStudio. Она находится в панели, где содержатся Файлы, Графики и Пакеты (как правило, нижняя правая панель). Альтернативно, вы можете также поставить вопросительный знак и после него напечатать название пакета или функции в консоли R, чтобы открыть соответствующую страницу Справки. Не включайте скобки.</p>
<p>Например: <code>?filter</code> или <code>?diagrammeR</code>.</p>
<p><strong>Интерактивное обучение</strong></p>
<p>Есть несколько способов интерактивного изучения R <em>внутри</em> RStudio.</p>
<p>Сама RStudio предлагает панель Tutorial (обучение), которая основана на <a href="https://blog.rstudio.com/2020/02/25/rstudio-1-3-integrated-tutorials/"><strong>learnr</strong></a> R package. Просто установите этот пакет и откройте самоучитель через новую вкладку “Tutorial” (обучение) в верхней правой панели RStudio (в которой также находятся вкладки Environment (рабочая среда) и History (история)).</p>
<p>Пакет R <a href="https://swirlstats.com/"><strong>swirl</strong></a> предлагает интерактивное обучение в Консоли R. Установите и загрузите этот пакет, затем выполните команду <code>swirl()</code> (с пустыми скобками) в консоли R. В Консоли появятся подсказки. Печатайте ответ в Консоли. Пакет поможет вам пройти интересующий курс.</p>
</section>
<section id="шпаргалки" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="шпаргалки">Шпаргалки</h3>
<p>Существует много PDF “шпаргалок” на <a href="https://rstudio.com/resources/cheatsheets/">сайте RStudio</a>, например:</p>
<ul>
<li>Коэффициенты в пакете <strong>forcats</strong><br>
</li>
<li>Даты и время в пакете <strong>lubridate</strong><br>
</li>
<li>Последовательности в пакете <strong>stringr</strong><br>
</li>
<li>Повторяющиеся операции в пакете <strong>purrr</strong><br>
</li>
<li>Импорт данных<br>
</li>
<li>Шпаргалка по преобразованию данных с помощью пакета <strong>dplyr</strong><br>
</li>
<li>R Markdown (чтобы создавать документы в формате PDF, Word, Powerpoint…)<br>
</li>
<li>Shiny (чтобы создавать интерактивные веб-приложения)<br>
</li>
<li>Визуализация данных в пакете <strong>ggplot2</strong><br>
</li>
<li>Картография (GIS)<br>
</li>
<li>Пакет <strong>leaflet</strong> (интерактивные карты)<br>
</li>
<li>Python с помощью R (пакет <strong>reticulate</strong>)</li>
</ul>
<p>Есть онлайн ресурс по R специально для <a href="https://jules32.github.io/r-for-excel-users/">пользователей Excel</a></p>
</section>
<section id="twitter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="twitter">Twitter</h3>
<p>У R есть активное твиттер-сообщество, в котором вы можете найти полезные советы, подсказки, а также новости - подпишитесь на следующие аккаунты:</p>
<ul>
<li>Подпишитесь на нас! <a href="https://twitter.com/epirhandbook">@epiRhandbook</a><br>
</li>
<li>R Функция Дня <a href="https://twitter.com/rfunctionaday">@rfuntionaday</a> - <em>замечательный</em> ресурс<br>
</li>
<li>R для Науки о данных <a href="https://twitter.com/rstats4ds?lang=en">@rstats4ds</a><br>
</li>
<li>RStudio <a href="https://twitter.com/rstudio?lang=en">@RStudio</a><br>
</li>
<li>RStudio Советы <a href="https://twitter.com/rstudiotips">@rstudiotips</a><br>
</li>
<li>R-Bloggers <a href="https://twitter.com/Rbloggers">@Rbloggers</a><br>
</li>
<li>R-ladies <a href="https://twitter.com/RLadiesGlobal">@RLadiesGlobal</a><br>
</li>
<li>Hadley Wickham <a href="https://twitter.com/hadleywickham?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">@hadleywickham</a></li>
</ul>
<p>Также:</p>
<p><strong>#epitwitter</strong> и <strong>#rstats</strong></p>
</section>
<section id="бесплатные-онлайн-ресурсы" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="бесплатные-онлайн-ресурсы">Бесплатные онлайн ресурсы</h3>
<p>Авторитетный источник по <a href="https://r4ds.had.co.nz/">R для Аналитики Данных</a> - книга Гарретта Гролемунда и Хэдли Викхэма</p>
<p>Веб-сайт проекта <a href="https://r4epis.netlify.app/">R4Epis</a> направлен на “разработку стандартизированных инструментов вычистки, анализа данных и ответности, которые бы охватывали основные типы исследований по вспышкам и популяционных исследований, которые могут проводиться в условиях экстренного реагирования Врачей Без Границ.” Там вы можете найти материалы для обучения основам R, шаблоны для отчетов RMarkdown по вспышкам и исследованиям, а также самоучители, которые помогут вам их настроить.</p>
</section>
<section id="языки-кроме-английского" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="языки-кроме-английского">Языки кроме английского</h3>
<p><a href="https://www.rstudio.com/collections/espanol/">Materiales de RStudio en Español</a></p>
<p><a href="https://juba.github.io/tidyverse/index.html">Introduction à R et au tidyverse (Francais)</a></p>
<!-- ======================================================= -->
</section>
</section>
<section id="установка" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="установка"><span class="header-section-number">3.4</span> Установка</h2>
<section id="r-и-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-и-rstudio">R и RStudio</h3>
<p><strong>Как установить R</strong></p>
<p>Зайдите на этот вебсайт <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a> и скачайте последнюю версию R, подходящую для вашего компьютера.</p>
<p><strong>Как установить RStudio</strong></p>
<p>Зайдите на этот вебсайт <a href="https://rstudio.com/products/rstudio/download/" class="uri">https://rstudio.com/products/rstudio/download/</a> и скачайте последнюю версию десктоп приложения RStudio, подходящую для вашего компьютера.</p>
<p><strong>Разрешения</strong><br>
Обратите внимание, что устанавливать R и RStudio нужно на диск, для которого у вас есть разрешения для чтения и внесения изменений. Иначе у вас будут проблемы с установкой пакетов R (это часто случается). Если вы столкнетесь с проблемой, попробуйте открыть RStudio правым кликом мышки и выберите вариант “Запуск от имени администратора”. Дополнительные соеветы можно найти на странице <a href="../new_pages/network_drives.ru.html">R на сетевых дисках</a>.</p>
<p><strong>Как обновлять R и RStudio</strong></p>
<p>Номер версии R написан на Консоли при запуске. Вы можете это также проверить через <code>sessionInfo()</code>.</p>
<p>Чтобы обновить R, зайдите на указанный выше веб-сайт и переустановите R. Альтернативно, вы можете использовать пакет <strong>installr</strong> (на Windows), выполнив команду <code>installr::updateR()</code>. Она откроет диалоговые окна, с помощью которых вы можете скачать последнюю версию R и обновить свои пакеты до самой новой версии R. Дополнительную информацию можно найти в <strong>installr</strong> <a href="https://www.r-project.org/nosvn/pandoc/installr.html">документации</a>.</p>
<p>Имейте ввиду, что старая версия R все еще будет существовать на вашем компьютере. Вы можете временно запустить более старую версию (установленную ранее) R, нажав на “Tools” -&gt; “Global Options” в RStudio и выбрав версию R. Это может быть полезным, если вам нужно использовать пакет, который не был обновлен для работы в последней версии R.</p>
<p>Чтобы обновить RStudio, вы можете зайти на указанный выше сайт и повторно скачать RStudio. Еще один вариант - кликнуть на “Help” -&gt; “Check for Updates” (справка-проверить обновления) в RStudio, но там не всегда будут отображаться самые последние обновления.</p>
<p>Чтобы увидеть, какие версии R, RStudio, либо пакетов использовались на момент создания данного Руководства, см. страницу <a href="../new_pages/editorial_style.ru.html">Редакторские и технические заметки</a>.</p>
</section>
<section id="другие-программы-которые-вам-может-понадобиться-установить" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="другие-программы-которые-вам-может-понадобиться-установить">Другие программы, которые вам <em>может</em> понадобиться установить</h3>
<ul>
<li>TinyTeX (<em>для преобразования документа RMarkdown в PDF</em>)<br>
</li>
<li>Pandoc (<em>для формирования документов RMarkdown</em>)<br>
</li>
<li>RTools (<em>для создания пакетов для R</em>)<br>
</li>
<li>phantomjs (<em>для сохранения статичных изображений из анимированных сетей, например, цепочек передачи инфекции</em>)</li>
</ul>
<section id="tinytex" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="tinytex">TinyTex</h4>
<p>TinyTex - кастомизированный дистрибутив LaTeX, полезен при создании PDF из R.<br>
Дополнительную информацию можно найти по адресу <a href="https://yihui.org/tinytex/" class="uri">https://yihui.org/tinytex/</a>.</p>
<p>Чтобы установить TinyTex из R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'tinytex'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># чтобы удалить TinyTeX, выполните tinytex::uninstall_tinytex()</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pandoc" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="pandoc">Pandoc</h4>
<p>Pandoc - конвертер документов, отдельная от R программа. <strong>Она идет в комплекте с RStudio и обычно не требует отдельного скачивания.</strong> Она помогает в процессе конвертации документов в такие форматы как .pdf и добавлении сложного функционала.</p>
</section>
<section id="rtools" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rtools">RTools</h4>
<p>RTools - коллекция программного обеспечения для создания пакетов для R</p>
<p>Установите с веб-сайта: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</section>
<section id="phantomjs" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="phantomjs">phantomjs</h4>
<p>Часто используется для создания “снимков экрана” веб-страниц. Например, когда вы создаете цепочки передачи инфекции с помощью пакета <strong>epicontacts</strong>, создается HTML файл, который является интерактивным и динамичным. Если вам нужно статичное изображение, полезно будет использовать пакет <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> для автоматизации этого процесса. Это также потребует внешней программы “phantomjs”. Вы можете установить phantomjs с помощью пакета <strong>webshot</strong>, использовав команду <code>webshot::install_phantomjs()</code>.</p>
<!-- ======================================================= -->
</section>
</section>
</section>
<section id="rstudio" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="rstudio"><span class="header-section-number">3.5</span> RStudio</h2>
<section id="ориентация-в-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ориентация-в-rstudio">Ориентация в RStudio</h3>
<p><strong>Во-первых, откройте RStudio.</strong> Поскольку иконки выглядят похоже, убедитесь, что вы открыли именно <em>RStudio</em>, а не R.</p>
<p>Для работы RStudio у вас на компьютере должен быть установлен R (см. инструкции по установке выше).</p>
<p><strong>RStudio</strong> - это интерфейс (ГИП) для облегчения использования <strong>R</strong>. Можете представить себе R как двигатель автомобиля, который выполняет основную работу, а RStudio как кузов автомобиля (с сидениями, аксессуарами и т.п.), который помогает использовать двигатель для движения! Вы можете полную шпаргалку по пользовательскому интерфейсу RStudio (PDF) <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">здесь</a></p>
<p>По умолчанию RStudio отображает четыре прямоугольные панели.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/RStudio_overview.PNG" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../images/RStudio_overview.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: black;"><strong><em>СОВЕТ:</em></strong> Если в вашем RStudio отображается только одна левая панель, это происходит потому что вы еще не открыли скрипты.</span></p>
<p><strong>Панель Source (источник)</strong><br>
Эта панель, по умолчанию расположенная в верхней левой части, представляет собой пространство для редактирования, выполнения и сохранения ваших <a href="#scripts">скриптом</a>. Скрипты содержат команды, которые вы хотите выполнить. На этой панели также могут отображаться наборы данных (датафреймы) для просмотра.</p>
<p>Для пользователей Stata, данная панель похожа на окна Do-file и Data Editor.</p>
<p><strong>Панель R Console (консоль)</strong></p>
<p>Консоль R, по умолчанию расположенная в нижней левой части в R Studio, является местом расположения “двигателя” R. Здесь происходит собственно выполнение команд, и там же появляются неграфические выходные данные и сообщения об ошибках/предупреждения. Вы можете вводить и выполнять команды напрямую в Консоли R, но нужно понимать, что эти команды не сохраняются, как при выполнении команд из скрипта.</p>
<p>Если вы знакомы со Stata, Консоль R похожа на командное окно и окно результатов.</p>
<p><strong>Панель Environment (рабочая среда)</strong><br>
Данная панель, по умолчанию расположенная в верхней правой части, является наиболее часто используемой для просмотра краткой информации по <a href="#objects">объектам</a> в рабочей среде R в рамках текущей сессии. Эти объекты могут включать импортированные, модифицированные или созданные наборы данных, заданные вами параметры (например, конкретная эпиднеделя для анализа), либо векторы или списки, которые вы задали во время анализа (например, названия регионов). Вы можете нажат на стрелку рядом с названием датафрейма, чтобы увидеть его переменные.</p>
<p>Эта понель похожа на окно Менеджера переменных в Stata.</p>
<p>В этой панели также содержится <em>Источрия</em>, где вы можете увидеть предыдущие команды. В ней также есть вкладка “Tutorial” (обучение), где вы можете пройти интерактивное обучение по R, если у вас установлен пакет <strong>learnr</strong>. It also has a “Connections” pane for external connections, and can have a “Git” pane if you choose to interface with Github.</p>
<p><strong>Панель Plots (графики), Viewer (просмотр), Packages (пакеты), и Help (справка)</strong><br>
Нижняя правая панель включает в себя несколько важных вкладок. Типичные графики, включая карты, будут отображаться на панели Plot (график). Интерактивные или HTML выходные данные будут отображаться в панели Viewer (просмотр). Панель Help (справка) может отображать файлы с документацией и со справкой. Панель Files (файлы) является средством просмотра, который можно использовать для открытия или удаления файлов. Панель Packages (пакеты) позволяет вам видеть, устанавливать, обновлять, удалять загружать/сбрасывать пакеты R, а также просматривать, какая у вас версия пакета. Чтобы получить дополнительную информацию о пакетах, см. <a href="#packages">раздел пакеты</a> ниже.</p>
<p>В данную панель входит функционал, похожий на окна Менеджера графиков и Менеджера проекта в Stata.</p>
</section>
<section id="настройки-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="настройки-rstudio">Настройки RStudio</h3>
<p>Изменить настройки и вид RStudio можно в выпадающем меню во вкладке <em>Tools (инструменты)</em>, выбрав <em>Global Options (глобальные опции)</em>. Там можно изменить настройки по умолчанию, включая внешний вид/цвет фона.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/RStudio_tools_options_1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/RStudio_tools_options.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Перезапуск</strong></p>
<p>Если R зависнет, вы можете перезапустить R, зайдя в меню Сессии и нажав “Restart R (перезапуск R)”. Это позволит избежать необходимости закрытия и открытия RStudio. Когда вы выполните это действие, все объекты из вашей рабочей среды будут удалены.</p>
</section>
<section id="горячие-клавиши" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="горячие-клавиши">Горячие клавиши</h3>
<p>Ниже представлены полезные сочетания клавиш. См. все горячие клавиши для Windows, Max и Linux на второй странице данной <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">шпаргалки по пользовательскому интерфейсу</a> RStudio.</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 13%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th>Windows/Linux</th>
<th>Mac</th>
<th>Действие</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Esc</td>
<td>Esc</td>
<td>Прерывает текущую команду (полезно, если вы случайно выполнили неполную команду, не можете выйти и видите “+” в консоли R)</td>
</tr>
<tr class="even">
<td>Ctrl+s</td>
<td>Cmd+s</td>
<td>Сохраняет (скрипт)</td>
</tr>
<tr class="odd">
<td>Tab</td>
<td>Tab</td>
<td>Автозаполнение</td>
</tr>
<tr class="even">
<td>Ctrl + Enter</td>
<td>Cmd + Enter</td>
<td>Выполняет текущую строку(и)/выбранный код</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + C</td>
<td>Cmd + Shift + c</td>
<td>Комментирование/снятие комментария с выделенных строк</td>
</tr>
<tr class="even">
<td>Alt + -</td>
<td>Option + -</td>
<td>Вставка <code>&lt;-</code></td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + m</td>
<td>Cmd + Shift + m</td>
<td>Вставка <code>%&gt;%</code></td>
</tr>
<tr class="even">
<td>Ctrl + l</td>
<td>Cmd + l</td>
<td>Очистка консоли R</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + b</td>
<td>Cmd + Option + b</td>
<td>Выполнить, начиная с начала до текущей строки</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + t</td>
<td>Cmd + Option + t</td>
<td>Выполнить текущий раздел кода (R Markdown)</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + i</td>
<td>Cmd + Shift + r</td>
<td>Вставить блок кода (в R Markdown)</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + c</td>
<td>Cmd + Option + c</td>
<td>Выполнить текущий блок кода (R Markdown)</td>
</tr>
<tr class="odd">
<td>Стрелки вверх/вниз на консоли R</td>
<td>Те же</td>
<td>Переключение через последние выполненные команды</td>
</tr>
<tr class="even">
<td colspan="2">Shift + Стрелки вверх/вниз в скрипте| Те же</td>
<td>Выбор нескольких строк кода</td>
</tr>
<tr class="odd">
<td>Ctrl + f</td>
<td>Cmd + f</td>
<td>Найти и заменить в текущем скрипте</td>
</tr>
<tr class="even">
<td>Ctrl + Shift + f</td>
<td>Cmd + Shift + f</td>
<td>Найти в файлах (поиск/замена в нескольких скриптах)</td>
</tr>
<tr class="odd">
<td>Alt + l</td>
<td>Cmd + Option + l</td>
<td>Свернуть выбранный код</td>
</tr>
<tr class="even">
<td>Shift + Alt + l</td>
<td>Cmd + Shift + Option+l</td>
<td>Развернуть выбранный код</td>
</tr>
</tbody>
</table>
<p><span style="color: darkgreen;"><strong><em>СОВЕТ:</em></strong> Используйте клавишу Tab при печатании, чтобы задействовать функционал RStudio по автозаполнению. Это позволит избежать ошибок в правописании. Нажмите Tab при печатании, чтобы вышло выпадающее меню с наиболее вероятными функциями и объектами, исходя из уже напечатанного вами текста.</span></p>
<!-- ======================================================= -->
</section>
</section>
<section id="functions" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="functions"><span class="header-section-number">3.6</span> Функции</h2>
<p>Функции лежат в основе использования R. Функции позволяют выполнять задачи и операции. Многие функции уже установлены в R, многие доступны к скачиванию в <em>пакетах</em> (объясняются в разделе <a href="#packages">пакеты</a>), и вы можете даже написать свои собственные функции!</p>
<p>В этом разделе по основам функций объясняется:</p>
<ul>
<li>Что такое функция и как она работает<br>
</li>
<li>Что такое <em>аргументы</em> функции<br>
</li>
<li>Как получить помощь, чтобы понять функцию</li>
</ul>
<p><em>Краткий комментарий по синтаксису:</em> В данном руководстве функции записаны в тексте кода с открытыми скобками, например: <code>filter()</code>. Как объясняет раздел <a href="#packages">пакеты</a>, функции скачиваются в <em>пакетах</em>. В данном руководстве названия пакетов пишутся <strong>жирным</strong>, например, <strong>dplyr</strong>. Иногда в примере кода вы можете увидеть название функции, сразу связанное с названием пакета с помощью двойного двоеточия (<code>::</code>), например: <code>dplyr::filter()</code>. Цель такой связки объясняется в разделе пакеты.</p>
<!-- ======================================================= -->
<section id="простые-функции" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="простые-функции">Простые функции</h3>
<p><strong>Функция как машина, которая получает вводные данные, как-то их преобразует и выдает результат.</strong> Каким будет результат, зависит от функции.</p>
<p><strong>Функции, как правило, работают над каким-то объектом, размещенным в скобках в функции</strong>. Например, функция <code>sqrt()</code> вычисляет квадратный корень числа:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>Объектом, заданным для функции, может быть столбец в наборе данных (см. раздел <a href="#objects">Объекты</a> для более детальной информации о всех типах объектов). Поскольку в R может храниться несколько наборов данных, вам нужно будет уточнить и набор данных, и столбец. Это можно сделать, используя знак <code>$</code>, чтобы связать название набора данных и название столбца (<code>dataset$column</code>). В примере ниже функция <code>summary()</code> применяется к числовому столбцу <code>age</code> (возраст) в наборе данных <code>linelist</code>, а результатом является сводная информация по числовым и отсутствующим значениям в столбце.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Печатает сводную статистику по столбцу 'age' в наборе данных 'linelist'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>ПРИМЕЧАНИЕ:</em></strong> Фоново функция представляет собой сложный дополнительный код, который упакован для пользователя в одну простую команду.</span></p>
<!-- ======================================================= -->
</section>
<section id="функции-с-несколькими-аргументами" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="функции-с-несколькими-аргументами">Функции с несколькими аргументами</h3>
<p>Функции часто требуют нескольких вводных данных, которые называются <strong><em>аргументы</em></strong>, которые располагаются внутри скобок функции, и, как правило, разделяются запятыми.</p>
<ul>
<li>Некоторые аргументы обязательны для правильной работы функции, другие являются опциональными<br>
</li>
<li>Опциональные аргументы имеют настройки по умолчанию<br>
</li>
<li>Аргументы могут быть текстовыми, числовыми, логическими (TRUE/FALSE (ИСТИНА/ЛОЖЬ)) и другими</li>
</ul>
<p>Здесь вы видите интересную выдуманную функцию, которая называется <code>oven_bake()</code> (печем пирог), она является примером типичной функции. Она берет входной объект (например, набор данных или в данном случае “тесто”) и проводит операции с ним, указанные с помощью дополнительных аргументов (<code>minutes =</code> (минуты) и <code>temperature =</code> (температура)). Выходные данные могут быть напечатаны в консоли, либо сохранены в качестве объекта, используя оператор присваивания <code>&lt;-</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Function_Bread_Example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/Function_Bread_Example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Если рассмотреть более реалистичный пример</strong>, команда <code>age_pyramid()</code> ниже создает график возрастной пирамиды на основе заданных возрастных групп и двоичной графы <code>gender</code> (пол). Функции задаются три аргумента в скобках, которые отделяются запятыми. Значения, заданные в виде аргументов, определяют используемый датафрейм <code>linelist</code>, <code>age_cat5</code> как столбец для подсчета, а <code>gender</code> как двоичный столбец для разделения пирамиды по цветам.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Создание возрастной пирамиды</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(<span class="at">data =</span> linelist, <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="at">split_by =</span> <span class="st">"gender"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.ru_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="basics.ru_files/figure-html/unnamed-chunk-6-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Указанные выше команды могут быть также записаны так, как указано ниже, более длинным стилем, где каждый аргумент начинается с новой строки. Этот стиль кодирования легче читать, к нему легче писать “комментарии” с помощью знака <code>#</code>, чтобы пояснить каждую часть (подробные комментарии - хорошая практика!). Чтобы выполнить эту более длинную команду, вы можете выделить всю команду и нажать “Run”, либо просто поместите курсор в первую строку и нажмите одновременно клавиши Ctrl и Enter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Создание возрастной пирамиды</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> linelist,        <span class="co"># использовать построчный список случаев</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="co"># задать столбец возрастной группы</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"gender"</span>     <span class="co"># использовать столбец gender для двух сторон пирамиды</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.ru_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="basics.ru_files/figure-html/unnamed-chunk-7-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Первая половина присваивания аргумента (например, <code>data =</code>) не обязательно требует уточнения, если аргументы пишутся в указанном порядке (порядок указывается в документации по функции). Указанный ниже код выдаст абсолютно идентичную пирамиду, что и выше, поскольку функция ожидает порядка аргументов: датафрейм, переменная <code>age_group</code> (возрастная группа), переменная <code>split_by</code> (разделить по).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Эта команда выдаст такой же график, что и выше</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(linelist, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Более сложная команда <code>age_pyramid()</code> может включать <em>опциональные</em> аргументы, чтобы:</strong></p>
<ul>
<li>Показать пропорции вместо абсолютных чисел (установить <code>proportional = TRUE</code>, хотя по умолчанию стоит <code>FALSE</code>)<br>
</li>
<li>Указать два цвета, которые будут использованы (<code>pal =</code> это сокращение от слова “палетка”, в которой есть векторы двух названий цветов. См. страницу <a href="#objectstructure">объекты</a> для получения информации о том, как функция <code>c()</code> создает вектор)</li>
</ul>
<p><span style="color: black;"><strong><em>ПРИМЕЧАНИЕ:</em></strong> Для аргументов, для которых вы указываете обе части аргумента (например, <code>proportional = TRUE</code>), их порядок среди всех других аргументов не имеет значения.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  linelist,                    <span class="co"># использовать построчный список случаев</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age_cat5"</span>,                  <span class="co"># столбец возрастной группы</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gender"</span>,                    <span class="co"># разделить по полу</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportional =</span> <span class="cn">TRUE</span>,         <span class="co"># проценты вместо абсолютного количества</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"purple"</span>)  <span class="co"># цвета</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics.ru_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="basics.ru_files/figure-html/unnamed-chunk-8-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="написание-функций" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="написание-функций">Написание Функций</h3>
<p>R - язык, построенный на основе функций, поэтому вы можете свободно писать свои собственные функции. Создание функций даст вам ряд преимуществ:</p>
<ul>
<li>Облегчит модульное программирование - разделение кода на независимые и управляемые блоки<br>
</li>
<li>Заменит многократное копирование и вставку, которое несет риск ошибок<br>
</li>
<li>Даст блокам кода запоминающиеся названия</li>
</ul>
<p>Написание функции более детально изучается на странице <a href="../new_pages/writing_functions.ru.html">Написание функций</a>.</p>
<!-- Функции задается имя, и она определяется с помощью оператора присваивания `<-` к специальной **базовой** функции R, которая называется `function()`. Внутри скобок определяются аргументы, которые будет принимать функция. После этого ставятся фигурные скобки `{ }`, в которых записывается собственно код функции.     -->
<!-- Аргументы должны быть представлены в форме синтаксиса `argument = default`, отделены запятыми.   -->
<!-- Здесь вы видите пример создания функции `staff_calc()`, которая будет служить калькулятором потребности в сотрудниках для расследования случаев и обзвона контактных лиц.   -->
<!-- Аргументами (входными данными) и их значениями по умолчанию будут:   -->
<!-- * `daily_cases = NULL` Количество новых случаев COVID-19 в день   -->
<!-- * `contacts_each = 5` Количество контактных лиц для каждого случая   -->
<!-- * `time_case = 0.5`  Количество часов для проведения расследования случая по телефону   -->
<!-- * `time_contact = 0.25`  Количество часов для выполнения отслеживания контактов по телефону   -->
<!-- * `time_day = 8` Количество часов работы одного сотрудника в день   -->
<!-- Ниже создается функция. Код оканчивается специальной функцией `return()`, которая означает то, что выдает функция.    -->
<!-- ```{r message=FALSE, warning=FALSE, out.width = "75%", out.height="75%"} -->
<!-- staff_calc <- function(daily_cases = NULL, contacts_each = 5, -->
<!--                        time_case = 0.5, time_contact = 0.25, time_day = 8){ -->
<!--   # Определяем общее количество часов обзвона случаев в день -->
<!--   case_hours <- daily_cases * time_case  -->
<!--   # Определяем общее количество часов обзвона контактов ежедневно -->
<!--   contact_hours <- daily_cases * contacts_each * time_contact -->
<!--   # Рассчитываем требуемое количество сотрудников -->
<!--   staff_required <- (case_hours + contact_hours)/time_day -->
<!--   return(staff_required) -->
<!-- } -->
<!-- ``` -->
<!-- Как только этот код будет выполнен, будет задана функция, и она появится в рабочей среде R. Мы можем выполнить функцию. Ниже использованы все значения по умолчанию, а `daily_cases = ` установлено на 150.   -->
<!-- При написании функции требуется разобраться во многих других нюансах, что описано на странице [Написание функций].   -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="packages" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="packages"><span class="header-section-number">3.7</span> Пакеты</h2>
<p><strong>Пакеты содержат функции.</strong></p>
<p>Пакет R - набор кода и документации, которыми можно делиться и которые содержат заранее заданные функции. Пользователи в сообществе R все время разрабатывают пакеты для решения конкретных проблем, вероятно, что кто-то из них сможет помочь вам с вашей работой! В процессе использования R вы будете устанавливать и использовать множество пакетов.</p>
<p>При установке R содержит <strong>“базовые”</strong> пакеты и функции, которые выполняют частые элементарные задачи. Но многие пользователи R создают специализированные функции, которые проверяются сообществом R, и которые вы можете скачать в виде <strong>пакета</strong> для собственного использования. В данном руководстве названия пакетов записываются <strong>жирным</strong>. Одним из сложных аспектов R является то, что часто существует множество функций или пакетов для выполнения одной и той же задачи, из которых вы можете выбирать.</p>
<section id="установка-и-загрузка" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="установка-и-загрузка">Установка и загрузка</h3>
<p><em>Функции</em> содержатся внутри <strong>пакетов</strong>, которые можно скачать (“установить”) на ваш компьютер с интернета. Как только пакет скачан, он хранится в вашей “библиотеке”. Затем вы можете получить доступ к функциям, которые содержатся в пакетах в ходе текущей сессии R, “загрузив” пакет.</p>
<p><em>Считайте R вашей личной библиотекой</em>: Когда вы скачиваете пакет, в вашей библиотеке появляется новая книга функций, но каждый раз, когда вы хотите использовать функцию из этой книги, вам нужно взять эту книгу (“загрузить”) из библиотеки.</p>
<p>Подведем итог: чтобы использовать функции, доступные в пакете R, необходимо выполнить 2 шага:</p>
<ol type="1">
<li>Пакет необходимо <strong>установить</strong> (один раз), <em>и</em><br>
</li>
<li>Пакет необходимо <strong>загрузить</strong> (при каждой сессии R)</li>
</ol>
<section id="ваша-библиотека" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="ваша-библиотека">Ваша библиотека</h4>
<p>Ваша “библиотека” на самом деле является папкой в вашем компьютере, в которой содержится папка для каждого пакета, который был установлен. Найдите, где установлен R на вашем компьютере, найдите папку под названием “win-library”. Например: <code>R\win-library\4.0</code> (4.0 - это версия R - у вас будет разная библиотека для каждой скаченной версии R).</p>
<p>Вы можете вывести путь к файлу для вашей библиотеки, введя <code>.libPaths()</code> (пустые скобки). Это станет особенно важно, если вы работаете с <a href="../new_pages/network_drives.ru.html">R на сетевых дисках</a>.</p>
</section>
<section id="установка-из-cran" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="установка-из-cran">Установка из CRAN</h4>
<p>Наиболее часто пользователи R скачивают пакеты из CRAN. CRAN (Комплексная сеть архива R) - это онлайн публичное хранилище пакетов R, которые были опубликованы сообществом R.</p>
<p>Вы боитесь вирусов и обеспокоены вопросами безопасности при скачивании пакета с CRAN? Прочитайте <a href="https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security">эту статью</a> по данной теме.</p>
</section>
<section id="как-установить-и-загрузить" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="как-установить-и-загрузить">Как установить и загрузить</h4>
<p>В данном руководстве мы советуем использовать пакет <strong>pacman</strong> (сокращение от “package manager (менеджер пакетов)”). В нем есть удобная функция <code>p_load()</code>, которая установит пакет, если необходимо, <em>и</em> загрузит его для использования в текущей сессии R.</p>
<p>Синаксис очень прост. Просто укажите названия пакетов внутрти скобок <code>p_load()</code>, отделив запятыми. Эта команда установит пакеты <strong>rio</strong>, <strong>tidyverse</strong> и <strong>here</strong>, если они еще не установлены, а также загрузит их для использования. Это делает подход <code>p_load()</code> удобным и кратким, если вы делитесь скриптами с другими. Обратите внимание, что названия пакетов чувствительны к регистру.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Установить (если необходимо) и загрузить пакеты для использования</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rio, tidyverse, here)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Обратите внимание, что мы использовали синтаксис <code>pacman::p_load()</code>, в котором четко записано название пакета (<strong>pacman</strong>) перед названием функции (<code>p_load()</code>), и они соединены двумя двоеточиями <code>::</code>. Этот синтаксис полезен, поскольку он также загружает пакет <strong>pacman</strong> (если он уже установлен).</p>
<p>Существуют альтернативные <strong>базовые</strong> функции R, с которыми вы будете часто сталкиваться. <strong>Базовая</strong> функция R для установки пакета - это <code>install.packages()</code>. Название пакета для установки необходимо указать в скобках <em>в кавычках</em>. Если вы хотите установить несколько пакетов одной командой, они должны быть перечислены внутри вектора символов <code>c()</code>.</p>
<p>Примечание: эта команда <em>устанавливает</em> пакет, но <em>не</em> загружает его для использования в текущей сессии.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># установка одного пакета с помощью базового R</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># установка нескольких пакетов с помощью базового R</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"rio"</span>, <span class="st">"here"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Установку можно также выполнить, зайдя в панель RStudio “Packages” (пакеты) и нажав “Install” (установить) и поискав название необходимого пакета.</p>
<p><strong>Базовая</strong> функция в R для <strong>загрузки</strong> пакета для использования (после того, как он установлен) - это <code>library()</code>. Она может загружать только по одному пакету за раз (еще одна причина, почему лучше использовать <code>p_load()</code>). Вы можете указать название пакета с или без кавычек.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># загружает пакеты для использованя с базовым R</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Чтобы проверить, установлен ли и/или загружен ли пакет, вы можете просмотреть панель Packages (пакеты) в RStudio. Если пакет установлен, он будет отражаться там с номером версии. Если стоит галочка рядом с ним, значит он загружен для текущей сессии.</p>
<p><strong>Установка с Github</strong></p>
<p>Иногда может потребоваться установить пакет, которого еще нет на CRAN. Или, может быть, пакет есть на CRAN, но вам нужна <em>версия разработчиков</em> с новыми свойствами, которые еще недоступны в более стабильной опубликованной версии CRAN. Такие пакеты часто размещаются на сайте <a href="https://github.com/">github.com</a> в бесплатном общедоступном “репозитории” кода. Более детальную информацию о Github вы можете получить в данном руководстве на странице [Контроль версий и совместная работа с помощью Git и Github].</p>
<p>Чтобы скачать пакеты R с Github, вы можете использовать функцию <code>p_load_gh()</code> из <strong>pacman</strong>, которая установит пакет, если необходимо, и загрузит для использования в текущей сессии R. Альтернативно можно провести установку с помощью пакетов <strong>remotes</strong> или <strong>devtools</strong>. Более подробную информацию обо всех функциях <strong>pacman</strong> можно прочитать <a href="https://cran.r-project.org/web/packages/pacman/pacman.pdf">в документации по пакету</a>.</p>
<p>Для установки с Github вам нужно задать больше информации. Вы должны указать:</p>
<ol type="1">
<li>Github ID владельца репозитория</li>
<li>Название репозитория, в котором содержится пакет<br>
</li>
<li><em>(опционально) Название “ветви” (конкретной версии разработчика), которую вы хотите скачать</em></li>
</ol>
<p>В примерах ниже первое слово в кавычках - это Github ID владельца репозитория, после слэша идет название репозитория (название пакета).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># установка/загрузка пакета epicontacts из репозитория Github</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Если вы хотите произвести установку из другой “ветви” (версии), а не из основной ветви, добавьте название ветви после “@”, после названия репозитория.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># установка ветви "timeline" для пакета epicontacts из Github</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts@timeline"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Если нет разницы между версией в Github и версией на вашем компьютере, никакие действия не будут выполнены. Вы можете принудительно сделать переустановку, используя <code>p_load_current_gh()</code> с аргументом <code>update = TRUE</code>. Более подробно о <strong>pacman</strong> можно почитать в этой <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">онлайн виньетке</a></p>
<p><strong>Установка из ZIP или TAR</strong></p>
<p>Вы можете установить пакет из URL:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>packageurl <span class="ot">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(packageurl, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Либо скачать его на свой компьютер в архиве:</p>
<p>Вариант 1: использовать <code>install_local()</code> из пакета <strong>remotes</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_local</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Вариант 2: использовать <code>install.packages()</code> из <strong>базового</strong> R, указав путь к ZIP файлу и установив <code>type = "source</code> и <code>repos = NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="синтаксис-кода" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="синтаксис-кода">Синтаксис кода</h3>
<p>Для ясности в руководстве функции иногда приводятся с указанием сначала названия пакета, используя символ <code>::</code> следующим образом: <code>package_name::function_name()</code></p>
<p>Как только пакет загружен для сессии такой подробный стиль уже не нужен. Можно просто использовать <code>function_name()</code>. Однако написание названия пакета полезно, если у функции частое название, которое может существовать в нескольких пакетах (например, <code>plot()</code>). Написание названия пакета также позволит загрузить пакет, если он еще не загружен.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Данная команда использует пакет "rio" и его функцию "import()" для импорта набора данных</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"linelist.xlsx"</span>, <span class="at">which =</span> <span class="st">"Sheet1"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="справка-по-функциям" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="справка-по-функциям">Справка по функциям</h3>
<p>Чтобы почитать дополнительную информацию о функции вы можете найти ее во вкладке Help (справка) в нижней правой части RStudio. Вы можете также выполнить команду <code>?thefunctionname</code> (напишите название функции после знака вопрос) и появится страница Справка на панели Справка. Либо можно поискать ресурсы онлайн.</p>
</section>
<section id="обновление-пакетов" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="обновление-пакетов">Обновление пакетов</h3>
<p>Вы можете обновить пакеты, переустановив их. Вы можете также кликнуть зеленую кнопку “Update” (обновления) на панели RStudio Packages (пакеты), чтобы проверить, у каких пакетов есть новые версии для установки. Имейте ввиду, что может потребоваться обновление вашего старого кода, если произошли серьезные изменения в работе функции!</p>
</section>
<section id="удаление-пакетов" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="удаление-пакетов">Удаление пакетов</h3>
<p>Используйте <code>p_delete()</code> из <strong>pacman</strong>, или <code>remove.packages()</code> из <strong>базового</strong> R. Альтернативно, найдите папку, в которой содержится ваша библиотека, и вручную удалите папку.</p>
</section>
<section id="взаимозависимости" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="взаимозависимости">Взаимозависимости</h3>
<p>В работе пакеты часто зависят от других пакетов. Это называется взаимозависимостью. Если взаимозависимость не установлена, тогда, возможно, зависящий от нее пакет также не установится.</p>
<p>Проверить взаимозависимости пакета можно с помощью <code>p_depends()</code>, а увидеть, какие пакеты зависят от этого с помощью <code>p_depends_reverse()</code></p>
</section>
<section id="маскирование-функций" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="маскирование-функций">Маскирование функций</h3>
<p>Часто бывает так, что в двух или нескольких пакетах есть функции с одинаковыми названиями. Например, в пакете <strong>dplyr</strong> есть функция <code>filter()</code>, но она же есть и в пакете <strong>stats</strong>. То, какая функция <code>filter()</code> будет использоваться по умолчанию, зависит от порядка, в котором изначально загружены эти пакеты в сессии R - более поздняя будет функцией по умолчанию для команды <code>filter()</code>.</p>
<p>Вы можете проверить порядок в панели Environment (рабочая среда) в R Studio - кликните в выпадающем меню на “Global Environment” (глобальная среда) и посмотрите порядок пакетов. Функции из пакетов, расположенных <em>ниже</em> в этом выпадающем списке будут маскировать функции с тем же названием в пакетах, которые расположены выше в выпадающем списке. Изначально при загрузке пакета R предупредит вас в консоли, если происходит маскирование, но это предупреждение легко пропустить.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/masking_functions.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/masking_functions.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Способы исправления маскирования:</p>
<ol type="1">
<li>Указать название пакета в команде. Например, используйте <code>dplyr::filter()</code><br>
</li>
<li>Изменить порядок загрузки пакетов (например, в <code>p_load()</code>), и <strong>начать новую сессию R</strong></li>
</ol>
</section>
<section id="открепление-сброс" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="открепление-сброс">Открепление / сброс</h3>
<p>Чтобы открепить (сбросить) пакет, используйте эту команду с правильным названием пакета и с одним двоеточием. Обратите внимание, что это не всегда устранит маскирование.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>PACKAGE_NAME_HERE, <span class="at">unload=</span><span class="cn">TRUE</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="установка-более-старой-версии" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="установка-более-старой-версии">Установка более старой версии</h3>
<p>См. данное <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">руководство</a>, чтобы установить более старую версию конкретного пакета.</p>
</section>
<section id="рекомендованные-пакеты" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="рекомендованные-пакеты">Рекомендованные пакеты</h3>
<p>См. страницу <a href="../new_pages/packages_suggested.ru.html">Рекомендованные пакеты</a> со списком пакетов, которые мы рекомендуем для повседневной эпидемиологии.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="scripts" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="scripts"><span class="header-section-number">3.8</span> Скрипты</h2>
<p>Скрипты - фундаментальная часть программироввания. Это документы, которые содержат ваши команды (например, функции для создания и модификации наборов данных, вывода визуализаций и т.п.). Вы можете сохранить скрипт и выполнить его еще раз позже. Существует множество преимуществ хранения и выполнения команд из скрипта (по сравнению с печатанием команд по одной в консоли R в “командной строке”):</p>
<ul>
<li>Переносимость - вы можете делиться своей работой с другими, отправив им свои скрипты<br>
</li>
<li>Воспроизводимость - чтобы и вы, и другие точно знали, что именно вы сделали<br>
</li>
<li>Контроль версий - чтобы вы могли отслеживать изменения, которые внесли вы сами или коллеги<br>
</li>
<li>Комментирование/аннотации - чтобы пояснить коллегам, что вы сделали</li>
</ul>
<section id="комментирование" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="комментирование">Комментирование</h3>
<p>В скрипте вы можете также комментировать свой код R. Комментирование полезно, чтобы объяснить самому себе и другим пользователям, что именно вы делаете. Добавить комментарий можно, напечатав символ решетки (#) и записав после него свой комментарий. Текст комментария будет выделен другим цветом по сравнению с кодом R.</p>
<p>Код, записанный после знака #, не будет выполняться. Следовательно, вы можете поставить # перед кодом, чтобы временно заблокировать строку кода (“закомментировать”), если вы не хотите удалять ее). Вы можете закомментировать/снять комментирование с нескольких строк сразу, выделив их и нажав Ctrl+Shift+c (Cmd+Shift+c для Mac).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Комментарий может быть отдельной строкой</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Импорт данных</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"linelist_raw.xlsx"</span>) <span class="sc">%&gt;%</span>   <span class="co"># комментарий может стоять после кода</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(age &gt; 50)                          # Может быть использован для деактивации/блокировки строки кода</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Комментируйте, <em>что</em> вы делаете <em>и <strong>почему</strong> вы это делаете</em>.<br>
</li>
<li>Разбивайте код на логичные разделы<br>
</li>
<li>Сопровождайте код текстовым пошаговым описанием того, что вы делаете (например, пронумерованные шаги)</li>
</ul>
</section>
<section id="стиль" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="стиль">Стиль</h3>
<p>Важно обращать внимание на свой стиль кодирования - особенно при работе в команде. Мы призываем использовать <strong>tidyverse</strong> <a href="https://style.tidyverse.org/">руководство по стилю</a>. Существуют также такие пакеты, как <strong>styler</strong> и <strong>lintr</strong>, которые помогут вам соблюдать этот стиль.</p>
<p>Несколько простых правил, чтобы ваш код был понятен другим:<br>
* При именовании объектов используйте только строчные буквы, цифры и нижние подчеркивания <code>_</code>, например, <code>my_data</code><br>
* Часто используйте пробелы, в том числе вокруг операторов, например, <code>n = 1</code> и <code>age_new &lt;- age_old + 3</code></p>
</section>
<section id="пример-скрипта" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="пример-скрипта">Пример скрипта</h3>
<p>Ниже представлен пример короткого скрипта в R. Помните, чем лучше вы сможете кратко пояснить свой код в комментариях, тем больше ваши коллеги будут вас любить!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/example_script.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../images/example_script.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-markdown">R markdown</h3>
<p>Скрипт R markdown - тип скрипта R, в котором сам скрипт <em>становится</em> выводимым в результате документом (PDF, Word, HTML, Powerpoint, и т.п.). Это очень полезные и разнообразные инструменты, которые часто используются для создания динамичных и автоматизированных отчетов. Даже этот сайт и руководство создано с помощью скриптов R markdown!</p>
<p>Следует отметить, что новички в R также могут использовать R Markdown - не бойтесь его! Для получения дополнительной информации см. страницу руководства <a href="../new_pages/rmarkdown.ru.html">Отчеты с помощью R Markdown</a>.</p>
<!-- ======================================================= -->
</section>
<section id="r-notebooks" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-notebooks">R notebooks</h3>
<p>Нет разницы между написанием в Rmarkdown и R notebook. Однако выполнение документа чуть отличается. См. <a href="http://uc-r.github.io/r_notebook">сайт</a> для получения дополнительной информации.</p>
<!-- ======================================================= -->
</section>
<section id="shiny" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="shiny">Shiny</h3>
<p>Приложения/сайты Shiny содержатся внутри одного скрипта, который должен называться <code>app.R</code>. У этого файла три компонента:</p>
<ol type="1">
<li>Пользовательский интерфейс (ui)<br>
</li>
<li>Серверная функция<br>
</li>
<li>Функция обращения к <code>shinyApp</code></li>
</ol>
<p>См. страницу руководства <a href="../new_pages/shiny_basics.ru.html">Информационные панели с Shiny</a>, либо онлайн самоучитель: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Самоучитель по Shiny</a></p>
<p><em>Раньше указанный выше файл делился на два файла (<code>ui.R</code> и <code>server.R</code>)</em></p>
</section>
<section id="сворачивание-кода" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="сворачивание-кода">Сворачивание кода</h3>
<p>Вы можете свернуть блоки кода, чтобы улучшить читаемость вашего скрипта.</p>
<p>Чтобы это сделать, создайте заголовок текста с помощью #, напишите заголовок, после него поставьте не менее 4 дефисов (-), решеток (#) или знаков равно (=). После того, как вы это сделаете, на “полях” слева (рядом с номером строки) появится маленькая стрелочка. Вы можете кликнуть на эту стрелку и код под ней до следующего заголовка будет свернут, а вместо него появится иконка с двойной стрелкой.</p>
<p>Чтобы развернуть код, кликните снова на стрелку на полях, либо на иконку с двойной стрелкой. Существуют также быстрые сочетания клавиш на клавиатуре, которые представлены в <a href="#rstudio">разделе RStudio</a> на данной странице.</p>
<p>Создавая заголовки с помощью #, вы также активируете Содержание внизу вашего скрипта (см. ниже), которое вы сможете использовать для навигации по скрипту. Вы можете создавать подзаголовки, добавляя дополнительные символы #, например, # для основного заголовка, ## для подзаголовка второго уровня и ### для подзаголовка третьего уровня.</p>
<p>Ниже представлены две версии примера скрипта. Слева представлен оригинал с комментируемыми заголовками. Справа после каждого заголовка напечатаны четыре дефиса, что делает их сворачиваемыми. Два из них свернуты, и вы можете увидеть, что теперь в Содержании внизу указан каждый раздел.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../images/code_folding1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="../images/code_folding2.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Другие зоны кода, которые автоматически могут сворачиваться, включают блоки со скобками <code>{ }</code>, например определения функций или условные блоки (утверждения по принципу, если нет). Вы можете почитать дополнительную информацию о сворачивании кода на <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections">сайте</a> RStudio.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="рабочая-директория" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="рабочая-директория"><span class="header-section-number">3.9</span> Рабочая директория</h2>
<p>Рабочая директория - корневая папка, используемая для вашей работы в R - то, где R ищет и сохраняет файлы по умолчанию. По умолчанию, программа будет сохранять новые файлы и выходные данные в эту папку, а также там будет искать файлы для импорта (например, наборы данных).</p>
<p>Рабочая директория отражается серым текстом в верхней части панели Console (консоль) RStudio. Вы можете также вывести текущую директорию, выполнив команду <code>getwd()</code> (оставьте скобки пустыми).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/working_directory_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="../images/working_directory_1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="рекомендованный-подход" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="рекомендованный-подход">Рекомендованный подход</h3>
<p><strong>См. страницу [Проекты R] для получения детальной информации о рекомендуемом нами подходе к управлению рабочей директорией.</strong><br>
Частым, эффективным и беспроблемным способом управления рабочей директорией и путем к файлам является сочетание следующих 3 элементов в рабочем процессе в [Проекте R][R projects]:</p>
<ol type="1">
<li>R Проект для хранения всех ваших файлов (см. страницу <a href="../new_pages/r_projects.ru.html">Проекты R</a>)<br>
</li>
<li>Пакет <strong>here</strong> для расположения файлов (см. страницу <a href="../new_pages/importing.ru.html">Импорт и экспорт</a>)<br>
</li>
<li>Пакет <strong>rio</strong> для импорта/экспорта файлов (см. страницу [Импорт и экспорт(importing.ru.qmd)])</li>
</ol>
<!-- ======================================================= -->
</section>
<section id="установка-по-команде" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="установка-по-команде">Установка по команде</h3>
<p>До недавних пор многих учили начинать скрипты в R с команды <code>setwd()</code>. Вместо этого, рассмотрите возможность использования рабочий процесс, ориентированный на <a href="../new_pages/r_projects.ru.html">Проект R</a> и прочитайте<a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/">причины не использовать <code>setwd()</code></a>. Вкратце, ваша работа становится специфичной для вашего компьютера, пути к файлам, использованные для импорта и экспорта становятся “машинно-зависимыми”, а это серьезно осложняет совместную работу и использование вашего кода на других компьютерах Существуют простые альтернативы!</p>
<p>Как указано выше, хотя мы и не рекомендуем этот подход в большинстве ситуаций, вы можете использовать команду <code>setwd()</code> и указать желаемый путь к файлу в кавычках, например:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Documents/R Files/My analysis"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: red;"><strong><em>ВНИМАНИЕ:</em></strong> Установка рабочей директории с помощью <code>setwd()</code> <em>может</em> создать “машинно-зависимый” путь, если путь к файлу специфичен для конкретного компьютера. Вместо этого используйте пути к файлу, относительные для корневой директории R проекта (с помощью пакета <strong>here</strong>).</span></p>
<!-- ======================================================= -->
</section>
<section id="установка-вручную" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="установка-вручную">Установка вручную</h3>
<p>Чтобы установить рабочую директорию вручную (кликовый аналог <code>setwd()</code>), кликните на меню Session (сессия), перейдите на “Set Working Directory” (установить рабочую директорию), а затем “Choose Directory” (выбрать директорию). Это задаст рабочую директорию для конкретной сессии R. Примечание: при использовании этого подхода, вам придется вручную выполнять это действие каждый раз, когда вы открываете RStudio.</p>
<!-- ======================================================= -->
</section>
<section id="внутри-проекта-r" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="внутри-проекта-r">Внутри проекта R</h3>
<p>При использовании проекта R рабочая директория по умолчанию будет установлена на корневую папку проекта R, в которой находится файл “.rproj”. Это применимо, если вы открыли RStudio, кликнув на проект R (файл с расширением “.rproj”).</p>
<!-- ======================================================= -->
</section>
<section id="рабочая-директория-для-r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="рабочая-директория-для-r-markdown">Рабочая директория для R markdown</h3>
<p>В скрипте R markdown рабочей директорией по умолчанию будет папка, в которой сохранен файл Rmarkdown (<code>.Rmd</code>). При использовании проекта R и пакета <strong>here</strong>, этот принцип не применим, а рабочая директория будет <code>here()</code>, как объясняется на странице <a href="../new_pages/r_projects.ru.html">Проекты R</a>.</p>
<p>Если вы хоитте сменить рабочую директорию отдельного R markdown (не в проекте R), если вы используете <code>setwd()</code>, это будет применимо только к этому конкретному блоку кода. Чтобы изменения были внесены во все блоки кода в R markdown, редактируйте установочный блок и добавьте параметр <code>root.dir =</code>, как указано ниже:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">'desired/directorypath'</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Гораздо проще просто использовать R markdown в рамках проекта R и использовать пакет <strong>here</strong>.</p>
<!-- ======================================================= -->
</section>
<section id="указание-пути-к-файлу" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="указание-пути-к-файлу">Указание пути к файлу</h3>
<p>Наверное, самым большим источником раздражения для начинающего пользователя R (по крайней мере, на компьютере на Windows) является впечатывание пути к файлу для импорта или экспорта данных. На странице <a href="../new_pages/importing.ru.html">Импорт и экспорт</a> есть подробное объяснение того, как лучше всего указывать пути к фалам, но пока приведем ключевые моменты:</p>
<p><strong>Сломанный путь к файлу</strong></p>
<p>Ниже представлен пример “абсолютного” или “полного” пути к файлу. Такие пути могут быть сломаны при использовании на другом компьютере. Исключением является ситуация, когда вы используете общий/сетевой диск.</p>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p><strong>Направление слэшей</strong></p>
<p><em>При впечатывании пути к файлу обращайте внимание на направление слэшей.</em> Используйте <em>прямой слэш</em> (<code>/</code>), чтобы отделить компоненты (“data/provincial.csv”). Для пользователей Windows по умолчанию отображаются пути к файлу с <em>обратным слэшем</em> (\) - так что вам нужно будет изменить направление каждого слэша. Если вы используете пакет <strong>here</strong>, как описано на странице <a href="../new_pages/r_projects.ru.html">проекты R</a> направление слэшей не будет для вас проблемой.</p>
<p><strong>Относительный путь к файлу</strong></p>
<p>Как правило, мы рекомендуем указывать “относительный” путь к файлу - то есть, путь к файлу <em>относительно</em> коренной папки вашего Проекта R. Вы можете также сделать это с помощью пакета <strong>here</strong>, как указано на странице <a href="../new_pages/r_projects.ru.html">Проекты R</a>. Относительный путь к файлу может выглядеть следующим образом:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Импорт построчного списка в csv из подпапок data/linelist/clean/ для проекта R</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelists"</span>, <span class="st">"marin_country.csv"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Даже при использовании относительного пути к файлу в Проекте R, вы все еще можете использовать абсолютные пути для импорта/экспорта данных вне Проекта R.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="objects" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="objects"><span class="header-section-number">3.10</span> Объекты</h2>
<p>Всё в R является объектом, а R является “объектно-ориентированным” языком. В следующих разделах будет объяснено:</p>
<ul>
<li>Как создавать объекты (<code>&lt;-</code>)</li>
<li>Типы объектов (например, датафреймы, векторы..)<br>
</li>
<li>Как получить доступ к частям объекта (например, переменным в наборе данных)<br>
</li>
<li>Классы объектов (например, числовые, логические, цельночисленные, двойной точности, знаки, факторы)</li>
</ul>
<!-- ======================================================= -->
<section id="всё-является-объектом" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="всё-является-объектом">Всё является объектом</h3>
<p><em>Этот раздел адаптирован из <a href="https://r4epis.netlify.app/training/r_basics/objects/">проекта R4Epis</a>.</em><br>
Всё, что вы храните в R - наборы данных, переменные, список названий населенных пунктов, общее население, даже такие выходные данные, как графики - это <strong>объекты</strong>, которым <strong>присваивается имя</strong> и <strong>на которые можно ссылаться</strong> в последующих командах.</p>
<p>Объект существует, когда вы присвоили ему значение (см. раздел по присвоению ниже). При присваивании значения объект появится в Рабочей среде (см. правую верхнюю панель в RStudio). Затем с ним можно работать, преобразовывать, изменять или менять его определение.</p>
<!-- ======================================================= -->
</section>
<section id="определение-объектов--" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="определение-объектов--">Определение объектов (<code>&lt;-</code>)</h3>
<p><strong>Создание объектов <em>путем присвоения им значения</em> с помощью оператора &lt;- .</strong><br>
Вы можете рассматривать оператор присваивания <code>&lt;-</code> как аналог слов “определяется как”. Команды присвоения, как правило, используют стандартный порядок:</p>
<p><strong>название_объекта</strong> &lt;- <strong>значение</strong> (или процесс/расчет, который даст значение)</p>
<p>Например, вы можете зафиксировать текущую эпидемиологическую отчетную неделю в качестве объекта, чтобы дальше ссылаться на нее в коде. В данном примере создается объект <code>current_week</code>, когда ему присваивается значение <code>"2018-W10"</code> (кавычки задают значение как текстовое). Объект <code>current_week</code> затем появится в панели Environment (Рабочая среда) RStudio (верхняя правая) и на него можно будет ссылаться в последующих командах.</p>
<p>См. команды R и их выходные данные во вставках ниже.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># эта команда создает объект current_week путем присвоения ему значения</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># эта команда выводит текущее значение объекта current_week в консоли</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W10"</code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>ПРИМЕЧАНИЕ:</em></strong> Обратите внимание на <code>[1]</code> в выходных данных на консоли R просто указывает на то, что вы просматриваете первый пункт выходных данных</span></p>
<p><span style="color: orange;"><strong><em>ВНИМАНИЕ:</em></strong> <strong>Значение объекта можно заменить</strong> в любой момент времени, выполнив команду присвоения для пересмотра значения. Таким образом <strong>порядо выполнения команд очень важен</strong>.</span></p>
<p>Следующая команда заменит значение <code>current_week</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># присваивает НОВОЕ значение объекту current_week</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># выводит текущее значение current_week в консоли</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W51"</code></pre>
</div>
</div>
<p><strong>Знаки равно <code>=</code></strong></p>
<p>Вы также будете встречать знаки равно в коде R:</p>
<ul>
<li>Двойное равно <code>==</code> между двумя объектами или значениями задает логический <em>вопрос</em>: “равно ли одно другому?”.<br>
</li>
<li>Вы также будете видеть знаки равно внутри функций для указания значений аргументов функции (дополнительная информация об этом в разделах ниже), например, <code>max(age, na.rm = TRUE)</code>.<br>
</li>
<li>Вы <em>можете</em> использовать один знак равно <code>=</code> вместо <code>&lt;-</code> для создания и определения объектов, но мы не рекомендуем этого делать. Вы можете прочитать о том, почему это не рекомендуется, <a href="https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/">здесь</a>.</li>
</ul>
<p><strong>Наборы данных</strong></p>
<p>Наборы данных - это также объекты (как правило, “датафреймы”), им необходимо присваивать имена при импорте. С помощью кода ниже созодается объект <code>linelist</code> и ему присваивается значение файла CSV, импортироавнного с помощью пакета <strong>rio</strong> и его функции <code>import()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># создается построчный список и ему присваивается значение импортируемого CSV файла</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"my_linelist.csv"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Вы можете прочитать дополнительную информацию об импорте и экспорте наборов данных в разделе <a href="../new_pages/importing.ru.html">Импорт и экспорт</a>.</p>
<p><span style="color: orange;"><strong><em>ВНИМАНИЕ:</em></strong> Короткий комментарий по именованию объектов:</span></p>
<ul>
<li>В названиях объектов не должно быть пробелов, вместо этого используйте нижнее подчеркивание (_) или точку (.).<br>
</li>
<li>Названия объектов чувствительны к регистру (то есть Dataset_A отличается от dataset_A).</li>
<li>Названия объектов должны начинаться с буквы (не могут начинаться с цифры, например, 1, 2 или 3).</li>
</ul>
<p><strong>Выходные данные</strong></p>
<p>Выходные данные, такие как таблицы и графики, являются примером того, как можно сохранять выходные данные в виде объектов, либо выводить их без сохранения. Перекрестная таблица по полу и возрасту и ее результат с использованием <strong>базовой</strong> функции R <code>table()</code> можно вывести напрямую в консоль R (<em>без</em> сохранения).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># только выводится на консоль R</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p>Но ту же самую таблицу можно сохранить как именованный объект. Затем, при необходимости ее можно вывести (напечатать) на консоль.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># сохранить</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>gen_out_table <span class="ot">&lt;-</span> <span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># печать</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>gen_out_table</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p><strong>Столбцы</strong></p>
<p>Столбцы в наборе данных - также объекты, которые можно определить, переопределить и создать, как описано в разделе Столбцы ниже.</p>
<p>Вы можете использовать оператор присваивания из <strong>базового</strong> R, чтобы создать новый столбец. Ниже создается новый столбец <code>bmi</code> (Индекс массы тела), а для каждой строки новое значение является результатом математической операции со значениями строки в столбцах <code>wt_kg</code> и <code>ht_cm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># создание нового столбца "bmi" с помощью синтаксиса базового R</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>linelist<span class="sc">$</span>bmi <span class="ot">&lt;-</span> linelist<span class="sc">$</span>wt_kg <span class="sc">/</span> (linelist<span class="sc">$</span>ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Однако в данном руководстве мы подчеркиваем другой подход к определению столбцов, который использует функцию <code>mutate()</code> из пакета <strong>dplyr</strong> и <em>привязывание</em> с помощью оператора канала (<code>%&gt;%</code>). Такой синтаксис легче читать, а также имеются другие преимущества, которые объясняются на странице <a href="../new_pages/cleaning.ru.html">Вычистка данных и ключевые функции</a>. Вы можете более подробно почитать про <em>оператор канала</em> в разделе Использование каналов ниже.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># создание нового столбца "bmi" с помощью синтаксиса dplyr</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> wt_kg <span class="sc">/</span> (ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="структура-объекта" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="структура-объекта">Структура объекта</h3>
<p><strong>Объекты могут быть одним элементом данных (например, <code>my_number &lt;- 24</code>), либо могут состоять из структурированных данных.</strong></p>
<p>Изображенмие ниже взято из <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">данного онлайн самоучителя по R</a>. Там показаны некоторые часто встречающиеся структуры данных и их названия. В эту графику не включены пространственные данные, которые рассматриваются на страницы <a href="../new_pages/gis.ru.html">Основы ГИС</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/R_data_structures.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="../images/R_data_structures.png" class="quarto-figure quarto-figure-center figure-img" style="width:75.0%;height:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>В эпидемиологии (а особенно в прикладной эпидемиологии), вы <em>чаще всего</em> будете сталкиваться с датафреймами и векторами:</p>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 44%">
<col style="width: 47%">
</colgroup>
<tbody>
<tr class="odd">
<td rowspan="2"><h1 id="частая-структура" data-number="4"><span class="header-section-number">4</span> Частая структура</h1>
<p>Векторы</p></td>
<td colspan="2" rowspan="2">Объяснение | Пример | ==================================================================================================+=====================================================================================+ Контейнер для последовательности уникальных объектов, все из одного класса (например, числовые, текстовые). | <strong>“Переменные” (столбцы) в датафреймах являются векторами</strong> (например, столбец <code>age_years</code>).</td>
</tr>
<tr class="even">
</tr>
<tr class="odd">
<td colspan="2">Датафреймы | Векторы (например, столбцы), которые объединены, которые имеют одинаковое количество строк</td>
<td>Векторы (например, столбцы), которые объединены, которые имеют одинаковое количество строк | <code>linelist</code> является датафреймом. |</td>
</tr>
</tbody>
</table>
<p>Обратите внимание, что для создания “отдельного” вектора (который не является частью датафрейма) используется функция <code>c()</code> для связи разных элементов. Например, при создании вектора цветовой шкалы графика: <code>vector_of_colors &lt;- c("blue", "red2", "orange", "grey")</code></p>
<!-- ======================================================= -->
</section>
<section id="классы-объектов" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="классы-объектов">Классы объектов</h3>
<p>Все объекты, хранящиеся в R имеют <em>класс</em>, который говорит R, как обращаться с объектом. Существует множество возможных классов, наиболее часто встречающиеся включают:</p>
<table class="table">
<tbody>
<tr class="odd">
<td><h1 id="класс" data-number="5"><span class="header-section-number">5</span> Класс</h1>
<p>Текстовый</p></td>
<td>Объяснение | Примеры | =========================================================================================================================================================================================+=======================================================================================================+ Это текст/слова/предложения <strong>“в кавычках”</strong>. С этими объектами нельзя выполнять математические действия. | “Текстовые объекты пишутся в кавычках” |</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Цельночисленный | Только <strong>целые</strong> числа (без десятичных знаков) | -5, 14, or 2000 |</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Числовые | Числа, которые <strong>могут включать десятичные знаки</strong>. Если они будут в кавычках, они будут считаться текстовым классом. | 23.1 или 14 |</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Факторы | Это векторы с <strong>конкретным порядком</strong> или иерархией значений | Переменная экономического статуса с упорядоченными значениями</td>
<td></td>
<td></td>
<td><div class="line-block">Это векторы с <strong>конкретным порядком</strong> или иерархией значений | Переменная экономического статуса с упорядоченными значениями |</div></td>
</tr>
<tr class="even">
<td>Дата</td>
<td><strong>Как только вы скажете R, что определенные данные являются датой</strong>, с этими данными можно будет работать и отображать особенным образом. См. страницу <a href="../new_pages/dates.ru.html">Работа с датами</a> для получения детальной информации. | 2018-04-12 или 15/3/1954 или Wed 4 Jan 1980</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Логические | Значения могут быть одним из двух специальных значений TRUE или FALSE (ИСТИНА или ЛОЖЬ) (обратите внимание, что это <strong>не</strong> “TRUE” и “FALSE” в кавычках) | TRUE или FALSE |</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>data.frame</td>
<td>Датафрейм - то, как R хранит <strong>типичный набор данных</strong>. Он состоит из векторов (столбцов) объединенных данных, у всех из которых одинаковое количество наблюдений (строк). | Пример набора данных AJS под названием <code>linelist_raw</code> содержит 68 переменных и по 300 наблюдений (строк) для каждой. |</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>tibble</td>
<td>таблицы tibble - вариация датафрейма, для которой основное отличие в том, что она более удобно выводится на консоль (отображает первые 10 строк и только те столбцы, которые влезут на экран) | Любой датафрейм, список или матрицу можно конвертировать в таблицу tibble с помощью <code>as_tibble()</code> |</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Список | Список похож на вектор, но содержит другие объекты, которые могут быть в других классах | Список может содержать оодно число, датафрейм, вектор и даже другой список! |</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Вы можете проверить класс объекта, задав его имя в функции <code>class()</code></strong>. Примечание: вы можете ссылаться на конкретный столбец в наборе данных, используя знак <code>$</code>, чтобы отделить название набора данных и название столбца.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist)         <span class="co"># класс должен быть датафрейм (dataframe) или tibble</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>age)     <span class="co"># класс должен быть числовой (numeric)</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>gender)  <span class="co"># класс должен быть текстовый (character)</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Иногда R автоматически конвертирует столбец в другой класс. Следите за этим! Например, если у вас есть вектор или столбец чисел, но вставлено текстовое значение… весь столбец изменится на текстовый класс.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>num_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>) <span class="co"># определение вектора как только чисел</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># вектор числового класса</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>num_vector[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"three"</span>   <span class="co"># конвертирован третий элемент в текстовый</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># вектор стал относиться к текстовому классу</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Частым примером этого является ситуация, когда вы изменяете датафрейм, чтобы напечатать таблицу - если вы создадите строку Итого и попытаетесь вставить/слепить проценты в той же ячейке, что числа (например, <code>23 (40%)</code>), весь числовой столбец над этой ячейкой будет конвертирован в текстовы и больше не сможете проводить с ним математические расчеты.<strong>Иногда вам нужно будет конвертировать объекты или столбцы в другой класс.</strong></p>
<table class="table">
<tbody>
<tr class="odd">
<td><h1 id="функция" data-number="6"><span class="header-section-number">6</span> Функция</h1>
<p><code>as.character()</code></p></td>
<td><h1 id="действие" data-number="7"><span class="header-section-number">7</span> Действие</h1>
<p>Конвертирует в текстовый класс</p></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>as.numeric()</code></td>
<td>Конвертирует в числовой класс</td>
<td></td>
</tr>
<tr class="even">
<td><code>as.integer()</code></td>
<td>Конвертирует в цельночисленный класс</td>
<td></td>
</tr>
<tr class="odd">
<td><code>as.Date()</code></td>
<td>Конвертирует в класс Дата - Примечание: см. раздел <a href="../new_pages/dates.ru.html">даты</a> для информации |</td>
<td></td>
</tr>
<tr class="even">
<td><code>factor()</code></td>
<td>Конвертирует в фактор - Примечание: изменение порядка уровней значений требует дополнительных аргументов</td>
<td></td>
</tr>
</tbody>
</table>
<p>Аналогично, существуют <strong>базовые</strong> функции R, чтобы проверить, относится ли объект к конкретному классу, например, <code>is.numeric()</code>, <code>is.character()</code>, <code>is.double()</code>, <code>is.factor()</code>, <code>is.integer()</code></p>
<p>Здесь представлен <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">дополнительный онлайн материал по классам и структурам данных в R</a>.</p>
<!-- ======================================================= -->
</section>
<section id="столбцыпеременные" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="столбцыпеременные">Столбцы/Переменные (<code>$</code>)</h3>
<p><strong>Столбец в датафрейме технически является “вектором” (см. таблицу выше)</strong> - последовательностью значений, все из которых должны относиться к одному классу (текстовый, числовой, логический и т.п.).</p>
<p>Вектор может существовать независимо от датафрейма, например, вектор названий столбцов, которые вы хотите включать как независимые переменные в модель. Чтобы создать “отдельный” вектор, используйте функцию <code>c()</code>, как показано ниже:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># определение отдельного вектора текстовых значений</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># печать значений данного именованного вектора</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>explanatory_vars</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender" "fever"  "chills" "cough"  "aches"  "vomit" </code></pre>
</div>
</div>
<p><strong>Столбцы датафрейма также являются векторами, их можно называть, ссылаться, извлекать или создавать, используя символ <code>$</code>.</strong> Символ <code>$</code> связывает имя столбца и имя датафрейма. В данном руководстве мы стараемся использовать слово “столбец” вместо “переменная”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Извлечение длины вектора age_years</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(linelist<span class="sc">$</span>age) <span class="co"># (age - столбец в датафрейме linelist)</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Если вы напечатаете название датафрейма, а затем <code>$</code>, вы увидите выпадающий список всех столбцов в датафрейме. Вы можете пролистать его с помощью клавиши стрелка, выбрать нужный пункт с помощью Enter и таким образом вы избежите орфографических ошибок!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Calling_Names.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/Calling_Names.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: darkgreen;"><strong><em>ПРОДВИНУТЫЙ СОВЕТ:</em></strong> Некоторые более сложные объекты (например, спосок или объект <code>epicontacts</code>) могут иметьт несколько уровней, к которым вы можете получить доступ, используя несколько знаков доллара. Например, <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</section>
<section id="доступиндекс-с-помощью-квадратных-скобок" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="доступиндекс-с-помощью-квадратных-скобок">Доступ/индекс с помощью квадратных скобок (<code>[ ]</code>)</h3>
<p>Вам может потребоваться просмотр частей объектов, что также называют “индексирование”, это часто делают с помощью квадратных скобок <code>[ ]</code>. Использование <code>$</code> для датафрема для доступа к столбцу также является типом индексирования.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>)  <span class="co"># определение вектора</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>my_vector[<span class="dv">5</span>]                                  <span class="co"># вывод на печать 5го элемента</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "e"</code></pre>
</div>
</div>
<p>Квадратные скобки также работают, чтобы выдать вам конкретные части выданных выходных данных, например, результат функции <code>summary()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Вся сводная информация</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Только второй элемент сводной информации с названием (используя одноуровневые квадратные скобки)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[<span class="dv">2</span>]</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1st Qu. 
      6 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Только второй элемент сводной информации без названия (используя двойные квадратные скобки)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="dv">2</span>]]</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Извлечь элемент по названию, не показывая название</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="st">"Median"</span>]]</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<p>Квадратные скобки также работают в датафреймах для просмотра конкретных строк и столбцов. Вы можете это сделать с помощью следующего синтаксиса <code>dataframe[rows, columns]</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр конкретной строки (2) из набора данных со всеми столбцами (не забудьте запятую!)</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>,]</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр всех строк, но только одного столбца</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>linelist[, <span class="st">"date_onset"</span>]</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр значений из строки 2 и столбцов с 5 по 10</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр значений из строки 2 и столбцов с 5 по 10 и 18</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">18</span>)] </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр строк со 2 по 20, и конкретных столбцов</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр строк и столбцов по критериям</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Обратите внимание, что необходимо назвать датафрейм в критериях!</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>linelist[linelist<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">25</span> , <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Использование View(), чтобы просмотреть выходные данные в панели RStudio Viewer (просмотр) (так легче читать) </span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Обратите внимание на заглавную букву "V" в функции View()</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="st">"date_onset"</span>])</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Сохранение как нового объекта</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>new_table <span class="ot">&lt;-</span> linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>)] </span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Обратите внимание, что вы можете провести указанное выше индексирование строк/столбцов в датафреймах и таблицах tibble, используя синтаксис <strong>dplyr</strong> (функции <code>filter()</code> для строк и <code>select()</code> для столбцов). Более подробную информацию по этим ключевым функциям вы можете получить на странице <a href="../new_pages/cleaning.ru.html">Вычистка данных и ключевые функции</a>.</p>
<p>Для фильтра на основе “номера строки” вы можете использовать функцию <strong>dplyr</strong> <code>row_number()</code> с открытыми скобками как чатью утверждения для логического фильтра. Часто вы будете использовать оператор <code>%in%</code> и диапазон чисел в качестве логического утверждения, как показано ниже. Чтобы увидеть <em>первые</em> N строк, вы можете использовать специальную функцию <strong>dplyr</strong> <code>head()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр первых 100 строк</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">100</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Показать только строку 5</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Просмотр строк со 2 по 20, а также трех конкретных столбцов (обратите внимание, что не нужны кавычки для названия столбцов)</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date_onset, outcome, age)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>При индексации объекта в классе <strong>list (список)</strong>, однократные скобки всегда выдают класс список, даже если выдан только один объект. Однако можно использовать двойные скобки для доступа к одному элементу и выведения его в другом классе, не как список.<br>
Скобки могут быть также записаны одна за другой, как представлено ниже.</p>
<p>Данное <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">визуальное объяснение индексации списков с перечницами</a> является смешным и полезным.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># определение демо списка</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Первый элемент в списке - текстовый вектор</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hospitals =</span> <span class="fu">c</span>(<span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># второй элемент в списке - датафрейм адресов</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">addresses   =</span> <span class="fu">data.frame</span>(</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> <span class="fu">c</span>(<span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span>),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">city   =</span> <span class="fu">c</span>(<span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Вот так будет выглядеть список при печати в консоли. Обратите внимание на два именованных элемента:</p>
<ul>
<li><code>hospitals</code>, текстовый вектор<br>
</li>
<li><code>addresses</code>, датафрейм адресов</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"

$addresses
           street     city
1 145 Medical Way  Andover
2  1048 Brown Ave Hamilton
3   999 El Camino  El Paso</code></pre>
</div>
</div>
<p>Теперь мы проведем извлечение разными методами:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">1</span>] <span class="co"># выдает элемент класса "list" (список) - название элемента все еще отображается</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]] <span class="co"># выдает только текстовый вектор (без названия)</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"hospitals"</span>]] <span class="co"># вы можете также провести индексирование по названию элемента списка</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]][<span class="dv">3</span>] <span class="co"># выдает третий элемент текстового вектора "hospitals"</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]][<span class="dv">1</span>] <span class="co"># выдает первый столбец ("street") датафрейма адресов</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           street
1 145 Medical Way
2  1048 Brown Ave
3   999 El Camino</code></pre>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="удаление-объектов" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="удаление-объектов">Удаление объектов</h3>
<p>Вы можете удалять отдельные объекты из вашей рабочей среды R, написав название в скобках в функции <code>rm()</code> (без кавычек):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(object_name)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Вы можете удалить все объекты (очистить рабочее пространство), выполнив:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all =</span> <span class="cn">TRUE</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="использование-каналов" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="использование-каналов"><span class="header-section-number">7.1</span> Использование каналов (<code>%&gt;%</code>)</h2>
<p><strong>Два общих подхода к работе с объектами:</strong></p>
<ol type="1">
<li><strong>Каналы/tidyverse</strong> - каналы передают объект из функции в функцию - фокус на <em>действии</em>, а не на объекте<br>
</li>
<li><strong>Определение промежуточных объектов</strong> - объект постоянно переопределяется - фокус на объекте</li>
</ol>
<!-- ======================================================= -->
<section id="каналы" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="каналы"><strong>Каналы</strong></h3>
<p><strong>Если объяснять простыми словами, оператор канала (<code>%&gt;%</code>) передает промежуточные выходные данные из одной функции в другую.</strong><br>
Представьте, что это как написать слово “затем”. Многие функции могут быть связаны между собой с помощью <code>%&gt;%</code>.</p>
<ul>
<li><strong>Передача по каналу подчеркивает порядок действий, а не объект, с которым производятся действия</strong><br>
</li>
<li>Каналы лучше всего использовать, когда с одним объектом необходимо провести последовательные действия<br>
</li>
<li>Каналы взяты из пакета <strong>magrittr</strong>, который автоматически включен в пакеты <strong>dplyr</strong> и <strong>tidyverse</strong></li>
<li>Каналы делают код чище и более удобно читаемым и интуитивно понятным</li>
</ul>
<p>Более детально об этом подходе можно почитать в <a href="https://style.tidyverse.org/pipes.html">руководстве по стилю</a> tidyverse</p>
<p>Рассмотрим выдуманный пример для сравнения, используя выдуманные функции “выпечки пирога”. Сначала используем метод каналов:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Выдуманный пример того, как испечь пирог, используя синтаксис каналов</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> flour <span class="sc">%&gt;%</span>       <span class="co"># чтобы определить пирог, начинаем с муки, затем...</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(eggs) <span class="sc">%&gt;%</span>   <span class="co"># добавляем яйца</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(oil) <span class="sc">%&gt;%</span>    <span class="co"># добавляем масло</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(water) <span class="sc">%&gt;%</span>  <span class="co"># добавляем воду</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mix_together</span>(         <span class="co"># смешиваем</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">utensil =</span> spoon,</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">degrees =</span> <span class="dv">350</span>,   <span class="co"># выпекаем</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">system =</span> <span class="st">"fahrenheit"</span>,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">minutes =</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">let_cool</span>()            <span class="co"># даем остыть</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Вот еще одна <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremely%20useful,code%20and%20combine%20multiple%20operations">ссылка</a>, которая описывает полезность каналов.</p>
<p>Работа с каналами - это не <strong>базовая</strong> функция. Чтобы использовать каналы, необходимо установить и загрузить пакет <strong>magrittr</strong> (как правило, это делается при загрузке пакета <strong>tidyverse</strong> или <strong>dplyr</strong>, в которые он уже включен). Вы можете почитать <a href="https://magrittr.tidyverse.org/">детали об использовании каналов в документации по magrittr</a>.</p>
<p>Обратите внимание, что как и в других командах R, каналы могут использоваться как для вывода результата, так и для сохранения/пересохранения объекта, в зависимости от того, используется ли оператор присваивания <code>&lt;-</code>. См. ниже оба варианта:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Создание или перезапись объекта, определение его как подсчета совокупного количества по возрастной категории (без печати)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>linelist_summary <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Печать таблицы с подсчетом совокупного количества на консоли, но без сохранения</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  age_cat    n
1     0-4 1095
2     5-9 1095
3   10-14  941
4   15-19  743
5   20-29 1073
6   30-49  754
7   50-69   95
8     70+    6
9    &lt;NA&gt;   86</code></pre>
</div>
</div>
<p><strong><code>%&lt;&gt;%</code></strong><br>
Это “оператор присвоения” из пакета <strong>magrittr</strong>, который <em>передает объект по каналу вперед и также переопределяет объект</em>. Он должен быть первым оператором канала в цепочке. Это краткий вариант. Две команды, указанные ниже, являются эквивалентными:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="определение-промежуточных-объектов" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="определение-промежуточных-объектов">Определение промежуточных объектов</h3>
<p>Данный подход к изменению объектов/датафреймов может быть более подходящим, если:</p>
<ul>
<li>Вам нужно работать с несколькими объектами<br>
</li>
<li>Существуют важные промежуточные шаги, которые требуют отдельных названий объектов</li>
</ul>
<p><strong>Риски:</strong></p>
<ul>
<li>Создание новых объектов для каждого шага означает создание большого количества объектов. Вы можете перепутать объекты, не заметив этого!<br>
</li>
<li>Присвоение названий всем объектам может вас запутать<br>
</li>
<li>Может быть сложно заметить ошибки</li>
</ul>
<p>Можно называть каждый промежуточный объект, переписывать изначальный объект, либо комбинировать все функции. Во всех подходах есть свои риски.</p>
<p>Ниже представлен тот же выдуманный пример с “пирогом”, но с использованием другого стиля:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># выдуманный пример выпечки пирога другим методом (определение промежуточных объектов)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>batter_1 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flour, eggs)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>batter_2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_1, oil)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>batter_3 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_2, water)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>batter_4 <span class="ot">&lt;-</span> <span class="fu">mix_together</span>(<span class="at">object =</span> batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">bake</span>(batter_4, <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>)</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(cake)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Объединение всех функций - это будет сложно читать:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># пример объединения/комбинирования нескольких функций - сложно читать</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(<span class="fu">bake</span>(<span class="fu">mix_together</span>(batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>), <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
</section>
<section id="operators" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="operators"><span class="header-section-number">7.2</span> Ключевые операторы и функции</h2>
<p>В данном разделе рассматриваются операторы в R, такие как:</p>
<ul>
<li>Операторы определения<br>
</li>
<li>Операторы отношения (меньше,чем, равно..)<br>
</li>
<li>Логические операторы (и, или…)<br>
</li>
<li>Работа с отсутствующими значениями<br>
</li>
<li>Математические операторы и функции (+/-, &gt;, sum(), median(), …)<br>
</li>
<li>Оператор <code>%in%</code></li>
</ul>
<!-- ======================================================= -->
<section id="операторы-присвоения" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="операторы-присвоения">Операторы присвоения</h3>
<p><strong><code>&lt;-</code></strong></p>
<p>Базовый оператор присвоения в R - это <code>&lt;-</code>. Например, <code>object_name &lt;- value</code>.<br>
Этот оператор+ присвоения можно также записать как <code>=</code>. Мы советуем для R использовать <code>&lt;-</code>.<br>
Мы также советуем до и по=сле таких операторов ставить пробелы для улучшения читаемости.</p>
<p><strong><code>&lt;&lt;-</code></strong></p>
<p><a href="../new_pages/writing_functions.ru.html">Написание функций</a> или использование R интерактивным образом со скриптами с источниками может потребовать использования следующего оператора присвоения <code>&lt;&lt;-</code> (из <strong>базового</strong> R). Данный оператор используется, чтобы определить объект в более высокой ‘родительской’ среде R. См. <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">онлайн материал</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>Это “оператор присвоения” из пакета <strong>magrittr</strong>, который передает объект вперед и <em>также переопределяет объект</em>. Он должен быть первым оператором канала в цепочке. Это краткая записаь, как показано ниже в двух равнозначных примерах:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Пример выше эквивалентен следующему примеру:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>Этот оператор используется для добавления данных в филогенетические деревья в пакете <strong>ggtree</strong>. См. страницу <a href="../new_pages/phylogenetic_trees.ru.html">Филогенетические деревья</a> или данный онлайн <a href="https://yulab-smu.top/treedata-book/">справочник</a>.</p>
<!-- ======================================================= -->
</section>
<section id="операторы-отношения-и-логические-операторы" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="операторы-отношения-и-логические-операторы">Операторы отношения и логические операторы</h3>
<p>Операторы отношения сравнивают значения и часто используются при определении новых переменных и поднаборов данных. Ниже приведены часто используемые операторы отношений в R:</p>
<table class="table">
<tbody>
<tr class="odd">
<td>Значение | Оператор | Пример ==========================+============+============== Равно | <code>==</code> | <code>"A" == "a"</code></td>
<td></td>
<td></td>
<td>Пример результата | ========================================================================================================================================================+ <code>FALSE</code> (поскольку R чувствителен к регистру) <em>Обратите внимание, что == (двойное равно) отличается от = (одинарного равно), которое работает как оператор присвоения <code>&lt;-</code></em> |</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Не равно</td>
<td><code>!=</code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Больше, чем</td>
<td><code>&gt;</code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Меньше, чем</td>
<td><code>&lt;</code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Больше или равно</td>
<td><code>&gt;=</code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Меньше или равно</td>
<td><code>&lt;=</code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
<td></td>
</tr>
<tr class="even">
<td>Значение отсутствует</td>
<td><code>is.na()</code></td>
<td><code>is.na(7)</code></td>
<td><code>FALSE</code> (см. страницу <a href="../new_pages/missing_data.ru.html">Отсутствующие данные</a>)</td>
<td></td>
</tr>
<tr class="odd">
<td>Значение не отсутствует</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>Логические операторы, такие как И и ИЛИ, часто используются для связи операторов отношения и создания более сложных критериев. Сложные утверждения могут потребовать скобок ( ) для группирования и определения порядка применения.</p>
<table class="table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Значение</th>
<th>Оператор</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>И</td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td>ИЛИ</td>
<td><code>|</code> (вертикальная черта)</td>
</tr>
<tr class="odd">
<td>Скобки</td>
<td><code>( )</code> Для группировки критериев и уточнения порядка операций</td>
</tr>
</tbody>
</table>
<p>Например, ниже у нас есть построчный список с двумя переменными, которые мы хотим использовать для создания определения случая, <code>hep_e_rdt</code>, результат теста и <code>other_cases_in_hh</code>, которая скажет нам, есть ли другие случаи в домохозяйстве. Команда ниже использует функцию <code>case_when()</code>, чтобы создать новую переменную <code>case_def</code>, чтобы:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>linelist_cleaned <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">case_def =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(rdt_result) <span class="sc">&amp;</span> <span class="fu">is.na</span>(other_case_in_home)            <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">==</span> <span class="st">"Positive"</span>                                 <span class="sc">~</span> <span class="st">"Confirmed"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">!=</span> <span class="st">"Positive"</span> <span class="sc">&amp;</span> other_cases_in_home <span class="sc">==</span> <span class="st">"Yes"</span>  <span class="sc">~</span> <span class="st">"Probable"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                                     <span class="sc">~</span> <span class="st">"Suspected"</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 68%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Критерии в примере выше</th>
<th>Результат в новой переменной “case_def”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если значения переменной <code>rdt_result</code> и <code>other_cases_in_home</code> отсутствуют</td>
<td><code>NA</code> (отсутствует)</td>
</tr>
<tr class="even">
<td>Если значение в <code>rdt_result</code> “Positive” (положительный)</td>
<td>“Confirmed” (подтвержденный)</td>
</tr>
<tr class="odd">
<td>Если значение в <code>rdt_result</code> НЕ “Positive” И значение в <code>other_cases_in_home</code> “Yes” (да)</td>
<td>“Probable” (вероятный)</td>
</tr>
<tr class="even">
<td>Если один из указанных выше критериев не выполнен</td>
<td>“Suspected” (подозрительный)</td>
</tr>
</tbody>
</table>
<p><em>Обратите внимание, что R чувствителен к регистру, так что “Positive” отличается от “positive”…</em></p>
<!-- ======================================================= -->
</section>
<section id="отсутствующие-значения" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="отсутствующие-значения">Отсутствующие значения</h3>
<p>В R отсутствующие значения представлены особым значением <code>NA</code> (“зарезервированное” значение) (заглавные буквы N и A - без кавычек). Если вы импортируете данные, которые кодируют отсутствующие значения иным образом (например, 99, “Missing”, или .), вам, возможно, нужно перекодировать эти значения в <code>NA</code>. То, как это делать, рассмотрено на странице <a href="../new_pages/importing.ru.html">Импорт и экспорт</a>.</p>
<p><strong>To test whether a value is <code>NA</code>, use the special function <code>is.na()</code></strong>, which returns <code>TRUE</code> or <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>rdt_result <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span>)   <span class="co"># два положительных случая, один подозрительный и один неизвестный</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(rdt_result)  <span class="co"># Тестирует, является ли значение rdt_result NA</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>Более подробно почитать об отсутствующих, бесконечных, <code>NULL</code> и невозможных значениях можно на странице [Отсутствующие данные]. Узнайте, как конвертировать отсутствующие значения при импорте данных на странице <a href="../new_pages/importing.ru.html">Импорт и экспорт</a>.</p>
<!-- ======================================================= -->
</section>
<section id="математика-и-статистика" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="математика-и-статистика">Математика и статистика</h3>
<p>Все операторы и функции на этой странице автоматически доступны в <strong>базовом</strong> R.</p>
<section id="математические-операторы" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="математические-операторы">Математические операторы</h4>
<p>Их часто использует для сложения, деления, создания новых столбцов и т.п. Ниже представлены часто используемые математические операторы в R. Наличие пробелов перед и после операторов не имеет значения.</p>
<table class="table">
<thead>
<tr class="header">
<th>Цель</th>
<th>Пример в R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>сложение</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>вычитание</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>умножение</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>деление</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>возведение в степень</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>порядок операций</td>
<td>( )</td>
</tr>
</tbody>
</table>
</section>
<section id="математические-функции" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="математические-функции">Математические функции</h4>
<table class="table">
<thead>
<tr class="header">
<th>Цель</th>
<th>Функция</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>округление</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>округление</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>округление большее</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>округление меньшее</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>абсолютное значение</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>квадратный корень</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>экспонента</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>натур.логарифм</td>
<td>log(x)</td>
</tr>
<tr class="odd">
<td>log по основанию 10</td>
<td>log10(x)</td>
</tr>
<tr class="even">
<td>log по основанию 2</td>
<td>log2(x)</td>
</tr>
</tbody>
</table>
<p>Примечание: для <code>round()</code> параметр <code>digits =</code> указывает количество знаков после запятой. Используйте <code>signif()</code> для округления чисел до значимой цифры.</p>
</section>
<section id="научная-запись" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="научная-запись">Научная запись</h4>
<p>Вероятность использования научной записи зависит от значения опции <code>scipen</code>.</p>
<p>Из документации по <code>?options</code>: scipen - штраф, который применяется при принятии решений о выводе числовых значений в фиксированной или научной записи. Положительные значения склоняются к фиксированной записи, а отрицательные - к научной записи: фиксированная запись будет предпочтительной, кроме случаев, когда она шире, чем количество знаков ‘scipen’.</p>
<p>Если опция установлена на маленькое число (например, 0), она будет “включена” всегда. Чтобы “отключить” научную запись в сессии R, установите параметр на очень большое число, например:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># выключение научной записи</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="округление" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="округление">Округление</h4>
<p><span style="color: red;"><strong><em>ВНИМАНИЕ:</em></strong> <code>round()</code> использует “банковское округление”, которое округляет в большую сторону от .5 только, если большее число четное. Используйте <code>round_half_up()</code> из пакета <strong>janitor</strong> для последовательного округления половин до ближайшего полного числа. См. <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">данное объяснение</a></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># используйте подходящую для вашей работы функцию округления</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">round_half_up</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</section>
<section id="статистические-функции" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="статистические-функции">Статистические функции</h4>
<p><span style="color: orange;"><strong><em>ВНИМАНИЕ:</em></strong> Функции ниже по умолчанию будут включать отсутствующие значения в расчеты. Отсутствующие значения приведут к выводу <code>NA</code>, кроме случаев, когда уточнен аргумент <code>na.rm = TRUE</code>. Это можно кратко записать как <code>na.rm = T</code>.</span></p>
<table class="table">
<thead>
<tr class="header">
<th>Задача</th>
<th>Функция</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>среднее</td>
<td>mean(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>медиана</td>
<td>median(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>стандартное отклонение</td>
<td>sd(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>квантили*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>сумма</td>
<td>sum(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>минимальное значение</td>
<td>min(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>максимальное значение</td>
<td>max(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>диапазон числов.значений</td>
<td>range(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>сводные данные**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table>
<p>Примечание:</p>
<ul>
<li><code>*quantile()</code>: <code>x</code> - это числовой вектор для рассмотрения, а <code>probs =</code> это числовой вектор с вероятностями от 0 до 1.0, например, <code>c(0.5, 0.8, 0.85)</code></li>
<li><code>**summary()</code>: дает сводную информацию о числовом векторе, включая среднее значение, медиану и частые процентили</li>
</ul>
<p><span style="color: red;"><strong><em>ВНИМАНИЕ:</em></strong> При указании вектора чисел для одной из указанных выше функций, не забудьте обернуть числа в <code>c()</code> .</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Если вы даете сырые числа функции, оберните их в c()</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)    <span class="co"># !!! НЕПРАВИЛЬНО !!!  </span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)) <span class="co"># ПРАВИЛЬНО</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.666667</code></pre>
</div>
</div>
</section>
<section id="другие-полезные-функции" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="другие-полезные-функции">Другие полезные функции</h4>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 20%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Задача</th>
<th>Функция</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Создание последовательности</td>
<td>seq(from, to, by)</td>
<td><code>seq(1, 10, 2)</code></td>
</tr>
<tr class="even">
<td>повторить x, n раз</td>
<td>rep(x, ntimes)</td>
<td><code>rep(1:3, 2)</code> or <code>rep(c("a", "b", "c"), 3)</code></td>
</tr>
<tr class="odd">
<td>разделить числовой вектор</td>
<td>cut(x, n)</td>
<td><code>cut(linelist$age, 5)</code></td>
</tr>
<tr class="even">
<td>взять случайную выборку</td>
<td>sample(x, size)</td>
<td><code>sample(linelist$id, size = 5, replace = TRUE)</code></td>
</tr>
</tbody>
</table>
<!-- ======================================================= -->
</section>
</section>
<section id="in" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="in"><code>%in%</code></h3>
<p>Очень полезный оператор для сопоставления значений и быстрой оценки того, относится ли значение к вектору или датафрейму.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Чтобы спросить, если значение <strong>не является</strong> <code>%in%</code> вектором, поставьте восклицательный знак (!) <strong>перед</strong> логическим утверждением:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># для отрицания, поставьте перед утверждением восклицательный знак</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><code>%in%</code> полезен при использовании функции <code>case_when()</code> пакета <strong>dplyr</strong>. Вы можеет определить заранее вектор, затем ссылаться на него. Например:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">child_hospitaled =</span> <span class="fu">case_when</span>(</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    hospitalized <span class="sc">%in%</span> affirmative <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Hospitalized Child"</span>,</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                      <span class="sc">~</span> <span class="st">"Not"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Примечание: Если вы хотите обнаружить частичную последовательность, например, используя функцию <code>str_detect()</code> из <strong>stringr</strong>, она не примет текстовый вектор, как <code>c("1", "Yes", "yes", "y")</code>. Вместо этого ей нужно задать <em>обычное выражение</em> - сжатую последовательность с черточками ИЛИ, например, “1|Yes|yes|y”. Например, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. См. страницу <a href="../new_pages/characters_strings.ru.html">Текст и последовательности</a> для получения дополнительной информации.</p>
<p>Мы можете конвертировать текстовый вектор в именованное обычное выражение с помощью следующей команды:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>affirmative</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># сжать до </span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">paste0</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)  <span class="co"># вариант с базовым R</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">str_c</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)   <span class="co"># вариант с пакетом stringr</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>affirmative_str_search</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
</div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="ошибки-и-предупреждения" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="ошибки-и-предупреждения"><span class="header-section-number">7.3</span> Ошибки и предупреждения</h2>
<p>Этот раздел объясняет:</p>
<ul>
<li>Разницу между ошибками и предупреждениями<br>
</li>
<li>Общие советы по синтаксису для написания кода R<br>
</li>
<li>Помощь в коде</li>
</ul>
<p>Частые ошибки и предупреждения, а также советы по выявлению и решению проблем можно найти на странице <a href="../new_pages/errors.ru.html">Ошибки и справка</a>.</p>
<!-- ======================================================= -->
<section id="ошибки-и-предупреждения-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ошибки-и-предупреждения-1">Ошибки и предупреждения</h3>
<p>При выполнении команды на консоли R могут появиться сообщения о предупреждениях или ошибках красным текстом.</p>
<ul>
<li><p><strong>Предупреждение</strong> означает, что R выполнил вашу команду, но системе пришлось предпринимать дополнительные шаги или она дала неожиданные выходные данные, о котором вам нужно знать.</p></li>
<li><p><strong>Ошибка</strong> означает, что R не смог завершить выполнение вашей команды.</p></li>
</ul>
<p>Ищите подсказки:</p>
<ul>
<li><p>Сообщение об ошибке/предупреждении часто будет включать номер строки, в которой обнаружена проблема.</p></li>
<li><p>Если объект “is unknown” (неизвестен) или “not found” (не найден), возможно, вы допустили орфографическую ошибку, забыли вызвать пакет из библиотеки library(), либо забыли повторно выполнить скрипт после внесения изменений.</p></li>
</ul>
<p>Если ничего не помогает, скопируйте сообщение об ошибке в Google вместе с ключевыми словами - возможно, кто-то уже решил эту проблему!</p>
<!-- ======================================================= -->
</section>
<section id="общие-советы-по-синтаксису" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="общие-советы-по-синтаксису">Общие советы по синтаксису</h3>
<p>Несколько пунктов, которые нужно запомнить при написании команд в R, чтобы избежать ошибок и предупреждений:</p>
<ul>
<li>Всегда закрывайте скобки - совет: посчитайте количество открывающих “(” и закрывающих скобок “)” для каждого блока кода</li>
<li>Избегайте пробелов в названиях столбцов и объектов. Вместо этого используйте нижнее подчеркивание ( _ ) или точки ( . )</li>
<li>Отслеживайте и помните, что нужно отделять аргументы функций запятыми</li>
<li>R чувствителен к регистру, значит, <code>Variable_A</code> <em>отличается</em> от <code>variable_A</code></li>
</ul>
<!-- ======================================================= -->
</section>
<section id="помощь-в-коде" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="помощь-в-коде">Помощь в коде</h3>
<p>Любой скрипт (RMarkdown или другой) будет давать подсказки, если вы допустили ошибку. Например, если вы забыли написать запятую там, где она нужна, либо закрыть скобку, RStudio поставит флажок на этой строке скрипта, чтобы вас предупредить.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Скопировано");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Скопировано");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/data_used.ru.html" class="pagination-link" aria-label="Скачивание руководства и данных">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Скачивание руководства и данных</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/transition_to_R.ru.html" class="pagination-link" aria-label="Переход к R">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Переход к R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"loop":false,"selector":".lightbox","descPosition":"bottom","openEffect":"zoom","closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>