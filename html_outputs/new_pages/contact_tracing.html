<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Epidemiologist R Handbook - 25&nbsp; Contact tracing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/survey_analysis.html" rel="next">
<link href="../new_pages/epidemic_models.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"dark",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'G-QXDW878QLX');

</script>



</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">

  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>

  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"

    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"

    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"

    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"

    class="alert-link">R Help Desk service</a>. -->

</div>



<script>



  // Function to extract the last two characters from the URL path

  function getLanguageFromURL() {

    const path = window.location.pathname.split('/');

    

    if (path.length > 1) {

      return path[1]; // Assume the language code is the second segment

    }



    return '';

  }



  const language = getLanguageFromURL();

  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru', 'en'];

  const defaultLanguage = 'en';

  const isSupportedLanguage = supportedLanguages.includes(language);



  // Translations for the content

  const translations = {

    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',

    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',

    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',

    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',

    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',

    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',

    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',

    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'

  };



  // Default to English if the detected language is not supported

  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];





  // Select the element where the content should be displayed

  const alertElement = document.querySelector('.alert');

  if (alertElement) {

    alertElement.innerHTML = contentToDisplay;

    alertElement.style.display = 'block'; // Make sure to display the element

  }



</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">







<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/tables_descriptive.html">Analysis</a></li><li class="breadcrumb-item"><a href="../new_pages/contact_tracing.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contact tracing</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Epidemiologist R Handbook</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_eng" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">About this book</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Editorial and technical notes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Download handbook and data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transition to R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suggested packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Import and export</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Data Management</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Cleaning data and core functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Working with dates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Characters and strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Pivoting data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Grouping data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Joining data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">De-duplication</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Iteration, loops, and lists</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Descriptive tables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Simple statistical tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Univariate and multivariable regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Missing data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Standardised rates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Moving averages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Time series and outbreak detection</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Epidemic modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contact tracing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Survey analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Survival analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">GIS basics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Data Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Tables for presentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">ggplot basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">ggplot tips</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Epidemic curves</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Demographic pyramids and Likert-scales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Heat plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Diagrams and charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Combinations analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Transmission chains</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Phylogenetic trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Interactive plots</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Reports and dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organizing routine reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Dashboards with R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards with Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Miscellaneous</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Writing functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Directory interactions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Version control and collaboration with Git and Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Common errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Getting help</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R on network drives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Data Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preparation" id="toc-preparation" class="nav-link active" data-scroll-target="#preparation"><span class="header-section-number">25.1</span> Preparation</a>
  <ul class="collapse">
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link" data-scroll-target="#load-packages">Load packages</a></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data">Import data</a></li>
  </ul></li>
  <li><a href="#descriptive-analyses" id="toc-descriptive-analyses" class="nav-link" data-scroll-target="#descriptive-analyses"><span class="header-section-number">25.2</span> Descriptive analyses</a>
  <ul class="collapse">
  <li><a href="#demographics" id="toc-demographics" class="nav-link" data-scroll-target="#demographics">Demographics</a></li>
  <li><a href="#contacts-per-case" id="toc-contacts-per-case" class="nav-link" data-scroll-target="#contacts-per-case">Contacts per case</a></li>
  </ul></li>
  <li><a href="#contact-follow-up" id="toc-contact-follow-up" class="nav-link" data-scroll-target="#contact-follow-up"><span class="header-section-number">25.3</span> Contact Follow Up</a>
  <ul class="collapse">
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data cleaning</a></li>
  <li><a href="#plot-over-time" id="toc-plot-over-time" class="nav-link" data-scroll-target="#plot-over-time">Plot over time</a></li>
  <li><a href="#daily-individual-tracking" id="toc-daily-individual-tracking" class="nav-link" data-scroll-target="#daily-individual-tracking">Daily individual tracking</a></li>
  <li><a href="#analyse-by-group" id="toc-analyse-by-group" class="nav-link" data-scroll-target="#analyse-by-group">Analyse by group</a></li>
  </ul></li>
  <li><a href="#kpi-tables" id="toc-kpi-tables" class="nav-link" data-scroll-target="#kpi-tables"><span class="header-section-number">25.4</span> KPI Tables</a></li>
  <li><a href="#transmission-matrices" id="toc-transmission-matrices" class="nav-link" data-scroll-target="#transmission-matrices"><span class="header-section-number">25.5</span> Transmission Matrices</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources"><span class="header-section-number">25.6</span> Resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/tables_descriptive.html">Analysis</a></li><li class="breadcrumb-item"><a href="../new_pages/contact_tracing.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contact tracing</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contact tracing</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This page demonstrates descriptive analysis of contact tracing data, addessing some key considerations and approaches unique to these kinds of data.</p>
<p>This page references many of the core R data management and visualisation competencies covered in other pages (e.g.&nbsp;data cleaning, pivoting, tables, time-series analyses), but we will highlight examples specific to contact tracing that have been useful for operational decision making. For example, this includes visualizing contact tracing follow-up data over time or across geographic areas, or producing clean Key Performance Indicator (KPI) tables for contact tracing supervisors.</p>
<p>For demonstration purposes we will use sample contact tracing data from the <a href="https://www.who.int/tools/godata">Go.Data</a> platform. The principles covered here will apply for contact tracing data from other platforms - you may just need to undergo different data pre-processing steps depending on the structure of your data.</p>
<p>You can read more about the Go.Data project on the <a href="https://worldhealthorganization.github.io/godata/">Github Documentation site</a> or <a href="https://community-godata.who.int/">Community of Practice</a>.</p>
<section id="preparation" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="preparation"><span class="header-section-number">25.1</span> Preparation</h2>
<section id="load-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="load-packages">Load packages</h3>
<p>This code chunk shows the loading of packages required for the analyses. In this handbook we emphasize <code>p_load()</code> from <strong>pacman</strong>, which installs the package if necessary <em>and</em> loads it for use. You can also load installed packages with <code>library()</code> from <strong>base</strong> R. See the page on <a href="../new_pages/basics.html">R basics</a> for more information on R packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  rio,          <span class="co"># importing data  </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  here,         <span class="co"># relative file pathways  </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  janitor,      <span class="co"># data cleaning and tables</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  lubridate,    <span class="co"># working with dates</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  epikit,       <span class="co"># age_categories() function</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  apyramid,     <span class="co"># age pyramids</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  tidyverse,    <span class="co"># data manipulation and visualization</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  RColorBrewer, <span class="co"># color palettes</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  formattable,  <span class="co"># fancy tables</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  kableExtra    <span class="co"># table formatting</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-data" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="import-data">Import data</h3>
<p>We will import sample datasets of contacts, and of their “follow-up”. These data have been retrieved and un-nested from the Go.Data API and stored as “.rds” files.</p>
<p>You can download all the example data for this handbook from the <a href="../new_pages/data_used.html">Download handbook and data</a> page.</p>
<p>If you want to download the example contact tracing data specific to this page, use the three download links below:</p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/cases_clean.rds?raw=true" class="download-button"> Click to download <span>the case investigation data (.rds file)</span> </a></p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/contacts_clean.rds?raw=true" class="download-button"> Click to download <span>the contact registration data (.rds file)</span> </a></p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/followups_clean.rds?raw=true" class="download-button"> Click to download <span>the contact follow-up data (.rds file)</span> </a></p>
<!-- ```{r out.width = "100%", fig.align = "center", echo=F} -->
<!-- knitr::include_graphics(here::here("images", "godata_api_github.png")) -->
<!-- ``` -->
<p>In their original form in the downloadable files, the data reflect data as provided by the Go.Data API (learn about <a href="importing.html#import_api">APIs here</a>). For example purposes here, we will clean the data to make it easier to read on this page. If you are using a Go.Data instance, you can view complete instructions on how to retrieve your data <a href="https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting">here</a>.</p>
<p>Below, the datasets are imported using the <code>import()</code> function from the <strong>rio</strong> package. See the page on <a href="../new_pages/importing.html">Import and export</a> for various ways to import data. We use <code>here()</code> to specify the file path - you should provide the file path specific to your computer. We then use <code>select()</code> to select only certain columns of the data, to simplify for purposes of demonstration.</p>
<section id="case-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="case-data">Case data</h4>
<p>These data are a table of the cases, and information about them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cases <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"cases_clean.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(case_id, firstName, lastName, gender, age, age_class,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         occupation, classification, was_contact, hospitalization_typeid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `trust` argument of `import()` should be explicit for serialization formats
as of rio 1.0.3.
ℹ Missing `trust` will be set to FALSE by default for RDS in 2.0.0.
ℹ The deprecated feature was likely used in the rio package.
  Please report the issue at &lt;https://github.com/gesistsa/rio/issues&gt;.</code></pre>
</div>
</div>
<p>Here are the <code>nrow(cases)</code> cases:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-387d26b4c6b3906951ce" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-387d26b4c6b3906951ce">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0029","CASE-2020-0026","CASE-2020-0017","CASE-2020-0043","CASE-2020-0044","CASE-2020-0036","CASE-2020-0037","CASE-2020-0006","CASE-2020-0045","CASE-2020-0046","CASE-2020-0034","CASE-2020-0031","CASE-2020-0028","CASE-2020-0010","CASE-2020-0018","CASE-2020-0038","CASE-2020-0007","CASE-2020-0023","CONTACT-2020-0024","CASE-2020-0002","CASE-2020-0002","CASE-2020-0020","CASE-2020-0027","CASE-2020-0015","CASE-2020-0035","CASE-2020-0019","CASE-2020-0019",null,"CASE-2020-0040","CASE-2020-0004","CASE-2020-0014","CASE-2020-0009","CASE-2020-0009","CONTACT-2020-0002","CASE-2020-0039","CASE-2020-0025","CASE-2020-0022","CASE-2020-0008",null,"CASE-2020-0011","CASE-2020-0012","CASE-2020-0016","CASE-2020-0013","CASE-2020-0033","CASE-2020-0030","CASE-2020-0032","CASE-2020-0003",null,"CASE-2020-0024","CASE-2020-0005","CASE-2020-0021",null,null,null,"CASE-2020-0001",null],["Abdoulaye","Adama","Adama","Adama","Adji","Aida","Aissatou","Alassane","Alfa","Alfa","Alioune","Alioune","Amadou","Amy","Assane","Awa","Bassirou","Bineta","Birima","Charles","Charles","Demba","Edouard","Fatima","Fatou","Fatoumata","Fatoumata","Giovanna ","Ibrahima","Jean-Paul","Joseph","Khady","Khady","Malang","Mamadou","Mamoudou","Mariama","Mhustapha","Modified Case","Moussa","Odette","Odette","Omar","Ousmane","Ousseynou","Pape","Samba","Samba","Seynabou","Souleymane","Boubacar","Sara","Larry","Elisabeth","Elisabeth","Charles"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Diallo","Garcia","Hinkle","Hopkins","Hopkins","Williams"],["MALE","FEMALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE",null,"MALE","MALE","MALE","FEMALE","FEMALE","FEMALE",null,null,"MALE","MALE","MALE","FEMALE",null,"FEMALE","MALE","MALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","MALE"],[46,61,8,null,25,40,80,47,34,34,20,20,45,37,25,57,75,43,3,43,52,43,38,38,35,45,61,null,23,43,54,57,52,54,0.9166666666666666,63,51,7,null,31,80,80,52,5,52,31,58,45,56,23,46,55,34,43,49,43],["40-49","60-64","5-9","unknown","20-29","40-49","80+","40-49","30-39","30-39","20-29","20-29","40-49","30-39","20-29","50-59","75-79","40-49","0-4","40-49","50-59","40-49","30-39","30-39","30-39","40-49","60-64","unknown","20-29","40-49","50-59","50-59","50-59","50-59","0-4","60-64","50-59","5-9","unknown","30-39","80+","80+","50-59","5-9","50-59","30-39","50-59","40-49","50-59","20-29","40-49","50-59","30-39","40-49","40-49","40-49"],["WORKING_WITH_ANIMALS","FARMER","CHILD","HEALTH_CARE_WORKER",null,"WORKING_WITH_ANIMALS","FARMER","HEALTH_CARE_WORKER","BUTCHER","BUTCHER","STUDENT","STUDENT","HEALTH_CARE_WORKER","TEACHER","STUDENT","OTHER","OTHER","HEALTH_CARE_WORKER",null,"HEALTH_CARE_WORKER","FARMER","HEALTH_CARE_WORKER","OTHER","WORKING_WITH_ANIMALS","HEALTH_CARE_WORKER","TRADITIONAL_HEALER","FARMER",null,"STUDENT","HEALTH_CARE_WORKER","FARMER","OTHER","FARMER","FARMER","CHILD","FARMER","OTHER","CHILD",null,"OTHER","FARMER","FARMER","FARMER","CHILD","FARMER","OTHER","TRADITIONAL_HEALER","WORKING_WITH_ANIMALS","WORKING_WITH_ANIMALS","STUDENT","WORKING_WITH_ANIMALS","FARMER","HEALTH_CARE_WORKER","HEALTH_CARE_WORKER","FARMER","HEALTH_CARE_WORKER"],["CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","SUSPECT","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","SUSPECT","PROBABLE","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","SUSPECT","SUSPECT","NOT_A_CASE_DISCARDED","SUSPECT","PROBABLE","CONFIRMED","PROBABLE","PROBABLE","PROBABLE","CONFIRMED","PROBABLE","SUSPECT","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE"],[false,false,false,true,true,false,false,false,true,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],["HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,"HOSPITALIZATION","HOSPITALIZATION",null,null,null,null,"HOSPITALIZATION",null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>classification<\/th>\n      <th>was_contact<\/th>\n      <th>hospitalization_typeid<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":4},{"name":"case_id","targets":0},{"name":"firstName","targets":1},{"name":"lastName","targets":2},{"name":"gender","targets":3},{"name":"age","targets":4},{"name":"age_class","targets":5},{"name":"occupation","targets":6},{"name":"classification","targets":7},{"name":"was_contact","targets":8},{"name":"hospitalization_typeid","targets":9}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="contacts-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="contacts-data">Contacts data</h4>
<p>These data are a table of all the contacts and information about them. Again, provide your own file path. After importing we perform a few preliminary data cleaning steps including:</p>
<ul>
<li>Set age_class as a factor and reverse the level order so that younger ages are first<br>
</li>
<li>Select only certain column, while re-naming a one of them<br>
</li>
<li>Artificially assign rows with missing admin level 2 to “Djembe”, to improve clarity of some example visualisations</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>contacts <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"contacts_clean.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_class =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(age_class)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(contact_id, contact_status, firstName, lastName, gender, age,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         age_class, occupation, date_of_reporting, date_of_data_entry,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">date_of_last_exposure =</span> date_of_last_contact,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         date_of_followup_start, date_of_followup_end, risk_level, was_case, admin_2_name) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">admin_2_name =</span> <span class="fu">replace_na</span>(admin_2_name, <span class="st">"Djembe"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here are the <code>nrow(contacts)</code> rows of the <code>contacts</code> dataset:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ccd1129aebeb99453feb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ccd1129aebeb99453feb">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0046","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0030","CONTACT-2020-0060","CONTACT-2020-0021","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0058","CONTACT-2020-0011","CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0055","CONTACT-2020-0036","CONTACT-2020-0032","CONTACT-2020-0019","CONTACT-2020-0025","CONTACT-2020-0040","CONTACT-2020-0045","CONTACT-2020-0004","CONTACT-2020-0020","CONTACT-2020-0016","CONTACT-2020-0031","CONTACT-2020-0014","CONTACT-2020-0037","CONTACT-2020-0007","CONTACT-2020-0051","CONTACT-2020-0008","CONTACT-2020-0048","CONTACT-2020-0038","CONTACT-2020-0010","CONTACT-2020-0006","CONTACT-2020-0034","CONTACT-2020-0052","CONTACT-2020-0044","CONTACT-2020-0009","CONTACT-2020-0047","CONTACT-2020-0022","CONTACT-2020-0013","CONTACT-2020-0023","CONTACT-2020-0041","CONTACT-2020-0028","CONTACT-2020-0017","CONTACT-2020-0027","CONTACT-2020-0035","CONTACT-2020-0026","CONTACT-2020-0033","CONTACT-2020-0050","CONTACT-2020-0057","CONTACT-2020-0018","CONTACT-2020-0049","CONTACT-2020-0039",null,null,"CASE-2020-0043","CASE-2020-0044","CASE-2020-0045","CASE-2020-0046","CONTACT-2020-0024","CONTACT-2020-0002"],["UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","DIED","FOLLOW_UP_COMPLETED","DIED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE"],["Abou","Adama","Adja","Alfa","Alimatou","Amath","Aminata","Binette","Binta","Bintou","Birima","Birima","Bransan  ","Cheik","Cheik","Cheik","Coura","Dicory","Djeynaba","Djiby","El Hadj","Kalidou","Khadija","Khary","Khary","Khary","Khary","Lamine","Lat","Madia","Maguette","Maguette","Maguette","Malamine","Malamine","Malamine","Malang","Malang","Malang","Mayatta","Mbagnick","Modou","Ndiankou","Ndiaya","Ndiogou","Oulimata","Oumou","Papis","Racine","Sadibou","Sofiatou","Thione","Thiony","Waly","Wasis","Yacouba","Youssouf","Abba","Mayatta","Jelani","Adama","Adji","Alfa","Alfa","Birima","Malang"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Abebe","Obi","Onai",null,null,null,null,null,null],["MALE","MALE","MALE","FEMALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","MALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE"],[81,56,47,34,8,54,36,34,32,97,3,3,23,12,12,12,null,15,54,45,21,20,4,21,32,32,32,12,23,34,9,29,9,63,7,7,54,54,54,null,null,18,67,32,56,23,34,null,35,15,null,45,5,56,2,78,null,17,null,24,null,25,34,34,3,54],["80+","50-59","40-49","30-39","5-9","50-59","30-39","30-39","30-39","80+","0-4","0-4","20-29","10-14","10-14","10-14","unknown","15-19","50-59","40-49","20-29","20-29","0-4","20-29","30-39","30-39","30-39","10-14","20-29","30-39","5-9","20-29","5-9","60-64","5-9","5-9","50-59","50-59","50-59","unknown","unknown","15-19","65-69","30-39","50-59","20-29","30-39","unknown","30-39","15-19","unknown","40-49","5-9","50-59","0-4","75-79","unknown","15-19","unknown","20-29","unknown","20-29","30-39","30-39","0-4","50-59"],[null,null,null,null,null,null,null,null,null,null,"CHILD",null,null,null,"CHILD","CHILD",null,null,null,null,null,null,null,null,null,"FARMER",null,null,null,null,null,"OTHER",null,"FARMER",null,null,null,"FARMER",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"HEALTH_CARE_WORKER","STUDENT","HEALTH_CARE_WORKER",null,"BUTCHER","BUTCHER",null,"FARMER"],["2020-04-15","2020-04-16","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-01","2020-05-25","2020-04-15","2020-05-25","2020-03-22","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-09-02","2020-09-03","2020-07-08","2020-07-11","2020-07-16","2020-07-07","2020-04-15","2020-03-22"],["2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-09-03","2020-09-04","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08"],["2020-06-22","2020-08-13","2020-06-22","2020-06-15","2020-06-17","2020-09-02","2020-05-15","2020-06-16","2020-05-13","2020-06-20","2020-04-28","2020-04-26","2020-06-22","2020-04-26","2020-06-07","2020-06-07","2020-06-17","2020-06-16","2020-06-20","2020-06-19","2020-05-10","2020-06-24","2020-05-08","2020-06-15","2020-06-05","2020-06-07","2020-06-05","2020-06-22","2020-05-10","2020-06-15","2020-06-05","2020-06-07","2020-06-05","2020-04-28","2020-06-06","2020-06-05","2020-04-29","2020-06-07","2020-06-05","2020-06-17","2020-06-17","2020-05-15","2020-06-20","2020-05-10","2020-06-22","2020-05-13","2020-06-22","2020-06-17","2020-06-15","2020-06-24","2020-06-17","2020-06-22","2020-06-22","2020-06-17","2020-06-17","2020-06-15","2020-06-17","2020-06-24","2020-09-02","2020-09-01","2020-05-06","2020-05-10","2020-07-27","2020-05-06","2020-04-26","2020-04-28"],["2020-08-15","2020-08-14","2020-08-14","2020-06-16","2020-06-18","2020-09-03",null,"2020-06-17","2020-05-14","2020-06-21","2020-04-29","2020-04-27","2020-06-23","2020-04-27","2020-06-08","2020-06-08","2020-06-18","2020-06-17","2020-06-21","2020-06-20",null,"2020-06-25",null,"2020-06-16","2020-06-06","2020-06-08","2020-06-06","2020-06-23",null,"2020-06-16","2020-06-06","2020-06-08","2020-06-06",null,"2020-06-08","2020-06-06","2020-04-30","2020-06-08","2020-06-06","2020-06-18","2020-06-18","2020-05-16","2020-06-21","2020-05-11","2020-06-23","2020-05-14","2020-06-23","2020-06-18","2020-06-16","2020-06-25","2020-06-18","2020-06-23","2020-06-23","2020-06-18","2020-06-18","2020-06-16","2020-06-18","2020-06-25","2020-09-03","2020-09-02",null,null,null,null,"2020-06-06",null],["2020-08-28","2020-08-27","2020-08-27","2020-06-29","2020-07-01","2020-09-16",null,"2020-06-30","2020-05-27","2020-07-04","2020-05-12","2020-05-10","2020-07-06","2020-05-10","2020-06-21","2020-06-21","2020-07-01","2020-06-30","2020-07-04","2020-07-03",null,"2020-07-08",null,"2020-06-29","2020-06-19","2020-06-21","2020-06-19","2020-07-06",null,"2020-06-29","2020-06-19","2020-06-21","2020-06-19",null,"2020-06-21","2020-06-19","2020-05-13","2020-06-21","2020-06-19","2020-07-01","2020-07-01","2020-05-29","2020-07-04","2020-05-24","2020-07-06","2020-05-27","2020-07-06","2020-07-01","2020-06-29","2020-07-08","2020-07-01","2020-07-06","2020-07-06","2020-07-01","2020-07-01","2020-06-29","2020-07-01","2020-07-08","2020-09-16","2020-09-15",null,null,null,null,"2020-06-19",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"1_LOW","3_HIGH","1_LOW",null,null,null,null],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,null,null,null,null,null,null],["Djembe","Trumpet","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Congas","Venu","Cornet","Venu","Djembe","Djembe"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>contact_status<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>date_of_reporting<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>date_of_last_exposure<\/th>\n      <th>date_of_followup_start<\/th>\n      <th>date_of_followup_end<\/th>\n      <th>risk_level<\/th>\n      <th>was_case<\/th>\n      <th>admin_2_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":5},{"name":"contact_id","targets":0},{"name":"contact_status","targets":1},{"name":"firstName","targets":2},{"name":"lastName","targets":3},{"name":"gender","targets":4},{"name":"age","targets":5},{"name":"age_class","targets":6},{"name":"occupation","targets":7},{"name":"date_of_reporting","targets":8},{"name":"date_of_data_entry","targets":9},{"name":"date_of_last_exposure","targets":10},{"name":"date_of_followup_start","targets":11},{"name":"date_of_followup_end","targets":12},{"name":"risk_level","targets":13},{"name":"was_case","targets":14},{"name":"admin_2_name","targets":15}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="follow-up-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="follow-up-data">Follow-up data</h4>
<p>These data are records of the “follow-up” interactions with the contacts. Each contact is supposed to have an encounter each day for 14 days after their exposure.</p>
<p>We import and perform a few cleaning steps. We select certain columns, and also convert a character column to all lowercase values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>followups <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"followups_clean.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(contact_id, followup_status, followup_number,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>         date_of_followup, admin_2_name, admin_1_name) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">followup_status =</span> <span class="fu">str_to_lower</span>(followup_status))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here are the first 50 rows of the <code>nrow(followups)</code>-row <code>followups</code> dataset (each row is a follow-up interaction, with outcome status in the <code>followup_status</code> column):</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0b5bc3b3c0f5c4c165b8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0b5bc3b3c0f5c4c165b8">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0012","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0046","CONTACT-2020-0012","CONTACT-2020-0046","CONTACT-2020-0043","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0056","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0058","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0058","CONTACT-2020-0003","CONTACT-2020-0001","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0004","CONTACT-2020-0036","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0014"],["seen_ok","not_attempted","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_not_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_attempted","seen_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_not_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_not_ok","seen_ok"],[7,8,6,9,7,1,2,6,1,2,9,6,8,7,5,9,7,4,6,8,5,4,6,8,7,3,1,2,14,1,7,5,4,5,2,14,14,6,6,4,7,3,5,8,14,2,6,9,7,8],["2020-06-02","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-03","2020-06-05","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-04","2020-06-02","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-04","2020-06-03","2020-06-03","2020-06-01","2020-06-02","2020-06-01","2020-06-03","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-04","2020-06-01","2020-06-01","2020-06-03","2020-06-02","2020-06-03","2020-06-03","2020-06-02","2020-06-04","2020-06-04","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-02","2020-06-03"],["Djembe","Trumpet","Trumpet","Trumpet","Trumpet","Djembe",null,"Djembe",null,"Djembe",null,"Trumpet","Djembe","Trumpet","Trumpet","Djembe",null,"Trumpet",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Drums island","Brass island","Brass island","Brass island","Brass island","Drums island",null,"Drums island",null,"Drums island",null,"Brass island","Drums island","Brass island","Brass island","Drums island",null,"Brass island",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>followup_status<\/th>\n      <th>followup_number<\/th>\n      <th>date_of_followup<\/th>\n      <th>admin_2_name<\/th>\n      <th>admin_1_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"name":"contact_id","targets":0},{"name":"followup_status","targets":1},{"name":"followup_number","targets":2},{"name":"date_of_followup","targets":3},{"name":"admin_2_name","targets":4},{"name":"admin_1_name","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="relationships-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="relationships-data">Relationships data</h4>
<p>Here we import data showing the relationship between cases and contacts. We select certain column to show.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>relationships <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"relationships_clean.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(source_visualid, source_gender, source_age, date_of_last_contact,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         date_of_data_entry, target_visualid, target_gender,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>         target_age, exposure_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Below are the first 50 rows of the <code>relationships</code> dataset, which records all relationships between cases and contacts.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-a0f625d89be85ff43a8c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a0f625d89be85ff43a8c">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0016",null,null,"CASE-2020-0045","CASE-2020-0004","CASE-2020-0010",null,"CASE-2020-0034",null,"CASE-2020-0037","CASE-2020-0005",null,"CASE-2020-0002","CASE-2020-0001","CASE-2020-0005",null,"CASE-2020-0004","CASE-2020-0012","CASE-2020-0022","CASE-2020-0004","CASE-2020-0003","CASE-2020-0001","CASE-2020-0030","CASE-2020-0022","CASE-2020-0010","CASE-2020-0018","CASE-2020-0045","CASE-2020-0030","CASE-2020-0001","CASE-2020-0018","CASE-2020-0008","CASE-2020-0014",null,"CASE-2020-0002","CASE-2020-0030","CASE-2020-0031","CASE-2020-0009","CASE-2020-0031","CASE-2020-0002",null,"CASE-2020-0001","CASE-2020-0001","CASE-2020-0022","CASE-2020-0001","CASE-2020-0012","CASE-2020-0023","CASE-2020-0016","CASE-2020-0001",null,"CASE-2020-0023"],["Female",null,null,"Female","Male","Female",null,"Male",null,"Female","Male",null,"Male","Female","Male",null,"Male","Female","Female","Male","Male","Female","Male","Female","Female","Male","Female","Male","Female","Male","Male","Male",null,"Male","Male","Male","Female","Male","Male",null,"Female","Female","Female","Female","Female","Female","Female","Female","Female","Female"],[80,null,null,34,43,37,null,20,null,80,23,0,52,49,23,null,43,80,51,43,58,49,52,51,37,25,34,52,49,25,7,54,null,52,52,20,57,20,52,null,49,49,51,49,80,43,80,49,43,43],["2020-06-24","2020-05-02","2020-06-15","2020-07-27","2020-06-05","2020-06-05","2020-08-19","2020-06-20","2020-08-19","2020-09-02","2020-08-07","2020-08-13","2020-05-15","2020-07-17","2020-06-15","2020-08-07","2020-06-15","2020-06-17","2020-06-05","2020-06-24","2020-06-07","2020-08-15","2020-06-17","2020-06-22","2020-06-19","2020-06-17","2020-07-27","2020-06-16","2020-04-28","2020-04-26","2020-06-15","2020-06-05","2020-05-02","2020-04-29","2020-06-22","2020-06-06","2020-05-13","2020-06-17","2020-05-01","2020-06-15","2020-06-07","2020-08-14","2020-06-20","2020-09-02","2020-06-24","2020-07-28","2020-06-17","2020-08-14","2020-08-14","2020-07-28"],["2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-08-20","2020-09-03","2020-08-21","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-08-27","2020-06-08","2020-09-03","2020-06-08","2020-06-10","2020-06-08","2020-08-27","2020-08-27","2020-06-10"],["CONTACT-2020-0027","CASE-2020-0014","CASE-2020-0031","CASE-2020-0021","CONTACT-2020-0020","CONTACT-2020-0038","CASE-2020-0036","CONTACT-2020-0059","CASE-2020-0037",null,"CASE-2020-0015","CONTACT-2020-0015","CONTACT-2020-0009","CASE-2020-0008",null,"CASE-2020-0010","CONTACT-2020-0018","CONTACT-2020-0029","CONTACT-2020-0045","CONTACT-2020-0019","CONTACT-2020-0007","CASE-2020-0004","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0036","CONTACT-2020-0052","CASE-2020-0023","CONTACT-2020-0042","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0017","CONTACT-2020-0034","CASE-2020-0012","CASE-2020-0008","CONTACT-2020-0043","CONTACT-2020-0048","CONTACT-2020-0023","CONTACT-2020-0049","CASE-2020-0006","CASE-2020-0018","CONTACT-2020-0003","CASE-2020-0017","CONTACT-2020-0047","CONTACT-2020-0056","CONTACT-2020-0027","CASE-2020-0029","CONTACT-2020-0028","CONTACT-2020-0046","CONTACT-2020-0046","CASE-2020-0027"],["Male","Male","Male","Male","Female","Male","Female","Female","Female","Male","Female","Male","Male","Male",null,"Female","Male","Male","Female","Male","Female","Male","Male","Male","Female","Male","Female","Male","Male","Male","Female","Female","Female","Male","Male","Male","Male","Female","Male","Male","Male","Male","Male","Male","Male","Male","Female","Male","Male","Male"],[15,54,20,46,32,7,40,97,80,0,38,56,18,7,null,37,78,null,32,20,29,43,null,81,45,null,43,15,3,3,35,54,80,7,47,7,23,null,47,25,12,8,67,54,15,46,null,81,81,38],["Direct physical contact ",null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ",null,"Direct non-physical contact (within 1 meter) ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ","Direct physical contact ",null,null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ",null,"Direct physical contact ",null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source_visualid<\/th>\n      <th>source_gender<\/th>\n      <th>source_age<\/th>\n      <th>date_of_last_contact<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>target_visualid<\/th>\n      <th>target_gender<\/th>\n      <th>target_age<\/th>\n      <th>exposure_type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,7]},{"name":"source_visualid","targets":0},{"name":"source_gender","targets":1},{"name":"source_age","targets":2},{"name":"date_of_last_contact","targets":3},{"name":"date_of_data_entry","targets":4},{"name":"target_visualid","targets":5},{"name":"target_gender","targets":6},{"name":"target_age","targets":7},{"name":"exposure_type","targets":8}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>
<section id="descriptive-analyses" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="descriptive-analyses"><span class="header-section-number">25.2</span> Descriptive analyses</h2>
<p>You can use the techniques covered in other pages of this handbook to conduct descriptive analyses of your cases, contacts, and their relationships. Below are some examples.</p>
<section id="demographics" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="demographics">Demographics</h3>
<p>As demonstrated in the page covering <a href="../new_pages/age_pyramid.html">Demographic pyramids</a>, you can visualise the age and gender distribution (here we use the <strong>apyramid</strong> package).</p>
<section id="age-and-gender-of-contacts" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="age-and-gender-of-contacts">Age and Gender of contacts</h4>
<p>The pyramid below compares the age distribution of contacts, by gender. Note that contacts missing age are included in their own bar at the top. You can change this default behavior, but then consider listing the number missing in a caption.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>apyramid<span class="sc">::</span><span class="fu">age_pyramid</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> contacts,                                   <span class="co"># use contacts dataset</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_class"</span>,                           <span class="co"># categorical age column</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"gender"</span>) <span class="sc">+</span>                             <span class="co"># gender for halfs of pyramid</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span>,                                 <span class="co"># title of legend</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age/Sex Pyramid of COVID-19 contacts"</span>)<span class="sc">+</span> <span class="co"># title of the plot</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()                                    <span class="co"># simple background</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="contact_tracing_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>With the Go.Data data structure, the <code>relationships</code> dataset contains the ages of both cases and contacts, so you could use that dataset and create an age pyramid showing the differences between these two groups of people. The <code>relationships</code> data frame will be mutated to transform the numberic age columns into categories (see the <a href="../new_pages/cleaning.html">Cleaning data and core functions</a> page). We also pivot the dataframe longer to facilitate easy plotting with <strong>ggplot2</strong> (see <a href="../new_pages/pivoting.html">Pivoting data</a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>relation_age <span class="ot">&lt;-</span> relationships <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(source_age, target_age) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(                              <span class="co"># transmute is like mutate() but removes all other columns not mentioned</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_age_class =</span> epikit<span class="sc">::</span><span class="fu">age_categories</span>(source_age, <span class="at">breakers =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">5</span>)),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">target_age_class =</span> epikit<span class="sc">::</span><span class="fu">age_categories</span>(target_age, <span class="at">breakers =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">5</span>)),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">contains</span>(<span class="st">"class"</span>), <span class="at">names_to =</span> <span class="st">"category"</span>, <span class="at">values_to =</span> <span class="st">"age_class"</span>)  <span class="co"># pivot longer</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>relation_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 200 × 2
   category         age_class
   &lt;chr&gt;            &lt;fct&gt;    
 1 source_age_class 80+      
 2 target_age_class 15-19    
 3 source_age_class &lt;NA&gt;     
 4 target_age_class 50-54    
 5 source_age_class &lt;NA&gt;     
 6 target_age_class 20-24    
 7 source_age_class 30-34    
 8 target_age_class 45-49    
 9 source_age_class 40-44    
10 target_age_class 30-34    
# ℹ 190 more rows</code></pre>
</div>
</div>
<p>Now we can plot this transformed dataset with <code>age_pyramid()</code> as before, but replacing <code>gender</code> with <code>category</code> (contact, or case).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>apyramid<span class="sc">::</span><span class="fu">age_pyramid</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> relation_age,                               <span class="co"># use modified relationship dataset</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_class"</span>,                           <span class="co"># categorical age column</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"category"</span>) <span class="sc">+</span>                           <span class="co"># by cases and contacts</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"purple"</span>),                  <span class="co"># to specify colors AND labels</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Case"</span>, <span class="st">"Contact"</span>))<span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Legend"</span>,                                           <span class="co"># title of legend</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age/Sex Pyramid of COVID-19 contacts and cases"</span>)<span class="sc">+</span> <span class="co"># title of the plot</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()                                              <span class="co"># simple background</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="contact_tracing_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>We can also view other characteristics such as occupational breakdown (e.g.&nbsp;in form of a pie chart).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataset and get counts by occupation</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>occ_plot_data <span class="ot">&lt;-</span> cases <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">occupation =</span> forcats<span class="sc">::</span><span class="fu">fct_explicit_na</span>(occupation),  <span class="co"># make NA missing values a category</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">occupation =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(occupation)) <span class="sc">%&gt;%</span>   <span class="co"># order factor levels in order of frequency</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(occupation)                                          <span class="co"># get counts by occupation</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Make pie chart</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> occ_plot_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> n, <span class="at">fill =</span> occupation))<span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Occupation"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Known occupations of COVID-19 cases"</span>)<span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>                    </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="contact_tracing_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="contacts-per-case" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="contacts-per-case">Contacts per case</h3>
<p>The number of contacts per case can be an important metric to assess quality of contact enumeration and the compliance of the population toward public health response.</p>
<p>Depending on your data structure, this can be assessed with a dataset that contains all cases and contacts. In the Go.Data datasets, the links between cases (“sources”) and contacts (“targets”) is stored in the <code>relationships</code> dataset.</p>
<p>In this dataset, each row is a contact, and the source case is listed in the row. There are no contacts who have relationships with multiple cases, but if this exists you may need to account for those before plotting (and explore them too!).</p>
<p>We begin by counting the number of rows (contacts) per source case. This is saved as a data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>contacts_per_case <span class="ot">&lt;-</span> relationships <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(source_visualid)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>contacts_per_case</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   source_visualid  n
1   CASE-2020-0001 13
2   CASE-2020-0002  5
3   CASE-2020-0003  2
4   CASE-2020-0004  4
5   CASE-2020-0005  5
6   CASE-2020-0006  3
7   CASE-2020-0008  3
8   CASE-2020-0009  3
9   CASE-2020-0010  3
10  CASE-2020-0012  3
11  CASE-2020-0013  5
12  CASE-2020-0014  3
13  CASE-2020-0016  3
14  CASE-2020-0018  4
15  CASE-2020-0022  3
16  CASE-2020-0023  4
17  CASE-2020-0030  3
18  CASE-2020-0031  3
19  CASE-2020-0034  4
20  CASE-2020-0036  1
21  CASE-2020-0037  3
22  CASE-2020-0045  3
23            &lt;NA&gt; 17</code></pre>
</div>
</div>
<p>We use <code>geom_histogram()</code> to plot these data as a histogram.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> contacts_per_case)<span class="sc">+</span>        <span class="co"># begin with count data frame created above</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> n))<span class="sc">+</span>  <span class="co"># print histogram of number of contacts per case</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span>   <span class="co"># remove excess space below 0 on y-axis</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span>                         <span class="co"># simplify background</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Number of contacts per case"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cases"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Contacts per case"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-15-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="contact_tracing_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="contact-follow-up" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="contact-follow-up"><span class="header-section-number">25.3</span> Contact Follow Up</h2>
<p>Contact tracing data often contain “follow-up” data, which record outcomes of daily symptom checks of persons in quarantine. Analysis of this data can inform response strategy, identify contacts at-risk of loss-to-follow-up or at-risk of developing disease.</p>
<section id="data-cleaning" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="data-cleaning">Data cleaning</h3>
<p>These data can exist in a variety of formats. They may exist as a “wide” format Excel sheet with one row per contact, and one column per follow-up “day”. See <a href="../new_pages/pivoting.html">Pivoting data</a> for descriptions of “long” and “wide” data and how to pivot data wider or longer.</p>
<p>In our Go.Data example, these data are stored in the <code>followups</code> data frame, which is in a “long” format with one row per follow-up interaction. The first 50 rows look like this:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-7762ee6a0ec01c9ab9e0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7762ee6a0ec01c9ab9e0">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0012","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0046","CONTACT-2020-0012","CONTACT-2020-0046","CONTACT-2020-0043","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0056","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0058","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0058","CONTACT-2020-0003","CONTACT-2020-0001","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0004","CONTACT-2020-0036","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0014"],["seen_ok","not_attempted","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_not_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_attempted","seen_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_not_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_not_ok","seen_ok"],[7,8,6,9,7,1,2,6,1,2,9,6,8,7,5,9,7,4,6,8,5,4,6,8,7,3,1,2,14,1,7,5,4,5,2,14,14,6,6,4,7,3,5,8,14,2,6,9,7,8],["2020-06-02","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-03","2020-06-05","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-04","2020-06-02","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-04","2020-06-03","2020-06-03","2020-06-01","2020-06-02","2020-06-01","2020-06-03","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-04","2020-06-01","2020-06-01","2020-06-03","2020-06-02","2020-06-03","2020-06-03","2020-06-02","2020-06-04","2020-06-04","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-02","2020-06-03"],["Djembe","Trumpet","Trumpet","Trumpet","Trumpet","Djembe",null,"Djembe",null,"Djembe",null,"Trumpet","Djembe","Trumpet","Trumpet","Djembe",null,"Trumpet",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Drums island","Brass island","Brass island","Brass island","Brass island","Drums island",null,"Drums island",null,"Drums island",null,"Brass island","Drums island","Brass island","Brass island","Drums island",null,"Brass island",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>followup_status<\/th>\n      <th>followup_number<\/th>\n      <th>date_of_followup<\/th>\n      <th>admin_2_name<\/th>\n      <th>admin_1_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"name":"contact_id","targets":0},{"name":"followup_status","targets":1},{"name":"followup_number","targets":2},{"name":"date_of_followup","targets":3},{"name":"admin_2_name","targets":4},{"name":"admin_1_name","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> Beware of duplicates when dealing with followup data; as there could be several erroneous followups on the same day for a given contact. Perhaps it seems to be an error but reflects reality - e.g.&nbsp;a contact tracer could submit a follow-up form early in the day when they could not reach the contact, and submit a second form when they were later reached. It will depend on the operational context for how you want to handle duplicates - just make sure to document your approach clearly. </span></p>
<p>Let’s <em>see</em> how many instances of “duplicate” rows we have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>followups <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(contact_id, date_of_followup) <span class="sc">%&gt;%</span>   <span class="co"># get unique contact_days</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)                             <span class="co"># view records where count is more than 1  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  contact_id date_of_followup n
1       &lt;NA&gt;       2020-09-03 2
2       &lt;NA&gt;       2020-09-04 2
3       &lt;NA&gt;       2020-09-05 2</code></pre>
</div>
</div>
<p>In our example data, the only records that this applies to are ones missing an ID! We can remove those. But, for purposes of demonstration we will go show the steps for de-duplication so there is only one follow-up encoutner per person per day. See the page on <a href="../new_pages/deduplication.html">De-duplication</a> for more detail. We will assume that the most recent encounter record is the correct one. We also take the opportunity to clean the <code>followup_number</code> column (the “day” of follow-up which should range 1 - 14).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>followups_clean <span class="ot">&lt;-</span> followups <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># De-duplicate</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(contact_id, date_of_followup) <span class="sc">%&gt;%</span>        <span class="co"># group rows per contact-day</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(contact_id, <span class="fu">desc</span>(date_of_followup)) <span class="sc">%&gt;%</span>   <span class="co"># arrange rows, per contact-day, by date of follow-up (most recent at top)</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>() <span class="sc">%&gt;%</span>                                  <span class="co"># keep only the first row per unique contact id  </span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Other cleaning</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">followup_number =</span> <span class="fu">replace</span>(followup_number, followup_number <span class="sc">&gt;</span> <span class="dv">14</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> <span class="co"># clean erroneous data</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(contact_id)                               <span class="co"># remove rows with missing contact_id</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For each follow-up encounter, we have a follow-up status (such as whether the encounter occurred and if so, did the contact have symptoms or not). To see all the values we can run a quick <code>tabyl()</code> (from <strong>janitor</strong>) or <code>table()</code> (from <strong>base</strong> R) (see <a href="../new_pages/tables_descriptive.html">Descriptive tables</a>) by <code>followup_status</code> to see the frequency of each of the outcomes.</p>
<p>In this dataset, “seen_not_ok” means “seen with symptoms”, and “seen_ok” means “seen without symptoms”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>followups_clean <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(followup_status)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> followup_status   n    percent
          missed  10 0.02325581
   not_attempted   5 0.01162791
   not_performed 319 0.74186047
     seen_not_ok   6 0.01395349
         seen_ok  90 0.20930233</code></pre>
</div>
</div>
</section>
<section id="plot-over-time" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="plot-over-time">Plot over time</h3>
<p>As the dates data are continuous, we will use a histogram to plot them with <code>date_of_followup</code> assigned to the x-axis. We can achieve a “stacked” histogram by specifying a <code>fill =</code> argument within <code>aes()</code>, which we assign to the column <code>followup_status</code>. Consequently, you can set the legend title using the <code>fill =</code> argument of <code>labs()</code>.</p>
<p>We can see that the contacts were identified in waves (presumably corresponding with epidemic waves of cases), and that follow-up completion did not seemingly improve over the course of the epidemic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> followups_clean)<span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date_of_followup, <span class="at">fill =</span> followup_status)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>)<span class="sc">+</span>   <span class="co"># show all factor levels (followup_status) in the legend, even those not used</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of contacts"</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Daily Contact Followup Status"</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Followup Status"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_glue</span>(<span class="st">"Data as of {max(followups$date_of_followup, na.rm=T)}"</span>))   <span class="co"># dynamic subtitle</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-20-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="contact_tracing_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> If you are preparing many plots (e.g.&nbsp;for multiple jurisdictions) you will want the legends to appear identically even with varying levels of data completion or data composition. There may be plots for which not all follow-up statuses are present in the data, but you still want those categories to appear the legends. In ggplots (like above), you can specify the <code>drop = FALSE</code> argument of the <code>scale_fill_discrete()</code>. In tables, use <code>tabyl()</code> which shows counts for all factor levels, or if using <code>count()</code> from <strong>dplyr</strong> add the argument <code>.drop = FALSE</code> to include counts for all factor levels.</span></p>
</section>
<section id="daily-individual-tracking" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="daily-individual-tracking">Daily individual tracking</h3>
<p>If your outbreak is small enough, you may want to look at each contact individually and see their status over the course of their follow-up. Fortunately, this <code>followups</code> dataset already contains a column with the day “number” of follow-up (1-14). If this does not exist in your data, you could create it by calculating the difference between the encounter date and the date follow-up was intended to begin for the contact.</p>
<p>A convenient visualisation mechanism (if the number of cases is not too large) can be a heat plot, made with <code>geom_tile()</code>. See more details in the <a href="../new_pages/heatmaps.html">heat plot</a> page.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> followups_clean)<span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> followup_number, <span class="at">y =</span> contact_id, <span class="at">fill =</span> followup_status),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"grey"</span>)<span class="sc">+</span>       <span class="co"># grey gridlines</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>( <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"yellow"</span>, <span class="st">"grey"</span>, <span class="st">"orange"</span>, <span class="st">"darkred"</span>, <span class="st">"darkgreen"</span>))<span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">14</span>, <span class="at">by =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="contact_tracing_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="analyse-by-group" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="analyse-by-group">Analyse by group</h3>
<p>Perhaps these follow-up data are being viewed on a daily or weekly basis for operational decision-making. You may want more meaningful disaggregations by geographic area or by contact-tracing team. We can do this by adjusting the columns provided to <code>group_by()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>plot_by_region <span class="ot">&lt;-</span> followups_clean <span class="sc">%&gt;%</span>                                        <span class="co"># begin with follow-up dataset</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(admin_1_name, admin_2_name, followup_status) <span class="sc">%&gt;%</span>   <span class="co"># get counts by unique region-status (creates column 'n' with counts)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># begin ggplot()</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(                                         <span class="co"># begin ggplot</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(admin_2_name, n),     <span class="co"># reorder admin factor levels by the numeric values in column 'n'</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> n,                            <span class="co"># heights of bar from column 'n'</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> followup_status,           <span class="co"># color stacked bars by their status</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> n))<span class="sc">+</span>                      <span class="co"># to pass to geom_label()              </span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span>                                     <span class="co"># stacked bars, mapping inherited from above </span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(                                      <span class="co"># add text, mapping inherited from above</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,                                         </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>,           </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>)<span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of contacts"</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Contact Followup Status, by Region"</span>,</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Followup Status"</span>,</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_glue</span>(<span class="st">"Data as of {max(followups_clean$date_of_followup, na.rm=T)}"</span>)) <span class="sc">+</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span>                                                                      <span class="co"># Simplify background</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>admin_1_name, <span class="at">strip.position =</span> <span class="st">"right"</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>)      <span class="co"># introduce facets </span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>plot_by_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="contact_tracing_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<!-- If this was disaggregated by contact tracer, perhaps we would want to add a threshold line to display total # contacts that normally one person or area/team can handle, and how the current workload compares. We just do this by using `geom_hline()` function. -->
<!-- ```{r, warning=F, message=F} -->
<!-- plot_by_region +  -->
<!--      geom_hline(aes(yintercept=25), color="#C70039", linetype = "dashed") # fictitious threshold at 25 contacts -->
<!-- ``` -->
</section>
</section>
<section id="kpi-tables" class="level2" data-number="25.4">
<h2 data-number="25.4" class="anchored" data-anchor-id="kpi-tables"><span class="header-section-number">25.4</span> KPI Tables</h2>
<p>There are a number of different Key Performance Indicators (KPIs) that can be calculated and tracked at varying levels of disaggregations and across different time periods to monitor contact tracing performance. Once you have the calculations down and the basic table format; it is fairly easy to swap in and out different KPIs.</p>
<p>There are numerous sources of contact tracing KPIs, such as this one from <a href="https://contacttracingplaybook.resolvetosavelives.org/checklists/metrics">ResolveToSaveLives.org</a>. The majority of the work will be walking through your data structure and thinking through all of the inclusion/exclusion criteria. We show a few examples below; using Go.Data metadata structure:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 28%">
<col style="width: 29%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Category</th>
<th>Indicator</th>
<th>Go.Data Numerator</th>
<th>Go.Data Denominator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Process Indicator - Speed of Contact Tracing</td>
<td>% cases interviewed and isolated within 24h of case report</td>
<td>COUNT OF <code>case_id</code> WHERE (<code>date_of_reporting</code> - <code>date_of_data_entry</code>) &lt; 1 day AND (<code>isolation_startdate</code> - <code>date_of_data_entry</code>) &lt; 1 day</td>
<td>COUNT OF <code>case_id</code></td>
</tr>
<tr class="even">
<td>Process Indicator - Speed of Contact Tracing</td>
<td>% contacts notified and quarantined within 24h of elicitation</td>
<td>COUNT OF <code>contact_id</code> WHERE <code>followup_status</code> == “SEEN_NOT_OK” OR “SEEN_OK” AND <code>date_of_followup</code> - <code>date_of_reporting</code> &lt; 1 day</td>
<td>COUNT OF <code>contact_id</code></td>
</tr>
<tr class="odd">
<td>Process Indicator - Completeness of Testing</td>
<td>% new symptomatic cases tested and interviewed within 3 days of onset of symptoms</td>
<td>COUNT OF <code>case_id</code> WHERE (<code>date_of_reporting</code> - <code>date_of_onset</code>) &lt; =3 days</td>
<td>COUNT OF <code>case_id</code></td>
</tr>
<tr class="even">
<td>Outcome Indicator - Overall</td>
<td>% new cases among existing contact list</td>
<td>COUNT OF <code>case_id</code> WHERE <code>was_contact</code> == “TRUE”</td>
<td>COUNT OF <code>case_id</code></td>
</tr>
</tbody>
</table>
<p>Below we will walk through a sample exercise of creating a nice table visual to show contact follow-up across admin areas. At the end, we will make it fit for presentation with the <strong>formattable</strong> package (but you could use other packages like <strong>flextable</strong> - see <a href="../new_pages/tables_presentation.html">Tables for presentation</a>).</p>
<p>How you create a table like this will depend on the structure of your contact tracing data. Use the <a href="../new_pages/tables_descriptive.html">Descriptive tables</a> page to learn how to summarise data using <strong>dplyr</strong> functions.</p>
<p>We will create a table that will be dynamic and change as the data change. To make the results interesting, we will set a <code>report_date</code> to allow us to simulate running the table on a certain day (we pick 10th June 2020). The data are filtered to that date.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set "Report date" to simulate running the report with data "as of" this date</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>report_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-06-10"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create follow-up data to reflect the report date.</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>table_data <span class="ot">&lt;-</span> followups_clean <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date_of_followup <span class="sc">&lt;=</span> report_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, based on our data structure, we will do the following:</p>
<ol type="1">
<li>Begin with the <code>followups</code> data and summarise it to contain, for each unique contact:<br>
</li>
</ol>
<ul>
<li>The date of latest record (no matter the status of the encounter)<br>
</li>
<li>The date of latest encounter where the contact was “seen”<br>
</li>
<li>The encounter status at that final “seen” encounter (e.g.&nbsp;with symptoms, without symptoms)<br>
</li>
</ul>
<ol start="2" type="1">
<li>Join these data to the contacts data, which contains other information such as the overall contact status, date of last exposure to a case, etc. Also we will calculate metrics of interest for each contact such as days since last exposure<br>
</li>
<li>We group the enhanced contact data by geographic region (<code>admin_2_name</code>) and calculate summary statistics per region<br>
</li>
<li>Finally, we format the table nicely for presentation</li>
</ol>
<p>First we summarise the follow-up data to get the information of interest:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>followup_info <span class="ot">&lt;-</span> table_data <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(contact_id) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_last_record   =</span> <span class="fu">max</span>(date_of_followup, <span class="at">na.rm=</span>T),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_last_seen     =</span> <span class="fu">max</span>(date_of_followup[followup_status <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"seen_ok"</span>, <span class="st">"seen_not_ok"</span>)], <span class="at">na.rm=</span>T),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">status_last_record =</span> followup_status[<span class="fu">which</span>(date_of_followup <span class="sc">==</span> date_last_record)]) <span class="sc">%&gt;%</span> </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is how these data look:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-064c0720f044b5059d4c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-064c0720f044b5059d4c">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0004","CONTACT-2020-0005","CONTACT-2020-0006","CONTACT-2020-0007","CONTACT-2020-0012","CONTACT-2020-0013","CONTACT-2020-0014","CONTACT-2020-0015","CONTACT-2020-0016","CONTACT-2020-0017","CONTACT-2020-0018","CONTACT-2020-0019","CONTACT-2020-0026","CONTACT-2020-0027","CONTACT-2020-0028","CONTACT-2020-0029","CONTACT-2020-0033","CONTACT-2020-0035","CONTACT-2020-0036","CONTACT-2020-0039","CONTACT-2020-0040","CONTACT-2020-0041","CONTACT-2020-0042","CONTACT-2020-0043","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0047","CONTACT-2020-0048","CONTACT-2020-0049","CONTACT-2020-0050","CONTACT-2020-0052","CONTACT-2020-0054","CONTACT-2020-0055","CONTACT-2020-0056","CONTACT-2020-0057","CONTACT-2020-0058","CONTACT-2020-0059","CONTACT-2020-0060"],["2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05"],["-Inf","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-05","2020-06-03","2020-06-05","2020-06-05","2020-06-05","-Inf","2020-06-03","2020-06-05","2020-06-06","2020-06-04","2020-06-04","2020-06-05","2020-06-04","2020-06-05","2020-06-05","2020-06-04","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-04","2020-06-05","2020-06-03","2020-06-02","2020-06-03","2020-06-05","2020-06-05"],["missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_performed","missed","seen_ok","seen_ok","not_performed","not_performed","seen_ok","not_performed","seen_not_ok","not_performed","not_performed","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","not_performed","not_performed","not_performed","seen_ok","seen_ok"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>date_last_record<\/th>\n      <th>date_last_seen<\/th>\n      <th>status_last_record<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"name":"contact_id","targets":0},{"name":"date_last_record","targets":1},{"name":"date_last_seen","targets":2},{"name":"status_last_record","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Now we will add this information to the <code>contacts</code> dataset, and calculate some additional columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>contacts_info <span class="ot">&lt;-</span> followup_info <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(contacts, <span class="at">by =</span> <span class="st">"contact_id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">database_date       =</span> <span class="fu">max</span>(date_last_record, <span class="at">na.rm=</span>T),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_since_seen     =</span> database_date <span class="sc">-</span> date_last_seen,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_since_exposure =</span> database_date <span class="sc">-</span> date_of_last_exposure</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is how these data look. Note <code>contacts</code> column to the right, and new calculated column at the far right.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-314d5c232e4ca860f4b4" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-314d5c232e4ca860f4b4">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0004","CONTACT-2020-0005","CONTACT-2020-0006","CONTACT-2020-0007","CONTACT-2020-0012","CONTACT-2020-0013","CONTACT-2020-0014","CONTACT-2020-0015","CONTACT-2020-0016","CONTACT-2020-0017","CONTACT-2020-0018","CONTACT-2020-0019","CONTACT-2020-0026","CONTACT-2020-0027","CONTACT-2020-0028","CONTACT-2020-0029","CONTACT-2020-0033","CONTACT-2020-0035","CONTACT-2020-0036","CONTACT-2020-0039","CONTACT-2020-0040","CONTACT-2020-0041","CONTACT-2020-0042","CONTACT-2020-0043","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0047","CONTACT-2020-0048","CONTACT-2020-0049","CONTACT-2020-0050","CONTACT-2020-0052","CONTACT-2020-0054","CONTACT-2020-0055","CONTACT-2020-0056","CONTACT-2020-0057","CONTACT-2020-0058","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0030","CONTACT-2020-0021","CONTACT-2020-0053","CONTACT-2020-0011","CONTACT-2020-0032","CONTACT-2020-0025","CONTACT-2020-0045","CONTACT-2020-0020","CONTACT-2020-0031","CONTACT-2020-0037","CONTACT-2020-0051","CONTACT-2020-0008","CONTACT-2020-0038","CONTACT-2020-0010","CONTACT-2020-0034","CONTACT-2020-0009","CONTACT-2020-0022","CONTACT-2020-0023",null,null,"CASE-2020-0043","CASE-2020-0044","CASE-2020-0045","CASE-2020-0046","CONTACT-2020-0024","CONTACT-2020-0002"],["2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["-Inf","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-05","2020-06-03","2020-06-05","2020-06-05","2020-06-05","-Inf","2020-06-03","2020-06-05","2020-06-06","2020-06-04","2020-06-04","2020-06-05","2020-06-04","2020-06-05","2020-06-05","2020-06-04","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-04","2020-06-05","2020-06-03","2020-06-02","2020-06-03","2020-06-05","2020-06-05",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_performed","missed","seen_ok","seen_ok","not_performed","not_performed","seen_ok","not_performed","seen_not_ok","not_performed","not_performed","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","not_performed","not_performed","not_performed","seen_ok","seen_ok",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","DIED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","DIED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE"],["Cheik","Cheik","Khary","Birima","Malang","Maguette","Alfa","Ndiogou","Madia","Adama","Lamine","Racine","Yacouba","Kalidou","Thione","Sadibou","Papis","Coura","Thiony","Sofiatou","Djiby","Abba","Khary","Oumou","Dicory","Adja","Mbagnick","Abou","Ndiankou","Malamine","Youssouf","Waly","Mayatta","Alimatou","Djeynaba","Amath","Wasis","Bransan  ","Bintou","Binette","Aminata","Binta","Birima","Cheik","El Hadj","Khadija","Khary","Khary","Lat","Maguette","Maguette","Malamine","Malamine","Malang","Malang","Modou","Ndiaya","Oulimata","Mayatta","Jelani","Adama","Adji","Alfa","Alfa","Birima","Malang"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Abebe",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Obi","Onai",null,null,null,null,null,null],["MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","MALE","MALE","MALE","MALE","FEMALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE"],[12,12,32,3,54,29,34,56,34,56,12,35,78,20,45,15,null,null,5,null,45,17,21,34,15,47,null,81,67,7,null,56,null,8,54,54,2,23,97,34,36,32,3,12,21,4,32,32,23,9,9,63,7,54,54,18,32,23,null,24,null,25,34,34,3,54],["10-14","10-14","30-39","0-4","50-59","20-29","30-39","50-59","30-39","50-59","10-14","30-39","75-79","20-29","40-49","15-19","unknown","unknown","5-9","unknown","40-49","15-19","20-29","30-39","15-19","40-49","unknown","80+","65-69","5-9","unknown","50-59","unknown","5-9","50-59","50-59","0-4","20-29","80+","30-39","30-39","30-39","0-4","10-14","20-29","0-4","30-39","30-39","20-29","5-9","5-9","60-64","5-9","50-59","50-59","15-19","30-39","20-29","unknown","20-29","unknown","20-29","30-39","30-39","0-4","50-59"],["CHILD","CHILD","FARMER","CHILD","FARMER","OTHER",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"FARMER",null,null,null,null,null,null,"HEALTH_CARE_WORKER","STUDENT","HEALTH_CARE_WORKER",null,"BUTCHER","BUTCHER",null,"FARMER"],["2020-03-22","2020-03-22","2020-03-22","2020-05-01","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-16","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-05-25","2020-05-25","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-05-25","2020-05-25","2020-09-02","2020-09-03","2020-07-08","2020-07-11","2020-07-16","2020-07-07","2020-04-15","2020-03-22"],["2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-09-03","2020-09-04","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08"],["2020-06-07","2020-06-07","2020-06-07","2020-04-28","2020-06-07","2020-06-07","2020-06-15","2020-06-22","2020-06-15","2020-08-13","2020-06-22","2020-06-15","2020-06-15","2020-06-24","2020-06-22","2020-06-24","2020-06-17","2020-06-17","2020-06-22","2020-06-17","2020-06-19","2020-06-24","2020-06-15","2020-06-22","2020-06-16","2020-06-22","2020-06-17","2020-06-22","2020-06-20","2020-06-06","2020-06-17","2020-06-17","2020-06-17","2020-06-17","2020-06-20","2020-09-02","2020-06-17","2020-06-22","2020-06-20","2020-06-16","2020-05-15","2020-05-13","2020-04-26","2020-04-26","2020-05-10","2020-05-08","2020-06-05","2020-06-05","2020-05-10","2020-06-05","2020-06-05","2020-04-28","2020-06-05","2020-04-29","2020-06-05","2020-05-15","2020-05-10","2020-05-13","2020-09-02","2020-09-01","2020-05-06","2020-05-10","2020-07-27","2020-05-06","2020-04-26","2020-04-28"],["2020-06-08","2020-06-08","2020-06-08","2020-04-29","2020-06-08","2020-06-08","2020-06-16","2020-06-23","2020-06-16","2020-08-14","2020-06-23","2020-06-16","2020-06-16","2020-06-25","2020-06-23","2020-06-25","2020-06-18","2020-06-18","2020-06-23","2020-06-18","2020-06-20","2020-06-25","2020-06-16","2020-06-23","2020-06-17","2020-08-14","2020-06-18","2020-08-15","2020-06-21","2020-06-08","2020-06-18","2020-06-18","2020-06-18","2020-06-18","2020-06-21","2020-09-03","2020-06-18","2020-06-23","2020-06-21","2020-06-17",null,"2020-05-14","2020-04-27","2020-04-27",null,null,"2020-06-06","2020-06-06",null,"2020-06-06","2020-06-06",null,"2020-06-06","2020-04-30","2020-06-06","2020-05-16","2020-05-11","2020-05-14","2020-09-03","2020-09-02",null,null,null,null,"2020-06-06",null],["2020-06-21","2020-06-21","2020-06-21","2020-05-12","2020-06-21","2020-06-21","2020-06-29","2020-07-06","2020-06-29","2020-08-27","2020-07-06","2020-06-29","2020-06-29","2020-07-08","2020-07-06","2020-07-08","2020-07-01","2020-07-01","2020-07-06","2020-07-01","2020-07-03","2020-07-08","2020-06-29","2020-07-06","2020-06-30","2020-08-27","2020-07-01","2020-08-28","2020-07-04","2020-06-21","2020-07-01","2020-07-01","2020-07-01","2020-07-01","2020-07-04","2020-09-16","2020-07-01","2020-07-06","2020-07-04","2020-06-30",null,"2020-05-27","2020-05-10","2020-05-10",null,null,"2020-06-19","2020-06-19",null,"2020-06-19","2020-06-19",null,"2020-06-19","2020-05-13","2020-06-19","2020-05-29","2020-05-24","2020-05-27","2020-09-16","2020-09-15",null,null,null,null,"2020-06-19",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"1_LOW","3_HIGH","1_LOW",null,null,null,null],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,null,null,null,null,null,null],["Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Congas","Venu","Cornet","Venu","Djembe","Djembe"],["2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06"],[null,5,5,5,5,5,2,2,2,2,2,3,3,1,3,1,1,1,null,3,1,0,2,2,1,2,1,1,2,5,1,1,1,2,1,3,4,3,1,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[-1,-1,-1,39,-1,-1,-9,-16,-9,-68,-16,-9,-9,-18,-16,-18,-11,-11,-16,-11,-13,-18,-9,-16,-10,-16,-11,-16,-14,0,-11,-11,-11,-11,-14,-88,-11,-16,-14,-10,22,24,41,41,27,29,1,1,27,1,1,39,1,38,1,22,27,24,-88,-87,31,27,-51,31,41,39]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>date_last_record<\/th>\n      <th>date_last_seen<\/th>\n      <th>status_last_record<\/th>\n      <th>contact_status<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>date_of_reporting<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>date_of_last_exposure<\/th>\n      <th>date_of_followup_start<\/th>\n      <th>date_of_followup_end<\/th>\n      <th>risk_level<\/th>\n      <th>was_case<\/th>\n      <th>admin_2_name<\/th>\n      <th>database_date<\/th>\n      <th>days_since_seen<\/th>\n      <th>days_since_exposure<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":8},{"name":"contact_id","targets":0},{"name":"date_last_record","targets":1},{"name":"date_last_seen","targets":2},{"name":"status_last_record","targets":3},{"name":"contact_status","targets":4},{"name":"firstName","targets":5},{"name":"lastName","targets":6},{"name":"gender","targets":7},{"name":"age","targets":8},{"name":"age_class","targets":9},{"name":"occupation","targets":10},{"name":"date_of_reporting","targets":11},{"name":"date_of_data_entry","targets":12},{"name":"date_of_last_exposure","targets":13},{"name":"date_of_followup_start","targets":14},{"name":"date_of_followup_end","targets":15},{"name":"risk_level","targets":16},{"name":"was_case","targets":17},{"name":"admin_2_name","targets":18},{"name":"database_date","targets":19},{"name":"days_since_seen","targets":20},{"name":"days_since_exposure","targets":21}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Next we summarise the contacts data by region, to achieve a concise data frame of summary statistic columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>contacts_table <span class="ot">&lt;-</span> contacts_info <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Admin 2</span><span class="st">`</span> <span class="ot">=</span> admin_2_name) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Registered contacts</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">n</span>(),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Active contacts</span><span class="st">`</span>     <span class="ot">=</span> <span class="fu">sum</span>(contact_status <span class="sc">==</span> <span class="st">"UNDER_FOLLOW_UP"</span>, <span class="at">na.rm=</span>T),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">In first week</span><span class="st">`</span>       <span class="ot">=</span> <span class="fu">sum</span>(days_since_exposure <span class="sc">&lt;</span> <span class="dv">8</span>, <span class="at">na.rm=</span>T),</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">In second week</span><span class="st">`</span>      <span class="ot">=</span> <span class="fu">sum</span>(days_since_exposure <span class="sc">&gt;=</span> <span class="dv">8</span> <span class="sc">&amp;</span> days_since_exposure <span class="sc">&lt;</span> <span class="dv">15</span>, <span class="at">na.rm=</span>T),</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Became case</span><span class="st">`</span>         <span class="ot">=</span> <span class="fu">sum</span>(contact_status <span class="sc">==</span> <span class="st">"BECAME_CASE"</span>, <span class="at">na.rm=</span>T),</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Lost to follow up</span><span class="st">`</span>   <span class="ot">=</span> <span class="fu">sum</span>(days_since_seen <span class="sc">&gt;=</span> <span class="dv">3</span>, <span class="at">na.rm=</span>T),</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Never seen</span><span class="st">`</span>          <span class="ot">=</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(date_last_seen)),</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Followed up - signs</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(status_last_record <span class="sc">==</span> <span class="st">"Seen_not_ok"</span> <span class="sc">&amp;</span> date_last_record <span class="sc">==</span> database_date, <span class="at">na.rm=</span>T),</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Followed up - no signs</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(status_last_record <span class="sc">==</span> <span class="st">"Seen_ok"</span> <span class="sc">&amp;</span> date_last_record <span class="sc">==</span> database_date, <span class="at">na.rm=</span>T),</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Not Followed up</span><span class="st">`</span>     <span class="ot">=</span> <span class="fu">sum</span>(</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      (status_last_record <span class="sc">==</span> <span class="st">"NOT_ATTEMPTED"</span> <span class="sc">|</span> status_last_record <span class="sc">==</span> <span class="st">"NOT_PERFORMED"</span>) <span class="sc">&amp;</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>        date_last_record <span class="sc">==</span> database_date, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Registered contacts</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2564f023f97ff1565afd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2564f023f97ff1565afd">{"x":{"filter":"none","vertical":false,"data":[["Djembe","Trumpet","Venu","Congas","Cornet"],[59,3,2,1,1],[30,1,0,0,0],[44,3,0,0,1],[0,0,0,0,0],[2,0,2,1,1],[15,0,0,0,0],[22,0,2,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Admin 2<\/th>\n      <th>Registered contacts<\/th>\n      <th>Active contacts<\/th>\n      <th>In first week<\/th>\n      <th>In second week<\/th>\n      <th>Became case<\/th>\n      <th>Lost to follow up<\/th>\n      <th>Never seen<\/th>\n      <th>Followed up - signs<\/th>\n      <th>Followed up - no signs<\/th>\n      <th>Not Followed up<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]},{"name":"Admin 2","targets":0},{"name":"Registered contacts","targets":1},{"name":"Active contacts","targets":2},{"name":"In first week","targets":3},{"name":"In second week","targets":4},{"name":"Became case","targets":5},{"name":"Lost to follow up","targets":6},{"name":"Never seen","targets":7},{"name":"Followed up - signs","targets":8},{"name":"Followed up - no signs","targets":9},{"name":"Not Followed up","targets":10}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>And now we apply styling from the <strong>formattable</strong> and <strong>knitr</strong> packages, including a footnote that shows the “as of” date.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>contacts_table <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Admin 2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">formatter</span>(<span class="st">"span"</span>, <span class="at">style =</span> <span class="sc">~</span> formattable<span class="sc">::</span><span class="fu">style</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">Admin 2</span><span class="st">`</span> <span class="sc">==</span> <span class="cn">NA</span>, <span class="st">"red"</span>, <span class="st">"grey"</span>),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">font.weight =</span> <span class="st">"bold"</span>,<span class="at">font.style =</span> <span class="st">"italic"</span>))(<span class="st">`</span><span class="at">Admin 2</span><span class="st">`</span>),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Followed up - signs</span><span class="st">`</span><span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"orange"</span>)(<span class="st">`</span><span class="at">Followed up - signs</span><span class="st">`</span>),</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Followed up - no signs</span><span class="st">`</span><span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"#A0E2BD"</span>)(<span class="st">`</span><span class="at">Followed up - no signs</span><span class="st">`</span>),</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Became case</span><span class="st">`</span><span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"grey"</span>)(<span class="st">`</span><span class="at">Became case</span><span class="st">`</span>),</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Lost to follow up</span><span class="st">`</span><span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"grey"</span>)(<span class="st">`</span><span class="at">Lost to follow up</span><span class="st">`</span>), </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Never seen</span><span class="st">`</span><span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"red"</span>)(<span class="st">`</span><span class="at">Never seen</span><span class="st">`</span>),</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Active contacts</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">"white"</span>, <span class="st">"#81A4CE"</span>)(<span class="st">`</span><span class="at">Active contacts</span><span class="st">`</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F, <span class="at">align =</span><span class="fu">c</span>(<span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="st">"hover"</span>, <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span> <span class="ot">=</span> <span class="dv">3</span>, </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Of contacts currently under follow up"</span> <span class="ot">=</span> <span class="dv">5</span>,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Status of last visit"</span> <span class="ot">=</span> <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">footnote</span>(<span class="at">general =</span> <span class="fu">str_glue</span>(<span class="st">"Data are current to {format(report_date, '%b %d %Y')}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover caption-top table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th colspan="3" data-quarto-table-cell-role="th" style="text-align: left; empty-cells: hide; border-bottom: hidden;"></th>
<th colspan="5" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Of contacts currently under follow up
</div></th>
<th colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Status of last visit
</div></th>
</tr>
<tr class="odd">
<th style="text-align: left;" data-quarto-table-cell-role="th">Admin 2</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Registered contacts</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Active contacts</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">In first week</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">In second week</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Became case</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Lost to follow up</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Never seen</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Followed up - signs</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Followed up - no signs</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Not Followed up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="font-weight: bold; font-style: italic">Djembe </span></td>
<td style="text-align: center;">59</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #81a4ce">30</span></td>
<td style="text-align: center;">44</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">2</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">15</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ff0000">22</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="font-weight: bold; font-style: italic">Trumpet</span></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fafbfd">1</span></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="font-weight: bold; font-style: italic">Venu </span></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">2</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffe7e7">2</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="font-weight: bold; font-style: italic">Congas </span></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #dedede">1</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fff3f3">1</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="font-weight: bold; font-style: italic">Cornet </span></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #dedede">1</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fff3f3">1</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;"><span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span></td>
<td style="text-align: center;">0</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> Data are current to Jun 10 2020</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</section>
<section id="transmission-matrices" class="level2" data-number="25.5">
<h2 data-number="25.5" class="anchored" data-anchor-id="transmission-matrices"><span class="header-section-number">25.5</span> Transmission Matrices</h2>
<p>As discussed in the <a href="../new_pages/heatmaps.html">Heat plots</a> page, you can create a matrix of “who infected whom” using <code>geom_tile()</code>.</p>
<p>When new contacts are created, Go.Data stores this relationship information in the <code>relationships</code> API endpoint; and we can see the first 50 rows of this dataset below. This means that we can create a heat plot with relatively few steps given each contact is already joined to it’s source case.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-18644357b4c5e0139ffe" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-18644357b4c5e0139ffe">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0016",null,null,"CASE-2020-0045","CASE-2020-0004","CASE-2020-0010",null,"CASE-2020-0034",null,"CASE-2020-0037","CASE-2020-0005",null,"CASE-2020-0002","CASE-2020-0001","CASE-2020-0005",null,"CASE-2020-0004","CASE-2020-0012","CASE-2020-0022","CASE-2020-0004","CASE-2020-0003","CASE-2020-0001","CASE-2020-0030","CASE-2020-0022","CASE-2020-0010","CASE-2020-0018","CASE-2020-0045","CASE-2020-0030","CASE-2020-0001","CASE-2020-0018","CASE-2020-0008","CASE-2020-0014",null,"CASE-2020-0002","CASE-2020-0030","CASE-2020-0031","CASE-2020-0009","CASE-2020-0031","CASE-2020-0002",null,"CASE-2020-0001","CASE-2020-0001","CASE-2020-0022","CASE-2020-0001","CASE-2020-0012","CASE-2020-0023","CASE-2020-0016","CASE-2020-0001",null,"CASE-2020-0023"],["Female",null,null,"Female","Male","Female",null,"Male",null,"Female","Male",null,"Male","Female","Male",null,"Male","Female","Female","Male","Male","Female","Male","Female","Female","Male","Female","Male","Female","Male","Male","Male",null,"Male","Male","Male","Female","Male","Male",null,"Female","Female","Female","Female","Female","Female","Female","Female","Female","Female"],[80,null,null,34,43,37,null,20,null,80,23,0,52,49,23,null,43,80,51,43,58,49,52,51,37,25,34,52,49,25,7,54,null,52,52,20,57,20,52,null,49,49,51,49,80,43,80,49,43,43],["2020-06-24","2020-05-02","2020-06-15","2020-07-27","2020-06-05","2020-06-05","2020-08-19","2020-06-20","2020-08-19","2020-09-02","2020-08-07","2020-08-13","2020-05-15","2020-07-17","2020-06-15","2020-08-07","2020-06-15","2020-06-17","2020-06-05","2020-06-24","2020-06-07","2020-08-15","2020-06-17","2020-06-22","2020-06-19","2020-06-17","2020-07-27","2020-06-16","2020-04-28","2020-04-26","2020-06-15","2020-06-05","2020-05-02","2020-04-29","2020-06-22","2020-06-06","2020-05-13","2020-06-17","2020-05-01","2020-06-15","2020-06-07","2020-08-14","2020-06-20","2020-09-02","2020-06-24","2020-07-28","2020-06-17","2020-08-14","2020-08-14","2020-07-28"],["2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-08-20","2020-09-03","2020-08-21","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-08-27","2020-06-08","2020-09-03","2020-06-08","2020-06-10","2020-06-08","2020-08-27","2020-08-27","2020-06-10"],["CONTACT-2020-0027","CASE-2020-0014","CASE-2020-0031","CASE-2020-0021","CONTACT-2020-0020","CONTACT-2020-0038","CASE-2020-0036","CONTACT-2020-0059","CASE-2020-0037",null,"CASE-2020-0015","CONTACT-2020-0015","CONTACT-2020-0009","CASE-2020-0008",null,"CASE-2020-0010","CONTACT-2020-0018","CONTACT-2020-0029","CONTACT-2020-0045","CONTACT-2020-0019","CONTACT-2020-0007","CASE-2020-0004","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0036","CONTACT-2020-0052","CASE-2020-0023","CONTACT-2020-0042","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0017","CONTACT-2020-0034","CASE-2020-0012","CASE-2020-0008","CONTACT-2020-0043","CONTACT-2020-0048","CONTACT-2020-0023","CONTACT-2020-0049","CASE-2020-0006","CASE-2020-0018","CONTACT-2020-0003","CASE-2020-0017","CONTACT-2020-0047","CONTACT-2020-0056","CONTACT-2020-0027","CASE-2020-0029","CONTACT-2020-0028","CONTACT-2020-0046","CONTACT-2020-0046","CASE-2020-0027"],["Male","Male","Male","Male","Female","Male","Female","Female","Female","Male","Female","Male","Male","Male",null,"Female","Male","Male","Female","Male","Female","Male","Male","Male","Female","Male","Female","Male","Male","Male","Female","Female","Female","Male","Male","Male","Male","Female","Male","Male","Male","Male","Male","Male","Male","Male","Female","Male","Male","Male"],[15,54,20,46,32,7,40,97,80,0,38,56,18,7,null,37,78,null,32,20,29,43,null,81,45,null,43,15,3,3,35,54,80,7,47,7,23,null,47,25,12,8,67,54,15,46,null,81,81,38],["Direct physical contact ",null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ",null,"Direct non-physical contact (within 1 meter) ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ","Direct physical contact ",null,null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ",null,"Direct physical contact ",null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source_visualid<\/th>\n      <th>source_gender<\/th>\n      <th>source_age<\/th>\n      <th>date_of_last_contact<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>target_visualid<\/th>\n      <th>target_gender<\/th>\n      <th>target_age<\/th>\n      <th>exposure_type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,7]},{"name":"source_visualid","targets":0},{"name":"source_gender","targets":1},{"name":"source_age","targets":2},{"name":"date_of_last_contact","targets":3},{"name":"date_of_data_entry","targets":4},{"name":"target_visualid","targets":5},{"name":"target_gender","targets":6},{"name":"target_age","targets":7},{"name":"exposure_type","targets":8}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As done above for the age pyramid comparing cases and contacts, we can select the few variables we need and create columns with categorical age groupings for both sources (cases) and targets (contacts).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>heatmap_ages <span class="ot">&lt;-</span> relationships <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(source_age, target_age) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(                              <span class="co"># transmute is like mutate() but removes all other columns</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_age_class =</span> epikit<span class="sc">::</span><span class="fu">age_categories</span>(source_age, <span class="at">breakers =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">5</span>)),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">target_age_class =</span> epikit<span class="sc">::</span><span class="fu">age_categories</span>(target_age, <span class="at">breakers =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">5</span>))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As described previously, we create cross-tabulation;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>cross_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">source_cases =</span> heatmap_ages<span class="sc">$</span>source_age_class,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">target_cases =</span> heatmap_ages<span class="sc">$</span>target_age_class)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>cross_tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            target_cases
source_cases 0-4 5-9 10-14 15-19 20-24 25-29 30-34 35-39 40-44 45-49 50-54
       0-4     0   0     0     0     0     0     0     0     0     1     0
       5-9     0   0     1     0     0     0     0     1     0     0     0
       10-14   0   0     0     0     0     0     0     0     0     0     0
       15-19   0   0     0     0     0     0     0     0     0     0     0
       20-24   1   1     0     1     2     0     2     1     0     0     0
       25-29   1   2     0     0     0     0     0     0     0     0     0
       30-34   0   0     0     0     0     0     0     0     1     1     0
       35-39   0   2     0     0     0     0     0     0     0     1     0
       40-44   0   0     0     0     1     0     2     1     0     3     1
       45-49   1   2     2     0     0     0     3     0     1     0     3
       50-54   1   2     1     2     0     0     1     0     0     3     4
       55-59   0   1     0     0     1     1     2     0     0     0     0
       60-64   0   0     0     0     0     0     0     0     0     0     0
       65-69   0   0     0     0     0     0     0     0     0     0     0
       70-74   0   0     0     0     0     0     0     0     0     0     0
       75-79   0   0     0     0     0     0     0     0     0     0     0
       80+     1   0     0     2     1     0     0     0     1     0     0
            target_cases
source_cases 55-59 60-64 65-69 70-74 75-79 80+
       0-4       1     0     0     0     0   0
       5-9       1     0     0     0     0   0
       10-14     0     0     0     0     0   0
       15-19     0     0     0     0     0   0
       20-24     1     0     0     0     0   1
       25-29     0     0     0     0     0   0
       30-34     1     0     0     0     0   0
       35-39     0     0     0     0     0   0
       40-44     1     0     0     0     1   1
       45-49     2     1     0     0     0   1
       50-54     1     0     1     0     0   1
       55-59     0     0     0     0     0   0
       60-64     0     0     0     0     0   0
       65-69     0     0     0     0     0   0
       70-74     0     0     0     0     0   0
       75-79     0     0     0     0     0   0
       80+       0     0     0     0     0   0</code></pre>
</div>
</div>
<p>convert into long format with proportions;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>long_prop <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">prop.table</span>(cross_tab))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and create a heat-map for age.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> long_prop)<span class="sc">+</span>       <span class="co"># use long data, with proportions as Freq</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(                    <span class="co"># visualize it in tiles</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> target_cases,         <span class="co"># x-axis is case age</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> source_cases,     <span class="co"># y-axis is infector age</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> Freq))<span class="sc">+</span>            <span class="co"># color of the tile is the Freq column in the data</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(          <span class="co"># adjust the fill color of the tiles</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"blue"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"orange"</span>)<span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(                         <span class="co"># labels</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Target case age"</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Source case age"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Who infected whom"</span>,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Frequency matrix of transmission events"</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Proportion of all</span><span class="sc">\n</span><span class="st">tranmsission events"</span>     <span class="co"># legend title</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="contact_tracing_files/figure-html/unnamed-chunk-35-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="contact_tracing_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resources" class="level2" data-number="25.6">
<h2 data-number="25.6" class="anchored" data-anchor-id="resources"><span class="header-section-number">25.6</span> Resources</h2>
<p>https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting</p>
<p>https://worldhealthorganization.github.io/godata/</p>
<p>https://community-godata.who.int/</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/epidemic_models.html" class="pagination-link" aria-label="Epidemic modeling">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Epidemic modeling</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/survey_analysis.html" class="pagination-link" aria-label="Survey analysis">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Survey analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":false,"openEffect":"zoom","descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>