<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; R Basics – The Epidemiologist R Handbook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/transition_to_R.html" rel="next">
<link href="../new_pages/data_used.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"dark",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'G-QXDW878QLX');

</script>



</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">

  <!-- <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>

  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/"

    class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/"

    class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/"

    class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org"

    class="alert-link">R Help Desk service</a>. -->

</div>



<script>



  // Function to extract the last two characters from the URL path

  function getLanguageFromURL() {

    const path = window.location.pathname.split('/');

    

    if (path.length > 1) {

      return path[1]; // Assume the language code is the second segment

    }



    return '';

  }



  const language = getLanguageFromURL();

  const supportedLanguages = ['fr', 'es', 'vn', 'jp', 'pt', 'tr', 'ru', 'en'];

  const defaultLanguage = 'en';

  const isSupportedLanguage = supportedLanguages.includes(language);



  // Translations for the content

  const translations = {

    en: '<strong>Need help learning R?</strong> Enroll in Applied Epi\'s <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.',

    fr: '<strong>Besoin d\'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d\'introduction à R</a> d\'Applied Epi, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions-réponses communautaires</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link"> notre service d\'assistance R</a>.',

    es: '<strong>¿Necesitas ayuda para aprender R?</strong> Inscríbete en el <a href="https://www.appliedepi.org/live/" class="alert-link">Curso de introducción a R</a> de Applied Epi, prueba nuestros <a href="https://www.appliedepi.org/tutorial/" class="alert-link">Tutoriales gratuitos de R</a>, escribe en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro de preguntas y respuestas,</a> o pregunta por nuestra <a href="mailto:contact@appliedepi.org" class="alert-link">Asistencia técnica para R</a>.',

    vn: '<strong>Bạn cần giúp đỡ trong việc học R?</strong> Hãy đăng ký khóa học R cơ bản của Applied Epi tại <a href="https://www.appliedepi.org/live/" class="alert-link">đây</a>, hoặc thử các <a href="https://www.appliedepi.org/tutorial/" class="alert-link">hướng dẫn R miễn phí</a>, đăng bài trong <a href="https://community.appliedepi.org/" class="alert-link">diễn đàn cộng đồng</a>, hoặc gửi câu hỏi tới <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ Trợ giúp R</a> của chúng tôi.',

    jp: '<strong>Rの学習について助けが必要ですか？</strong>Applied Epiの<a href="https://www.appliedepi.org/live/" class="alert-link">R入門コース</a>に登録するか、<a href="https://www.appliedepi.org/tutorial/" class="alert-link">無料Rチュートリアル</a>を試すか、<a href="https://community.appliedepi.org/" class="alert-link">コミュニティQ＆Aフォーラム</a>に投稿するか、<a href="mailto:contact@appliedepi.org" class="alert-link">Rヘルプデスクサービス</a>についてお問い合わせください。',

    pt: '<strong>Você precisa de ajuda para aprender R??</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R da Applied Epi</a>, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.',

    tr: '<strong>R öğrenmekte yardıma mı ihtiyacınız var?</strong> Applied Epi\'\nin <a href="https://www.appliedepi.org/live/" class="alert-link">R\'ye giriş kursuna</a> kaydolun, <a href="https://www.appliedepi.org/tutorial/" class="alert-link">ücretsiz R derslerimizi</a> deneyin, <a href="https://community.appliedepi.org/" class="alert-link">Topluluk Q&A forumunda</a> soru paylaşın, ya da <a href="mailto:contact@appliedepi.org" class="alert-link">R Yardım Masası hizmetimiz</a> hakkında sorun.',

    ru: '<strong>Нужна помощь в изучении R?</strong> Запишитесь на <a href="https://www.appliedepi.org/live/" class="alert-link">вводный курс по R</a> от Applied Epi, попробуйте наши <a href="https://www.appliedepi.org/tutorial/" class="alert-link">бесплатные учебные материалы по R</a>, задайте вопрос в нашем <a href="https://community.appliedepi.org/" class="alert-link">форуме вопросов и ответов сообщества</a>, или спросите о нашей услуге <a href="mailto:contact@appliedepi.org" class="alert-link">Службы поддержки по R</a>.'

  };



  // Default to English if the detected language is not supported

  const contentToDisplay = translations[isSupportedLanguage ? language : defaultLanguage];





  // Select the element where the content should be displayed

  const alertElement = document.querySelector('.alert');

  if (alertElement) {

    alertElement.innerHTML = contentToDisplay;

    alertElement.style.display = 'block'; // Make sure to display the element

  }



</script>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.html">Basics</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Basics</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Epidemiologist R Handbook</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_eng" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">About this book</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Editorial and technical notes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Download handbook and data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transition to R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suggested packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Import and export</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Management</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Cleaning data and core functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Working with dates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Characters and strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Pivoting data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Grouping data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Joining data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">De-duplication</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Iteration, loops, and lists</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Descriptive tables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Simple statistical tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Univariate and multivariable regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Missing data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Standardised rates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Moving averages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Time series and outbreak detection</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Epidemic modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contact tracing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Survey analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Survival analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">GIS basics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Tables for presentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">ggplot basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">ggplot tips</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Epidemic curves</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Demographic pyramids and Likert-scales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Heat plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Diagrams and charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Combinations analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Transmission chains</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Phylogenetic trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Interactive plots</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Reports and dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organizing routine reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Dashboards with R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards with Shiny</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Miscellaneous</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Writing functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Directory interactions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Version control and collaboration with Git and Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Common errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Getting help</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">R on network drives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Data Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-use-r" id="toc-why-use-r" class="nav-link active" data-scroll-target="#why-use-r"><span class="header-section-number">3.1</span> Why use R?</a></li>
  <li><a href="#key-terms" id="toc-key-terms" class="nav-link" data-scroll-target="#key-terms"><span class="header-section-number">3.2</span> Key terms</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning"><span class="header-section-number">3.3</span> Resources for learning</a>
  <ul class="collapse">
  <li><a href="#resources-within-rstudio" id="toc-resources-within-rstudio" class="nav-link" data-scroll-target="#resources-within-rstudio">Resources within RStudio</a></li>
  <li><a href="#cheatsheets" id="toc-cheatsheets" class="nav-link" data-scroll-target="#cheatsheets">Cheatsheets</a></li>
  <li><a href="#twitter" id="toc-twitter" class="nav-link" data-scroll-target="#twitter">Twitter</a></li>
  <li><a href="#free-online-resources" id="toc-free-online-resources" class="nav-link" data-scroll-target="#free-online-resources">Free online resources</a></li>
  <li><a href="#languages-other-than-english" id="toc-languages-other-than-english" class="nav-link" data-scroll-target="#languages-other-than-english">Languages other than English</a></li>
  </ul></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation"><span class="header-section-number">3.4</span> Installation</a>
  <ul class="collapse">
  <li><a href="#r-and-rstudio" id="toc-r-and-rstudio" class="nav-link" data-scroll-target="#r-and-rstudio">R and RStudio</a></li>
  <li><a href="#other-software-you-may-need-to-install" id="toc-other-software-you-may-need-to-install" class="nav-link" data-scroll-target="#other-software-you-may-need-to-install">Other software you <em>may</em> need to install</a></li>
  </ul></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio"><span class="header-section-number">3.5</span> RStudio</a>
  <ul class="collapse">
  <li><a href="#rstudio-orientation" id="toc-rstudio-orientation" class="nav-link" data-scroll-target="#rstudio-orientation">RStudio orientation</a></li>
  <li><a href="#rstudio-settings" id="toc-rstudio-settings" class="nav-link" data-scroll-target="#rstudio-settings">RStudio settings</a></li>
  <li><a href="#keyboard-shortcuts" id="toc-keyboard-shortcuts" class="nav-link" data-scroll-target="#keyboard-shortcuts">Keyboard shortcuts</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">3.6</span> Functions</a>
  <ul class="collapse">
  <li><a href="#simple-functions" id="toc-simple-functions" class="nav-link" data-scroll-target="#simple-functions">Simple functions</a></li>
  <li><a href="#functions-with-multiple-arguments" id="toc-functions-with-multiple-arguments" class="nav-link" data-scroll-target="#functions-with-multiple-arguments">Functions with multiple arguments</a></li>
  <li><a href="#writing-functions" id="toc-writing-functions" class="nav-link" data-scroll-target="#writing-functions">Writing Functions</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">3.7</span> Packages</a>
  <ul class="collapse">
  <li><a href="#install-and-load" id="toc-install-and-load" class="nav-link" data-scroll-target="#install-and-load">Install and load</a></li>
  <li><a href="#code-syntax" id="toc-code-syntax" class="nav-link" data-scroll-target="#code-syntax">Code syntax</a></li>
  <li><a href="#function-help" id="toc-function-help" class="nav-link" data-scroll-target="#function-help">Function help</a></li>
  <li><a href="#update-packages" id="toc-update-packages" class="nav-link" data-scroll-target="#update-packages">Update packages</a></li>
  <li><a href="#delete-packages" id="toc-delete-packages" class="nav-link" data-scroll-target="#delete-packages">Delete packages</a></li>
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies">Dependencies</a></li>
  <li><a href="#masked-functions" id="toc-masked-functions" class="nav-link" data-scroll-target="#masked-functions">Masked functions</a></li>
  <li><a href="#detach-unload" id="toc-detach-unload" class="nav-link" data-scroll-target="#detach-unload">Detach / unload</a></li>
  <li><a href="#install-older-version" id="toc-install-older-version" class="nav-link" data-scroll-target="#install-older-version">Install older version</a></li>
  <li><a href="#suggested-packages" id="toc-suggested-packages" class="nav-link" data-scroll-target="#suggested-packages">Suggested packages</a></li>
  </ul></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">3.8</span> Scripts</a>
  <ul class="collapse">
  <li><a href="#commenting" id="toc-commenting" class="nav-link" data-scroll-target="#commenting">Commenting</a></li>
  <li><a href="#style" id="toc-style" class="nav-link" data-scroll-target="#style">Style</a></li>
  <li><a href="#example-script" id="toc-example-script" class="nav-link" data-scroll-target="#example-script">Example Script</a></li>
  <li><a href="#r-markdown-and-quarto" id="toc-r-markdown-and-quarto" class="nav-link" data-scroll-target="#r-markdown-and-quarto">R markdown and Quarto</a></li>
  <li><a href="#r-notebooks" id="toc-r-notebooks" class="nav-link" data-scroll-target="#r-notebooks">R notebooks</a></li>
  <li><a href="#shiny" id="toc-shiny" class="nav-link" data-scroll-target="#shiny">Shiny</a></li>
  <li><a href="#code-folding" id="toc-code-folding" class="nav-link" data-scroll-target="#code-folding">Code folding</a></li>
  </ul></li>
  <li><a href="#working-directory" id="toc-working-directory" class="nav-link" data-scroll-target="#working-directory"><span class="header-section-number">3.9</span> Working directory</a>
  <ul class="collapse">
  <li><a href="#recommended-approach" id="toc-recommended-approach" class="nav-link" data-scroll-target="#recommended-approach">Recommended approach</a></li>
  <li><a href="#set-by-command" id="toc-set-by-command" class="nav-link" data-scroll-target="#set-by-command">Set by command</a></li>
  <li><a href="#set-manually" id="toc-set-manually" class="nav-link" data-scroll-target="#set-manually">Set manually</a></li>
  <li><a href="#within-an-r-project" id="toc-within-an-r-project" class="nav-link" data-scroll-target="#within-an-r-project">Within an R project</a></li>
  <li><a href="#working-directory-in-an-r-markdown" id="toc-working-directory-in-an-r-markdown" class="nav-link" data-scroll-target="#working-directory-in-an-r-markdown">Working directory in an R markdown</a></li>
  <li><a href="#providing-file-paths" id="toc-providing-file-paths" class="nav-link" data-scroll-target="#providing-file-paths">Providing file paths</a></li>
  </ul></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects"><span class="header-section-number">3.10</span> Objects</a>
  <ul class="collapse">
  <li><a href="#everything-is-an-object" id="toc-everything-is-an-object" class="nav-link" data-scroll-target="#everything-is-an-object">Everything is an object</a></li>
  <li><a href="#defining-objects--" id="toc-defining-objects--" class="nav-link" data-scroll-target="#defining-objects--">Defining objects (<code>&lt;-</code>)</a></li>
  <li><a href="#object-structure" id="toc-object-structure" class="nav-link" data-scroll-target="#object-structure">Object structure</a></li>
  <li><a href="#object-classes" id="toc-object-classes" class="nav-link" data-scroll-target="#object-classes">Object classes</a></li>
  <li><a href="#columnsvariables" id="toc-columnsvariables" class="nav-link" data-scroll-target="#columnsvariables">Columns/Variables (<code>$</code>)</a></li>
  <li><a href="#accessindex-with-brackets" id="toc-accessindex-with-brackets" class="nav-link" data-scroll-target="#accessindex-with-brackets">Access/index with brackets (<code>[ ]</code>)</a></li>
  <li><a href="#remove-objects" id="toc-remove-objects" class="nav-link" data-scroll-target="#remove-objects">Remove objects</a></li>
  </ul></li>
  <li><a href="#piping" id="toc-piping" class="nav-link" data-scroll-target="#piping"><span class="header-section-number">3.11</span> Piping (<code>%&gt;%</code>)</a>
  <ul class="collapse">
  <li><a href="#pipes" id="toc-pipes" class="nav-link" data-scroll-target="#pipes"><strong>Pipes</strong></a></li>
  <li><a href="#define-intermediate-objects" id="toc-define-intermediate-objects" class="nav-link" data-scroll-target="#define-intermediate-objects">Define intermediate objects</a></li>
  </ul></li>
  <li><a href="#operators" id="toc-operators" class="nav-link" data-scroll-target="#operators"><span class="header-section-number">3.12</span> Key operators and functions</a>
  <ul class="collapse">
  <li><a href="#assignment-operators" id="toc-assignment-operators" class="nav-link" data-scroll-target="#assignment-operators">Assignment operators</a></li>
  <li><a href="#relational-and-logical-operators" id="toc-relational-and-logical-operators" class="nav-link" data-scroll-target="#relational-and-logical-operators">Relational and logical operators</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  <li><a href="#mathematics-and-statistics" id="toc-mathematics-and-statistics" class="nav-link" data-scroll-target="#mathematics-and-statistics">Mathematics and statistics</a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><code>%in%</code></a></li>
  </ul></li>
  <li><a href="#errors-warnings" id="toc-errors-warnings" class="nav-link" data-scroll-target="#errors-warnings"><span class="header-section-number">3.13</span> Errors &amp; warnings</a>
  <ul class="collapse">
  <li><a href="#error-versus-warning" id="toc-error-versus-warning" class="nav-link" data-scroll-target="#error-versus-warning">Error versus Warning</a></li>
  <li><a href="#general-syntax-tips" id="toc-general-syntax-tips" class="nav-link" data-scroll-target="#general-syntax-tips">General syntax tips</a></li>
  <li><a href="#code-assists" id="toc-code-assists" class="nav-link" data-scroll-target="#code-assists">Code assists</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/basics.html">Basics</a></li><li class="breadcrumb-item"><a href="../new_pages/basics.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Basics</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="rbasics" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Basics</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/basics_header_close.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/basics_header_close.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Welcome!</p>
<p>This page reviews the essentials of R. It is not intended to be a comprehensive tutorial, but it provides the basics and can be useful for refreshing your memory. The section on <a href="#learning">Resources for learning</a> links to more comprehensive tutorials.</p>
<p>Parts of this page have been adapted with permission from the <a href="https://r4epis.netlify.app/">R4Epis project</a>.</p>
<p>See the page on <a href="../new_pages/transition_to_R.html">Transition to R</a> for tips on switching to R from STATA, SAS, or Excel.</p>
<!-- ======================================================= -->
<section id="why-use-r" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="why-use-r"><span class="header-section-number">3.1</span> Why use R?</h2>
<p>As stated on the <a href="https://www.r-project.org/about.html">R project website</a>, R is a programming language and environment for statistical computing and graphics. It is highly versatile, extendable, and community-driven.</p>
<p><strong>Cost</strong></p>
<p>R is free to use! There is a strong ethic in the community of free and open-source material.</p>
<p><strong>Reproducibility</strong></p>
<p>Conducting your data management and analysis through a programming language (compared to Excel or another primarily point-click/manual tool) enhances <strong>reproducibility</strong>, makes <strong>error-detection</strong> easier, and eases your workload.</p>
<p><strong>Community</strong></p>
<p>The R community of users is enormous and collaborative. New packages and tools to address real-life problems are developed daily, and vetted by the community of users. As one example, <a href="https://rladies.org/">R-Ladies</a> is a worldwide organization whose mission is to promote gender diversity in the R community, and is one of the largest organizations of R users. It likely has a chapter near you!</p>
</section>
<section id="key-terms" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="key-terms"><span class="header-section-number">3.2</span> Key terms</h2>
<p><strong>RStudio</strong> - RStudio is a Graphical User Interface (GUI) for easier use of <strong>R</strong>. Read more <a href="#rstudio">in the RStudio section</a>.</p>
<p><strong>Objects</strong> - Everything you store in R - datasets, variables, a list of village names, a total population number, even outputs such as graphs - are <em>objects</em> which are <em>assigned a name</em> and <em>can be referenced</em> in later commands. Read more in the <a href="#objects">Objects section</a>.</p>
<p><strong>Functions</strong> - A function is a code operation that accept inputs and returns a transformed output. Read more <a href="#functions">in the Functions section</a>.</p>
<p><strong>Packages</strong> - An R package is a shareable bundle of functions. Read more <a href="#packages">in the Packages section</a>.</p>
<p><strong>Scripts</strong> - A script is the document file that hold your commands. Read more <a href="#scripts">in the Scripts section</a>.</p>
</section>
<section id="learning" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="learning"><span class="header-section-number">3.3</span> Resources for learning</h2>
<section id="resources-within-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="resources-within-rstudio">Resources within RStudio</h3>
<p><strong>Help documentation</strong></p>
<p>Search the RStudio “Help” tab for documentation on R packages and specific functions. This is within the pane that also contains Files, Plots, and Packages (typically in the lower-right pane). As a shortcut, you can also type the name of a package or function into the R console after a question-mark to open the relevant Help page. Do not include parentheses.</p>
<p>For example: <code>?filter</code> or <code>?diagrammeR</code>.</p>
<p><strong>Interactive tutorials</strong></p>
<p>There are several ways to learn R interactively <em>within</em> RStudio.</p>
<p>RStudio itself offers a Tutorial pane that is powered by the <a href="https://blog.rstudio.com/2020/02/25/rstudio-1-3-integrated-tutorials/"><strong>learnr</strong></a> R package. Simply install this package and open a tutorial via the new “Tutorial” tab in the upper-right RStudio pane (which also contains Environment and History tabs).</p>
<p>The R package <a href="https://swirlstats.com/"><strong>swirl</strong></a> offers interactive courses in the R Console. Install and load this package, then run the command <code>swirl()</code> (empty parentheses) in the R console. You will see prompts appear in the Console. Respond by typing in the Console. It will guide you through a course of your choice.</p>
</section>
<section id="cheatsheets" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cheatsheets">Cheatsheets</h3>
<p>There are many PDF “cheatsheets” available on the <a href="https://rstudio.com/resources/cheatsheets/">RStudio website</a>, for example:</p>
<ul>
<li>Factors with <strong>forcats</strong> package.<br>
</li>
<li>Dates and times with <strong>lubridate</strong> package.<br>
</li>
<li>Strings with <strong>stringr</strong> package.<br>
</li>
<li>iterative opertaions with <strong>purrr</strong> package.<br>
</li>
<li>Data import.<br>
</li>
<li>Data transformation cheatsheet with <strong>dplyr</strong> package.<br>
</li>
<li>R Markdown (to create documents like PDF, Word, Powerpoint…).<br>
</li>
<li>Shiny (to build interactive web apps).<br>
</li>
<li>Data visualization with <strong>ggplot2</strong> package.<br>
</li>
<li>Cartography (GIS).<br>
</li>
<li><strong>leaflet</strong> package (interactive maps).<br>
</li>
<li>Python with R (<strong>reticulate</strong> package).</li>
</ul>
<p>This is an online R resource specifically for <a href="https://jules32.github.io/r-for-excel-users/">Excel users</a>.</p>
</section>
<section id="twitter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="twitter">Twitter</h3>
<ul>
<li>Follow us! <a href="https://twitter.com/epirhandbook">@epiRhandbook</a></li>
</ul>
<p>Also:</p>
<p><strong>#epitwitter</strong> and <strong>#rstats</strong></p>
</section>
<section id="free-online-resources" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="free-online-resources">Free online resources</h3>
<p>A definitive text is the <a href="https://r4ds.hadley.nz/">R for Data Science</a> book by Garrett Grolemund and Hadley Wickham.</p>
<p>The <a href="https://r4epis.netlify.app/">R4Epis</a> project website aims to “develop standardised data cleaning, analysis and reporting tools to cover common types of outbreaks and population-based surveys that would be conducted in an MSF emergency response setting”. You can find R basics training materials, templates for RMarkdown reports on outbreaks and surveys, and tutorials to help you set them up.</p>
</section>
<section id="languages-other-than-english" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="languages-other-than-english">Languages other than English</h3>
<p><a href="https://github.com/cienciadedatos/">Materiales de RStudio en Español</a></p>
<p><a href="https://juba.github.io/tidyverse/index.html">Introduction à R et au tidyverse (Francais)</a></p>
<!-- ======================================================= -->
</section>
</section>
<section id="installation" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="installation"><span class="header-section-number">3.4</span> Installation</h2>
<section id="r-and-rstudio" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-and-rstudio">R and RStudio</h3>
<p><strong>How to install R</strong></p>
<p>Visit this website <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a> and download the latest version of R suitable for your computer.</p>
<p><strong>How to install RStudio</strong></p>
<p>Visit this website <a href="https://rstudio.com/products/rstudio/download/" class="uri">https://rstudio.com/products/rstudio/download/</a> and download the latest free Desktop version of RStudio suitable for your computer.</p>
<p><strong>Permissions</strong><br>
Note that you should install R and RStudio to a drive where you have read and write permissions. Otherwise, your ability to install R packages (a frequent occurrence) will be impacted. If you encounter problems, try opening RStudio by right-clicking the icon and selecting “Run as administrator”. Other tips can be found in the page <a href="../new_pages/network_drives.html">R on network drives</a>.</p>
<p><strong>How to update R and RStudio</strong></p>
<p>Your version of R is printed to the R Console at start-up. You can also run <code>sessionInfo()</code>.</p>
<p>To update R, go to the website mentioned above and re-install R. Alternatively, you can use the <strong>installr</strong> package (on Windows) by running <code>installr::updateR()</code>. This will open dialog boxes to help you download the latest R version and update your packages to the new R version. More details can be found in the <strong>installr</strong> <a href="https://talgalili.github.io/installr/">documentation</a>.</p>
<p>Be aware that the old R version will still exist in your computer. You can temporarily run an older version of R by clicking “Tools” -&gt; “Global Options” in RStudio and choosing an R version. This can be useful if you want to use a package that has not been updated to work on the newest version of R.</p>
<p>To update RStudio, you can go to the website above and re-download RStudio. Another option is to click “Help” -&gt; “Check for Updates” within RStudio, but this may not show the very latest updates.</p>
<p>To see which versions of R, RStudio, or packages were used when this Handbook as made, see the page on <a href="../new_pages/editorial_style.html">Editorial and technical notes</a>.</p>
</section>
<section id="other-software-you-may-need-to-install" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="other-software-you-may-need-to-install">Other software you <em>may</em> need to install</h3>
<ul>
<li>TinyTeX (for compiling an RMarkdown document to PDF).<br>
</li>
<li>Pandoc (for compiling RMarkdown documents).<br>
</li>
<li>RTools (for building packages for R).<br>
</li>
<li>phantomjs (for saving still images of animated networks, such as transmission chains).</li>
</ul>
<section id="tinytex" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="tinytex">TinyTex</h4>
<p>TinyTex is a custom LaTeX distribution, useful when trying to produce PDFs from R.<br>
See <a href="https://yihui.org/tinytex/" class="uri">https://yihui.org/tinytex/</a> for more informaton.</p>
<p>To install TinyTex from R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'tinytex'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to uninstall TinyTeX, run tinytex::uninstall_tinytex()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pandoc" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="pandoc">Pandoc</h4>
<p>Pandoc is a document converter, a separate software from R. <strong>It comes bundled with RStudio and should not need to be downloaded.</strong> It helps the process of converting Rmarkdown documents to formats like .pdf and adding complex functionality.</p>
</section>
<section id="rtools" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rtools">RTools</h4>
<p>RTools is a collection of software for building packages for R</p>
<p>Install from this website: <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</section>
<section id="phantomjs" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="phantomjs">phantomjs</h4>
<p>This is often used to take “screenshots” of webpages. For example when you make a transmission chain with <strong>epicontacts</strong> package, an HTML file is produced that is interactive and dynamic. If you want a static image, it can be useful to use the <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> package to automate this process. This will require the external program “phantomjs”. You can install phantomjs via the <strong>webshot</strong> package with the command <code>webshot::install_phantomjs()</code>.</p>
<!-- ======================================================= -->
</section>
</section>
</section>
<section id="rstudio" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="rstudio"><span class="header-section-number">3.5</span> RStudio</h2>
<section id="rstudio-orientation" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="rstudio-orientation">RStudio orientation</h3>
<p><strong>First, open RStudio.</strong></p>
<p>As their icons can look very similar, be sure you are opening <em>RStudio</em> and not R.</p>
<p>For RStudio to work you must also have R installed on the computer (see above for installation instructions).</p>
<p><strong>RStudio</strong> is an interface (GUI) for easier use of <strong>R</strong>. You can think of R as being the engine of a vehicle, doing the crucial work, and RStudio as the body of the vehicle (with seats, accessories, etc.) that helps you actually use the engine to move forward! You can see the complete RStudio user-interface cheatsheet (PDF) <a href="https://rstudio.github.io/cheatsheets/html/rstudio-ide.html">here</a>.</p>
<p>By default RStudio displays four rectangle panes.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/RStudio_overview.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../images/RStudio_overview.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: black;"><strong><em>TIP:</em></strong> If your RStudio displays only one left pane it is because you have no scripts open yet.</span></p>
<p><strong>The Source Pane</strong><br>
This pane, by default in the upper-left, is a space to edit, run, and save your <a href="#scripts">scripts</a>. Scripts contain the commands you want to run. This pane can also display datasets (data frames) for viewing.</p>
<p>For Stata users, this pane is similar to your Do-file and Data Editor windows.</p>
<p><strong>The R Console Pane</strong></p>
<p>The R Console, by default the left or lower-left pane in R Studio, is the home of the R “engine”. This is where the commands are actually run and non-graphic outputs and error/warning messages appear. You can directly enter and run commands in the R Console, but realize that these commands are not saved as they are when running commands from a script.</p>
<p>If you are familiar with Stata, the R Console is like the Command Window and also the Results Window.</p>
<p><strong>The Environment Pane</strong><br>
This pane, by default in the upper-right, is most often used to see brief summaries of <a href="#objects">objects</a> in the R Environment in the current session. These objects could include imported, modified, or created datasets, parameters you have defined (e.g.&nbsp;a specific epi week for the analysis), or vectors or lists you have defined during analysis (e.g.&nbsp;names of regions). You can click on the arrow next to a data frame name to see its variables.</p>
<p>In Stata, this is most similar to the Variables Manager window.</p>
<p>This pane also contains <em>History</em> where you can see commands that you can previously. It also has a “Tutorial” tab where you can complete interactive R tutorials if you have the <strong>learnr</strong> package installed. It also has a “Connections” pane for external connections, and can have a “Git” pane if you choose to interface with Github.</p>
<p><strong>Plots, Viewer, Packages, and Help Pane</strong><br>
The lower-right pane includes several important tabs. Typical plot graphics including maps will display in the Plot pane. Interactive or HTML outputs will display in the Viewer pane. The Help pane can display documentation and help files. The Files pane is a browser which can be used to open or delete files. The Packages pane allows you to see, install, update, delete, load/unload R packages, and see which version of the package you have. To learn more about packages see the <a href="#packages">packages section</a> below.</p>
<p>This pane contains the Stata equivalents of the Plots Manager and Project Manager windows.</p>
</section>
<section id="rstudio-settings" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="rstudio-settings">RStudio settings</h3>
<p>Change RStudio settings and appearance in the <em>Tools</em> drop-down menu, by selecting <em>Global Options</em>. There you can change the default settings, including appearance/background color.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/RStudio_tools_options_1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/RStudio_tools_options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/RStudio_tools_options.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>Restart</strong></p>
<p>If your R freezes, you can re-start R by going to the Session menu and clicking “Restart R”. This avoids the hassle of closing and opening RStudio.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> Everything in your R environment will be removed when you do this.</span></p>
</section>
<section id="keyboard-shortcuts" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="keyboard-shortcuts">Keyboard shortcuts</h3>
<p>Some very useful keyboard shortcuts are below. See all the keyboard shortcuts for Windows, Max, and Linux <a href="https://rstudio.github.io/cheatsheets/html/rstudio-ide.html#keyboard-shortcuts">Rstudio user interface cheatsheet</a>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 13%">
<col style="width: 67%">
<col style="width: 0%">
</colgroup>
<thead>
<tr class="header">
<th>Windows/Linux</th>
<th>Mac</th>
<th>Action</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Esc</td>
<td>Esc</td>
<td colspan="2">Interrupt current command (useful if you accidentally ran an incomplete command and cannot escape seeing “+” in the R console).</td>
</tr>
<tr class="even">
<td>Ctrl+s</td>
<td>Cmd+s</td>
<td colspan="2">Save (script).</td>
</tr>
<tr class="odd">
<td>Tab</td>
<td>Tab</td>
<td colspan="2">Auto-complete.</td>
</tr>
<tr class="even">
<td>Ctrl + Enter</td>
<td>Cmd + Enter</td>
<td colspan="2">Run current line(s)/selection of code.</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + C</td>
<td>Cmd + Shift + c</td>
<td colspan="2">Comment/uncomment the highlighted lines.</td>
</tr>
<tr class="even">
<td>Alt + -</td>
<td>Option + -</td>
<td colspan="2">Insert <code>&lt;-</code>.</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + m</td>
<td>Cmd + Shift + m</td>
<td colspan="2">Insert <code>%&gt;%</code>.</td>
</tr>
<tr class="even">
<td>Ctrl + l</td>
<td>Cmd + l</td>
<td colspan="2">Clear the R console.</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + b</td>
<td>Cmd + Option + b</td>
<td colspan="2">Run from start to current. line</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + t</td>
<td>Cmd + Option + t</td>
<td colspan="2">Run the current code section (R Markdown).</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + i</td>
<td>Cmd + Shift + r</td>
<td colspan="2">Insert code chunk (into R Markdown).</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + c</td>
<td>Cmd + Option + c</td>
<td colspan="2">Run current code chunk (R Markdown).</td>
</tr>
<tr class="odd">
<td>up/down arrows in R console</td>
<td>Same</td>
<td colspan="2">Toggle through recently run commands.</td>
</tr>
<tr class="even">
<td>Shift + up/down arrows in script</td>
<td>Same</td>
<td colspan="2">Select multiple code lines.</td>
</tr>
<tr class="odd">
<td>Ctrl + f</td>
<td>Cmd + f</td>
<td colspan="2">Find and replace in current script.</td>
</tr>
<tr class="even">
<td>Ctrl + Shift + f</td>
<td>Cmd + Shift + f</td>
<td colspan="2">Find in files (search/replace across many scripts).</td>
</tr>
<tr class="odd">
<td>Alt + l</td>
<td>Cmd + Option + l</td>
<td colspan="2">Fold selected code.</td>
</tr>
<tr class="even">
<td>Shift + Alt + l</td>
<td>Cmd + Shift + Option+l</td>
<td colspan="2">Unfold selected code.</td>
</tr>
</tbody>
</table>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Use your Tab key when typing to engage RStudio’s auto-complete functionality. This can prevent spelling errors. Press Tab while typing to produce a drop-down menu of likely functions and objects, based on what you have typed so far.</span></p>
<!-- ======================================================= -->
</section>
</section>
<section id="functions" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="functions"><span class="header-section-number">3.6</span> Functions</h2>
<p>Functions are at the core of using R. Functions are how you perform tasks and operations. Many functions come installed with R, many more are available for download in <em>packages</em> (explained in the <a href="#packages">packages</a> section), and you can even write your own custom functions!</p>
<p>This basics section on functions explains:</p>
<ul>
<li>What a function is and how they work.<br>
</li>
<li>What function <em>arguments</em> are.<br>
</li>
<li>How to get help understanding a function.</li>
</ul>
<p><em>A quick note on syntax:</em> In this handbook, functions are written in code-text with open parentheses, like this: <code>filter()</code>. As explained in the <a href="#packages">packages</a> section, functions are downloaded within <em>packages</em>. In this handbook, package names are written in <strong>bold</strong>, like <strong>dplyr</strong>. Sometimes in example code you may see the function name linked explicitly to the name of its package with two colons (<code>::</code>) like this: <code>dplyr::filter()</code>. The purpose of this linkage is explained in the packages section.</p>
<!-- ======================================================= -->
<section id="simple-functions" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="simple-functions">Simple functions</h3>
<p><strong>A function is like a machine that receives inputs, carries out an action with those inputs, and produces an output.</strong> What the output is depends on the function.</p>
<p><strong>Functions typically operate upon some object placed within the function’s parentheses</strong>. For example, the function <code>sqrt()</code> calculates the square root of a number:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>The object provided to a function also can be a column in a dataset (see the <a href="#objects">Objects</a> section for detail on all the kinds of objects). Because R can store multiple datasets, you will need to specify both the dataset and the column. One way to do this is using the <code>$</code> notation to link the name of the dataset and the name of the column (<code>dataset$column</code>). In the example below, the function <code>summary()</code> is applied to the numeric column <code>age</code> in the dataset <code>linelist</code>, and the output is a summary of the column’s numeric and missing values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print summary statistics of column 'age' in the dataset 'linelist'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Behind the scenes, a function represents complex additional code that has been wrapped up for the user into one easy command.</span></p>
<!-- ======================================================= -->
</section>
<section id="functions-with-multiple-arguments" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="functions-with-multiple-arguments">Functions with multiple arguments</h3>
<p>Functions often ask for several inputs, called <strong><em>arguments</em></strong>, located within the parentheses of the function, usually separated by commas.</p>
<ul>
<li>Some arguments are required for the function to work correctly, others are optional.<br>
</li>
<li>Optional arguments have default settings.<br>
</li>
<li>Arguments can take character, numeric, logical (TRUE/FALSE), and other inputs.</li>
</ul>
<p>Here is a fun fictional function, called <code>oven_bake()</code>, as an example of a typical function. It takes an input object (e.g.&nbsp;a dataset, or in this example “dough”) and performs operations on it as specified by additional arguments (<code>minutes =</code> and <code>temperature =</code>). The output can be printed to the console, or saved as an object using the assignment operator <code>&lt;-</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Function_Bread_Example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/Function_Bread_Example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><strong>In a more realistic example</strong>, the <code>age_pyramid()</code> command below produces an age pyramid plot based on defined age groups and a binary split column, such as <code>gender</code>. The function is given three arguments within the parentheses, separated by commas. The values supplied to the arguments establish <code>linelist</code> as the data frame to use, <code>age_cat5</code> as the column to count, and <code>gender</code> as the binary column to use for splitting the pyramid by color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an age pyramid</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(<span class="at">data =</span> linelist, <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="at">split_by =</span> <span class="st">"gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="basics_files/figure-html/unnamed-chunk-6-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>The above command can be equivalently written as below, in a longer style with a new line for each argument. This style can be easier to read, and easier to write “comments” with <code>#</code> to explain each part (commenting extensively is good practice!). To run this longer command you can highlight the entire command and click “Run”, or just place your cursor in the first line and then press the Ctrl and Enter keys simultaneously.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an age pyramid</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> linelist,        <span class="co"># use case linelist</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="st">"age_cat5"</span>, <span class="co"># provide age group column</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="st">"gender"</span>     <span class="co"># use gender column for two sides of pyramid</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="basics_files/figure-html/unnamed-chunk-7-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>The first half of an argument assignment (e.g.&nbsp;<code>data =</code>) does not need to be specified if the arguments are written in a specific order (specified in the function’s documentation). The below code produces the exact same pyramid as above, because the function expects the argument order: data frame, <code>age_group</code> variable, <code>split_by</code> variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This command will produce the exact same graphic as above</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(linelist, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>A more complex <code>age_pyramid()</code> command might include the <em>optional</em> arguments to:</strong></p>
<ul>
<li>Show proportions instead of counts (set <code>proportional = TRUE</code> when the default is <code>FALSE</code>)<br>
</li>
<li>Specify the two colors to use (<code>pal =</code> is short for “palette” and is supplied with a vector of two color names. See the <a href="https://epirhandbook.com/new_pages/basics.html#objects">objects</a> page for how the function <code>c()</code> makes a vector)</li>
</ul>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> For arguments that you specify with both parts of the argument (e.g.&nbsp;<code>proportional = TRUE</code>), their order among all the arguments does not matter.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">age_pyramid</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  linelist,                    <span class="co"># use case linelist</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"age_cat5"</span>,                  <span class="co"># age group column</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gender"</span>,                    <span class="co"># split by gender</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportional =</span> <span class="cn">TRUE</span>,         <span class="co"># percents instead of counts</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"purple"</span>)  <span class="co"># colors</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="basics_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="basics_files/figure-html/unnamed-chunk-8-1.png" style="width:75.0%;height:75.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p><strong><em>TIP:</em></strong> Remember that you can put <code>?</code> before a function to see what arguments the function can take, and which arguments are needed and which arguments have default values. For example `?age_pyramid’.</p>
<!-- ======================================================= -->
</section>
<section id="writing-functions" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="writing-functions">Writing Functions</h3>
<p>R is a language that is oriented around functions, so you should feel empowered to write your own functions. Creating functions brings several advantages:</p>
<ul>
<li>To facilitate modular programming - the separation of code in to independent and manageable pieces.<br>
</li>
<li>Replace repetitive copy-and-paste, which can be error prone.<br>
</li>
<li>Give pieces of code memorable names.</li>
</ul>
<p>How to write a function is covered in-depth in the <a href="../new_pages/writing_functions.html">Writing functions</a> page.</p>
<!-- A function is given a name and defined with the assignment operator `<-` to a special **base** R function called `function()`. Within the parentheses, the arguments that the function will accept are defined. This is followed by curly brackets `{ }`, within which the actual code of the function is written.     -->
<!-- The arguments should be provided in the syntax `argument = default`, separated by commas.   -->
<!-- Here is an example where we create a function `staff_calc()` to serve as a staffing calculator for COVID-19 case investigation and contact tracing calls.   -->
<!-- The arguments (inputs) and their default values will be:   -->
<!-- * `daily_cases = NULL` The number of new COVID-19 cases per day   -->
<!-- * `contacts_each = 5` The number contacts enumerated for each case   -->
<!-- * `time_case = 0.5`  Number of hours to complete a case investigaton by phone   -->
<!-- * `time_contact = 0.25`  Number of hours to complete a contact follow-up by phone   -->
<!-- * `time_day = 8` The number of hours one staff works per day   -->
<!-- Below, the function is created. The code ends with the special function `return()`, which is what the function produces.    -->
<!-- ```{r message=FALSE, warning=FALSE, out.width = "75%", out.height="75%"} -->
<!-- staff_calc <- function(daily_cases = NULL, contacts_each = 5, -->
<!--                        time_case = 0.5, time_contact = 0.25, time_day = 8){ -->
<!--   # Define total daily hours for calling cases -->
<!--   case_hours <- daily_cases * time_case  -->
<!--   # Define total daily hours for calling contacts -->
<!--   contact_hours <- daily_cases * contacts_each * time_contact -->
<!--   # Calculate number of staff required -->
<!--   staff_required <- (case_hours + contact_hours)/time_day -->
<!--   return(staff_required) -->
<!-- } -->
<!-- ``` -->
<!-- Once this code is run, the function will be defined and will appear in the R Environment. We can run the function. Below all the default values are used and the `daily_cases = ` is set to 150.   -->
<!-- There are many other nuances to understand when writing functions, as discussed in the page [Writing functions].   -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="packages" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="packages"><span class="header-section-number">3.7</span> Packages</h2>
<p><strong>Packages contain functions.</strong></p>
<p>An R package is a shareable bundle of code and documentation that contains pre-defined functions. Users in the R community develop packages all the time catered to specific problems, it is likely that one can help with your work! You will install and use hundreds of packages in your use of R.</p>
<p>On installation, R contains <strong>“base”</strong> packages and functions that perform common elementary tasks. But many R users create specialized functions, which are verified by the R community and which you can download as a <strong>package</strong> for your own use. In this handbook, package names are written in <strong>bold</strong>. One of the more challenging aspects of R is that there are often many functions or packages to choose from to complete a given task.</p>
<section id="install-and-load" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="install-and-load">Install and load</h3>
<p><em>Functions</em> are contained within <strong>packages</strong> which can be downloaded (“installed”) to your computer from the internet. Once a package is downloaded, it is stored in your “library”. You can then access the functions it contains during your current R session by “loading” the package.</p>
<p><em>Think of R as your personal library</em>: When you download a package, your library gains a new book of functions, but each time you want to use a function in that book, you must borrow,“load”, that book from your library.</p>
<p>In summary: to use the functions available in an R package, 2 steps must be implemented:</p>
<ol type="1">
<li>The package must be <strong>installed</strong> (once), <em>and</em><br>
</li>
<li>The package must be <strong>loaded</strong> (each R session)</li>
</ol>
<section id="your-library" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="your-library">Your library</h4>
<p>Your “library” is actually a folder on your computer, containing a folder for each package that has been installed. Find out where R is installed in your computer, and look for a folder called “win-library”. For example: <code>R\win-library\4.4.1</code> (the 4.4.1 is the R version - you’ll have a different library for each R version you’ve downloaded).</p>
<p>You can print the file path to your library by entering <code>.libPaths()</code> (empty parentheses). This becomes especially important if working with <a href="../new_pages/network_drives.html">R on network drives</a>.</p>
</section>
<section id="install-from-cran" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="install-from-cran">Install from CRAN</h4>
<p>Most often, R users download packages from CRAN. CRAN (Comprehensive R Archive Network) is an online public warehouse of R packages that have been published by R community members.</p>
<p>Are you worried about viruses and security when downloading a package from CRAN? Read <a href="https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security">this article</a> on the topic.</p>
</section>
<section id="how-to-install-and-load" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="how-to-install-and-load">How to install and load</h4>
<p>In this handbook, we suggest using the <strong>pacman</strong> package (short for “package manager”). It offers a convenient function <code>p_load()</code> which will install a package if necessary <em>and</em> load it for use in the current R session.</p>
<p>The syntax quite simple. Just list the names of the packages within the <code>p_load()</code> parentheses, separated by commas. This command will install the <strong>rio</strong>, <strong>tidyverse</strong>, and <strong>here</strong> packages if they are not yet installed, and will load them for use. This makes the <code>p_load()</code> approach convenient and concise if sharing scripts with others.</p>
<p>Note that package names are case-sensitive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install (if necessary) and load packages for use</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rio, tidyverse, here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we have used the syntax <code>pacman::p_load()</code> which explicitly writes the package name (<strong>pacman</strong>) prior to the function name (<code>p_load()</code>), connected by two colons <code>::</code>. This syntax is useful because it also loads the <strong>pacman</strong> package (assuming it is already installed).</p>
<p>There are alternative <strong>base</strong> R functions that you will see often. The <strong>base</strong> R function for installing a package is <code>install.packages()</code>. The name of the package to install must be provided in the parentheses <em>in quotes</em>. If you want to install multiple packages in one command, they must be listed within a character vector <code>c()</code>.</p>
<p>Note: this command <em>installs</em> a package, but does <em>not</em> load it for use in the current session.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install a single package with base R</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install multiple packages with base R</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"rio"</span>, <span class="st">"here"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Installation can also be accomplished point-and-click by going to the RStudio “Packages” pane and clicking “Install” and searching for the desired package name.</p>
<p>The <strong>base</strong> R function to <strong>load</strong> a package for use (after it has been installed) is <code>library()</code>. It can load only one package at a time (another reason to use <code>p_load()</code>). You can provide the package name with or without quotes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages for use, with base R</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To check whether a package in installed or loaded, you can view the Packages pane in RStudio. If the package is installed, it is shown there with version number. If its box is checked, it is loaded for the current session.</p>
<p><strong>Install from Github</strong></p>
<p>Sometimes, you need to install a package that is not yet available from CRAN. Or perhaps the package is available on CRAN but you want the <em>development version</em> with new features not yet offered in the more stable published CRAN version. These are often hosted on the website <a href="https://github.com/">github.com</a> in a free, public-facing code “repository”. Read more about Github in the handbook page on <a href="https://epirhandbook.com/new_pages/collaboration.html">Version control and collaboration with Git and Github</a>.</p>
<p>To download R packages from Github, you can use the function <code>p_load_gh()</code> from <strong>pacman</strong>, which will install the package if necessary, and load it for use in your current R session. Alternatives to install include using the <strong>remotes</strong> or <strong>devtools</strong> packages. Read more about all the <strong>pacman</strong> functions in the <a href="https://cran.r-project.org/web/packages/pacman/pacman.pdf">package documentation</a>.</p>
<p>To install from Github, you have to provide more information. You must provide:</p>
<ol type="1">
<li>The Github ID of the repository owner</li>
<li>The name of the repository that contains the package<br>
</li>
<li>Optional: <em>The name of the “branch” (specific development version) you want to download</em></li>
</ol>
<p>In the examples below, the first word in the quotation marks is the Github ID of the repository owner, after the slash is the name of the repository (the name of the package).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install/load the epicontacts package from its Github repository</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to install from a “branch” (version) other than the main branch, add the branch name after an “@”, after the repository name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install the "timeline" branch of the epicontacts package from Github</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load_gh</span>(<span class="st">"reconhub/epicontacts@timeline"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If there is no difference between the Github version and the version on your computer, no action will be taken. You can “force” a re-install by instead using <code>p_load_current_gh()</code> with the argument <code>update = TRUE</code>. Read more about <strong>pacman</strong> in this <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">online vignette</a></p>
<p><strong>Install from ZIP or TAR</strong></p>
<p>You could install the package from a URL:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>packageurl <span class="ot">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(packageurl, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, download it to your computer in a zipped file:</p>
<p>Option 1: using <code>install_local()</code> from the <strong>remotes</strong> package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_local</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Option 2: using <code>install.packages()</code> from <strong>base</strong> R, providing the file path to the ZIP file and setting <code>type = "source</code> and <code>repos = NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Downloads/dplyr-master.zip"</span>, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="code-syntax" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="code-syntax">Code syntax</h3>
<p>For clarity in this handbook, functions are sometimes preceded by the name of their package using the <code>::</code> symbol in the following way: <code>package_name::function_name()</code></p>
<p>Once a package is loaded for a session, this explicit style is not necessary. One can just use <code>function_name()</code>. However writing the package name is useful when a function name is common and may exist in multiple packages (e.g.&nbsp;<code>plot()</code>). Writing the package name will also load the package if it is not already loaded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This command uses the package "rio" and its function "import()" to import a dataset</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"linelist.xlsx"</span>, <span class="at">which =</span> <span class="st">"Sheet1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="function-help" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="function-help">Function help</h3>
<p>To read more about a function, you can search for it in the Help tab of the lower-right RStudio. You can also run a command like <code>?thefunctionname</code> (for example, to get help for the function <code>p_load</code> you would write <code>?p_load</code>) and the Help page will appear in the Help pane. Finally, try searching online for resources.</p>
</section>
<section id="update-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="update-packages">Update packages</h3>
<p>You can update packages by re-installing them. You can also click the green “Update” button in your RStudio Packages pane to see which packages have new versions to install. Be aware that your old code may need to be updated if there is a major revision to how a function works!</p>
</section>
<section id="delete-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="delete-packages">Delete packages</h3>
<p>Use <code>p_delete()</code> from <strong>pacman</strong>, or <code>remove.packages()</code> from <strong>base</strong> R.</p>
</section>
<section id="dependencies" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="dependencies">Dependencies</h3>
<p>Packages often depend on other packages to work. These are called dependencies. If a dependency fails to install, then the package depending on it may also fail to install.</p>
<p>See the dependencies of a package with <code>p_depends()</code>, and see which packages depend on it with <code>p_depends_reverse()</code></p>
</section>
<section id="masked-functions" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="masked-functions">Masked functions</h3>
<p>It is not uncommon that two or more packages contain the same function name. For example, the package <strong>dplyr</strong> has a <code>filter()</code> function, but so does the package <strong>stats</strong>. The default <code>filter()</code> function depends on the order these packages are first loaded in the R session - the later one will be the default for the command <code>filter()</code>.</p>
<p>You can check the order in your Environment pane of R Studio - click the drop-down for “Global Environment” and see the order of the packages. Functions from packages <em>lower</em> on that drop-down list will mask functions of the same name in packages that appear higher in the drop-down list. When first loading a package, R will warn you in the console if masking is occurring, but this can be easy to miss.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/masking_functions.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/masking_functions.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Here are ways you can fix masking:</p>
<ol type="1">
<li>Specify the package name in the command. For example, use <code>dplyr::filter()</code><br>
</li>
<li>Re-arrange the order in which the packages are loaded (e.g.&nbsp;within <code>p_load()</code>), and <strong>start a new R session</strong></li>
</ol>
</section>
<section id="detach-unload" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="detach-unload">Detach / unload</h3>
<p>To detach (unload) a package, use this command, with the correct package name and only one colon. Note that this may not resolve masking.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>PACKAGE_NAME_HERE, <span class="at">unload=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="install-older-version" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="install-older-version">Install older version</h3>
<p>See this <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">guide</a> to install an older version of a particular package.</p>
</section>
<section id="suggested-packages" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="suggested-packages">Suggested packages</h3>
<p>See the page on <a href="../new_pages/packages_suggested.html">Suggested packages</a> for a listing of packages we recommend for everyday epidemiology.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="scripts" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="scripts"><span class="header-section-number">3.8</span> Scripts</h2>
<p>Scripts are a fundamental part of programming. They are documents that hold your commands (e.g.&nbsp;functions to create and modify datasets, print visualizations, etc). You can save a script and run it again later. There are many advantages to storing and running your commands from a script (vs.&nbsp;typing commands one-by-one into the R console “command line”):</p>
<ul>
<li>Portability - you can share your work with others by sending them your scripts.<br>
</li>
<li>Reproducibility - so that you and others know exactly what you did.<br>
</li>
<li>Version control - so you can track changes made by yourself or colleagues.<br>
</li>
<li>Commenting/annotation - to explain to your colleagues what you have done.</li>
</ul>
<section id="commenting" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="commenting">Commenting</h3>
<p>In a script you can also annotate (“comment”) around your R code. Commenting is helpful to explain to yourself and other readers what you are doing. You can add a comment by typing the hash symbol (#) and writing your comment after it. The commented text will appear in a different color than the R code.</p>
<p>Any code written after the # will not be run. Therefore, placing a # before code is also a useful way to temporarily block a line of code (“comment out”) if you do not want to delete it. You can comment out/in multiple lines at once by highlighting them and pressing Ctrl+Shift+c (Cmd+Shift+c in Mac).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A comment can be on a line by itself</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import data</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"linelist_raw.xlsx"</span>) <span class="sc">%&gt;%</span>   <span class="co"># a comment can also come after code</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(age &gt; 50)                          # It can also be used to deactivate / remove a line of code</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are a few general ideas to follow when writing your scripts in order to make them accessible. - Add comments on <em>what</em> you are doing <em>and on <strong>why</strong> you are doing it</em>.<br>
- Break your code into logical sections.<br>
- Accompany your code with a text step-by-step description of what you are doing (e.g.&nbsp;numbered steps).</p>
</section>
<section id="style" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="style">Style</h3>
<p>It is important to be conscious of your coding style - especially if working on a team. We advocate for the <strong>tidyverse</strong> <a href="https://style.tidyverse.org/">style guide</a>. There are also packages such as <strong>styler</strong> and <strong>lintr</strong> which help you conform to this style.</p>
<p>A few very basic points to make your code readable to others:<br>
* When naming objects, use only lowercase letters, numbers, and underscores <code>_</code>, e.g.&nbsp;<code>my_data</code><br>
* Use frequent spaces, including around operators, e.g.&nbsp;<code>n = 1</code> and <code>age_new &lt;- age_old + 3</code></p>
</section>
<section id="example-script" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="example-script">Example Script</h3>
<p>Below is an example of a short R script. Remember, the better you succinctly explain your code in comments, the more your colleagues will like you!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/example_script.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../images/example_script.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="r-markdown-and-quarto" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-markdown-and-quarto">R markdown and Quarto</h3>
<p>An <a href="https://rmarkdown.rstudio.com/">R Markdown</a> or <a href="https://quarto.org/docs/computations/r.html">Quarto</a> script are types of R script in which the script itself <em>becomes</em> an output document (PDF, Word, HTML, Powerpoint, etc.). These are incredibly useful and versatile tools often used to create dynamic and automated reports.</p>
<p>Even this website and handbook is produced with Quarto scripts!</p>
<p>It is worth noting that beginner R users can also use R Markdown - do not be intimidated! To learn more, see the handbook page on <a href="../new_pages/rmarkdown.html">Reports with R Markdown</a> documents.</p>
<!-- ======================================================= -->
</section>
<section id="r-notebooks" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="r-notebooks">R notebooks</h3>
<p>There is no difference between writing in a Rmarkdown vs an R notebook. However the execution of the document differs slightly. See this <a href="http://uc-r.github.io/r_notebook">site</a> for more details.</p>
<!-- ======================================================= -->
</section>
<section id="shiny" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="shiny">Shiny</h3>
<p>Shiny apps/websites are contained within one script, which must be named <code>app.R</code>. This file has three components:</p>
<ol type="1">
<li>A user interface (ui).<br>
</li>
<li>A server function.<br>
</li>
<li>A call to the <code>shinyApp</code> function.</li>
</ol>
<p>See the handbook page on <a href="../new_pages/shiny_basics.html">Dashboards with Shiny</a>, or this online tutorial: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny tutorial</a></p>
<p><em>In previous versions, the above file was split into two files (<code>ui.R</code> and <code>server.R</code>)</em></p>
</section>
<section id="code-folding" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="code-folding">Code folding</h3>
<p>You can collapse portions of code to make your script easier to read.</p>
<p>To do this, create a text header with #, write your header, and follow it with at least 4 of either dashes (-), hashes (#) or equals (=). When you have done this, a small arrow will appear in the “gutter” to the left (by the row number). You can click this arrow and the code below until the next header will collapse and a dual-arrow icon will appear in its place.</p>
<p>To expand the code, either click the arrow in the gutter again, or the dual-arrow icon. There are also keyboard shortcuts as explained in the <a href="#rstudio">RStudio section</a> of this page.</p>
<p>By creating headers with #, you will also activate the Table of Contents at the bottom of your script (see below) that you can use to navigate your script. You can create sub-headers by adding more # symbols, for example # for primary, ## for secondary, and ### for tertiary headers.</p>
<p>Below are two versions of an example script. On the left is the original with commented headers. On the right, four dashes have been written after each header, making them collapsible. Two of them have been collapsed, and you can see that the Table of Contents at the bottom now shows each section.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../images/code_folding1.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/code_folding2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="../images/code_folding2.png" class="img-fluid figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Other areas of code that are automatically eligible for folding include “braced” regions with brackets <code>{ }</code> such as function definitions or conditional blocks (if else statements). You can read more about code folding at the RStudio <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections">site</a>.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="working-directory" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="working-directory"><span class="header-section-number">3.9</span> Working directory</h2>
<p>The working directory is the root folder location used by R for your work - where R looks for and saves files by default. By default, it will save new files and outputs to this location, and will look for files to import (e.g.&nbsp;datasets) here as well.</p>
<p>The working directory appears in grey text at the top of the RStudio Console pane. You can also print the current working directory by running <code>getwd()</code> (leave the parentheses empty).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/working_directory_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="../images/working_directory_1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="recommended-approach" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="recommended-approach">Recommended approach</h3>
<p><strong>See the page on <a href="../new_pages/r_projects.html">R projects</a> for details on our recommended approach to managing your working directory.</strong><br>
</p>
<p>A common, efficient, and trouble-free way to manage your working directory and file paths is to combine these 3 elements in an <a href="../new_pages/r_projects.html">R project</a>-oriented workflow:</p>
<ol type="1">
<li>An R Project to store all your files (see page on <a href="../new_pages/r_projects.html">R projects</a>)<br>
</li>
<li>The <strong>here</strong> package to locate files (see page on <a href="../new_pages/importing.html">Import and export</a>)<br>
</li>
<li>The <strong>rio</strong> package to import/export files (see page on <a href="../new_pages/importing.html">Import and export</a>)</li>
</ol>
<!-- ======================================================= -->
</section>
<section id="set-by-command" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="set-by-command">Set by command</h3>
<p>Until recently, many people learning R were taught to begin their scripts with a <code>setwd()</code> command.</p>
<p>Please instead consider using an <a href="../new_pages/r_projects.html">R project</a>-oriented workflow and read the <a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/">reasons for not using <code>setwd()</code></a>.</p>
<p>In brief, your work becomes specific to your computer. This means that file paths used to import and export files need to be changed if used on a different computer, or by different collaborators.</p>
<p>As noted above, although we do not recommend this approach in most circumstances, you can use the command <code>setwd()</code> with the desired folder file path in quotations, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Documents/R Files/My analysis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> Setting a working directory with <code>setwd()</code> <em>can</em> be “brittle” if the file path is specific to one computer. Instead, use file paths relative to an R Project root directory, such as with the [<strong>here</strong> package].</span></p>
<!-- ======================================================= -->
</section>
<section id="set-manually" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="set-manually">Set manually</h3>
<p>To set the working directory manually (the point-and-click equivalent of <code>setwd()</code>), click the Session drop-down menu and go to “Set Working Directory” and then “Choose Directory”. This will set the working directory for that specific R session. Note: if using this approach, you will have to do this manually each time you open RStudio.</p>
<!-- ======================================================= -->
</section>
<section id="within-an-r-project" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="within-an-r-project">Within an R project</h3>
<p>If using an R project, the working directory will default to the R project root folder that contains the “.rproj” file. This will apply if you open RStudio by clicking open the R Project (the file with “.rproj” extension).</p>
<!-- ======================================================= -->
</section>
<section id="working-directory-in-an-r-markdown" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="working-directory-in-an-r-markdown">Working directory in an R markdown</h3>
<p>In an R markdown script, the default working directory is the folder the Rmarkdown file (<code>.Rmd</code>) is saved within. If using an R project and <strong>here</strong> package, this does not apply and the working directory will be <code>here()</code> as explained in the <a href="../new_pages/r_projects.html">R projects</a> page.</p>
<p>If you want to change the working directory of a stand-alone R markdown (not in an R project), if you use <code>setwd()</code> this will only apply to that specific code chunk. To make the change for all code chunks in an R markdown, edit the setup chunk to add the <code>root.dir =</code> parameter, such as below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">'desired/directorypath'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is much easier to just use the R markdown within an R project and use the <strong>here</strong> package.</p>
<!-- ======================================================= -->
</section>
<section id="providing-file-paths" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="providing-file-paths">Providing file paths</h3>
<p>Perhaps the most common source of frustration for an R beginner (at least on a Windows machine) is typing in a file path to import or export data. There is a thorough explanation of how to best input file paths in the <a href="../new_pages/importing.html">Import and export</a> page, but here are a few key points:</p>
<p><strong>Broken paths</strong></p>
<p>Below is an example of an “absolute” or “full address” file path. These will likely break if used by another computer. One exception is if you are using a shared/network drive.</p>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p><strong>Slash direction</strong></p>
<p><em>If typing in a file path, be aware the direction of the slashes.</em></p>
<p>Use <em>forward slashes</em> (<code>/</code>) to separate the components (“data/provincial.csv”). For Windows users, the default way that file paths are displayed is with <em>back slashes</em> (\) - so you will need to change the direction of each slash. If you use the <strong>here</strong> package as described in the <a href="../new_pages/r_projects.html">R projects</a> page the slash direction is not an issue.</p>
<p><strong>Relative file paths</strong></p>
<p>We generally recommend providing “relative” filepaths instead - that is, the path <em>relative to</em> the root of your R Project. You can do this using the <strong>here</strong> package as explained in the <a href="../new_pages/r_projects.html">R projects</a> page. A relativel filepath might look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import csv linelist from the data/linelist/clean/ sub-folders of an R project</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelists"</span>, <span class="st">"marin_country.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Even if using relative file paths within an R project, you can still use absolute paths to import and export data outside your R project.</p>
<!-- ======================================================= -->
</section>
</section>
<section id="objects" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="objects"><span class="header-section-number">3.10</span> Objects</h2>
<p>Everything in R is an object, and R is an “object-oriented” language. These sections will explain:</p>
<ul>
<li>How to create objects (<code>&lt;-</code>).</li>
<li>Types of objects (e.g.&nbsp;data frames, vectors..).<br>
</li>
<li>How to access subparts of objects (e.g.&nbsp;variables in a dataset).<br>
</li>
<li>Classes of objects (e.g.&nbsp;numeric, logical, integer, double, character, factor).</li>
</ul>
<!-- ======================================================= -->
<section id="everything-is-an-object" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="everything-is-an-object">Everything is an object</h3>
<p><em>This section is adapted from the <a href="https://r4epis.netlify.app/training/r_basics/objects/">R4Epis project</a>.</em><br>
</p>
<p>Everything you store in R - datasets, variables, a list of village names, a total population number, even outputs such as graphs - are <strong>objects</strong> which are <strong>assigned a name</strong> and <strong>can be referenced</strong> in later commands.</p>
<p>An object exists when you have assigned it a value (see the assignment section below). When it is assigned a value, the object appears in the Environment (see the upper right pane of RStudio). It can then be operated upon, manipulated, changed, and re-defined.</p>
<!-- ======================================================= -->
</section>
<section id="defining-objects--" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="defining-objects--">Defining objects (<code>&lt;-</code>)</h3>
<p><strong>Create objects <em>by assigning them a value</em> with the &lt;- operator.</strong><br>
You can think of the assignment operator <code>&lt;-</code> as the words “is defined as”. Assignment commands generally follow a standard order:</p>
<p><strong>object_name</strong> &lt;- <strong>value</strong> (or process/calculation that produce a value)</p>
<p>For example, you may want to record the current epidemiological reporting week as an object for reference in later code. In this example, the object <code>current_week</code> is created when it is assigned the value <code>"2018-W10"</code> (the quote marks make this a character value). The object <code>current_week</code> will then appear in the RStudio Environment pane (upper-right) and can be referenced in later commands.</p>
<p>See the R commands and their output in the boxes below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># this command creates the object current_week by assigning it a value</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># this command prints the current value of current_week object in the console</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W10"</code></pre>
</div>
</div>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Note the <code>[1]</code> in the R console output is simply indicating that you are viewing the first item of the output</span></p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> <strong>An object’s value can be over-written</strong> at any time by running an assignment command to re-define its value. Thus, the <strong>order of the commands run is very important</strong>.</span></p>
<p>The following command will re-define the value of <code>current_week</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>current_week <span class="ot">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># assigns a NEW value to the object current_week</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>current_week                 <span class="co"># prints the current value of current_week in the console</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-W51"</code></pre>
</div>
</div>
<p><strong>Equals signs <code>=</code></strong></p>
<p>You will also see equals signs in R code:</p>
<ul>
<li>A double equals sign <code>==</code> between two objects or values asks a logical <em>question</em>: “is this equal to that?”.<br>
</li>
<li>You will also see equals signs within functions used to specify values of function arguments (read about these in sections below), for example <code>max(age, na.rm = TRUE)</code>.<br>
</li>
<li>You <em>can</em> use a single equals sign <code>=</code> in place of <code>&lt;-</code> to create and define objects, but this is discouraged. You can read about why this is discouraged <a href="https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/">here</a>.</li>
</ul>
<p><strong>Datasets</strong></p>
<p>Datasets are also objects (typically “data frames”) and must be assigned names when they are imported. In the code below, the object <code>linelist</code> is created and assigned the value of a CSV file imported with the <strong>rio</strong> package and its <code>import()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linelist is created and assigned the value of the imported CSV file</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"my_linelist.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can read more about importing and exporting datasets with the section on <a href="../new_pages/importing.html">Import and export</a>.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> A quick note on naming of objects:</span></p>
<ul>
<li>Object names must not contain spaces, but you should use underscore (_) or a period (.) instead of a space.<br>
</li>
<li>Object names are case-sensitive (meaning that Dataset_A is different from dataset_A).</li>
<li>Object names must begin with a letter (they cannot begin with a number like 1, 2 or 3).</li>
</ul>
<p><strong>Outputs</strong></p>
<p>Outputs like tables and plots provide an example of how outputs can be saved as objects, or just be printed without being saved. A cross-tabulation of gender and outcome using the <strong>base</strong> R function <code>table()</code> can be printed directly to the R console (<em>without</em> being saved).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># printed to R console only</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p>But the same table can be saved as a named object. Then, optionally, it can be printed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>gen_out_table <span class="ot">&lt;-</span> <span class="fu">table</span>(linelist<span class="sc">$</span>gender, linelist<span class="sc">$</span>outcome)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>gen_out_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Death Recover
  f  1227     953
  m  1228     950</code></pre>
</div>
</div>
<p><strong>Columns</strong></p>
<p>Columns in a dataset are also objects and can be defined, over-written, and created as described below in the section on <a href="https://epirhandbook.com/new_pages/basics.html#columnsvariables">Columns</a>.</p>
<p>You can use the assignment operator from <strong>base</strong> R to create a new column. Below, the new column <code>bmi</code> (Body Mass Index) is created, and for each row the new value is result of a mathematical operation on the row’s value in the <code>wt_kg</code> and <code>ht_cm</code> columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new "bmi" column using base R syntax</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>linelist<span class="sc">$</span>bmi <span class="ot">&lt;-</span> linelist<span class="sc">$</span>wt_kg <span class="sc">/</span> (linelist<span class="sc">$</span>ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, in this handbook, we emphasize a different approach to defining columns, which uses the function <code>mutate()</code> from the <strong>dplyr</strong> package and <em>piping</em> with the pipe operator (<code>%&gt;%</code>). The syntax is easier to read and there are other advantages explained in the page on <a href="../new_pages/cleaning.html">Cleaning data and core functions</a>. You can read more about <em>piping</em> in the Piping section below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new "bmi" column using dplyr syntax</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> wt_kg <span class="sc">/</span> (ht_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="object-structure" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="object-structure">Object structure</h3>
<p><strong>Objects can be a single piece of data (e.g.&nbsp;<code>my_number &lt;- 24</code>), or they can consist of structured data.</strong></p>
<p>The graphic below is borrowed from <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">this online R tutorial</a>. It shows some common data structures and their names. Not included in this image is spatial data, which is discussed in the <a href="../new_pages/gis.html">GIS basics</a> page.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/R_data_structures.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="../images/R_data_structures.png" class="quarto-figure quarto-figure-center figure-img" style="width:75.0%;height:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>In epidemiology (and particularly field epidemiology), you will <em>most commonly</em> encounter data frames and vectors:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 48%">
<col style="width: 41%">
</colgroup>
<tbody>
<tr class="odd">
<td>Common structure</td>
<td>Explanation</td>
<td>Example</td>
</tr>
</tbody>
</table>
<div class="line-block">Vectors | A container for a sequence of singular objects, all of the same class (e.g.&nbsp;numeric, character). | <strong>“Variables” (columns) in data frames are vectors</strong> (e.g.&nbsp;the column <code>age_years</code>). |</div>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 48%">
<col style="width: 41%">
</colgroup>
<tbody>
<tr class="odd">
<td>Data Frames</td>
<td>Vectors (e.g.&nbsp;columns) that are bound together that all have the same number of rows.</td>
<td><code>linelist</code> is a data frame.</td>
</tr>
</tbody>
</table>
<p>Note that to create a vector that “stands alone” (is not part of a data frame) the function <code>c()</code> is used to combine the different elements. For example, if creating a vector of colors plot’s color scale: <code>vector_of_colors &lt;- c("blue", "red2", "orange", "grey")</code></p>
<!-- ======================================================= -->
</section>
<section id="object-classes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="object-classes">Object classes</h3>
<p>All the objects stored in R have a <em>class</em> which tells R how to handle the object. There are many possible classes, but common ones include:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Class</th>
<th>Explanation</th>
<th>Examples</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Character</td>
<td>These are text/words/sentences <strong>“within quotation marks”</strong>. Math cannot be done on these objects.</td>
<td>“Character objects are in quotation marks”</td>
<td></td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Numbers that are <strong>whole only</strong> (no decimals)</td>
<td>-5, 14, or 2000</td>
<td></td>
</tr>
<tr class="odd">
<td>Numeric</td>
<td>These are numbers and <strong>can include decimals</strong>. If within quotation marks they will be considered character class.</td>
<td>23.1 or 14</td>
<td></td>
</tr>
<tr class="even">
<td>Factor</td>
<td>These are vectors that have a <strong>specified order</strong> or hierarchy of values</td>
<td>An variable of economic status with ordered values</td>
<td></td>
</tr>
<tr class="odd">
<td>Date</td>
<td><strong>Once R is told that certain data are Dates</strong>, these data can be manipulated and displayed in special ways. See the page on <a href="../new_pages/dates.html">Working with dates</a> for more information.</td>
<td>2018-04-12 or 15/3/1954 or Wed 4 Jan 1980</td>
<td></td>
</tr>
<tr class="even">
<td>Logical</td>
<td>Values must be one of the two special values TRUE or FALSE (note these are <strong>not</strong> “TRUE” and “FALSE” in quotation marks)</td>
<td>TRUE or FALSE</td>
<td></td>
</tr>
<tr class="odd">
<td>data.frame</td>
<td>A data frame is how R stores a <strong>typical dataset</strong>. It consists of vectors (columns) of data bound together, that all have the same number of observations (rows).</td>
<td>The example AJS dataset named <code>linelist_raw</code> contains 68 variables with 300 observations (rows) each.</td>
<td></td>
</tr>
<tr class="even">
<td>tibble</td>
<td>tibbles are a variation on data frame, the main operational difference being that they print more nicely to the console (display first 10 rows and only columns that fit on the screen)</td>
<td>Any data frame, list, or matrix can be converted to a tibble with <code>as_tibble()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>list</td>
<td>A list is like vector, but holds other objects that can be other different classes</td>
<td>A list could hold a single number, and a data frame, and a vector, and even another list within it!</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>You can test the class of an object by providing its name to the function <code>class()</code></strong>. Note: you can reference a specific column within a dataset using the <code>$</code> notation to separate the name of the dataset and the name of the column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist)         <span class="co"># class should be a data frame or tibble</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>age)     <span class="co"># class should be numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(linelist<span class="sc">$</span>gender)  <span class="co"># class should be character</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Sometimes, a column will be converted to a different class automatically by R. Watch out for this! For example, if you have a vector or column of numbers, but a character value is inserted… the entire column will change to class character.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>num_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span> , <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>) <span class="co"># define vector as all numbers</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># vector is numeric class</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>num_vector[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"three"</span>   <span class="co"># convert the third element to a character</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num_vector)          <span class="co"># vector is now character class</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>One common example of this is when manipulating a data frame in order to print a table - if you make a total row and try to paste/glue together percents in the same cell as numbers (e.g.&nbsp;<code>23 (40%)</code>), the entire numeric column above will convert to character and can no longer be used for mathematical calculations.<strong>Sometimes, you will need to convert objects or columns to another class.</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>as.character()</code></td>
<td>Converts to character class</td>
</tr>
<tr class="even">
<td><code>as.numeric()</code></td>
<td>Converts to numeric class</td>
</tr>
<tr class="odd">
<td><code>as.integer()</code></td>
<td>Converts to integer class</td>
</tr>
<tr class="even">
<td><code>as.Date()</code></td>
<td>Converts to Date class - Note: see section on <a href="../new_pages/dates.html">dates</a> for details</td>
</tr>
<tr class="odd">
<td><code>factor()</code></td>
<td>Converts to factor - Note: re-defining order of value levels requires extra arguments</td>
</tr>
</tbody>
</table>
<p>Likewise, there are <strong>base</strong> R functions to check whether an object IS of a specific class, such as <code>is.numeric()</code>, <code>is.character()</code>, <code>is.double()</code>, <code>is.factor()</code>, <code>is.integer()</code></p>
<p>Here is <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures.html">more online material on classes and data structures in R</a>.</p>
<!-- ======================================================= -->
</section>
<section id="columnsvariables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="columnsvariables">Columns/Variables (<code>$</code>)</h3>
<p><strong>A column in a data frame is technically a “vector” (see table above)</strong> - a series of values that must all be the same class (either character, numeric, logical, etc).</p>
<p>A vector can exist independent of a data frame, for example a vector of column names that you want to include as explanatory variables in a model. To create a “stand alone” vector, use the <code>c()</code> function as below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the stand-alone vector of character values</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print the values in this named vector</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>explanatory_vars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender" "fever"  "chills" "cough"  "aches"  "vomit" </code></pre>
</div>
</div>
<p><strong>Columns in a data frame are also vectors and can be called, referenced, extracted, or created using the <code>$</code> symbol.</strong> The <code>$</code> symbol connects the name of the column to the name of its data frame. In this handbook, we try to use the word “column” instead of “variable”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve the length of the vector age_years</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(linelist<span class="sc">$</span>age) <span class="co"># (age is a column in the linelist data frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By typing the name of the data frame followed by <code>$</code> you will also see a drop-down menu of all columns in the data frame. You can scroll through them using your arrow key, select one with your Enter key, and avoid spelling mistakes!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/Calling_Names.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="../images/Calling_Names.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
<p><span style="color: darkgreen;"><strong><em>ADVANCED TIP:</em></strong> Some more complex objects (e.g.&nbsp;a list, or an <code>epicontacts</code> object) may have multiple levels which can be accessed through multiple dollar signs. For example <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</section>
<section id="accessindex-with-brackets" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessindex-with-brackets">Access/index with brackets (<code>[ ]</code>)</h3>
<p>You may need to view parts of objects, also called “indexing”, which is often done using the square brackets <code>[ ]</code>. Using <code>$</code> on a data frame to access a column is also a type of indexing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>)  <span class="co"># define the vector</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>my_vector[<span class="dv">5</span>]                                  <span class="co"># print the 5th element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "e"</code></pre>
</div>
</div>
<p>Square brackets also work to return specific parts of an returned output, such as the output of a <code>summary()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All of the summary</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00    6.00   13.00   16.07   23.00   84.00      86 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Just the second element of the summary, with name (using only single brackets)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1st Qu. 
      6 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Just the second element, without name (using double brackets)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract an element by name, without showing the name</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linelist<span class="sc">$</span>age)[[<span class="st">"Median"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<p>Brackets also work on data frames to view specific rows and columns. You can do this using the syntax <code>data frame[rows, columns]</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View a specific row (2) from dataset, with all columns (don't forget the comma!)</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>,]</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View all rows, but just one column</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>linelist[, <span class="st">"date_onset"</span>]</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View values from row 2 and columns 5 through 10</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View values from row 2 and columns 5 through 10 and 18</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">18</span>)] </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows 2 through 20, and specific columns</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows and columns based on criteria</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Note the data frame must still be named in the criteria!</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>linelist[linelist<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">25</span> , <span class="fu">c</span>(<span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span>)]</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Use View() to see the outputs in the RStudio Viewer pane (easier to read) </span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co"># *** Note the capital "V" in View() function</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="st">"date_onset"</span>])</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as a new object</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>new_table <span class="ot">&lt;-</span> linelist[<span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"date_onset"</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that you can also achieve the above row/column indexing on data frames and tibbles using <strong>dplyr</strong> syntax (functions <code>filter()</code> for rows, and <code>select()</code> for columns). Read more about these core functions in the <a href="../new_pages/cleaning.html">Cleaning data and core functions</a> page.</p>
<p>To filter based on “row number”, you can use the <strong>dplyr</strong> function <code>row_number()</code> with open parentheses as part of a logical filtering statement. Often you will use the <code>%in%</code> operator and a range of numbers as part of that logical statement, as shown below. To see the <em>first</em> N rows, you can also use the special <strong>dplyr</strong> function <code>head()</code>. Note, there is a function <code>head()</code> from <strong>base</strong> R, but this is overwritten by the <strong>dplyr</strong> function when you load <strong>tidyverse</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View first 100 rows</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">100</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show row 5 only</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows 2 through 20, and three specific columns (note no quotes necessary on column names)</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(date_onset, outcome, age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When indexing an object of class <strong>list</strong>, single brackets always return with class list, even if only a single object is returned. Double brackets, however, can be used to access a single element and return a different class than list. Brackets can also be written after one another, as demonstrated below.</p>
<p>This <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">visual explanation of lists indexing, with pepper shakers</a> is humorous and helpful.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define demo list</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First element in the list is a character vector</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hospitals =</span> <span class="fu">c</span>(<span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># second element in the list is a data frame of addresses</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">addresses   =</span> <span class="fu">data.frame</span>(</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> <span class="fu">c</span>(<span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span>),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">city   =</span> <span class="fu">c</span>(<span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is how the list looks when printed to the console. See how there are two named elements:</p>
<ul>
<li><code>hospitals</code>, a character vector<br>
</li>
<li><code>addresses</code>, a data frame of addresses</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"

$addresses
           street     city
1 145 Medical Way  Andover
2  1048 Brown Ave Hamilton
3   999 El Camino  El Paso</code></pre>
</div>
</div>
<p>Now we extract, using various methods:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">1</span>] <span class="co"># this returns the element in class "list" - the element name is still displayed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hospitals
[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]] <span class="co"># this returns only the (unnamed) character vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"hospitals"</span>]] <span class="co"># you can also index by name of the list element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Central"    "Empire"     "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]][<span class="dv">3</span>] <span class="co"># this returns the third element of the "hospitals" character vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Santa Anna"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]][<span class="dv">1</span>] <span class="co"># This returns the first column ("street") of the address data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           street
1 145 Medical Way
2  1048 Brown Ave
3   999 El Camino</code></pre>
</div>
</div>
<!-- ======================================================= -->
</section>
<section id="remove-objects" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="remove-objects">Remove objects</h3>
<p>You can remove individual objects from your R environment by putting the name in the <code>rm()</code> function (no quote marks):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(object_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can remove all objects (clear your workspace) by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="piping" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="piping"><span class="header-section-number">3.11</span> Piping (<code>%&gt;%</code>)</h2>
<p><strong>Two general approaches to working with objects are:</strong></p>
<ol type="1">
<li><strong>Pipes/tidyverse</strong> - pipes send an object from function to function - emphasis is on the <em>action</em>, not the object.<br>
</li>
<li><strong>Define intermediate objects</strong> - an object is re-defined again and again - emphasis is on the object.</li>
</ol>
<!-- ======================================================= -->
<section id="pipes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="pipes"><strong>Pipes</strong></h3>
<p><strong>Simply explained, the pipe operator passes an intermediate output from one function to the next.</strong><br>
You can think of it as saying “and then”. Many functions can be linked together with <code>%&gt;%</code>.</p>
<ul>
<li><strong>Piping emphasizes a sequence of actions, not the object the actions are being performed on</strong>.<br>
</li>
<li>Pipes are best when a sequence of actions must be performed on one object.<br>
</li>
<li>Pipes can make code more clean and easier to read, more intuitive.</li>
</ul>
<p>Pipe operators were first introduced through the <a href="https://magrittr.tidyverse.org/">magrittr package</a>, which is part of tidyverse, and were specified as <code>%&gt;%</code>. In R 4.1.0, they introduced a <strong>base</strong> R pipe which is specified through <code>|&gt;</code>. The behaviour of the two pipes is the same, and they can be used somewhat interchangeably. However, there are a few key differences.</p>
<ul>
<li>The <code>%&gt;%</code> pipe allows you to pass multiple arguments.</li>
<li>The <code>%&gt;%</code> pipe lets you drop parenthesis when calling a function with no other arguments (i.e.&nbsp;drop vs drop()).</li>
<li>The <code>%&gt;%</code> pipe allows you to start a pipe with <code>.</code> to create a function in your linking of code.</li>
</ul>
<p>For these reasons, we recommend the <strong>magrittr</strong> pipe, <code>%&gt;%</code>, over the <strong>base</strong> R pipe, <code>|&gt;</code>.</p>
<p>To read more about the differences between base R and tidyverse (magrittr) pipes, see this <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/">blog post</a>. For more information on the tidyverse approach, please see this <a href="https://style.tidyverse.org/pipes.html">style guide</a>.</p>
<p>Here is a fake example for comparison, using fictional functions to “bake a cake”. First, the pipe method:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A fake example of how to bake a cake using piping syntax</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> flour <span class="sc">%&gt;%</span>       <span class="co"># to define cake, start with flour, and then...</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(eggs) <span class="sc">%&gt;%</span>   <span class="co"># add eggs</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(oil) <span class="sc">%&gt;%</span>    <span class="co"># add oil</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(water) <span class="sc">%&gt;%</span>  <span class="co"># add water</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mix_together</span>(         <span class="co"># mix together</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">utensil =</span> spoon,</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span>    </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">degrees =</span> <span class="dv">350</span>,   <span class="co"># bake</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">system =</span> <span class="st">"fahrenheit"</span>,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">minutes =</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">let_cool</span>()            <span class="co"># let it cool down</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that just like other R commands, pipes can be used to just display the result, or to save/re-save an object, depending on whether the assignment operator <code>&lt;-</code> is involved. See both below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create or overwrite object, defining as aggregate counts by age category (not printed)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>linelist_summary <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the table of counts in the console, but don't save it</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  age_cat    n
1     0-4 1095
2     5-9 1095
3   10-14  941
4   15-19  743
5   20-29 1073
6   30-49  754
7   50-69   95
8     70+    6
9    &lt;NA&gt;   86</code></pre>
</div>
</div>
<p><strong><code>%&lt;&gt;%</code></strong><br>
This is an “assignment pipe” from the <strong>magrittr</strong> package, which <em>pipes an object forward and also re-defines the object</em>. It must be the first pipe operator in the chain. It is shorthand. The below two commands are equivalent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
<section id="define-intermediate-objects" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="define-intermediate-objects">Define intermediate objects</h3>
<p>This approach to changing objects/data frames may be better if:</p>
<ul>
<li>You need to manipulate multiple objects<br>
</li>
<li>There are intermediate steps that are meaningful and deserve separate object names</li>
</ul>
<p><strong>Risks:</strong></p>
<ul>
<li>Creating new objects for each step means creating lots of objects. If you use the wrong one you might not realize it!<br>
</li>
<li>Naming all the objects can be confusing.<br>
</li>
<li>Errors may not be easily detectable.</li>
</ul>
<p>Either name each intermediate object, or overwrite the original, or combine all the functions together. All come with their own risks.</p>
<p>Below is the same fake “cake” example as above, but using this style:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a fake example of how to bake a cake using this method (defining intermediate objects)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>batter_1 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flour, eggs)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>batter_2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_1, oil)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>batter_3 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(batter_2, water)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>batter_4 <span class="ot">&lt;-</span> <span class="fu">mix_together</span>(<span class="at">object =</span> batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">bake</span>(batter_4, <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>)</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(cake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Combine all functions together - this is difficult to read:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># an example of combining/nesting mutliple functions together - difficult to read</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>cake <span class="ot">&lt;-</span> <span class="fu">let_cool</span>(<span class="fu">bake</span>(<span class="fu">mix_together</span>(batter_3, <span class="at">utensil =</span> spoon, <span class="at">minutes =</span> <span class="dv">2</span>), <span class="at">degrees =</span> <span class="dv">350</span>, <span class="at">system =</span> <span class="st">"fahrenheit"</span>, <span class="at">minutes =</span> <span class="dv">35</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ======================================================= -->
</section>
</section>
<section id="operators" class="level2" data-number="3.12">
<h2 data-number="3.12" class="anchored" data-anchor-id="operators"><span class="header-section-number">3.12</span> Key operators and functions</h2>
<p>This section details operators in R, such as:</p>
<ul>
<li>Definitional operators.<br>
</li>
<li>Relational operators (less than, equal too..).<br>
</li>
<li>Logical operators (and, or…).<br>
</li>
<li>Handling missing values.<br>
</li>
<li>Mathematical operators and functions (+/-, &gt;, sum(), median(), …).<br>
</li>
<li>The <code>%in%</code> operator.</li>
</ul>
<!-- ======================================================= -->
<section id="assignment-operators" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="assignment-operators">Assignment operators</h3>
<p><strong><code>&lt;-</code></strong></p>
<p>The basic assignment operator in R is <code>&lt;-</code>. Such that <code>object_name &lt;- value</code>.<br>
This assignment operator can also be written as <code>=</code>. We advise use of <code>&lt;-</code> for general R use. We also advise surrounding such operators with spaces, for readability.</p>
<p><strong><code>&lt;&lt;-</code></strong></p>
<p>If <a href="../new_pages/writing_functions.html">Writing functions</a>, or using R in an interactive way with sourced scripts, then you may need to use this assignment operator <code>&lt;&lt;-</code> (from <strong>base</strong> R). This operator is used to define an object in a higher ‘parent’ R Environment. See this <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">online reference</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>This is an “assignment pipe” from the <strong>magrittr</strong> package, which pipes an object forward and <em>also re-defines the object</em>. It must be the first pipe operator in the chain. It is shorthand, as shown below in two equivalent examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above is equivalent to the below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">age_months =</span> age_years <span class="sc">*</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>This is used to add data to phylogenetic trees with the <strong>ggtree</strong> package. See the page on <a href="../new_pages/phylogenetic_trees.html">Phylogenetic trees</a> or this online <a href="https://yulab-smu.top/treedata-book/">resource book</a>.</p>
<!-- ======================================================= -->
</section>
<section id="relational-and-logical-operators" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="relational-and-logical-operators">Relational and logical operators</h3>
<p>Relational operators compare values and are often used when defining new variables and subsets of datasets. Here are the common relational operators in R:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Meaning</th>
<th>Operator</th>
<th>Example</th>
<th>Example Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Equal to</td>
<td><code>==</code></td>
<td><code>"A" == "a"</code></td>
<td><code>FALSE</code> (because R is case sensitive) <em>Note that == (double equals) is different from = (single equals), which acts like the assignment operator <code>&lt;-</code></em></td>
</tr>
<tr class="even">
<td>Not equal to</td>
<td><code>!=</code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>Greater than</td>
<td><code>&gt;</code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than</td>
<td><code>&lt;</code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Greater than or equal to</td>
<td><code>&gt;=</code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than or equal to</td>
<td><code>&lt;=</code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Value is missing</td>
<td><code>is.na()</code></td>
<td><code>is.na(7)</code></td>
<td><code>FALSE</code> (see page on <a href="../new_pages/missing_data.html">Missing data</a>)</td>
</tr>
<tr class="even">
<td>Value is not missing</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<p>Logical operators, such as AND and OR, are often used to connect relational operators and create more complicated criteria. Complex statements might require parentheses <code>( )</code> for grouping and order of application.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Meaning</th>
<th>Operator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td>OR</td>
<td><code>|</code> (vertical bar)</td>
</tr>
<tr class="odd">
<td>Parentheses</td>
<td><code>( )</code> Used to group criteria together and clarify order of operations</td>
</tr>
</tbody>
</table>
<p>For example, below, we have a linelist with two variables we want to use to create our case definition, <code>hep_e_rdt</code>, a test result and <code>other_cases_in_hh</code>, which will tell us if there are other cases in the household. The command below uses the function <code>case_when()</code> to create the new variable <code>case_def</code> such that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>linelist_cleaned <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">case_def =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(rdt_result) <span class="sc">&amp;</span> <span class="fu">is.na</span>(other_case_in_home)            <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">==</span> <span class="st">"Positive"</span>                                 <span class="sc">~</span> <span class="st">"Confirmed"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    rdt_result <span class="sc">!=</span> <span class="st">"Positive"</span> <span class="sc">&amp;</span> other_cases_in_home <span class="sc">==</span> <span class="st">"Yes"</span>  <span class="sc">~</span> <span class="st">"Probable"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                                     <span class="sc">~</span> <span class="st">"Suspected"</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 68%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Criteria in example above</th>
<th>Resulting value in new variable “case_def”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>If the value for variables <code>rdt_result</code> and <code>other_cases_in_home</code> are missing</td>
<td><code>NA</code> (missing)</td>
</tr>
<tr class="even">
<td>If the value in <code>rdt_result</code> is “Positive”</td>
<td>“Confirmed”</td>
</tr>
<tr class="odd">
<td>If the value in <code>rdt_result</code> is NOT “Positive” AND the value in <code>other_cases_in_home</code> is “Yes”</td>
<td>“Probable”</td>
</tr>
<tr class="even">
<td>If one of the above criteria are not met</td>
<td>“Suspected”</td>
</tr>
</tbody>
</table>
<p><em>Note that R is case-sensitive, so “Positive” is different than “positive”.</em></p>
<!-- ======================================================= -->
</section>
<section id="missing-values" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="missing-values">Missing values</h3>
<p>In R, missing values are represented by the special value <code>NA</code> (a “reserved” value) (capital letters N and A - not in quotation marks). If you import data that records missing data in another way (e.g.&nbsp;99, “Missing”), you may want to re-code those values to <code>NA</code>. How to do this is addressed in the <a href="../new_pages/importing.html">Import and export</a> page.</p>
<p><strong>To test whether a value is <code>NA</code>, use the special function <code>is.na()</code></strong>, which returns <code>TRUE</code> or <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>rdt_result <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span>)   <span class="co"># two positive cases, one suspected, and one unknown</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(rdt_result)  <span class="co"># Tests whether the value of rdt_result is NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>Read more about missing, infinite, <code>NULL</code>, and impossible values in the page on <a href="../new_pages/missing_data.html">Missing data</a>. Learn how to convert missing values when importing data in the page on <a href="../new_pages/importing.html">Import and export</a>.</p>
<!-- ======================================================= -->
</section>
<section id="mathematics-and-statistics" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="mathematics-and-statistics">Mathematics and statistics</h3>
<p>All the operators and functions in this page are automatically available using <strong>base</strong> R.</p>
<section id="mathematical-operators" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mathematical-operators">Mathematical operators</h4>
<p>These are often used to perform addition, division, to create new columns, etc. Below are common mathematical operators in R. Whether you put spaces around the operators is not important.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Purpose</th>
<th>Example in R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>addition</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>subtraction</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>multiplication</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>division</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>order of operations</td>
<td>( )</td>
</tr>
</tbody>
</table>
</section>
<section id="mathematical-functions" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mathematical-functions">Mathematical functions</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Purpose</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>rounding</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>rounding</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>ceiling (round up)</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>floor (round down)</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>absolute value</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>square root</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>natural logarithm</td>
<td>log(x)</td>
</tr>
<tr class="odd">
<td>log base 10</td>
<td>log10(x)</td>
</tr>
<tr class="even">
<td>log base 2</td>
<td>log2(x)</td>
</tr>
</tbody>
</table>
<p>Note: for <code>round()</code> the <code>digits =</code> specifies the number of decimal placed. Use <code>signif()</code> to round to a number of significant figures.</p>
</section>
<section id="scientific-notation" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="scientific-notation">Scientific notation</h4>
<p>The likelihood of scientific notation being used depends on the value of the <code>scipen</code> option.</p>
<p>From the documentation of <code>?options</code>: scipen is a penalty to be applied when deciding to print numeric values in fixed or exponential notation. Positive values bias towards fixed and negative towards scientific notation: fixed notation will be preferred unless it is more than ‘scipen’ digits wider.</p>
<p>If it is set to a low number (e.g.&nbsp;0) it will be “turned on” always. To “turn off” scientific notation in your R session, set it to a very high number, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># turn off scientific notation</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rounding" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rounding">Rounding</h4>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> <code>round()</code> uses “banker’s rounding” which rounds up from a .5 only if the upper number is even. Use <code>round_half_up()</code> from <strong>janitor</strong> to consistently round halves up to the nearest whole number. See <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">this explanation</a></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use the appropriate rounding function for your work</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">round_half_up</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">3.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
<p>For rounding from proportion to percentages, you can use the function <code>percent()</code> from the <strong>scales</strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.35</span>), <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "25.0%" "35.0%"</code></pre>
</div>
</div>
</section>
<section id="statistical-functions" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="statistical-functions">Statistical functions</h4>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> The functions below will by default include missing values in calculations. Missing values will result in an output of <code>NA</code>, unless the argument <code>na.rm = TRUE</code> is specified. This can be written shorthand as <code>na.rm = T</code>.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Objective</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mean (average)</td>
<td>mean(x, na.rm = T)</td>
</tr>
<tr class="even">
<td>median</td>
<td>median(x, na.rm= T)</td>
</tr>
<tr class="odd">
<td>standard deviation</td>
<td>sd(x, na.rm = T)</td>
</tr>
<tr class="even">
<td>quantiles*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>sum</td>
<td>sum(x, na.rm = T)</td>
</tr>
<tr class="even">
<td>minimum value</td>
<td>min(x, na.rm = T)</td>
</tr>
<tr class="odd">
<td>maximum value</td>
<td>max(x, na.rm = T)</td>
</tr>
<tr class="even">
<td>range of numeric values</td>
<td>range(x, na.rm = T)</td>
</tr>
<tr class="odd">
<td>summary**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul>
<li><code>*quantile()</code>: <code>x</code> is the numeric vector to examine, and <code>probs =</code> is a numeric vector with probabilities within 0 and 1.0, e.g <code>c(0.5, 0.8, 0.85)</code>.</li>
<li><code>**summary()</code>: gives a summary on a numeric vector including mean, median, and common percentiles.</li>
</ul>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> If providing a vector of numbers to one of the above functions, be sure to wrap the numbers within <code>c()</code> .</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If supplying raw numbers to a function, wrap them in c()</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)    <span class="co"># !!! INCORRECT !!!  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>)) <span class="co"># CORRECT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.666667</code></pre>
</div>
</div>
</section>
<section id="other-useful-functions" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="other-useful-functions">Other useful functions</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 20%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Objective</th>
<th>Function</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>create a sequence</td>
<td>seq(from, to, by)</td>
<td><code>seq(1, 10, 2)</code></td>
</tr>
<tr class="even">
<td>repeat x, n times</td>
<td>rep(x, ntimes)</td>
<td><code>rep(1:3, 2)</code> or <code>rep(c("a", "b", "c"), 3)</code></td>
</tr>
<tr class="odd">
<td>subdivide a numeric vector</td>
<td>cut(x, n)</td>
<td><code>cut(linelist$age, 5)</code></td>
</tr>
<tr class="even">
<td>take a random sample</td>
<td>sample(x, size)</td>
<td><code>sample(linelist$id, size = 5, replace = TRUE)</code></td>
</tr>
</tbody>
</table>
<!-- ======================================================= -->
</section>
</section>
<section id="in" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="in"><code>%in%</code></h3>
<p>A very useful operator for matching values, and for quickly assessing if a value is within a vector or data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>To ask if a value is <strong>not</strong> <code>%in%</code> a vector, put an exclamation mark (!) <strong>in front</strong> of the logic statement:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to negate, put an exclamation in front</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"a"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">"h"</span> <span class="sc">%in%</span> my_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><code>%in%</code> is very useful when using the <strong>dplyr</strong> function <code>case_when()</code>. You can define a vector previously, and then reference it later. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">child_hospitaled =</span> <span class="fu">case_when</span>(</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    hospitalized <span class="sc">%in%</span> affirmative <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Hospitalized Child"</span>,</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                      <span class="sc">~</span> <span class="st">"Not"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note: If you want to detect a partial string, perhaps using <code>str_detect()</code> from <strong>stringr</strong>, it will not accept a character vector like <code>c("1", "Yes", "yes", "y")</code>. Instead, it must be given a <em>regular expression</em> - one condensed string with OR bars, such as “1|Yes|yes|y”. For example, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. See the page on <a href="../new_pages/characters_strings.html">Characters and strings</a> for more information.</p>
<p>You can convert a character vector to a named regular expression with this command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>affirmative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span>)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>affirmative</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># condense to </span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">paste0</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)  <span class="co"># option with base R</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>affirmative_str_search <span class="ot">&lt;-</span> <span class="fu">str_c</span>(affirmative, <span class="at">collapse =</span> <span class="st">"|"</span>)   <span class="co"># option with stringr package</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>affirmative_str_search</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
</div>
</div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</section>
</section>
<section id="errors-warnings" class="level2" data-number="3.13">
<h2 data-number="3.13" class="anchored" data-anchor-id="errors-warnings"><span class="header-section-number">3.13</span> Errors &amp; warnings</h2>
<p>This section explains:</p>
<ul>
<li>The difference between errors and warnings.<br>
</li>
<li>General syntax tips for writing R code.<br>
</li>
<li>Code assists.</li>
</ul>
<p>Common errors and warnings and troubleshooting tips can be found in the page on <a href="../new_pages/errors.html">Errors and help</a>.</p>
<!-- ======================================================= -->
<section id="error-versus-warning" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="error-versus-warning">Error versus Warning</h3>
<p>When a command is run, the R Console may show you warning or error messages in red text.</p>
<ul>
<li><p>A <strong>warning</strong> means that R has completed your command, but had to take additional steps or produced unusual output that you should be aware of.</p></li>
<li><p>An <strong>error</strong> means that R was not able to complete your command.</p></li>
</ul>
<p>Look for clues:</p>
<ul>
<li><p>The error/warning message will often include a line number for the problem.</p></li>
<li><p>If an object “is unknown” or “not found”, perhaps you spelled it incorrectly, forgot to call a package with library(), or forgot to re-run your script after making changes.</p></li>
</ul>
<p>If all else fails, copy the error message into Google along with some key terms - chances are that someone else has worked through this already!</p>
<!-- ======================================================= -->
</section>
<section id="general-syntax-tips" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="general-syntax-tips">General syntax tips</h3>
<p>A few things to remember when writing commands in R, to avoid errors and warnings:</p>
<ul>
<li>Always close parentheses - tip: count the number of opening “(” and closing parentheses “)” for each code chunk.</li>
<li>Avoid spaces in column and object names. Use underscore ( _ ) or periods ( . ) instead.</li>
<li>Keep track of and remember to separate a function’s arguments with commas.</li>
<li>R is case-sensitive, meaning <code>Variable_A</code> is <em>different</em> from <code>variable_A</code>.</li>
</ul>
<!-- ======================================================= -->
</section>
<section id="code-assists" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="code-assists">Code assists</h3>
<p>Any script (RMarkdown or otherwise) will give clues when you have made a mistake. For example, if you forgot to write a comma where it is needed, or to close a parentheses, RStudio will raise a flag on that line, on the left hand side of the script, to warn you.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/data_used.html" class="pagination-link" aria-label="Download handbook and data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Download handbook and data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/transition_to_R.html" class="pagination-link" aria-label="Transition to R">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transition to R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"loop":false,"openEffect":"zoom","closeEffect":"zoom","descPosition":"bottom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>